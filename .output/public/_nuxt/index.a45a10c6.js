import{_ as f,n as I,c as N,b as l,w as r,F as y,r as E,cA as p,o as F,a as s,X as m,bH as c,bO as u,d,A as b,t as w,p as T,e as k,bQ as h}from"./entry.6255c2b3.js";import{L as i,M as o,ak as g,al as v,am as O,an as S}from"./ssrBoot.bef6cd87.js";import{_ as A}from"./logo1.5d8dcdec.js";import{V as P}from"./VApp.be065f83.js";import{V}from"./VSnackbar.326588c0.js";import{V as C}from"./VSelect.29a1142c.js";import"./layout.b54188b0.js";import"./VOverlay.faef95dc.js";import"./lazy.4289cdac.js";import"./scopeId.9b3d730d.js";import"./VList.b1aecc34.js";const L=I({setup(){return{snackbar:E(!1)}},data(){return{snackbarText:"",UserId:"",Passwordtxt:"",userinfomartin:{},FirstName:"",Facility:[],bindingfaciity:[],Biu:{SITE_NAME:""},dataresultAutoLogin:""}},methods:{async onchangegetusername(){(this.UserId.length>5||this.UserId.length===6)&&await i.get(o+g+this.UserId).then(t=>{t.data.length>0&&(t.data=="USER NOT FOUND"?this.FirstName="USER NOT FOUND":(this.FirstName=t.data[0].FirstName,this.GetFacility.call(),this.PostToken.call(),Passwordtxt.focus()))}).catch(t=>{console.error("Error fetching data:",t)})},async handleEnterKey(){await i.get(o+g+this.UserId).then(t=>{t.data.length>0&&(t.data=="USER NOT FOUND"?this.FirstName="USER NOT FOUND":(this.FirstName=t.data[0].FirstName,this.GetFacility.call(),this.PostToken.call(),Passwordtxt.focus()))}).catch(t=>{console.error("Error fetching data:",t)})},async GetFacility(){await i.get(o+v).then(t=>{this.Facility=t.data;for(var e in this.facility)this.bindingfaciity=e.SITE_NAME})},async PostToken(){if(this.FirstName=="USER NOT FOUND")this.FirstName="USER TIDAK DI TEMUKAN";else{const t={Userid:this.UserId};await i.post(o+O,t,{headers:{"Content-Type":"application/json"}}).then(e=>{})}},async Lognbtnclick(){if(this.Biu=="")alert("MOHON PILIH FACILITY"),this.FirstName="Select Facility";else{const t={Userid:this.UserId,Password:this.Passwordtxt};await i.post(o+S,t,{headers:{"Content-Type":"application/json"}}).then(e=>{e.data=="LOGIN SUCCESS"?(this.savedatalogin.call(),p("../Home")):alert("USER/PASSWORD SALAH")})}},async savedatalogin(){localStorage.setItem("Userid",this.UserId),localStorage.setItem("Password",this.Passwordtxt),localStorage.setItem("Username",this.FirstName),localStorage.setItem("Site",this.Biu.SITE_NAME)},async FisrApper(){if(localStorage.getItem("Userid")!=null&&localStorage.getItem("Password")!=null){const e={Userid:localStorage.getItem("Userid"),Password:localStorage.getItem("Password")};var t=await i.post(o+S,e,{headers:{"Content-Type":"application/json"}});t.status==200?(this.dataresultAutoLogin=t.data,t.data=="LOGIN SUCCESS"&&p("../Home"),t.data=="LOGIN FAILED"&&(this.snackbarText="SESSION CLOSED",this.snackbar=!0)):(this.snackbarText="CONNECTION LOST",this.snackbar=!0)}}},async mounted(){await this.FisrApper.apply()}}),n=t=>(T("data-v-c46668d3"),t=t(),k(),t),B=n(()=>s("head",null,[s("meta",{charset:"utf-8"}),s("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge"}),s("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),s("title",null,"Login Form")],-1)),D={class:"Card-Body"},M={class:"formlogin"},K=n(()=>s("div",{class:"header"},[s("img",{class:"card-img",src:A})],-1)),G={class:"login"},_=n(()=>s("label",{class:"form-label"},"WELCOME",-1)),R=n(()=>s("br",null,null,-1)),H=n(()=>s("br",null,null,-1)),$=n(()=>s("br",null,null,-1));function x(t,e,U,j,W,X){return F(),N(y,null,[B,l(P,{class:"Vcard-box"},{default:r(()=>[s("div",D,[s("div",M,[K,s("div",G,[_,m(s("input",{type:"text",placeholder:"UserId","onUpdate:modelValue":e[0]||(e[0]=a=>t.UserId=a),onChange:e[1]||(e[1]=(...a)=>t.onchangegetusername&&t.onchangegetusername(...a)),onKeydown:e[2]||(e[2]=u(h((...a)=>t.handleEnterKey&&t.handleEnterKey(...a),["prevent"]),["enter"])),onKeyup:e[3]||(e[3]=u(h((...a)=>t.handleEnterKey&&t.handleEnterKey(...a),["prevent"]),["enter"]))},null,544),[[c,t.UserId]]),R,m(s("input",{type:"text",placeholder:"UserName",id:"Usernametxt","onUpdate:modelValue":e[4]||(e[4]=a=>t.FirstName=a),readonly:"readonly"},null,512),[[c,t.FirstName]]),d(),H,m(s("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[5]||(e[5]=a=>t.Passwordtxt=a),id:"Passwordtxt"},null,512),[[c,t.Passwordtxt]]),d(),$,l(C,{class:"select",modelValue:t.Biu,"onUpdate:modelValue":e[6]||(e[6]=a=>t.Biu=a),label:"Select Facility",hint:` ${t.Biu.SITE_NAME}`,items:t.Facility,"item-value":"SITE_NAME","item-title":"SITE_NAME","return-object":""},null,8,["modelValue","hint","items"]),s("button",{type:"button",onClick:e[7]||(e[7]=(...a)=>t.Lognbtnclick&&t.Lognbtnclick(...a))},"LOGIN")])])])]),_:1}),l(V,{class:"SnackBar",modelValue:t.snackbar,"onUpdate:modelValue":e[9]||(e[9]=a=>t.snackbar=a),timeout:4e3,color:"error",rounded:"pill",elevation:"23",location:"top right"},{actions:r(()=>[l(b,{color:"black",variant:"text",onClick:e[8]||(e[8]=a=>t.snackbar=!1)},{default:r(()=>[d(" Close ")]),_:1})]),default:r(()=>[d(w(t.snackbarText)+" ",1)]),_:1},8,["modelValue"])],64)}const ot=f(L,[["render",x],["__scopeId","data-v-c46668d3"]]);export{ot as default};
