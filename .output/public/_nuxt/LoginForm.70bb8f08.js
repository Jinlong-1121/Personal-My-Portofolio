import{_ as g,n as S,c as f,b as l,w as r,F as I,r as U,cA as u,a,o as y,t as p,X as d,bH as m,bO as N,d as n,A as E,bQ as b}from"./entry.6255c2b3.js";import{L as i,M as o,ak as F,al as w,am as A,an as c}from"./ssrBoot.bef6cd87.js";import{_ as T}from"./logo1.5d8dcdec.js";import{V as k}from"./VApp.be065f83.js";import{V as L}from"./VSnackbar.326588c0.js";import{V}from"./VSelect.29a1142c.js";import"./layout.b54188b0.js";import"./VOverlay.faef95dc.js";import"./lazy.4289cdac.js";import"./scopeId.9b3d730d.js";import"./VList.b1aecc34.js";const P=S({setup(){return{snackbar:U(!1)}},data(){return{snackbarText:"",UserId:"",Passwordtxt:"",userinfomartin:{},FirstName:"",Facility:[],bindingfaciity:[],Biu:{SITE_NAME:""},dataresultAutoLogin:""}},methods:{async handleEnterKey(){await i.get(o+F+this.UserId).then(t=>{t.data.length>0&&(t.data=="USER NOT FOUND"?this.FirstName="USER NOT FOUND":(this.FirstName=t.data[0].FirstName,this.GetFacility.call(),this.PostToken.call()))}).catch(t=>{console.error("Error fetching data:",t)}),Passwordtxt.focus()},async GetFacility(){await i.get(o+w).then(t=>{this.Facility=t.data;for(var e in this.facility)this.bindingfaciity=e.SITE_NAME})},async PostToken(){if(this.FirstName=="USER NOT FOUND")this.FirstName="USER TIDAK DI TEMUKAN";else{const t={Userid:this.UserId};await i.post(o+A,t,{headers:{"Content-Type":"application/json"}}).then(e=>{})}},async Lognbtnclick(){if(this.Biu=="")alert("MOHON PILIH FACILITY"),this.FirstName="Select Facility";else{const t={Userid:this.UserId,Password:this.Passwordtxt};await i.post(o+c,t,{headers:{"Content-Type":"application/json"}}).then(e=>{e.data=="LOGIN SUCCESS"?(this.savedatalogin.call(),u("../Home")):alert("USER/PASSWORD SALAH")})}},async savedatalogin(){localStorage.setItem("Userid",this.UserId),localStorage.setItem("Password",this.Passwordtxt),localStorage.setItem("Username",this.FirstName),localStorage.setItem("Site",this.Biu.SITE_NAME)},async FisrApper(){if(localStorage.getItem("Userid")!=null&&localStorage.getItem("Password")!=null){const e={Userid:localStorage.getItem("Userid"),Password:localStorage.getItem("Password")};var t=await i.post(o+c,e,{headers:{"Content-Type":"application/json"}});this.dataresultAutoLogin=t.data,t.data=="LOGIN SUCCESS"&&u("../Home"),t.data=="LOGIN FAILED"&&(this.snackbarText="SESSION FAILED",this.snackbar=!0,alert("SESSION FAILED"))}}},async mounted(){await this.FisrApper.apply()}}),O=a("head",null,[a("title",null,"Login Form")],-1),v=a("div",{class:"body"},null,-1),C=a("div",{class:"grad"},null,-1),B=a("div",{class:"header"},[a("img",{class:"card-img",src:T})],-1),D=a("br",null,null,-1),M={class:"login"},G={class:"form-label"},K=a("br",null,null,-1),H=a("br",null,null,-1),R=a("br",null,null,-1);function _(t,e,h,$,j,W){return y(),f(I,null,[O,l(k,{class:"formlogin"},{default:r(()=>[a("form",null,[v,C,B,D,a("div",M,[a("label",G,"WELCOME"+p(t.dataresultAutoLogin),1),d(a("input",{type:"text",placeholder:"UserId","onUpdate:modelValue":e[0]||(e[0]=s=>t.UserId=s),onKeyup:e[1]||(e[1]=N(b((...s)=>t.handleEnterKey&&t.handleEnterKey(...s),["prevent"]),["enter"]))},null,544),[[m,t.UserId]]),K,d(a("input",{type:"text",placeholder:"UserName",id:"Usernametxt","onUpdate:modelValue":e[2]||(e[2]=s=>t.FirstName=s),readonly:"readonly"},null,512),[[m,t.FirstName]]),n(),H,d(a("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[3]||(e[3]=s=>t.Passwordtxt=s),id:"Passwordtxt"},null,512),[[m,t.Passwordtxt]]),n(),R,l(V,{class:"select",modelValue:t.Biu,"onUpdate:modelValue":e[4]||(e[4]=s=>t.Biu=s),label:"Select Facility",hint:` ${t.Biu.SITE_NAME}`,items:t.Facility,"item-value":"SITE_NAME","item-title":"SITE_NAME","return-object":""},null,8,["modelValue","hint","items"]),a("button",{type:"button",onClick:e[5]||(e[5]=(...s)=>t.Lognbtnclick&&t.Lognbtnclick(...s))},"LOGIN ")])])]),_:1}),l(L,{class:"SnackBar",modelValue:t.snackbar,"onUpdate:modelValue":e[7]||(e[7]=s=>t.snackbar=s),timeout:4e3,color:"error",rounded:"pill",elevation:"23",location:"top right"},{actions:r(()=>[l(E,{color:"black",variant:"text",onClick:e[6]||(e[6]=s=>t.snackbar=!1)},{default:r(()=>[n(" Close ")]),_:1})]),default:r(()=>[n(p(t.snackbarText)+" ",1)]),_:1},8,["modelValue"])],64)}const st=g(P,[["render",_]]);export{st as default};
