{"version":3,"file":"ej2-image-editor.umd.min.js","sources":["../src/image-editor/action/crop.js","../src/image-editor/action/draw.js","../src/image-editor/action/export.js","../src/image-editor/action/filter.js","../src/image-editor/action/freehand-draw.js","../src/image-editor/action/selection.js","../src/image-editor/action/shape.js","../src/image-editor/action/transform.js","../src/image-editor/action/undo-redo.js","../src/image-editor/base/image-editor.js","../src/image-editor/base/enum.js","../src/image-editor/renderer/toolbar.js"],"sourcesContent":["import { extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nvar Crop = /** @class */ (function () {\n    function Crop(parent) {\n        this.croppedDegree = 0; // Specifies the degree when crop is performed\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 }; // To redraw old image when navigate to crop tab\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n        this.isInitCrop = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Crop.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Crop.prototype.addEventListener = function () {\n        this.parent.on('crop', this.cropping, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Crop.prototype.removeEventListener = function () {\n        this.parent.off('crop', this.cropping);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Crop.prototype.cropping = function (args) {\n        this.updateCropPvtVar();\n        switch (args.prop) {\n            case 'cropImg':\n                this.cropImg(args.value['isRotateCrop']);\n                break;\n            case 'cropCircle':\n                this.cropCircle(args.value['context'], args.value['isSave'], args.value['isFlip']);\n                break;\n            case 'setCurrSelPoints':\n                this.setCurrSelPoints(args.value['isSetDimension']);\n                break;\n            case 'updateRotatePan':\n                this.updateRotatePan();\n                break;\n            case 'crop':\n                this.crop(args.value['obj']);\n                break;\n            case 'calcRatio':\n                this.calcRatio(args.value['obj'], args.value['dimension']);\n                break;\n            case 'isObjInImage':\n                this.isObjInImage(args.value['obj'], args.value['object']);\n                break;\n            case 'getCurrFlipState':\n                this.getCurrFlipState(args.value['panObj']);\n                break;\n            case 'setPreviousCropCurrentObj':\n                this.prevCropCurrObj = args.value['obj'];\n                break;\n            case 'setCropDestPoints':\n                this.cropDestPoints = args.value['point'];\n                break;\n            case 'getTempFlipPanPoint':\n                args.value['obj']['point'] = this.tempFlipPanPoint;\n                break;\n            case 'setTempFlipPanPoint':\n                if (isNullOrUndefined(args.value['isAdd'])) {\n                    this.tempFlipPanPoint = args.value['point'];\n                }\n                else {\n                    this.tempFlipPanPoint.x += args.value['point'].x;\n                    this.tempFlipPanPoint.y += args.value['point'].y;\n                }\n                break;\n            case 'getPreventScaling':\n                args.value['obj']['bool'] = this.isPreventScaling;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Crop.prototype.getModuleName = function () {\n        return 'crop';\n    };\n    Crop.prototype.updateCropPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Crop.prototype.reset = function () {\n        this.prevCropCurrObj = null;\n        this.croppedDegree = 0;\n        this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n        this.isPreventScaling = false;\n        this.isInitCrop = false;\n    };\n    Crop.prototype.cropImg = function (isRotateCrop) {\n        var parent = this.parent;\n        var isNullCrop = isNullOrUndefined(isRotateCrop);\n        var resizeIcon = this.parent.element.querySelector('#' + this.parent.element.id + '_nonaspectratio');\n        var actPoint = parent.activeObj.activePoint;\n        var isRotated = false;\n        for (var i = 0; i < parent.rotateFlipColl.length; i++) {\n            if (parent.rotateFlipColl[i] === 90 || parent.rotateFlipColl[i] === -90) {\n                isRotated = true;\n            }\n        }\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        if (isNullCrop || resizeIcon) {\n            this.croppedDegree = parent.transform.degree;\n        }\n        if (isNullCrop && (parent.transform.degree !== 0) || isRotated) {\n            this.updateCropObj();\n            var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.rotateCrop();\n        }\n        else if (isNullCrop && parent.transform.currFlipState !== '') {\n            this.updateCropObj();\n            var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n            this.flipCrop();\n        }\n        else {\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n            var ratio = this.calcRatio();\n            if (isNullCrop || !isRotateCrop) { // isRotateCrop is NULL or False\n                this.updateCropObj();\n                parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                    height: parent.img.destHeight };\n                parent.notify('transform', { prop: 'setCurrDestinationPoint', onPropertyChange: false, value: { point: point } });\n                parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n                this.cropDestPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                    height: parent.img.destHeight };\n            }\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: actPoint.width * ratio.width,\n                    height: actPoint.height * ratio.height, obj: obj, isImgShape: null } });\n            var maxDimension = obj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.img.srcLeft = (actPoint.startX * ratio.width) - (parent.img.destLeft * ratio.width);\n            parent.img.srcTop = (actPoint.startY * ratio.height) - (parent.img.destTop * ratio.height);\n            parent.img.srcWidth = (actPoint.width * ratio.width);\n            parent.img.srcHeight = (actPoint.height * ratio.height);\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            parent.img.destWidth = maxDimension.width;\n            parent.img.destHeight = maxDimension.height;\n            var temp = this.lowerContext.filter;\n            parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n            this.lowerContext.filter = 'none';\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.cropObjColl();\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                if (this.isObjInImage(parent.objColl[i])) {\n                    parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                        value: { shape: parent.objColl[i].shape, obj: parent.objColl[i], canvas: null } });\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n            }\n            parent.activeObj = activeObj;\n            this.cropFreehandDrawColl();\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.currSelectionPoint != null && parent.currSelectionPoint.shape === 'crop-circle') {\n                this.cropCircle(this.lowerContext);\n            }\n            else {\n                parent.isCircleCrop = false;\n            }\n            this.lowerContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.currObjType.isCustomCrop = false;\n            parent.pan(false);\n            parent.transform.defaultZoomFactor = 0;\n        }\n    };\n    Crop.prototype.updateCropObj = function () {\n        this.parent.afterCropActions = [];\n        var object = { currObj: {} };\n        this.parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var obj = object['currObj'];\n        this.parent.cropObj = extend({}, obj, {}, true);\n    };\n    Crop.prototype.rotateCrop = function () {\n        var parent = this.parent;\n        var shape = parent.activeObj.shape || '';\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.currSelectionPoint = extend({}, parent.activeObj, {}, true);\n        parent.objColl.push(parent.activeObj);\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        var activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        var tempCurrSelObj = extend({}, parent.currSelectionPoint, {}, true);\n        var preventSelObj = { bool: null };\n        parent.notify('transform', { prop: 'getPreventSelect', onPropertyChange: false, value: { obj: preventSelObj } });\n        parent.notify('transform', { prop: 'setPreventSelect', onPropertyChange: false, value: { bool: true } });\n        var coll = extend([], parent.rotateFlipColl, [], true);\n        this.panToSelRangle(true);\n        this.resetZoom();\n        var afterCropActions = extend([], parent.afterCropActions, [], true);\n        this.revertTransform('initial', coll);\n        activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n        parent.objColl.pop();\n        parent.transform.degree = 0;\n        this.cropImg(true);\n        this.revertTransform('reverse', coll);\n        parent.afterCropActions = afterCropActions;\n        parent.currSelectionPoint = tempCurrSelObj;\n        parent.notify('transform', { prop: 'setPreventSelect', onPropertyChange: false, value: { bool: preventSelObj['bool'] } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (shape === 'crop-circle') {\n            this.cropCircle(this.lowerContext);\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n    };\n    Crop.prototype.revertTransform = function (type, coll) {\n        var parent = this.parent;\n        var obj = { isRotate: false };\n        if (type === 'initial') {\n            for (var i = coll.length - 1; i >= 0; i--) {\n                switch (coll[i]) {\n                    case 90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: -90, obj: obj } });\n                        break;\n                    case -90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: 90, obj: obj } });\n                        break;\n                    default:\n                        parent.notify('transform', { prop: 'flipImage', value: { direction: parent.toPascalCase(coll[i]) } });\n                        break;\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                parent.objColl[i].shapeFlip = '';\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                parent.pointColl[i].shapeFlip = '';\n            }\n            for (var i = 0, len = coll.length; i < len; i++) {\n                switch (coll[i]) {\n                    case 90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: 90, obj: obj } });\n                        break;\n                    case -90:\n                        parent.notify('transform', { prop: 'rotate', value: { degree: -90, obj: obj } });\n                        break;\n                    default:\n                        parent.notify('transform', { prop: 'flipImage', value: { direction: parent.toPascalCase(coll[i]) } });\n                        break;\n                }\n            }\n        }\n    };\n    Crop.prototype.resetZoom = function () {\n        var parent = this.parent;\n        if (parent.transform.zoomFactor > 0) {\n            var zoomFactor = parent.transform.zoomFactor;\n            var isUndoRedo = parent.isUndoRedo;\n            for (var i = 0; i < (zoomFactor * 10); i++) {\n                parent.isUndoRedo = true;\n                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n            }\n            parent.isUndoRedo = isUndoRedo;\n            parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        }\n    };\n    Crop.prototype.flipCrop = function () {\n        var parent = this.parent;\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        parent.panPoint.totalPannedPoint.x += this.tempFlipPanPoint.x;\n        parent.panPoint.totalPannedPoint.y += this.tempFlipPanPoint.y;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        var tempFlipColl = obj['flipColl'];\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: [] } });\n        parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n        parent.objColl.push(parent.activeObj);\n        this.resetZoom();\n        parent.currSelectionPoint = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < parent.freehandCounter; i++) {\n            parent.pointColl[i].shapeFlip = '';\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        parent.objColl.pop();\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.cropImg(true);\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        parent.transform.currFlipState = tempCurrFlipState;\n        parent.notify('transform', { prop: 'setFlipColl', onPropertyChange: false, value: { flipColl: tempFlipColl } });\n        this.lowerContext.filter = 'none';\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < parent.freehandCounter; i++) {\n            parent.pointColl[i].shapeFlip = '';\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: this.getCurrFlipState() } });\n        parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n            value: { value: this.getCurrFlipState() } });\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n        parent.notify('draw', { prop: 'resetPanPoints', onPropertyChange: false });\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n    };\n    Crop.prototype.cropObjColl = function () {\n        var parent = this.parent;\n        var point;\n        var activePoint;\n        var shape;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                point = parent.objColl[i].activePoint;\n                activePoint = parent.activeObj.activePoint;\n                shape = parent.objColl[i].shape;\n                parent.objColl[i].imageRatio = { startX: ((point.startX - activePoint.startX) / activePoint.width),\n                    startY: ((point.startY - activePoint.startY) / activePoint.height),\n                    endX: ((point.endX - activePoint.startX) / activePoint.width),\n                    endY: ((point.endY - activePoint.startY) / activePoint.height),\n                    width: activePoint.width / point.width,\n                    height: activePoint.height / point.height };\n                var degree = void 0;\n                var size = void 0;\n                switch (shape) {\n                    case 'text':\n                        if (parent.objColl[i].shapeDegree === 0) {\n                            degree = this.parent.transform.degree;\n                        }\n                        else {\n                            degree = this.parent.transform.degree - parent.objColl[i].shapeDegree;\n                        }\n                        size = (degree === 0 || Math.abs(degree) === 180) ? point.width : point.height;\n                        parent.objColl[i].textSettings.fontRatio = size / parent.objColl[i].textSettings.fontSize;\n                        break;\n                    case 'line':\n                    case 'arrow':\n                        this.cropPointCollection(i);\n                        if (shape === 'arrow') {\n                            parent.notify('shape', { prop: 'updateArrowRatio', onPropertyChange: false, value: { obj: parent.objColl[i] } });\n                        }\n                        break;\n                    case 'path':\n                        this.cropPointCollection(i);\n                        break;\n                }\n            }\n        }\n    };\n    Crop.prototype.cropPointCollection = function (i) {\n        var parent = this.parent;\n        var shape = parent.objColl[i].shape;\n        var x;\n        var y;\n        var width;\n        var height;\n        var point = parent.activeObj.activePoint;\n        if (shape === 'path') {\n            x = point.startX;\n            y = point.startY;\n            width = point.width;\n            height = point.height;\n        }\n        else {\n            x = parent.img.destLeft;\n            y = parent.img.destTop;\n            width = parent.img.destWidth;\n            height = parent.img.destHeight;\n        }\n        var selPoint = parent.objColl[i];\n        for (var n = 0, len = selPoint.pointColl.length; n < len; n++) {\n            selPoint.pointColl[n].ratioX =\n                (selPoint.pointColl[n].x - x) / width;\n            selPoint.pointColl[n].ratioY =\n                (selPoint.pointColl[n].y - y) / height;\n        }\n    };\n    Crop.prototype.cropFreehandDrawColl = function () {\n        var parent = this.parent;\n        // Update crop values to point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].ratioX = (parent.points[l].x -\n                    parent.activeObj.activePoint.startX) / parent.activeObj.activePoint.width;\n                parent.points[l].ratioY = (parent.points[l].y -\n                    parent.activeObj.activePoint.startY) / parent.activeObj.activePoint.height;\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'updateCropPtsForSel', onPropertyChange: false });\n    };\n    Crop.prototype.setCurrSelPoints = function (isSetDimension) {\n        var parent = this.parent;\n        parent.allowDownScale = false;\n        var destPoint = this.cropDestPoints;\n        var filter = this.lowerContext.filter;\n        parent.img.srcLeft = 0;\n        parent.img.srcTop = 0;\n        parent.img.srcWidth = parent.baseImgCanvas.width;\n        parent.img.srcHeight = parent.baseImgCanvas.height;\n        parent.img.destLeft = destPoint.startX;\n        parent.img.destTop = destPoint.startY;\n        parent.img.destWidth = destPoint.width;\n        parent.img.destHeight = destPoint.height;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (isSetDimension) {\n            parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        }\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        if (this.croppedDegree === 0 && parent.transform.degree === 0 && parent.currSelectionPoint\n            && parent.currSelectionPoint.shape !== 'crop-circle' && parent.currSelectionPoint.shape !== 'crop-square') {\n            parent.img.destLeft = destPoint.startX;\n            parent.img.destTop = destPoint.startY;\n            parent.img.destWidth = destPoint.width;\n            parent.img.destHeight = destPoint.height;\n        }\n        if (parent.transform.degree === 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = filter;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, context: null, isPreventCircleCrop: true } });\n        var cropObjColl = extend([], parent.objColl, null, true);\n        var cropPointColl = extend([], parent.pointColl, null, true);\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        this.panToSelRangle();\n        parent.objColl = cropObjColl;\n        parent.pointColl = cropPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        if (parent.cropObj.activeObj.shape) {\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            if (parent.currSelectionPoint && parent.currSelectionPoint.activePoint) {\n                parent.img.destLeft = parent.currSelectionPoint.activePoint.startX;\n                parent.img.destTop = parent.currSelectionPoint.activePoint.startY;\n                parent.img.destWidth = parent.currSelectionPoint.activePoint.width;\n                parent.img.destHeight = parent.currSelectionPoint.activePoint.height;\n            }\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            cropObjColl = extend([], parent.objColl, null, true);\n            cropPointColl = extend([], parent.pointColl, null, true);\n            parent.objColl = [];\n            parent.pointColl = [];\n            parent.freehandCounter = 0;\n            var object = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: object } });\n            var cropSelPointColl = object['selPointColl'];\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: [] } } });\n            parent.cropObj.filter = this.lowerContext.filter;\n            var actObj = extend({}, parent.currSelectionPoint, null, true);\n            parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: null } });\n            parent.activeObj = extend({}, actObj, null, true);\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.currSelectionPoint = null;\n            parent.isCircleCrop = false;\n            if (parent.transform.degree !== 0) {\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            }\n            parent.objColl = cropObjColl;\n            parent.pointColl = cropPointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                value: { obj: { selPointColl: cropSelPointColl } } });\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            if (parent.transform.degree === 0) {\n                parent.notify('transform', { prop: 'drawPannImage', onPropertyChange: false,\n                    value: { point: { x: 0, y: 0 } } });\n            }\n            parent.activeObj = activeObj;\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: null } });\n            if (!this.isInitCrop && parent.transform.degree === 0 && parent.cropObj.currFlipState !== '' &&\n                parent.cropObj.cropZoom !== 0) {\n                this.isInitCrop = true;\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'croptransform',\n                        isApplyBtn: false, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                this.isInitCrop = false;\n            }\n        }\n        else {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = temp;\n            parent.currSelectionPoint = null;\n        }\n    };\n    Crop.prototype.panToSelRangle = function (isReverse) {\n        var parent = this.parent;\n        var panX = parent.transform.degree !== 0 ?\n            isReverse ? -parent.cropObj.totalPannedClientPoint.x : parent.cropObj.totalPannedClientPoint.x : 0;\n        var panY = parent.transform.degree !== 0 ?\n            isReverse ? -parent.cropObj.totalPannedClientPoint.y : parent.cropObj.totalPannedClientPoint.y : 0;\n        if (parent.transform.degree !== 0) {\n            parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n            parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n            parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n        }\n    };\n    Crop.prototype.cropCircle = function (context, isSave, isFlip) {\n        var parent = this.parent;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n        var temp = context.filter;\n        context.filter = 'none';\n        context.globalCompositeOperation = 'destination-in';\n        context.beginPath();\n        var centerX = isNullOrUndefined(isSave) ? parent.img.destLeft + (parent.img.destWidth / 2) : context.canvas.width / 2;\n        var centerY = isNullOrUndefined(isSave) ? parent.img.destTop + (parent.img.destHeight / 2) : context.canvas.height / 2;\n        var radius = isSave ? context.canvas.width / 2 : parent.img.destWidth / 2;\n        context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n        context.restore();\n        context.globalCompositeOperation = 'source-over';\n        parent.currObjType.isActiveObj = parent.isCircleCrop = true;\n        context.filter = temp;\n        if (isFlip && parent.transform.currFlipState !== '') {\n            parent.notify('draw', { prop: 'setTransform', onPropertyChange: false,\n                value: { context: context, value: parent.transform.currFlipState, isReverse: null } });\n        }\n    };\n    Crop.prototype.getCurrCropState = function (type, isAllowInvert) {\n        var parent = this.parent;\n        var flipState = '';\n        var state = [];\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        if (type === 'initial') {\n            if (Math.abs(parent.transform.degree) === 180) {\n                flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n            }\n            else {\n                for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                    if (typeof (parent.rotateFlipColl[i]) === 'number') {\n                        state.push('number');\n                    }\n                    else if (typeof (parent.rotateFlipColl[i]) === 'string') {\n                        state.push('string');\n                    }\n                }\n                if (state.length > 1 && state[state.length - 1] === 'string' && state[state.length - 2] === 'number') {\n                    if (parent.transform.currFlipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (parent.transform.currFlipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n                else if (state.length > 1 && state[state.length - 1] === 'number' && state[state.length - 2] === 'string') {\n                    flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n                }\n            }\n        }\n        else {\n            flipState = this.getCurrFlipState();\n            if (isAllowInvert || !this.isInitialRotate()) {\n                if (parent.transform.degree === -90 || parent.transform.degree === -270) {\n                    if (flipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (flipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n            }\n        }\n        if (flipState === '') {\n            flipState = obj['flipColl'].length > 1 ? this.getCurrFlipState() : parent.transform.currFlipState;\n        }\n        return flipState;\n    };\n    Crop.prototype.isInitialRotate = function () {\n        var isRotate = false;\n        if (this.parent.rotateFlipColl.length > 0 && typeof (this.parent.rotateFlipColl[0]) === 'number') {\n            isRotate = true;\n        }\n        return isRotate;\n    };\n    Crop.prototype.updateRotatePan = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.panPoint.currentPannedPoint)) {\n            return;\n        }\n        var panRegion = '';\n        if (parent.rotateFlipColl.length > 0 && typeof (parent.rotateFlipColl[0]) === 'number'\n            && parent.transform.degree < 0) {\n            panRegion = this.getCurrCropState('reverse', true);\n        }\n        else {\n            panRegion = this.getCurrFlipState();\n        }\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            if (parent.transform.degree === 90 || (parent.transform.degree === -90 &&\n                (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (parent.transform.degree === -270 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === 'horizontal' || panRegion === '') {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.x;\n                }\n            }\n            else if (parent.transform.degree === 270 || (parent.transform.degree === -270 &&\n                (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (parent.transform.degree === -90 && (panRegion === '' || panRegion === 'verticalHorizontal'\n                    || panRegion === 'horizontalVertical'))) {\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.y;\n                }\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.x;\n                }\n            }\n        }\n        else {\n            if (parent.transform.degree === 180 || parent.transform.degree === -180) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.img.destLeft -= parent.panPoint.currentPannedPoint.x;\n                }\n                else {\n                    parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.img.destTop -= parent.panPoint.currentPannedPoint.y;\n                }\n                else {\n                    parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n                }\n            }\n        }\n    };\n    Crop.prototype.crop = function (obj) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var object_1 = { isCropToolbar: parent.isCropToolbar };\n            if (parent.currObjType.isUndoAction && !object_1['isCropToolbar']) {\n                parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n            }\n            var transitionArgs = { cancel: false, startPoint: { x: parent.activeObj.activePoint.startX,\n                    y: parent.activeObj.activePoint.startY }, endPoint: { x: parent.activeObj.activePoint.endX,\n                    y: parent.activeObj.activePoint.endY }, preventScaling: false };\n            if (!object_1['isCropToolbar'] && isBlazor() && parent.events && parent.events.cropping.hasDelegate === true) {\n                if (parent.currentToolbar == 'resize-toolbar') {\n                    parent.dotNetRef.invokeMethodAsync('CropEventAsync', 'OnCrop', transitionArgs);\n                    this.cropEvent(transitionArgs, obj, object_1);\n                }\n                else {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('CropEventAsync', 'OnCrop', transitionArgs).then(function (args) {\n                        _this.cropEvent(args, obj, object_1);\n                    });\n                }\n            }\n            else {\n                if (!object_1['isCropToolbar']) {\n                    parent.trigger('cropping', transitionArgs);\n                }\n                this.cropEvent(transitionArgs, obj, object_1);\n            }\n        }\n    };\n    Crop.prototype.cropEvent = function (transitionArgs, obj, object) {\n        var parent = this.parent;\n        var splitWords;\n        if (!transitionArgs.cancel) {\n            splitWords = parent.activeObj.shape ? parent.activeObj.shape.split('-') : [];\n            if (!parent.disabled && parent.activeObj.horTopLine && (parent.currObjType.isCustomCrop || (splitWords.length > 0 &&\n                splitWords[0] === 'crop'))) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                obj.isCrop = true;\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var prevObj = extend({}, this.prevCropCurrObj, {}, true);\n                if (transitionArgs.preventScaling) {\n                    this.isPreventScaling = true;\n                }\n                else {\n                    this.isPreventScaling = false;\n                }\n                this.cropImg();\n                parent.transform.zoomFactor = 0;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                    value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                var currSelPtObj = { prevCurrSelectionPoint: this.parent.prevCurrSelectionPoint };\n                prevObj.currSelectionPoint = extend({}, currSelPtObj['prevCurrSelectionPoint'], {}, true);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'crop', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n                if (!object['isCropToolbar']) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: parent.cropObj.destPoints.width, height: parent.cropObj.destPoints.height } });\n                var aspectIcon = this.parent.element.querySelector('#' + this.parent.element.id + '_aspectratio');\n                var nonAspectIcon = this.parent.element.querySelector('#' + this.parent.element.id + '_nonaspectratio');\n                if (!isBlazor() && !object['isCropToolbar'] && (isNullOrUndefined(aspectIcon) && isNullOrUndefined(nonAspectIcon))) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                            isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                }\n                else if (!object['isCropToolbar'] && this.parent.currentToolbar !== 'resize-toolbar') {\n                    this.parent.updateToolbar(this.parent.element, 'imageLoaded');\n                }\n            }\n        }\n    };\n    Crop.prototype.calcRatio = function (obj, dimension) {\n        var parent = this.parent;\n        var widthRatio;\n        var heightRatio;\n        if (parent.transform.degree === 0 || parent.transform.degree % 180 === 0) {\n            widthRatio = (dimension ? dimension.width : parent.baseImgCanvas.width) / parent.img.destWidth;\n            heightRatio = (dimension ? dimension.height : parent.baseImgCanvas.height) / parent.img.destHeight;\n        }\n        else {\n            widthRatio = (dimension ? dimension.height : parent.baseImgCanvas.height) / parent.img.destWidth;\n            heightRatio = (dimension ? dimension.width : parent.baseImgCanvas.width) / parent.img.destHeight;\n        }\n        if (obj) {\n            obj['width'] = widthRatio;\n            obj['height'] = heightRatio;\n        }\n        return { width: widthRatio, height: heightRatio };\n    };\n    Crop.prototype.isObjInImage = function (obj, dummyObj) {\n        var parent = this.parent;\n        var isInside = false;\n        var startX = obj.activePoint.startX;\n        var endX = obj.activePoint.endX;\n        var startY = obj.activePoint.startY;\n        var endY = obj.activePoint.endY;\n        if ((startX >= parent.img.destLeft && endX <= (parent.img.destLeft + parent.img.destWidth)) ||\n            (startX <= parent.img.destLeft && endX >= parent.img.destLeft) ||\n            (startX <= (parent.img.destLeft + parent.img.destWidth) && endX >= (parent.img.destLeft + parent.img.destWidth)) ||\n            (startY >= parent.img.destTop && endY <= (parent.img.destTop + parent.img.destHeight)) ||\n            (startY <= parent.img.destTop && endY >= parent.img.destTop) ||\n            (startY <= (parent.img.destTop + parent.img.destHeight) && endY >= (parent.img.destTop + parent.img.destHeight))) {\n            isInside = true;\n        }\n        if (dummyObj) {\n            dummyObj['isInside'] = isInside;\n        }\n        return isInside;\n    };\n    Crop.prototype.getCurrFlipState = function (panObj) {\n        var parent = this.parent;\n        var obj = { panRegion: '' };\n        var object = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: object } });\n        parent.rotateFlipColl = object['collection'];\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            parent.notify('transform', { prop: 'setCurrPanRegion', onPropertyChange: false,\n                value: { region: obj['panRegion'], type: parent.rotateFlipColl[i], obj: obj } });\n        }\n        if (panObj) {\n            panObj['panRegion'] = obj['panRegion'];\n        }\n        return obj['panRegion'];\n    };\n    return Crop;\n}());\nexport { Crop };\n","import { extend, isNullOrUndefined, Browser, isBlazor, getComponent } from '@syncfusion/ej2-base';\nimport { Dialog, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Draw = /** @class */ (function () {\n    function Draw(parent) {\n        this.isInitialLoading = false; // Specifies whether image is loaded for the first time or not (for applying initial filter)\n        this.fileName = '';\n        this.isErrorImage = false;\n        this.isShapeTextInserted = false;\n        this.isRotateZoom = false; // To restore zoomed image on selection crop selection\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null }; // restore stroke settings on cancel\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false }; // restore text settings on cancel\n        this.tempAdjValue = ''; // for temp internal slider value\n        this.tempFilter = ''; // restore filter style on cancel\n        this.tempUndoRedoStep = 0;\n        this.tempFreehandCounter = 0;\n        this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null; // Restore zoom factor on cancel\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.zoomCrop = { width: 0, height: 0 };\n        this.isImageEdited = false;\n        this.isFileChanged = false;\n        this.isNewPath = false;\n        this.isResizeSelect = false;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n        this.tempFrame = 'none';\n        this.origDim = { width: 0, height: 0 };\n        this.isImageApply = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Draw.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Draw.prototype.addEventListener = function () {\n        this.parent.on('draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Draw.prototype.removeEventListener = function () {\n        this.parent.off('draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Draw.prototype.draw = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'drawObject':\n                this.drawObject(args.value['canvas'], args.value['obj'], args.value['isCropRatio'], args.value['points'], args.value['isPreventDrag'], args.value['saveContext'], args.value['isPreventSelection']);\n                break;\n            case 'updateActiveObject':\n                this.updateActiveObject(args.value['actPoint'], args.value['obj'], args.value['isMouseMove'], args.value['x'], args.value['y']);\n                break;\n            case 'clearOuterCanvas':\n                this.clearOuterCanvas(args.value['context']);\n                break;\n            case 'setDestPoints':\n                this.setDestPoints();\n                break;\n            case 'updateCurrTransState':\n                this.updateCurrTransState(args.value['type'], args.value['isPreventDestination'], args.value['isRotatePan']);\n                break;\n            case 'currTransState':\n                this.currTransState(args.value['type'], args.value['isPreventDestination'], args.value['context'], args.value['isPreventCircleCrop']);\n                break;\n            case 'setTransform':\n                this.setTransform(args.value['context'], args.value['value'], args.value['isReverse']);\n                break;\n            case 'render-image':\n                this.renderImage(args.value['isMouseWheel'], args.value['isPreventClearRect'], args.value['isFrame']);\n                break;\n            case 'draw-image-to-canvas':\n                this.drawImgToCanvas(args.value['dimension']);\n                break;\n            case 'update-canvas':\n                this.updateCanvas();\n                break;\n            case 'performCancel':\n                this.performCancel(args.value['isContextualToolbar']);\n                break;\n            case 'updateFlipPan':\n                this.updateFlipPan(args.value['tempSelectionObj']);\n                break;\n            case 'select':\n                this.select(args.value['type'], args.value['startX'], args.value['startY'], args.value['width'], args.value['height']);\n                break;\n            case 'callUpdateCurrTransState':\n                this.callUpdateCurrTransState();\n                break;\n            case 'resetPanPoints':\n                this.resetPanPoints();\n                break;\n            case 'setClientTransDim':\n                this.setClientTransDim(args.value['isPreventDimension']);\n                break;\n            case 'redrawImgWithObj':\n                this.redrawImgWithObj();\n                break;\n            case 'setCurrentObj':\n                this.setCurrentObj(args.value['obj']);\n                break;\n            case 'performPointZoom':\n                this.performPointZoom(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'open':\n                this.open(args.value['data']);\n                break;\n            case 'isInitialLoading':\n                this.isInitialLoading = args.value['isInitialLoading'];\n                break;\n            case 'isInitialLoaded':\n                this.getInitialLoaded(args.value['object']);\n                break;\n            case 'fileSelect':\n                this.fileSelect(args.value['inputElement'], args.value['args']);\n                break;\n            case 'getFileName':\n                args.value['obj']['fileName'] = this.fileName;\n                args.value['obj']['fileType'] = this.fileType;\n                break;\n            case 'getErrorImage':\n                args.value['obj']['isErrorImage'] = this.isErrorImage;\n                break;\n            case 'getInitialZoomValue':\n                args.value['obj']['initialZoomValue'] = this.initZoomValue;\n                break;\n            case 'setShapeTextInsert':\n                this.isShapeTextInserted = args.value['bool'];\n                break;\n            case 'resetCurrentSelectionPoint':\n                this.currSelPoint = null;\n                break;\n            case 'setRotateZoom':\n                this.isRotateZoom = args.value['isRotateZoom'];\n                break;\n            case 'setTempStrokeSettings':\n                this.tempStrokeSettings = args.value['tempStrokeSettings'];\n                break;\n            case 'setTempTextSettings':\n                this.tempTextSettings = args.value['tempTextSettings'];\n                break;\n            case 'setTempAdjustmentValue':\n                this.tempAdjValue = args.value['tempAdjustmentValue'];\n                break;\n            case 'getTempAdjustmentValue':\n                args.value['obj']['value'] = this.tempAdjValue;\n                break;\n            case 'setTempFilter':\n                this.tempFilter = args.value['tempFilter'];\n                break;\n            case 'setTempUndoRedoStep':\n                this.tempUndoRedoStep = args.value['tempUndoRedoStep'];\n                break;\n            case 'setTempFreehandCounter':\n                this.tempFreehandCounter = args.value['tempFreehandCounter'];\n                break;\n            case 'setTempCurrentFreehandDrawIndex':\n                this.tempCurrFhdIndex = args.value['tempCurrentFreehandDrawIndex'];\n                break;\n            case 'setTempZoomFactor':\n                this.tempZoomFactor = args.value['tempZoomFactor'];\n                break;\n            case 'setCancelAction':\n                this.isCancelAction = args.value['bool'];\n                break;\n            case 'getRotatedFlipCropSelection':\n                args.value['bool']['isSelected'] = this.rotatedFlipCropSel;\n                break;\n            case 'getPrevActObj':\n                args.value['obj']['prevActObj'] = this.prevActObj;\n                break;\n            case 'setPrevActObj':\n                this.prevActObj = args.value['prevActObj'];\n                break;\n            case 'setZoomCropWidth':\n                this.zoomCrop.width = args.value['width'];\n                this.zoomCrop.height = args.value['height'];\n                break;\n            case 'setImageEdited':\n                this.isImageEdited = true;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'dlgBtnClick':\n                this.dlgBtnClick();\n                break;\n            case 'dlgCloseBtnClick':\n                this.dlgCloseBtnClick();\n                break;\n            case 'setNewPath':\n                this.isNewPath = args.value['bool'];\n                break;\n            case 'getNewPath':\n                args.value['obj']['isNewPath'] = this.isNewPath;\n                break;\n            case 'getArrowDimension':\n                args.value['obj']['arrowDimension'] = this.arrowDimension;\n                break;\n            case 'setArrowDimension':\n                this.arrowDimension = args.value['arrowDimension'];\n                break;\n            case 'moveToSelectionRange':\n                this.moveToSelectionRange(args.value['type'], args.value['activeObj']);\n                break;\n            case 'setResizeSelect':\n                this.isResizeSelect = args.value['bool'];\n                break;\n            case 'applyFrame':\n                this.applyFrame(args.value['ctx'], args.value['frame'], args.value['preventImg']);\n                break;\n            case 'getTempFrame':\n                args.value['obj']['tempFrame'] = this.tempFrame;\n                break;\n            case 'drawImage':\n                this.drawImage();\n                break;\n            case 'setTempFrame':\n                this.tempFrame = args.value['frame'];\n                break;\n            case 'downScaleImgCanvas':\n                this.downScaleImgCanvas(args.value['ctx'], args.value['isImgAnnotation'], args.value['isHFlip'], args.value['isVFlip']);\n                break;\n            case 'downScale':\n                this.downScale(args.value['canvas'], args.value['width'], args.value['height']);\n                break;\n            case 'resetFrameZoom':\n                this.resetFrameZoom();\n                break;\n            case 'triggerFrameChange':\n                args.value['obj']['frameChangeEventArgs'] = this.triggerFrameChange(args.value['prevFrameSettings']);\n                break;\n            case 'setImageApply':\n                this.isImageApply = args.value['bool'];\n                break;\n        }\n    };\n    Draw.prototype.getModuleName = function () {\n        return 'draw';\n    };\n    Draw.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (isNullOrUndefined(this.tempZoomFactor)) {\n            this.tempZoomFactor = parent.transform.zoomFactor;\n        }\n    };\n    Draw.prototype.reset = function () {\n        this.isInitialLoading = this.isErrorImage = this.isNewPath = this.isResizeSelect = false;\n        this.isShapeTextInserted = false;\n        this.tempFrame = 'none';\n        this.isImageApply = false;\n        this.initZoomValue = null;\n        this.tempFilter = '';\n        this.origDim = { width: 0, height: 0 };\n        this.currSelPoint = null;\n        this.isRotateZoom = false;\n        this.tempAdjValue = '';\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.tempTextSettings =\n            { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.tempUndoRedoStep = this.tempFreehandCounter = this.tempCurrFhdIndex = 0;\n        this.tempZoomFactor = null;\n        this.isCancelAction = false;\n        this.rotatedFlipCropSel = false;\n        this.prevActObj = null;\n        this.arrowDimension = { bar: { width: 10, height: 32, ratioX: null, ratioY: null },\n            arrow: { width: 24, height: 24, ratioX: null, ratioY: null }, arrowSolid: { width: 32, height: 32, ratioX: null, ratioY: null },\n            circle: { width: 10, height: 10, ratioX: null, ratioY: null }, square: { width: 20, height: 20, ratioX: null, ratioY: null } };\n    };\n    Draw.prototype.drawImage = function () {\n        this.applyFrame(this.lowerContext, this.parent.frameObj.type);\n    };\n    Draw.prototype.drawObject = function (canvas, obj, isCropRatio, points, isPreventDrag, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        if (!isPreventDrag && parent.activeObj.shape) {\n            this.setDragLimit();\n        }\n        if (parent.currObjType.shape) {\n            var splitWords = parent.currObjType.shape.split('-');\n            if (splitWords[0].toLowerCase() === 'crop' && isCropRatio) {\n                this.drawCropRatio();\n            }\n        }\n        if (points) {\n            actPoint.startX = points.startX;\n            actPoint.startY = points.startY;\n            actPoint.endX = points.endX;\n            actPoint.endY = points.endY;\n            actPoint.width = points.width;\n            actPoint.height = points.height;\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n            var obj_1 = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                value: { obj: obj_1 } });\n            parent.activeObj.strokeSettings = obj_1['strokeSettings'];\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n            parent.activeObj.strokeSettings.strokeWidth = 2;\n        }\n        if (obj) {\n            parent.activeObj = extend({}, obj, {}, true);\n        }\n        this.updateActiveObject();\n        if (isNullOrUndefined(parent.activeObj.activePoint.startX) &&\n            isNullOrUndefined(parent.activeObj.activePoint.startY)) {\n            return;\n        }\n        if (parent.currObjType.isText) {\n            var obj_2 = { keyHistory: '' };\n            parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: obj_2 } });\n            parent.activeObj.keyHistory = obj_2['keyHistory'];\n        }\n        if (canvas.toLowerCase() !== 'original') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            if (isCrop) {\n                this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n                this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n            }\n            if (isNullOrUndefined(isPreventSelection) && (canvasDraw === this.lowerContext || canvasDraw === this.upperContext)) {\n                this.rotateContext('initial', canvasDraw);\n                this.drawOuterSelection(canvasDraw);\n                this.rotateContext('reverse', canvasDraw);\n            }\n        }\n        parent.currObjType.isActiveObj = true;\n        var object = { keyHistory: '' };\n        parent.notify('shape', { prop: 'getKeyHistory', onPropertyChange: false, value: { obj: object } });\n        if (obj) {\n            this.drawShapeObj(canvas, obj.shape, saveContext, isPreventSelection);\n        }\n        else if (object['keyHistory'] !== '' && parent.currObjType.isText) {\n            this.drawShapeObj(canvas, 'text', saveContext, isPreventSelection);\n        }\n        else if (parent.activeObj.shape) {\n            this.drawShapeObj(canvas, parent.activeObj.shape, saveContext, isPreventSelection);\n        }\n        else {\n            this.drawShapeObj(canvas, undefined, saveContext, isPreventSelection);\n        }\n    };\n    Draw.prototype.rotateContext = function (type, ctx) {\n        var parent = this.parent;\n        var activePoint = extend({}, parent.activeObj.activePoint, {}, true);\n        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n            return;\n        }\n        var rotationAngle = (type === 'initial') ? parent.activeObj.rotatedAngle : -parent.activeObj.rotatedAngle;\n        ctx.translate(activePoint.startX + (activePoint.width / 2), activePoint.startY + (activePoint.height / 2));\n        ctx.rotate(rotationAngle);\n        ctx.translate(-(activePoint.startX + (activePoint.width / 2)), -(activePoint.startY + (activePoint.height / 2)));\n    };\n    Draw.prototype.setDragLimit = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (actPoint && parent.activeObj.shape !== 'image' && parent.activeObj.shape !== 'line' && parent.activeObj.rotatedAngle === 0) {\n            if (actPoint.startX < parent.img.destLeft) {\n                actPoint.startX = parent.img.destLeft;\n                actPoint.endX = actPoint.startX + actPoint.width;\n            }\n            else if (actPoint.endX > parent.img.destLeft + parent.img.destWidth) {\n                actPoint.endX = parent.img.destLeft + parent.img.destWidth;\n                actPoint.startX = actPoint.endX - actPoint.width;\n            }\n            if (actPoint.startY < parent.img.destTop) {\n                actPoint.startY = parent.img.destTop;\n            }\n            else if (actPoint.endY > parent.img.destTop + parent.img.destHeight) {\n                actPoint.endY = parent.img.destTop + parent.img.destHeight;\n                actPoint.startY = actPoint.endY - actPoint.height;\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        }\n    };\n    Draw.prototype.drawCropRatio = function () {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x;\n        var y;\n        var width;\n        var height;\n        if (parent.transform.zoomFactor > 0 && this.currSelPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            this.drawCustomSelection('crop-custom', null, null, null, null);\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                width = parent.activeObj.activePoint.width < parent.activeObj.activePoint.height ?\n                    parent.activeObj.activePoint.width : parent.activeObj.activePoint.height;\n                height = width;\n            }\n            else {\n                if (parent.img.destLeft + parent.img.destLeft + parent.img.destWidth <= parent.lowerCanvas.clientWidth) {\n                    width = actPoint.width;\n                }\n                else {\n                    width = parent.lowerCanvas.clientWidth - parent.img.destLeft;\n                }\n                if (parent.img.destTop + parent.img.destTop + parent.img.destHeight <= parent.lowerCanvas.clientHeight) {\n                    height = actPoint.height;\n                }\n                else {\n                    height = parent.lowerCanvas.clientHeight - parent.img.destTop;\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.activeObj = activeObj;\n            parent.currObjType.shape = activeObj.shape;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isCustomCrop = false;\n        }\n        else {\n            width = parent.img.destWidth;\n            height = parent.img.destHeight;\n            if (parent.img.destLeft < 0) {\n                width += parent.img.destLeft;\n            }\n            if (parent.img.destTop < 0) {\n                height += parent.img.destTop;\n            }\n            if (parent.currObjType.shape.toLowerCase() !== 'crop-square' && parent.currObjType.shape.toLowerCase() !== 'crop-circle') {\n                if (parent.img.destLeft + parent.img.destWidth > parent.lowerCanvas.width) {\n                    width -= (parent.img.destLeft + parent.img.destWidth - parent.lowerCanvas.width);\n                }\n                if (parent.img.destTop + parent.img.destHeight > parent.lowerCanvas.height) {\n                    height -= (parent.img.destTop + parent.img.destHeight - parent.lowerCanvas.height);\n                }\n            }\n        }\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'crop-square':\n            case 'crop-circle':\n                parent.notify('selection', { prop: 'setDragDirection', onPropertyChange: false, value: { width: width, height: height } });\n                actPoint = parent.activeObj.activePoint;\n                if (parent.lowerCanvas.width < (actPoint.endX - actPoint.startX)) {\n                    actPoint.startX = 7.5;\n                    actPoint.endX = parent.lowerCanvas.width - 7.5;\n                }\n                if (parent.lowerCanvas.height < (actPoint.endY - actPoint.startY)) {\n                    actPoint.startY = 7.5;\n                    actPoint.endY = parent.lowerCanvas.height - 7.5;\n                }\n                if (width === parent.img.destWidth && height === parent.img.destHeight) {\n                    actPoint.startX += parent.img.destLeft;\n                    actPoint.startY +=\n                        parent.img.destTop;\n                    actPoint.endX += parent.img.destLeft;\n                    actPoint.endY +=\n                        parent.img.destTop;\n                }\n                if (parent.lowerCanvas.width > parent.lowerCanvas.height) {\n                    actPoint.height = actPoint.endY - actPoint.startY;\n                    actPoint.width = actPoint.height;\n                    actPoint.endX = actPoint.startX +\n                        actPoint.width;\n                }\n                else {\n                    actPoint.width = actPoint.endX - actPoint.startX;\n                    actPoint.height = actPoint.width;\n                    actPoint.endY = actPoint.startY +\n                        actPoint.height;\n                }\n                break;\n            case 'crop-3:2':\n                x = 3;\n                y = 2;\n                break;\n            case 'crop-4:3':\n                x = 4;\n                y = 3;\n                break;\n            case 'crop-5:4':\n                x = 5;\n                y = 4;\n                break;\n            case 'crop-7:5':\n                x = 7;\n                y = 5;\n                break;\n            case 'crop-16:9':\n                x = 16;\n                y = 9;\n                break;\n        }\n        if (x !== undefined && y !== undefined) {\n            parent.notify('selection', { prop: 'calcShapeRatio', onPropertyChange: false,\n                value: { x: x, y: y, imgWidth: width, imgHeight: height } });\n            if (width === parent.img.destWidth && height === parent.img.destHeight) {\n                this.updatePoints();\n            }\n            actPoint = parent.activeObj.activePoint;\n        }\n        if (actPoint.startX < parent.img.destLeft) {\n            var diff = (parent.img.destLeft - actPoint.startX) + 7.5;\n            actPoint.startX += diff;\n            actPoint.endX += diff;\n        }\n        if (actPoint.startY < parent.img.destTop) {\n            var diff = (parent.img.destTop - actPoint.startY) + 7.5;\n            actPoint.startY += diff;\n            actPoint.endY += diff;\n        }\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n        this.adjToCenter();\n    };\n    Draw.prototype.adjToCenter = function () {\n        var parent = this.parent;\n        var diffX = ((parent.lowerCanvas.width) / 2) - (parent.activeObj.activePoint.endX -\n            parent.activeObj.activePoint.width / 2);\n        var diffY = ((parent.lowerCanvas.height) / 2) - (parent.activeObj.activePoint.endY -\n            parent.activeObj.activePoint.height / 2);\n        parent.activeObj.activePoint.startX += diffX;\n        parent.activeObj.activePoint.endX += diffX;\n        parent.activeObj.activePoint.startY += diffY;\n        parent.activeObj.activePoint.endY += diffY;\n        if (parent.activeObj.activePoint.startX < (parent.img.destLeft >= 7.5 ? parent.img.destLeft : 7.5)) {\n            var diff = ((parent.img.destLeft >= 7.5 ? parent.img.destLeft : 0) - parent.activeObj.activePoint.startX);\n            parent.activeObj.activePoint.startX += diff;\n            parent.activeObj.activePoint.endX += diff;\n        }\n        else if (parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth) {\n            var diff = (parent.activeObj.activePoint.endX - (parent.img.destLeft + parent.img.destWidth));\n            parent.activeObj.activePoint.startX -= diff;\n            parent.activeObj.activePoint.endX -= diff;\n        }\n        if (parent.activeObj.activePoint.startY < (parent.img.destTop >= 7.5 ? parent.img.destTop : 7.5)) {\n            var diff = ((parent.img.destTop >= 7.5 ? parent.img.destTop : 0) - parent.activeObj.activePoint.startY);\n            parent.activeObj.activePoint.startY += diff;\n            parent.activeObj.activePoint.endY += diff;\n        }\n        else if (parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n            var diff = (parent.activeObj.activePoint.endY - (parent.img.destTop + parent.img.destHeight));\n            parent.activeObj.activePoint.startY -= diff;\n            parent.activeObj.activePoint.endY -= diff;\n        }\n    };\n    Draw.prototype.updateActiveObject = function (actPoint, obj, isMouseMove, x, y) {\n        actPoint = actPoint ? actPoint : extend({}, this.parent.activeObj.activePoint, {}, true);\n        obj = obj ? obj : extend({}, this.parent.activeObj, {}, true);\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        x = x ? x : 0;\n        y = y ? y : 0;\n        var horCircleWidth = actPoint.width / 2;\n        var verCircleHeight = actPoint.height / 2;\n        var radius = 7.5;\n        obj.horTopLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.endX + x, endY: actPoint.endY + y };\n        obj.horBottomLine = { startX: actPoint.startX - x, startY: actPoint.endY - y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.verLeftLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.startX - y, endY: actPoint.endY - y };\n        obj.verRightLine = { startX: actPoint.endX + x, startY: actPoint.startY + y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.topLeftCircle = { startX: actPoint.startX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topRightCircle = { startX: actPoint.endX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerLeftCircle = { startX: actPoint.startX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerRightCircle = { startX: actPoint.endX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomLeftCircle = { startX: actPoint.startX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomRightCircle = { startX: actPoint.endX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        if (obj.rotatedAngle === 0) {\n            obj.rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                y: obj.bottomCenterCircle.startY + 25 };\n            obj.rotationCirclePoint.ratioX = (obj.rotationCirclePoint.x - this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.rotationCirclePoint.ratioY = (obj.rotationCirclePoint.y - this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        obj.activePoint = actPoint;\n        if (isNullOrUndefined(isMouseMove)) {\n            this.parent.activeObj = extend({}, obj, {}, true);\n        }\n    };\n    Draw.prototype.drawOuterSelection = function (canvasDraw, isCropCircle) {\n        var splitWords;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth = (0.5);\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        var tempObj = extend({}, parent.activeObj, {}, true);\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (((splitWords !== undefined && splitWords[0] === 'crop') || parent.activeObj.shape === undefined) && !isCropCircle) {\n            this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.25)';\n            this.upperContext.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n        }\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.fillStyle = parent.themeColl[parent.theme]['secondaryColor'];\n        var degree;\n        if (tempObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - tempObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'line') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else if (parent.activeObj.shape === 'path') {\n            canvasDraw.beginPath();\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            canvasDraw.moveTo(activeObj.pointColl[0].x, activeObj.pointColl[0].y);\n            if (activeObj.pointColl.length > 1) {\n                for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                    actPoint.endX = activeObj.pointColl[i].x;\n                    actPoint.endY = activeObj.pointColl[i].y;\n                    canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = activeObj;\n            }\n            canvasDraw.lineTo(actPoint.endX, actPoint.endY);\n            canvasDraw.stroke();\n        }\n        else {\n            canvasDraw.beginPath();\n            canvasDraw.rect(tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            if (parent.selectionSettings.showCircle) {\n                var strokeColor = canvasDraw.strokeStyle;\n                var fillColor = canvasDraw.fillStyle;\n                canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n                canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n                canvasDraw.lineWidth *= 2;\n                canvasDraw.beginPath();\n                canvasDraw.moveTo(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY);\n                canvasDraw.arc(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY, tempObj.topLeftCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY);\n                canvasDraw.arc(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY, tempObj.topRightCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY);\n                canvasDraw.arc(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY, tempObj.bottomLeftCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.moveTo(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY);\n                canvasDraw.arc(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY, tempObj.bottomRightCircle.radius, 0, 2 * Math.PI);\n                canvasDraw.stroke();\n                canvasDraw.fill();\n                canvasDraw.closePath();\n                canvasDraw.lineWidth /= 2;\n                canvasDraw.strokeStyle = strokeColor;\n                canvasDraw.fillStyle = fillColor;\n            }\n        }\n        if (parent.selectionSettings.showCircle && (splitWords === undefined || splitWords[0] !== 'crop')) {\n            var strokeColor = canvasDraw.strokeStyle;\n            var fillColor = canvasDraw.fillStyle;\n            canvasDraw.strokeStyle = parent.selectionSettings.strokeColor;\n            canvasDraw.fillStyle = parent.selectionSettings.fillColor;\n            if (parent.activeObj.shape === 'text') {\n                // Text rotation codes\n                // canvasDraw.lineWidth *= 2;\n                // canvasDraw.beginPath();\n                // this.drawRotationArcLine(canvasDraw);\n                // canvasDraw.lineTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n                // canvasDraw.stroke(); canvasDraw.fill(); canvasDraw.closePath();\n                // canvasDraw.beginPath();\n                // canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n                // canvasDraw.arc(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y,\n                //                parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                // canvasDraw.stroke();\n                // canvasDraw.fill();\n                // canvasDraw.closePath();\n                // canvasDraw.lineWidth /= 2;\n            }\n            else {\n                this.drawCenterCircles(canvasDraw);\n            }\n            canvasDraw.strokeStyle = strokeColor;\n            canvasDraw.fillStyle = fillColor;\n        }\n        tempObj.rotationCircleLine = parent.activeObj.rotationCircleLine;\n        parent.activeObj = extend({}, tempObj, {}, true);\n    };\n    Draw.prototype.drawArrowHead = function (canvasDraw, isStartHead) {\n        var headType = isStartHead ? this.parent.activeObj.start : this.parent.activeObj.end;\n        switch (headType) {\n            case 'arrowSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSolid(canvasDraw, true) : this.arrowSolid(canvasDraw, false);\n                break;\n            case 'arrow':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrow(canvasDraw, true) : this.arrow(canvasDraw, false);\n                break;\n            case 'circleSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircleSolid(canvasDraw, true) : this.arrowCircleSolid(canvasDraw, false);\n                break;\n            case 'circle':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowCircle(canvasDraw, true) : this.arrowCircle(canvasDraw, false);\n                break;\n            case 'bar':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowBar(canvasDraw, true) : this.arrowBar(canvasDraw, false);\n                break;\n            case 'square':\n            case 'squareSolid':\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                isStartHead ? this.arrowSquareStart(canvasDraw) : this.arrowSquareEnd(canvasDraw);\n                break;\n        }\n    };\n    Draw.prototype.drawShapeObj = function (canvas, shape, saveContext, isPreventSelection) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var currentShape = shape !== undefined ? shape : parent.currObjType.shape;\n        parent.currObjType.shape = currentShape;\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (saveContext) {\n            canvasDraw = saveContext;\n        }\n        if (parent.currObjType.shape.toLowerCase() === 'rectangle' || parent.currObjType.shape.toLowerCase() === 'ellipse'\n            || parent.currObjType.shape.toLowerCase() === 'line' || parent.activeObj.shape === 'arrow' ||\n            parent.activeObj.shape === 'path' || parent.activeObj.shape === 'image') {\n            parent.activeObj.shape = parent.currObjType.shape;\n        }\n        canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        if (shape === 'text' || shape === 'freehanddraw') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        }\n        else {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n        }\n        var horLineWidth = actPoint.width / 3;\n        var verLineHeight = actPoint.height / 3;\n        var selectionWidth = actPoint.endX - actPoint.startX;\n        var selectionHeight = actPoint.endY - actPoint.startY;\n        this.rotateContext('initial', canvasDraw);\n        var degree;\n        var tempFillStyle = canvasDraw.fillStyle;\n        var activeObj;\n        switch (parent.currObjType.shape.toLowerCase()) {\n            case 'rectangle':\n                this.drawSquareLines(canvasDraw);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'ellipse':\n                selectionWidth = Math.abs(selectionWidth);\n                selectionHeight = Math.abs(selectionHeight);\n                canvasDraw.beginPath();\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n                if (parent.activeObj.strokeSettings.fillColor !== '') {\n                    canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n                    canvasDraw.fill();\n                }\n                canvasDraw.ellipse(actPoint.startX + (selectionWidth / 2), actPoint.startY + (selectionHeight / 2), Math.abs((selectionWidth / 2) - (parent.activeObj.strokeSettings.strokeWidth)), Math.abs((selectionHeight / 2) - (parent.activeObj.strokeSettings.strokeWidth)), 0, 0, 2 * Math.PI, false);\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                canvasDraw.fill('evenodd');\n                canvasDraw.closePath();\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-circle':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.shapeCircle(canvasDraw, selectionWidth, selectionHeight);\n                break;\n            case 'line':\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'arrow':\n                if (parent.activeObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - parent.activeObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                canvasDraw.fillStyle = canvasDraw.strokeStyle;\n                if (isNullOrUndefined(parent.activeObj.triangleDirection)) {\n                    parent.activeObj.triangleDirection = 'right';\n                }\n                if (isNullOrUndefined(parent.activeObj.start)) {\n                    parent.activeObj.start = 'none';\n                }\n                if (isNullOrUndefined(parent.activeObj.end)) {\n                    parent.activeObj.end = 'arrowSolid';\n                }\n                this.drawArrowHead(canvasDraw, true);\n                this.drawArrowHead(canvasDraw, false);\n                if (parent.activeObj.end === 'none') {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                canvasDraw.fillStyle = tempFillStyle;\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'path':\n                activeObj = extend({}, parent.activeObj, {}, true);\n                if (activeObj.pointColl.length > 1) {\n                    var obj = { shape: null };\n                    parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n                    if (obj['shape'] === 'path') {\n                        var nextPoint = { x: 0, y: 0 };\n                        for (var i = 0, len = activeObj.pointColl.length; i < len; i++) {\n                            if (isNullOrUndefined(activeObj.pointColl[i + 1])) {\n                                nextPoint.x = activeObj.activePoint.endX;\n                                nextPoint.y = activeObj.activePoint.endY;\n                            }\n                            else {\n                                nextPoint.x = activeObj.pointColl[i + 1].x;\n                                nextPoint.y = activeObj.pointColl[i + 1].y;\n                            }\n                            actPoint.startX = activeObj.pointColl[i].x;\n                            actPoint.startY = activeObj.pointColl[i].y;\n                            actPoint.endX = nextPoint.x;\n                            actPoint.endY = nextPoint.y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                        }\n                    }\n                    else {\n                        for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                            actPoint.startX = activeObj.pointColl[i - 1].x;\n                            actPoint.startY = activeObj.pointColl[i - 1].y;\n                            actPoint.endX = activeObj.pointColl[i].x;\n                            actPoint.endY = activeObj.pointColl[i].y;\n                            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n                            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                        }\n                    }\n                    parent.activeObj = activeObj;\n                }\n                else {\n                    this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n                }\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'text':\n                this.shapeText(canvasDraw);\n                break;\n            case 'image':\n                this.shapeImage(canvasDraw);\n                if (isNullOrUndefined(isPreventSelection) && canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-square':\n            case 'crop-3:4':\n            case 'crop-4:3':\n            case 'crop-6:9':\n            case 'crop-9:6':\n            case 'crop-9:16':\n            case 'crop-16:9':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.drawSelection(horLineWidth, verLineHeight);\n                parent.currObjType.shape = '';\n                break;\n            default:\n                this.drawSelection(horLineWidth, verLineHeight);\n                break;\n        }\n        this.rotateContext('reverse', canvasDraw);\n    };\n    Draw.prototype.updatePoints = function () {\n        var parent = this.parent;\n        parent.activeObj.activePoint.startX += parent.img.destLeft;\n        parent.activeObj.activePoint.startY += parent.img.destTop;\n        parent.activeObj.activePoint.endX += parent.img.destLeft;\n        parent.activeObj.activePoint.endY += parent.img.destTop;\n        parent.activeObj = this.updateWidthHeight(parent.activeObj);\n    };\n    Draw.prototype.updateWidthHeight = function (obj) {\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        return obj;\n    };\n    Draw.prototype.drawCenterCircles = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        if (parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'line') {\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else if (parent.activeObj.shape === 'path') {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (activeObj.pointColl.length > 1) {\n                for (var i = 1, len = activeObj.pointColl.length; i < len; i++) {\n                    actPoint.startX = activeObj.pointColl[i - 1].x;\n                    actPoint.startY = activeObj.pointColl[i - 1].y;\n                    actPoint.endX = activeObj.pointColl[i].x;\n                    actPoint.endY = activeObj.pointColl[i].y;\n                    canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n                    canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n                    canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n                    canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n                }\n            }\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                parent.activeObj = activeObj;\n            }\n            canvasDraw.moveTo(actPoint.startX, actPoint.startY);\n            canvasDraw.arc(actPoint.startX, actPoint.startY, parent.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.moveTo(actPoint.endX, actPoint.endY);\n            canvasDraw.arc(actPoint.endX, actPoint.endY, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        }\n        else {\n            this.drawRotationArcLine(canvasDraw);\n            canvasDraw.lineTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n        }\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        if (parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'line' &&\n            parent.activeObj.shape !== 'path') {\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y);\n            canvasDraw.arc(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y, parent.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n        }\n        canvasDraw.lineWidth /= 2;\n    };\n    Draw.prototype.drawRotationArcLine = function (canvasDraw) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.activeObj.rotationCircleLine)) {\n            parent.activeObj.rotationCircleLine = 22.5;\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (parent.activeObj.flipObjColl) {\n            for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n                if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    isHorizontalflip = true;\n                }\n                else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    isVerticalflip = true;\n                }\n            }\n        }\n        switch (degree) {\n            case 0:\n            case 360:\n                if (isVerticalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.topCenterCircle.startX,\n                        y: parent.activeObj.topCenterCircle.startY - parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y + parent.activeObj.rotationCircleLine);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.bottomCenterCircle.startX,\n                        y: parent.activeObj.bottomCenterCircle.startY + parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y - parent.activeObj.rotationCircleLine);\n                }\n                break;\n            case 90:\n            case -270:\n                if (isHorizontalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerRightCircle.startX +\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x - parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerLeftCircle.startX -\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x + parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                break;\n            case 180:\n            case -180:\n                if (isVerticalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.bottomCenterCircle.startX,\n                        y: parent.activeObj.bottomCenterCircle.startY + parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y - parent.activeObj.rotationCircleLine);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.topCenterCircle.startX,\n                        y: parent.activeObj.topCenterCircle.startY - parent.activeObj.rotationCircleLine };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x, parent.activeObj.rotationCirclePoint.y + parent.activeObj.rotationCircleLine);\n                }\n                break;\n            case 270:\n            case -90:\n                if (isHorizontalflip) {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerLeftCircle.startX -\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x + parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                else {\n                    parent.activeObj.rotationCirclePoint = { x: parent.activeObj.centerRightCircle.startX +\n                            parent.activeObj.rotationCircleLine, y: parent.activeObj.centerLeftCircle.startY };\n                    canvasDraw.moveTo(parent.activeObj.rotationCirclePoint.x - parent.activeObj.rotationCircleLine, parent.activeObj.rotationCirclePoint.y);\n                }\n                break;\n        }\n    };\n    Draw.prototype.drawSquareLines = function (canvasDraw) {\n        var splitWords;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords[0] === 'crop') {\n            canvasDraw.strokeStyle = '#fff';\n        }\n        else {\n            canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        }\n        canvasDraw.beginPath();\n        canvasDraw.rect(actPoint.startX, actPoint.startY, actPoint.width, actPoint.height);\n        if (parent.activeObj.strokeSettings.fillColor !== '') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.fillColor;\n            canvasDraw.fill();\n        }\n        canvasDraw.rect(actPoint.startX + parent.activeObj.strokeSettings.strokeWidth, actPoint.startY + parent.activeObj.strokeSettings.strokeWidth, actPoint.width - (2 * parent.activeObj.strokeSettings.strokeWidth), actPoint.height - (2 * parent.activeObj.strokeSettings.strokeWidth));\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        canvasDraw.fill('evenodd');\n        canvasDraw.closePath();\n    };\n    Draw.prototype.drawSelection = function (horLineWidth, verLineHeight) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        this.upperContext.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        this.upperContext.beginPath();\n        parent.activeObj.horTopInnerLine = { startX: actPoint.startX, startY: actPoint.startY +\n                verLineHeight, endX: actPoint.endX, endY: actPoint.endY + verLineHeight };\n        parent.activeObj.horBottomInnerLine = { startX: actPoint.startX, startY: actPoint.startY + (2 * verLineHeight), endX: actPoint.endX, endY: actPoint.endY + (2 * verLineHeight) };\n        parent.activeObj.verLeftInnerLine = { startX: actPoint.startX + horLineWidth,\n            startY: actPoint.startY, endX: actPoint.startX + horLineWidth,\n            endY: actPoint.endY };\n        parent.activeObj.verRightInnerLine = { startX: actPoint.startX + (2 * horLineWidth),\n            startY: actPoint.startY, endX: actPoint.startX + (2 * horLineWidth),\n            endY: actPoint.endY };\n        this.upperContext.moveTo(parent.activeObj.horTopInnerLine.startX, parent.activeObj.horTopInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.horTopInnerLine.endX, parent.activeObj.horTopInnerLine.startY);\n        this.upperContext.moveTo(parent.activeObj.horBottomInnerLine.startX, parent.activeObj.horBottomInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.horBottomInnerLine.endX, parent.activeObj.horBottomInnerLine.startY);\n        this.upperContext.moveTo(parent.activeObj.verLeftInnerLine.startX, parent.activeObj.verLeftInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.verLeftInnerLine.endX, parent.activeObj.verLeftInnerLine.endY);\n        this.upperContext.moveTo(parent.activeObj.verRightInnerLine.startX, parent.activeObj.verRightInnerLine.startY);\n        this.upperContext.lineTo(parent.activeObj.verRightInnerLine.endX, parent.activeObj.verRightInnerLine.endY);\n        this.upperContext.stroke();\n        this.upperContext.closePath();\n    };\n    Draw.prototype.shapeCircle = function (canvasDraw, selectionWidth, selectionHeight) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.fillStyle = 'rgb(0, 0, 0, 0.25)';\n        canvasDraw.fillRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var tempWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (2);\n        canvasDraw.beginPath();\n        canvasDraw.ellipse(parent.activeObj.horTopLine.startX + (selectionWidth / 2), parent.activeObj.horTopLine.startY\n            + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        canvasDraw.save();\n        canvasDraw.beginPath();\n        canvasDraw.arc(((actPoint.endX - actPoint.startX) / 2) + actPoint.startX, ((actPoint.endY - actPoint.startY) / 2) + actPoint.startY, (actPoint.width / 2), 0, Math.PI * 2);\n        canvasDraw.closePath();\n        canvasDraw.clip();\n        canvasDraw.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        canvasDraw.restore();\n        canvasDraw.lineWidth = tempWidth;\n        this.drawOuterSelection(canvasDraw, true);\n        parent.currObjType.shape = '';\n    };\n    Draw.prototype.shapeLine = function (canvasDraw, x1, y1, x2, y2) {\n        var tempLineWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (this.parent.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(x1, y1);\n        canvasDraw.lineTo(x2, y2);\n        canvasDraw.stroke();\n        canvasDraw.lineWidth = tempLineWidth;\n    };\n    Draw.prototype.manipulateSaveCtx = function (canvasDraw, x, y) {\n        if (canvasDraw !== this.lowerContext && canvasDraw !== this.upperContext) {\n            var obj = { width: 0, height: 0 };\n            this.parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                value: { obj: obj, dimension: { width: canvasDraw.canvas.width, height: canvasDraw.canvas.height } } });\n            var ratio = obj;\n            if (x) {\n                x *= (ratio.width);\n            }\n            if (y) {\n                y *= (ratio.height);\n            }\n        }\n        return { x: x, y: y };\n    };\n    Draw.prototype.arrow = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        var x = this.arrowDimension['arrow']['width'];\n        var y = this.arrowDimension['arrow']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n        y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var angle = Math.atan2(this.dy, this.dx);\n        if ((start && (parent.activeObj.triangleDirection === 'left' || parent.activeObj.triangleDirection === 'right')\n            && (parent.activeObj.start === 'arrow' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'arrow' && parent.activeObj.end !== 'circle'\n                && parent.activeObj.end !== 'square')) ||\n            (!start && (parent.activeObj.end === 'arrow' && parent.activeObj.start === 'none'\n                || parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, -x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, -x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            this.shapeLine(canvasDraw, 0, 0, x, y / 2);\n            this.shapeLine(canvasDraw, 0, 0, x, -y / 2);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n        }\n    };\n    Draw.prototype.arrowSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x = this.arrowDimension['arrowSolid']['width'];\n        var y = this.arrowDimension['arrowSolid']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n        y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        if ((start && (parent.activeObj.start === 'arrowSolid' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'arrowSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n            (!start && (parent.activeObj.end === 'arrowSolid' && parent.activeObj.start === 'none'\n                || parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(parent.activeObj.strokeSettings.strokeWidth, 0);\n            canvasDraw.lineTo(-x + y / 2, y / 2);\n            canvasDraw.lineTo(-x + y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.beginPath();\n            canvasDraw.moveTo(0 - parent.activeObj.strokeSettings.strokeWidth, 0);\n            canvasDraw.lineTo(x - y / 2, y / 2);\n            canvasDraw.lineTo(x - y / 2, -y / 2);\n            canvasDraw.closePath();\n            canvasDraw.fill();\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowSquareStart = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((parent.activeObj.start === 'square' && parent.activeObj.end === 'none')\n            || (parent.activeObj.start === 'square' && parent.activeObj.end !== 'circle'\n                && parent.activeObj.start !== 'square') || (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'circleSolid')) {\n            this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n        }\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var x = this.arrowDimension['square']['width'];\n        var y = this.arrowDimension['square']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n        y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        if (parent.activeObj.triangleDirection === 'left') {\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.start === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            this.squareStartIntersectX1 = actPoint.endX - (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = actPoint.endY - (y / 2) * Math.sin(angle);\n            if (parent.activeObj.start === 'square' && parent.activeObj.end !== 'square'\n                && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'square' && parent.activeObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n        }\n        else if (parent.activeObj.triangleDirection === 'right') {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if (parent.activeObj.start === 'squareSolid' && parent.activeObj.end === 'squareSolid') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.start === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareStartIntersectX1 = actPoint.startX + (y / 2) * Math.cos(angle);\n            this.squareStartIntersectY1 = actPoint.startY + (y / 2) * Math.sin(angle);\n            if (parent.activeObj.start === 'square' && parent.activeObj.end !== 'square'\n                && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n            if (parent.activeObj.start === 'square' && parent.activeObj.end === 'circle') {\n                this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n    };\n    Draw.prototype.arrowSquareEnd = function (canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var x = this.arrowDimension['square']['width'];\n        var y = this.arrowDimension['square']['height'];\n        var point = this.manipulateSaveCtx(canvasDraw, x, y);\n        x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n        y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n        this.dx = actPoint.endX - actPoint.startX;\n        this.dy = actPoint.endY - actPoint.startY;\n        var angle = Math.atan2(this.dy, this.dx);\n        canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n        if (parent.activeObj.triangleDirection === 'right') {\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if (parent.activeObj.end === 'squareSolid' && parent.activeObj.start === 'none') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.end === 'squareSolid') {\n                canvasDraw.fillRect(-x + y / 2, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(-x + y / 2, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = actPoint.endX - (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = actPoint.endY - (y / 2) * Math.sin(angle);\n            if (parent.activeObj.end === 'square' && parent.activeObj.start !== 'square' && parent.activeObj.start !== 'circle'\n                && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'circle') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'square') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n        else if (parent.activeObj.triangleDirection === 'left') {\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            if (parent.activeObj.end === 'squareSolid') {\n                canvasDraw.fillRect(y / 2 - x, -y / 2, x, y);\n            }\n            canvasDraw.strokeRect(y / 2 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n            this.squareEndIntersectX1 = actPoint.startX + (y / 2) * Math.cos(angle);\n            this.squareEndIntersectY1 = actPoint.startY + (y / 2) * Math.sin(angle);\n            if (parent.activeObj.end === 'square' && parent.activeObj.start !== 'square' &&\n                parent.activeObj.start !== 'circle' && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.squareEndIntersectX1, this.squareEndIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'circle') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n            }\n            else if ((parent.activeObj.start === 'square') && parent.activeObj.end === 'square') {\n                this.shapeLine(canvasDraw, this.squareEndIntersectX1, this.squareEndIntersectY1, this.squareStartIntersectX1, this.squareStartIntersectY1);\n            }\n        }\n    };\n    Draw.prototype.arrowCircle = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.endX, actPoint.endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (actPoint.startX - actPoint.endX) + this.dy * (actPoint.startY - actPoint.endY));\n            var c = (actPoint.startX - actPoint.endX) *\n                (actPoint.startX - actPoint.endX) +\n                (actPoint.startY - actPoint.endY) *\n                    (actPoint.startY - actPoint.endY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = actPoint.startX + this.dx * t2;\n                var intersectionY1 = actPoint.startY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (parent.activeObj.start === 'circle' && parent.activeObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.startCircleIntersectX1, this.startCircleIntersectY1, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                    else if (parent.activeObj.start === 'circle' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    canvasDraw.stroke();\n                    canvasDraw.closePath();\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    if (parent.activeObj.end === 'circle' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.startX, actPoint.startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n            this.dx = actPoint.startX - actPoint.endX;\n            this.dy = actPoint.startY - actPoint.endY;\n            var a = this.dx * this.dx + this.dy * this.dy;\n            var b = 2 * (this.dx * (actPoint.endX - actPoint.startX) +\n                this.dy * (actPoint.endY - actPoint.startY));\n            var c = (actPoint.endX - actPoint.startX) *\n                (actPoint.endX - actPoint.startX) +\n                (actPoint.endY - actPoint.startY) *\n                    (actPoint.endY - actPoint.startY) - circleRadius * circleRadius;\n            var intersect = b * b - 4 * a * c;\n            if (intersect >= 0) {\n                canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                var t2 = (-b - Math.sqrt(intersect)) / (2 * a);\n                var intersectionX1 = actPoint.endX + this.dx * t2;\n                var intersectionY1 = actPoint.endY + this.dy * t2;\n                if (start) {\n                    this.startCircleIntersectX1 = intersectionX1;\n                    this.startCircleIntersectY1 = intersectionY1;\n                    if (parent.activeObj.start === 'circle' && parent.activeObj.end === 'circle') {\n                        this.shapeLine(canvasDraw, this.endCircleIntersectX1, this.endCircleIntersectY1, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                    else if (parent.activeObj.start === 'circle' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square') {\n                        this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.startCircleIntersectX1, this.startCircleIntersectY1);\n                    }\n                }\n                else {\n                    this.endCircleIntersectX1 = intersectionX1;\n                    this.endCircleIntersectY1 = intersectionY1;\n                    canvasDraw.beginPath();\n                    canvasDraw.fill();\n                    canvasDraw.beginPath();\n                    if (parent.activeObj.end === 'circle' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square')) {\n                        this.shapeLine(canvasDraw, actPoint.endX, actPoint.endY, this.endCircleIntersectX1, this.endCircleIntersectY1);\n                    }\n                }\n            }\n            var angle = Math.atan2(this.dy, this.dx);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.arrowCircleSolid = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'circleSolid' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'circleSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n                (!start && (parent.activeObj.end === 'circleSolid' && parent.activeObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.endX, actPoint.endY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            parent.activeObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'circleSolid' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'circleSolid' && parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square')) ||\n                !start && (parent.activeObj.end === 'circleSolid' && parent.activeObj.start === 'none')) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var circleRadius = this.arrowDimension['circle']['width'];\n            var point = this.manipulateSaveCtx(canvasDraw, circleRadius, null);\n            circleRadius = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            canvasDraw.save();\n            canvasDraw.beginPath();\n            canvasDraw.arc(actPoint.startX, actPoint.startY, circleRadius, 0, 2 * Math.PI);\n            canvasDraw.stroke();\n            canvasDraw.fill();\n            canvasDraw.closePath();\n            parent.activeObj.rotatedAngle = Math.atan2(this.dy, this.dx);\n        }\n    };\n    Draw.prototype.arrowBar = function (canvasDraw, start) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if ((start && parent.activeObj.triangleDirection === 'left') ||\n            (!start && parent.activeObj.triangleDirection === 'right')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'bar' && parent.activeObj.end === 'none') ||\n                (parent.activeObj.start === 'bar' && (parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square'))) ||\n                (!start && ((parent.activeObj.end === 'bar' && parent.activeObj.start === 'none') ||\n                    (parent.activeObj.end === 'bar' && (parent.activeObj.start !== 'circle' && parent.activeObj.start !== 'square'))))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var x = this.arrowDimension['bar']['width'];\n            var y = this.arrowDimension['bar']['height'];\n            var point = this.manipulateSaveCtx(canvasDraw, x, y);\n            x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(actPoint.endX, actPoint.endY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(-x + y / 4, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.endX, -actPoint.endY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n        else if ((start && parent.activeObj.triangleDirection === 'right') ||\n            (!start && parent.activeObj.triangleDirection === 'left')) {\n            canvasDraw.lineWidth = (parent.activeObj.strokeSettings.strokeWidth);\n            canvasDraw.beginPath();\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            if ((start && (parent.activeObj.start === 'bar' && parent.activeObj.end === 'none')\n                || (parent.activeObj.start === 'bar' && (parent.activeObj.end !== 'circle' && parent.activeObj.end !== 'square'))) ||\n                (!start && (parent.activeObj.end === 'bar' && parent.activeObj.start === 'none'))) {\n                this.shapeLine(canvasDraw, actPoint.startX, actPoint.startY, actPoint.endX, actPoint.endY);\n            }\n            var x = this.arrowDimension['bar']['width'];\n            var y = this.arrowDimension['bar']['height'];\n            var point = this.manipulateSaveCtx(canvasDraw, x, y);\n            x = point.x + parent.activeObj.strokeSettings.strokeWidth;\n            y = point.y + parent.activeObj.strokeSettings.strokeWidth;\n            this.dx = actPoint.endX - actPoint.startX;\n            this.dy = actPoint.endY - actPoint.startY;\n            var angle = Math.atan2(this.dy, this.dx);\n            canvasDraw.translate(actPoint.startX, actPoint.startY);\n            canvasDraw.rotate(angle);\n            canvasDraw.fillRect(y / 4 - x, -y / 2, x, y);\n            canvasDraw.rotate(-angle);\n            canvasDraw.translate(-actPoint.startX, -actPoint.startY);\n            parent.activeObj.rotatedAngle = angle;\n        }\n    };\n    Draw.prototype.shapeImage = function (canvasDraw) {\n        var parent = this.parent;\n        var actObj = extend({}, parent.activeObj);\n        var ctx = parent.activeObj.imageCanvas.getContext('2d');\n        if (canvasDraw === this.lowerContext && this.isImageApply) {\n            var dimObj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.activeObj.imageElement.width, height: parent.activeObj.imageElement.height, obj: dimObj, isImgShape: null } });\n            if (parent.activeObj.activePoint.width < (dimObj['width'] / 5) || parent.activeObj.activePoint.height < (dimObj['height'] / 5)) {\n                ctx.clearRect(0, 0, parent.activeObj.imageCanvas.width, parent.activeObj.imageCanvas.height);\n                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                    value: { ctx: ctx, isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('selection', { prop: 'setImageClarity', onPropertyChange: false, value: { bool: false } });\n                this.isImageApply = false;\n            }\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = parent.activeObj.activePoint.width;\n        imgPoint.height = parent.activeObj.activePoint.height;\n        if (parent.activeObj.flipObjColl.length === 4) {\n            parent.activeObj.flipObjColl = [];\n            parent.activeObj.shapeFlip = '';\n        }\n        imgPoint.startX = ((parent.activeObj.activePoint.width - imgPoint.width) / 2) + parent.activeObj.activePoint.startX;\n        imgPoint.startY = ((parent.activeObj.activePoint.height - imgPoint.height) / 2) + parent.activeObj.activePoint.startY;\n        var temp = canvasDraw.globalAlpha;\n        canvasDraw.globalAlpha = parent.activeObj.imageTransparency;\n        if (actObj.rotateFlipColl && actObj.rotateFlipColl.length > 0) {\n            this.rotateImage(canvasDraw);\n        }\n        else {\n            canvasDraw.drawImage(parent.activeObj.imageCanvas, imgPoint.startX, imgPoint.startY, imgPoint.width, imgPoint.height);\n        }\n        canvasDraw.globalAlpha = temp;\n        parent.currObjType.isText = false;\n    };\n    Draw.prototype.shapeText = function (canvasDraw) {\n        var filter = canvasDraw.filter;\n        canvasDraw.filter = 'none';\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var actObj = extend({}, parent.activeObj);\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n        var lineHeight = ((height * rows.length) - (parent.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            var yPoint = ((i + 1) * parent.activeObj.textSettings.fontSize * 0.85) + (i * lineHeight);\n            if (parent.transform.degree === -360) {\n                parent.transform.degree = 0;\n            }\n            if (parent.transform.degree === 0 || parent.transform.degree === 180) {\n                if (parent.activeObj.textSettings.fontSize > actPoint.height) {\n                    parent.activeObj.textSettings.fontSize = actPoint.height -\n                        (actPoint.height * 0.1);\n                }\n            }\n            else {\n                if (parent.activeObj.textSettings.fontSize > actPoint.width) {\n                    parent.activeObj.textSettings.fontSize = actPoint.width -\n                        (actPoint.width * 0.1);\n                }\n            }\n            canvasDraw.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n            canvasDraw.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n            var textStyle = '';\n            if (parent.activeObj.textSettings.bold) {\n                textStyle = 'bold ';\n            }\n            if (parent.activeObj.textSettings.italic) {\n                textStyle = 'italic ';\n            }\n            if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                textStyle = 'italic bold ';\n            }\n            canvasDraw.font = textStyle + parent.activeObj.textSettings.fontSize + 'px' + ' ' +\n                parent.activeObj.textSettings.fontFamily;\n            if (parent.activeObj.flipObjColl.length === 4) {\n                parent.activeObj.flipObjColl = [];\n                parent.activeObj.shapeFlip = '';\n            }\n            if (actObj.rotateFlipColl && actObj.rotateFlipColl.length > 0) {\n                this.rotateText(canvasDraw);\n            }\n            else {\n                canvasDraw.fillText(text, actPoint.startX + parent.activeObj.textSettings.fontSize * 0.1, actPoint.startY + yPoint);\n            }\n        }\n        canvasDraw.filter = filter;\n        parent.currObjType.isText = false;\n    };\n    Draw.prototype.updateActPoint = function (degree, canvasDraw) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        if (degree.toLowerCase() === 'horizontal') {\n            if (actPoint.startX <= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width / 2 + ((canvasDraw.canvas.width / 2) -\n                    actPoint.endX);\n                actPoint.endX = actPoint.startX +\n                    actPoint.width;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n            else if (actPoint.startX >= canvasDraw.canvas.width / 2) {\n                actPoint.startX = canvasDraw.canvas.width - actPoint.endX;\n                actPoint.endX = actPoint.startX +\n                    actPoint.width;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n        }\n        else if (degree.toLowerCase() === 'vertical') {\n            if (actPoint.startY <= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height / 2 + ((canvasDraw.canvas.height / 2) - actPoint.endY);\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n            else if (actPoint.startY >= canvasDraw.canvas.height / 2) {\n                actPoint.startY = canvasDraw.canvas.height - actPoint.endY;\n                actPoint.endY = actPoint.startY + actPoint.height;\n                this.updateActiveObject(actPoint, parent.activeObj);\n            }\n        }\n        return actPoint;\n    };\n    Draw.prototype.rotateImage = function (canvasDraw) {\n        var parent = this.parent;\n        var degree;\n        var actObj = parent.activeObj;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree === -450) {\n            degree = -90;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = degree % 90 === 0 && degree % 180 !== 0 ? parent.activeObj.activePoint.height : parent.activeObj.activePoint.width;\n        imgPoint.height = degree % 90 === 0 && degree % 180 !== 0 ? parent.activeObj.activePoint.width :\n            parent.activeObj.activePoint.height;\n        imgPoint.startX = parent.activeObj.activePoint.startX;\n        imgPoint.startY = parent.activeObj.activePoint.startY;\n        var startX = imgPoint.startX;\n        var startY = imgPoint.startY;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var tempDegree;\n        var tempColl = [];\n        canvasDraw.save();\n        for (var i = 0, len = actObj.rotateFlipColl.length; i < len; i++) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var coll = actObj.rotateFlipColl[i];\n            tempColl.push(coll);\n            if (typeof (coll) === 'number') {\n                if (actObj.shapeDegree === 0) {\n                    tempDegree = coll;\n                }\n                else {\n                    tempDegree = coll - actObj.shapeDegree;\n                }\n                if (tempDegree === -450) {\n                    tempDegree = -90;\n                }\n                if (tempDegree < 0) {\n                    tempDegree = 360 + tempDegree;\n                }\n                imgPoint.width = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.height : actObj.activePoint.width;\n                imgPoint.height = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.width :\n                    actObj.activePoint.height;\n                canvasDraw.translate(canvasDraw.canvas.width / 2, canvasDraw.canvas.height / 2);\n                canvasDraw.rotate(Math.PI / 180 * coll);\n                canvasDraw.translate(-canvasDraw.canvas.height / 2, -canvasDraw.canvas.width / 2);\n                if (tempDegree % 90 === 0 && tempDegree % 270 !== 0) {\n                    startY = canvasDraw.canvas.width - (actObj.activePoint.startX + actObj.activePoint.width);\n                    startY += ((actObj.activePoint.width - imgPoint.height) / 2);\n                    startX = imgPoint.startY;\n                }\n                else if (tempDegree % 270 === 0) {\n                    startX = canvasDraw.canvas.height - (actObj.activePoint.startY + actObj.activePoint.height);\n                    startX += ((actObj.activePoint.height - imgPoint.width) / 2);\n                    startY = imgPoint.startX;\n                }\n                imgPoint.startX = startX;\n                imgPoint.startY = startY;\n                actObj.activePoint.startX = startX;\n                actObj.activePoint.startY = startY;\n                actObj.activePoint.endX = actObj.activePoint.startX + imgPoint.width;\n                actObj.activePoint.endY = actObj.activePoint.startY + imgPoint.height;\n                actObj = this.updateWidthHeight(actObj);\n            }\n            else {\n                if (coll === 'horizontal' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'vertical';\n                }\n                else if (coll === 'vertical' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'horizontal';\n                }\n                if (coll === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    actObj.activePoint = this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (coll === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    actObj.activePoint = this.updateActPoint('vertical', canvasDraw);\n                }\n                imgPoint.startX = actObj.activePoint.startX;\n                imgPoint.startY = actObj.activePoint.startY;\n            }\n            imgPoint.startX = actObj.activePoint.startX;\n            imgPoint.startY = actObj.activePoint.startY;\n            startX = imgPoint.startX;\n            startY = imgPoint.startY;\n        }\n        if (actObj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false, value: { obj: actObj } });\n        }\n        canvasDraw.drawImage(actObj.imageCanvas, imgPoint.startX, imgPoint.startY, imgPoint.width, imgPoint.height);\n        canvasDraw.restore();\n        parent.activeObj = tempActiveObj;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Draw.prototype.rotateText = function (canvasDraw) {\n        var parent = this.parent;\n        var degree;\n        var actObj = parent.activeObj;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree === -450) {\n            degree = -90;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        var imgPoint = { startX: 0, startY: 0, width: 0, height: 0 };\n        imgPoint.width = degree % 90 === 0 && degree % 180 !== 0 ? actObj.activePoint.height : actObj.activePoint.width;\n        imgPoint.height = degree % 90 === 0 && degree % 180 !== 0 ? actObj.activePoint.width :\n            actObj.activePoint.height;\n        imgPoint.startX = actObj.activePoint.startX;\n        imgPoint.startY = actObj.activePoint.startY;\n        var startX = imgPoint.startX;\n        var startY = imgPoint.startY;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var tempDegree;\n        var tempColl = [];\n        canvasDraw.save();\n        for (var i = 0, len = actObj.rotateFlipColl.length; i < len; i++) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var coll = actObj.rotateFlipColl[i];\n            tempColl.push(coll);\n            if (typeof (coll) === 'number') {\n                if (actObj.shapeDegree === 0) {\n                    tempDegree = coll;\n                }\n                else {\n                    tempDegree = coll - actObj.shapeDegree;\n                }\n                if (tempDegree === -450) {\n                    tempDegree = -90;\n                }\n                if (tempDegree < 0) {\n                    tempDegree = 360 + tempDegree;\n                }\n                imgPoint.width = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.height : actObj.activePoint.width;\n                imgPoint.height = tempDegree % 90 === 0 && tempDegree % 180 !== 0 ? actObj.activePoint.width :\n                    actObj.activePoint.height;\n                canvasDraw.translate(canvasDraw.canvas.width / 2, canvasDraw.canvas.height / 2);\n                canvasDraw.rotate(Math.PI / 180 * coll);\n                canvasDraw.translate(-canvasDraw.canvas.height / 2, -canvasDraw.canvas.width / 2);\n                if (tempDegree % 90 === 0 && tempDegree % 270 !== 0) {\n                    startY = (parent.lowerCanvas.width - actObj.activePoint.endX);\n                    startX = actObj.activePoint.startY;\n                }\n                else if (tempDegree % 270 === 0) {\n                    startX = parent.lowerCanvas.height - actObj.activePoint.endY;\n                    startY = actObj.activePoint.startX;\n                }\n                imgPoint.startX = startX;\n                imgPoint.startY = startY;\n                actObj.activePoint.startX = startX;\n                actObj.activePoint.startY = startY;\n                actObj.activePoint.endX = actObj.activePoint.startX + imgPoint.width;\n                actObj.activePoint.endY = actObj.activePoint.startY + imgPoint.height;\n                actObj = this.updateWidthHeight(actObj);\n            }\n            else {\n                if (coll === 'horizontal' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'vertical';\n                }\n                else if (coll === 'vertical' && degree % 90 === 0 && degree % 180 !== 0) {\n                    coll = 'horizontal';\n                }\n                if (coll === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    actObj.activePoint = this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (coll === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    actObj.activePoint = this.updateActPoint('vertical', canvasDraw);\n                }\n                imgPoint.startX = actObj.activePoint.startX;\n                imgPoint.startY = actObj.activePoint.startY;\n            }\n            imgPoint.startX = actObj.activePoint.startX;\n            imgPoint.startY = actObj.activePoint.startY;\n            startX = imgPoint.startX;\n            startY = imgPoint.startY;\n        }\n        if (actObj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false, value: { obj: actObj } });\n        }\n        startY += actObj.textSettings.fontSize * 0.4;\n        this.textFlipDegree(canvasDraw, startX, startY);\n        canvasDraw.restore();\n        parent.activeObj = tempActiveObj;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Draw.prototype.textFlipDegree = function (canvasDraw, startX, startY) {\n        var parent = this.parent;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var height = parent.activeObj.textSettings.fontSize;\n        var lineHeight = ((height * rows.length) - (parent.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        var yPoint = (parent.activeObj.textSettings.fontSize * 0.85) + lineHeight;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            if (i > 0) {\n                if (i === 1) {\n                    yPoint -= (parent.activeObj.textSettings.fontSize * 0.85);\n                }\n                yPoint += parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.15;\n            }\n            canvasDraw.fillText(text, startX + parent.activeObj.textSettings.fontSize * 0.15, startY +\n                yPoint + (i > 0 ? parent.activeObj.textSettings.fontSize * 0.25 : -parent.activeObj.textSettings.fontSize * 0.35));\n        }\n    };\n    Draw.prototype.clearOuterCanvas = function (context) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        if (parent.img.destWidth < parent.lowerCanvas.width) {\n            var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n            context.clearRect(0, 0, left, parent.lowerCanvas.height);\n            context.clearRect(parent.img.destLeft + parent.img.destWidth, 0, left, parent.lowerCanvas.height);\n        }\n        if (parent.img.destHeight < parent.lowerCanvas.height) {\n            var top_1 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n            context.clearRect(0, 0, parent.lowerCanvas.width, top_1);\n            context.clearRect(0, parent.img.destTop + parent.img.destHeight, parent.lowerCanvas.width, top_1);\n        }\n        if (parent.transform.currFlipState !== '') {\n            parent.img.destLeft = destLeft;\n            parent.img.destTop = destTop;\n        }\n    };\n    Draw.prototype.setDestPoints = function () {\n        var maxDimension;\n        var parent = this.parent;\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcHeight, height: parent.img.srcWidth, obj: obj, isImgShape: null } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n                parent.img.destWidth = maxDimension.height;\n                parent.img.destHeight = maxDimension.width;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.height) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.width) / 2;\n            parent.img.destWidth = maxDimension.height;\n            parent.img.destHeight = maxDimension.width;\n        }\n        else {\n            var obj = { width: 0, height: 0 };\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n            maxDimension = obj;\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n                parent.img.destWidth = maxDimension.width;\n                parent.img.destHeight = maxDimension.height;\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            parent.img.destWidth = maxDimension.width;\n            parent.img.destHeight = maxDimension.height;\n        }\n    };\n    Draw.prototype.updateCurrTransState = function (type, isPreventDestination, isRotatePan) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        if (type === 'initial') {\n            this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n            if (isNullOrUndefined(isPreventDestination)) {\n                this.setDestPoints();\n            }\n        }\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            this.currTransState(type, true, null, isRotatePan);\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n            }\n            if (isRotatePan) {\n                parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop +=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            if (isRotatePan) {\n                parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                parent.img.destTop -=\n                    parent.panPoint.totalPannedClientPoint.y;\n            }\n        }\n        else {\n            this.currTransState(type, null, null, isRotatePan);\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n            }\n        }\n    };\n    Draw.prototype.currTransState = function (type, isPreventDimension, context, isPreventCircleCrop) {\n        var parent = this.parent;\n        context = context ? context : this.lowerContext;\n        if (type === 'initial') {\n            this.setTransformColl(context, type);\n        }\n        else if (type === 'reverse') {\n            this.setTransformColl(context, type);\n            this.setClientTransDim(isPreventDimension);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle'\n                && isNullOrUndefined(isPreventCircleCrop))) {\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n                }\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                if (isPreventCircleCrop) {\n                    parent.img.destLeft -= parent.panPoint.totalPannedClientPoint.x;\n                    parent.img.destTop -= parent.panPoint.totalPannedClientPoint.y;\n                }\n            }\n        }\n    };\n    Draw.prototype.setTransformColl = function (context, type) {\n        var parent = this.parent;\n        if (type === 'initial') {\n            for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n                this.setTransform(context, parent.rotateFlipColl[i]);\n            }\n        }\n        else if (type === 'reverse') {\n            for (var i = parent.rotateFlipColl.length - 1; i >= 0; i--) {\n                this.setTransform(context, parent.rotateFlipColl[i], true);\n            }\n        }\n    };\n    Draw.prototype.setTransform = function (context, value, isReverse) {\n        var parent = this.parent;\n        if (isReverse && value === 90) {\n            value = -90;\n        }\n        else if (isReverse && value === -90) {\n            value = 90;\n        }\n        if (value === 'horizontal' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'vertical';\n        }\n        else if (value === 'vertical' && parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            value = 'horizontal';\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: true } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: true } });\n        if (isNullOrUndefined(isReverse)) {\n            context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        }\n        switch (value) {\n            case 90:\n            case -90:\n                context.translate(context.canvas.width / 2, context.canvas.height / 2);\n                context.rotate(Math.PI / 180 * value);\n                context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\n                break;\n            case 'horizontal':\n                context.translate(context.canvas.width, 0);\n                context.scale(-1, 1);\n                break;\n            case 'vertical':\n                context.translate(0, context.canvas.height);\n                context.scale(1, -1);\n                break;\n        }\n        parent.notify('transform', { prop: 'setReverseRotate', onPropertyChange: false, value: { bool: false } });\n        parent.notify('transform', { prop: 'setReverseFlip', onPropertyChange: false, value: { isReverseFlip: false } });\n    };\n    Draw.prototype.drawImgToCanvas = function (maxDimension) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.img.destWidth = maxDimension.width;\n        parent.img.destHeight = maxDimension.height;\n        if (this.isInitialLoading) {\n            parent.notify('filter', { prop: 'initFilter', onPropertyChange: false });\n            this.isInitialLoading = false;\n        }\n        var temp = this.lowerContext.filter;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.drawImage();\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.renderImage = function (isMouseWheel, isPreventClearRect, isFrame) {\n        var parent = this.parent;\n        var temp = this.lowerContext.filter;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        if (isNullOrUndefined(isPreventClearRect)) {\n            this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        }\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        else {\n            if (parent.transform.zoomFactor !== 0) {\n                this.isRotateZoom = true;\n            }\n            this.updateCurrTransState('initial');\n        }\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.drawImage();\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        if (isMouseWheel) {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        else {\n            this.updateCurrTransState('reverse');\n            this.isRotateZoom = false;\n        }\n        this.lowerContext.filter = 'none';\n        if (isFrame) {\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        else {\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        this.lowerContext.filter = temp;\n        this.clearOuterCanvas(this.lowerContext);\n        if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n    };\n    Draw.prototype.imageOnLoad = function (src) {\n        var _this = this;\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        parent.baseImg.src = src;\n        parent.baseImg.onload = function () {\n            parent.notify('filter', { prop: 'update-finetunes', onPropertyChange: false });\n            proxy.lowerContext.drawImage(parent.baseImg, 0, 0, proxy.parent.lowerCanvas.width, proxy.parent.lowerCanvas.height);\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            proxy.updateBaseImgCanvas();\n            proxy.updateCanvas();\n            if (parent.currObjType.isUndoZoom) {\n                parent.currObjType.isUndoZoom = false;\n                proxy.parent.lowerCanvas.style.display = 'block';\n            }\n            parent.isUndoRedo = _this.isErrorImage = false;\n            if (!isBlazor()) {\n                if (Browser.isDevice) {\n                    parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                    parent.notify('toolbar', { prop: 'destroy-bottom-toolbar', onPropertyChange: false });\n                    var eventargs = { isApplyBtn: false, isDevice: Browser.isDevice, isOkBtn: null };\n                    parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n                    parent.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                    var eventargs = { isApplyBtn: false, isDevice: false, isOkBtn: null };\n                    parent.notify('toolbar', { prop: 'init-main-toolbar', onPropertyChange: false, value: eventargs });\n                }\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded', 'initial');\n                if (Browser.isDevice) {\n                    parent.element.querySelector('.e-bottom-toolbar-area').style.display = 'block';\n                    parent.element.querySelector('.e-canvas-wrapper').style.height = (parent.element.offsetHeight\n                        - parent.toolbarHeight * 2) - 3 + 'px';\n                }\n            }\n        };\n        parent.baseImg.onerror = function () {\n            hideSpinner(parent.element);\n            // proxy.reset();\n            // proxy.parent.baseImg.src = proxy.baseImgSrc;\n            proxy.isErrorImage = true;\n            proxy.errorLoading();\n        };\n    };\n    Draw.prototype.errorLoading = function () {\n        var parent = this.parent;\n        var fileOpened = { fileName: null, fileType: null, isValidImage: false };\n        if (isBlazor() && parent.events && parent.events.fileOpened.hasDelegate === true) {\n            parent.dotNetRef.invokeMethodAsync('FileOpenEventAsync', 'FileOpened', fileOpened);\n        }\n        else {\n            parent.trigger('fileOpened', fileOpened);\n        }\n    };\n    Draw.prototype.updateBaseImgCanvas = function () {\n        var parent = this.parent;\n        parent.baseImgCanvas.width = parent.baseImg.width;\n        parent.baseImgCanvas.height = parent.baseImg.height;\n        parent.baseImgCanvas.getContext('2d').drawImage(parent.baseImg, 0, 0);\n    };\n    Draw.prototype.updateCanvas = function () {\n        var parent = this.parent;\n        var fileOpened = { fileName: this.fileName, fileType: this.fileType, isValidImage: true };\n        parent.img.srcWidth = parent.baseImgCanvas.width;\n        parent.img.srcHeight = parent.baseImgCanvas.height;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n        parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        this.drawImgToCanvas(maxDimension);\n        this.origDim.width = parent.img.destWidth;\n        this.origDim.height = parent.img.destHeight;\n        this.zoomCrop.width = parent.img.destWidth;\n        this.zoomCrop.height = parent.img.destHeight;\n        parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n            value: { width: parent.img.destWidth, height: parent.img.destHeight } });\n        var point = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        parent.notify('crop', { prop: 'setCropDestPoints', onPropertyChange: false, value: { point: point } });\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = temp;\n        if (parent.img.destWidth > 0 && parent.img.destHeight > 0) {\n            parent.isImageLoaded = true;\n        }\n        if (parent.isUndoRedo) {\n            if (parent.transform.currFlipState !== '') {\n                parent.notify('transform', { prop: 'flipImage', onPropertyChange: false,\n                    value: { direction: parent.toPascalCase(parent.transform.currFlipState) } });\n            }\n        }\n        if (parent.disabled) {\n            parent.element.setAttribute('class', 'e-disabled');\n        }\n        if (parent.isImageLoaded && parent.element.style.opacity !== '0.5') {\n            if (isBlazor() && parent.events && parent.events.fileOpened.hasDelegate === true) {\n                parent.dotNetRef.invokeMethodAsync('FileOpenEventAsync', 'FileOpened', fileOpened);\n            }\n            else {\n                parent.trigger('fileOpened', fileOpened);\n            }\n        }\n        if (parent.zoomSettings.zoomFactor !== 1 || parent.zoomSettings.zoomPoint) {\n            parent.zoom(parent.zoomSettings.zoomFactor, parent.zoomSettings.zoomPoint);\n        }\n        if (isNullOrUndefined(this.initZoomValue)) {\n            this.initZoomValue = parent.zoomSettings.zoomFactor;\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.resetFrameZoom = function () {\n        var parent = this.parent;\n        if (!isNullOrUndefined(parent.tempFrameZoomLevel)) {\n            var temp = parent.tempFrameZoomLevel;\n            parent.tempFrameZoomLevel = null;\n            parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: temp, zoomPoint: null, isResize: true } });\n        }\n    };\n    Draw.prototype.performCancel = function (isContextualToolbar) {\n        var parent = this.parent;\n        isContextualToolbar = isContextualToolbar ? isContextualToolbar : false;\n        var obj = { bool: false };\n        parent.allowDownScale = true;\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (JSON.stringify(parent.frameObj) !== JSON.stringify(parent.tempFrameObj)) {\n            extend(parent.frameObj, parent.tempFrameObj);\n            this.renderImage(null, null, true);\n        }\n        this.resetFrameZoom();\n        if (obj['bool']) {\n            parent.notify('freehand-draw', { prop: 'cancelFhd', onPropertyChange: false });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        else if (parent.textArea.style.display === 'block') {\n            parent.textArea.style.display = 'none';\n            parent.textArea.value = '';\n            parent.textArea.style.transform = '';\n            if (this.prevActObj) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.activeObj.strokeSettings = this.tempStrokeSettings;\n                parent.activeObj.textSettings = this.tempTextSettings;\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n            if (this.isShapeTextInserted) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n        }\n        else if ((!isBlazor() && document.querySelector('#' + parent.element.id + '_sliderWrapper')) || (isBlazor() && !parent.element.querySelector('.e-ie-contextual-slider').classList.contains('e-hidden')) ||\n            parent.currObjType.isFiltered) {\n            this.lowerContext.filter = this.tempAdjValue;\n            parent.canvasFilter = this.tempAdjValue;\n            parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.tempAdjValue } });\n            parent.initialAdjustmentValue = this.tempAdjValue;\n            if (this.lowerContext.filter.split(' ').length > 1 &&\n                this.lowerContext.filter.split(' ')[0].split('(')[1].split(')')[0] === '1') {\n                parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: false } });\n            }\n            parent.currentFilter = this.tempFilter;\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.redrawImgWithObj();\n            parent.currObjType.isFiltered = false;\n            var obj_3 = { tempAdjustmentLevel: null };\n            parent.notify('filter', { prop: 'getTempAdjustmentLevel', onPropertyChange: false, value: { obj: obj_3 } });\n            parent.notify('filter', { prop: 'setAdjustmentLevel', onPropertyChange: false,\n                value: { adjustmentLevel: extend({}, obj_3['tempAdjustmentLevel'], {}, true) } });\n            parent.notify('undo-redo', { prop: 'setUndoRedoStep', onPropertyChange: false, value: { step: this.tempUndoRedoStep } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.isCustomCrop = false;\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.clearOuterCanvas(this.lowerContext);\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n            if (!isBlazor()) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        else {\n            if (isContextualToolbar) {\n                var eventargs = { type: 'main', isApplyBtn: null, isCropping: null, isZooming: null };\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            else {\n                this.cancelItems();\n                if (parent.transform.zoomFactor > 0) {\n                    parent.togglePan = true;\n                    parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n                }\n                else {\n                    parent.togglePan = false;\n                    parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n                }\n            }\n        }\n        this.isShapeTextInserted = false;\n        this.isNewPath = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n            parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n        }\n    };\n    Draw.prototype.cancelItems = function () {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var ascpectIcon = this.parent.element.querySelector('#' + this.parent.element.id + '_aspectratio');\n        var nonAspectIcon = this.parent.element.querySelector('#' + this.parent.element.id + '_nonaspectratio');\n        var splitWords;\n        var shapes = ['rectangle', 'ellipse', 'line', 'arrow', 'path', 'image'];\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection && parent.isCropTab) {\n            parent.isCropTab = false;\n            parent.transform.zoomFactor = parent.transform.defaultZoomFactor;\n        }\n        if (parent.isResize) {\n            if (ascpectIcon || nonAspectIcon || parent.currentToolbar == \"resize-toolbar\") {\n                var obj = { width: null, height: null };\n                parent.notify('selection', { prop: 'getNumTextValue', onPropertyChange: false, value: { obj: obj } });\n                var point = { x: obj['width'], y: obj['height'] };\n                var aspectRatioElement = this.parent.element.querySelector('#' + this.parent.element.id + '_aspectratio');\n                var blrAspRatElem = this.parent.element.querySelector(\".e-ie-toolbar-aspect-ratio-btn\");\n                if (point && point.x && point.y && !isNullOrUndefined(this.parent.aspectWidth)) {\n                    if (aspectRatioElement || (blrAspRatElem && !blrAspRatElem.classList.contains(\"e-hidden\"))) {\n                        parent.notify('transform', { prop: 'resizeImage', value: { width: parent.aspectWidth, height: parent.aspectHeight } });\n                    }\n                    else {\n                        var bool = parent.currObjType.isUndoAction;\n                        parent.currObjType.isUndoAction = false;\n                        parent.notify('transform', { prop: 'resizeCrop', value: { width: parent.aspectWidth, height: parent.aspectHeight } });\n                        parent.currObjType.isUndoAction = bool;\n                    }\n                }\n                var obj1 = { prevCropObj: parent.prevCropObj };\n                var obj2 = { prevObj: parent.prevObj };\n                this.parent.notify('toolbar', { prop: 'getPrevCropObj', onPropertyChange: false, value: { obj: obj1 } });\n                this.parent.notify('toolbar', { prop: 'getPrevObj', onPropertyChange: false, value: { obj: obj2 } });\n                if (obj1['prevCropObj'] && obj2['prevObj']) {\n                    parent.objColl = [];\n                    parent.pointColl = [];\n                    parent.freehandCounter = 0;\n                    parent.cropObj = extend({}, obj1['prevCropObj'], {}, true);\n                    this.setCurrentObj(obj2['prevObj']);\n                    parent.objColl = obj2['prevObj']['objColl'];\n                    parent.pointColl = obj2['prevObj']['pointColl'];\n                    parent.freehandCounter = parent.pointColl.length;\n                    parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                    parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                    var currObj = parent.currSelectionPoint ?\n                        extend({}, parent.currSelectionPoint, {}, true) : null;\n                    this.parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -this.parent.transform.zoomFactor, zoomPoint: null, isResize: true } });\n                    this.parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: obj2['prevObj']['defaultZoom'], zoomPoint: null, isResize: true } });\n                    parent.currSelectionPoint = currObj;\n                    if (obj2['prevObj'].zoomFactor) {\n                        parent.setProperties({ zoomSettings: { zoomFactor: obj2['prevObj'].zoomFactor } }, true);\n                    }\n                    parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                        value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                }\n                parent.isResize = false;\n                parent.notify('transform', { prop: 'setResizedImgAngle', onPropertyChange: false, value: { angle: null } });\n            }\n        }\n        if (parent.togglePen) {\n            this.cancelPen();\n        }\n        else if (parent.activeObj.shape === 'text') {\n            this.cancelText(isCropSelection);\n        }\n        else if (shapes.indexOf(parent.activeObj.shape) !== -1) {\n            this.cancelShape();\n        }\n        else if (isCropSelection) {\n            this.cancelSelection();\n        }\n        else {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        }\n        parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        parent.currObjType.isCustomCrop = false;\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    Draw.prototype.cancelPen = function () {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.togglePen = false;\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        // eslint-disable-next-line\n        var tempPointsColl = extend([], parent.pointColl, [], true);\n        parent.pointColl = {};\n        for (var i = 0; i < this.tempFreehandCounter; i++) {\n            parent.pointColl[i] = tempPointsColl[i];\n        }\n        parent.freehandCounter = this.tempFreehandCounter;\n        parent.notify('freehand-draw', { prop: 'setCurrentFreehandDrawIndex', value: { value: this.tempCurrFhdIndex } });\n        parent.activeObj.strokeSettings = this.tempStrokeSettings;\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: parent.activeObj.strokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n        parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n    };\n    Draw.prototype.cancelText = function (isCropSelection) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n            value: { textSettings: this.tempTextSettings, fontFamily: null, fontSize: null } });\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var len = object['appliedUndoRedoColl'].length;\n            if (this.prevActObj && object['appliedUndoRedoColl'][len - 1] &&\n                object['appliedUndoRedoColl'][len - 1].currentObjColl[object['appliedUndoRedoColl'][len - 1].currentObjColl.length - 1].currIndex\n                    === this.prevActObj.currIndex) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (parent.activeObj.shape && parent.activeObj.keyHistory === 'Enter Text') {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('shape', { prop: 'draw-shape-text' });\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            }\n            else if (parent.activeObj.shape) {\n                parent.notify('shape', { prop: 'redraw-text' });\n                parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false, value: { obj: parent.activeObj } });\n                if (!isCropSelection && parent.activeObj.topLeftCircle !== undefined) {\n                    parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n                }\n                parent.clearSelection();\n            }\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false,\n            italic: false, underline: false };\n    };\n    Draw.prototype.cancelShape = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: this.tempStrokeSettings, strokeColor: null, fillColor: null, strokeWidth: null } });\n        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        else if (this.isNewPath) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.renderImage();\n        }\n        else {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var obj = void 0;\n            for (var i = 0; i < object['appliedUndoRedoColl'].length; i++) {\n                for (var j = 0; j < object['appliedUndoRedoColl'][i].currentObjColl.length; j++) {\n                    if (this.prevActObj && this.prevActObj.currIndex &&\n                        object['appliedUndoRedoColl'][i].currentObjColl[j].currIndex === this.prevActObj.currIndex) {\n                        obj = object['appliedUndoRedoColl'][i].currentObjColl[0];\n                        break;\n                    }\n                }\n            }\n            if (this.prevActObj && obj) {\n                parent.activeObj = this.prevActObj;\n                this.prevActObj = null;\n                parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false, value: { obj: parent.activeObj } });\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'cancel' } });\n                parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n            }\n            else {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n        parent.currObjType.isDragging = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n    };\n    Draw.prototype.cancelSelection = function () {\n        var parent = this.parent;\n        if (parent.cancelCropSelection) {\n            parent.cropObj = extend({}, parent.cancelCropSelection.previousCropObj, {}, true);\n            parent.afterCropActions = parent.cancelCropSelection.previousObj.afterCropActions;\n            parent.notify('undo-redo', { prop: 'undoDefault', onPropertyChange: false, value: { obj: parent.cancelCropSelection } });\n            parent.currSelectionPoint = extend({}, parent.cancelCropSelection.previousCropObj.activeObj, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n            this.clearOuterCanvas(this.lowerContext);\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n        }\n    };\n    Draw.prototype.updateFlipPan = function (tempSelectionObj) {\n        var parent = this.parent;\n        if (parent.transform.currFlipState !== '') {\n            var temp = this.lowerContext.filter;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('transform', { prop: 'rotatedFlip', onPropertyChange: false });\n            this.lowerContext.filter = 'none';\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = temp;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (tempSelectionObj) {\n                this.drawObject('duplicate', tempSelectionObj);\n            }\n        }\n    };\n    Draw.prototype.select = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.allowDownScale = false;\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var previousObj = object['currObj'];\n            previousObj.objColl = extend([], parent.objColl, [], true);\n            previousObj.pointColl = extend([], parent.pointColl, [], true);\n            previousObj.afterCropActions = parent.afterCropActions;\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            previousObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.notify('crop', { prop: 'setPreviousCropCurrentObj', onPropertyChange: false, value: { obj: previousObj } });\n            if (parent.transform.zoomFactor > 0 && parent.activeObj.shape &&\n                parent.activeObj.shape.split('-')[0] === 'crop' && isNullOrUndefined(this.currSelPoint)) {\n                this.currSelPoint = extend({}, parent.activeObj, {}, true);\n            }\n            var isPrevent = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isPrevent = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isPrevent = true;\n            }\n            var obj = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: obj } });\n            var prevObj = obj['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.upperCanvas.style.display = 'block';\n            if (parent.currSelectionPoint || parent.transform.defaultZoomFactor !== 0 ||\n                (parent.transform.degree !== 0 && parent.panPoint.totalPannedInternalPoint.x !== 0 &&\n                    parent.panPoint.totalPannedInternalPoint.y !== 0 && !isPrevent)) {\n                parent.isCircleCrop = false;\n                if (parent.transform.defaultZoomFactor !== 0 && !this.isResizeSelect) {\n                    var isCropTab = parent.isCropTab;\n                    parent.isCropTab = false;\n                    parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n                    parent.isCropTab = isCropTab;\n                    this.resetPanPoints();\n                }\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                parent.isCropTab = true;\n                parent.isCircleCrop = false;\n                if (!this.isResizeSelect) {\n                    parent.notify('crop', { prop: 'setCurrSelPoints', onPropertyChange: false, value: { isSetDimension: true } });\n                }\n                parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n                if (isNullOrUndefined(parent.cropObj.activeObj.shape)) {\n                    parent.currObjType.shape = 'crop-' + type.toLowerCase();\n                    this.drawNewSelection(type, startX, startY, width, height);\n                }\n            }\n            else {\n                if (type === 'custom') {\n                    parent.currObjType.shape = '';\n                }\n                this.drawNewSelection(type, startX, startY, width, height);\n            }\n        }\n    };\n    Draw.prototype.drawNewSelection = function (type, startX, startY, width, height) {\n        var parent = this.parent;\n        var points;\n        var cropShape = 'crop-' + type;\n        if (cropShape.toLowerCase() === 'crop-custom') {\n            if (parent.currObjType.shape === '' || parent.currObjType.shape === 'crop-custom') {\n                this.drawCustomSelection('crop-custom', startX, startY, width, height);\n            }\n        }\n        else if (cropShape.toLowerCase() === 'crop-canvas') {\n            parent.upperCanvas.style.display = 'block';\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        else {\n            parent.currObjType.isCustomCrop = false;\n            parent.currObjType.shape = cropShape.toLowerCase();\n            if (width && height) {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + height,\n                    width: width, height: height };\n            }\n            else if (width && cropShape === 'crop-circle') {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + width,\n                    width: width, height: width };\n            }\n            parent.activeObj.shape = cropShape.toLowerCase();\n            this.updateSelectionInsert(points);\n        }\n    };\n    Draw.prototype.updateSelectionInsert = function (points) {\n        var _this = this;\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var selectionSettings = { type: parent.getSelectionType(obj['shapeSettingsObj']['type']), startX: obj['shapeSettingsObj']['startX'],\n            startY: obj['shapeSettingsObj']['startY'], width: obj['shapeSettingsObj']['width'], height: obj['shapeSettingsObj']['height'] };\n        var selectionChangingArgs = { action: 'insert', previousSelectionSettings: selectionSettings,\n            currentSelectionSettings: selectionSettings };\n        if (isBlazor() && parent.events && parent.events.onSelectionResizeStart.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionChangingArgs).then(function (selectionChangingArgs) {\n                parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                    value: { selectionSettings: selectionChangingArgs.currentSelectionSettings } });\n                if (selectionChangingArgs.currentSelectionSettings.type === 'Custom') {\n                    _this.drawObject('duplicate', parent.activeObj, null, null, true);\n                }\n                else {\n                    if (actPoint.startX !== 0 || actPoint.startY !== 0 ||\n                        actPoint.width !== 0 || actPoint.height !== 0) {\n                        points = { startX: actPoint.startX, startY: actPoint.startY,\n                            endX: actPoint.endX, endY: actPoint.endY,\n                            width: actPoint.width, height: actPoint.height };\n                    }\n                    _this.drawObject('duplicate', null, true, points);\n                }\n            });\n        }\n        else {\n            parent.trigger('selectionChanging', selectionChangingArgs);\n            parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                value: { selectionSettings: selectionChangingArgs.currentSelectionSettings } });\n            if (selectionChangingArgs.currentSelectionSettings.type === 'Custom') {\n                this.drawObject('duplicate', parent.activeObj, null, null, true);\n            }\n            else {\n                if (actPoint.startX !== 0 || actPoint.startY !== 0 ||\n                    actPoint.width !== 0 || actPoint.height !== 0) {\n                    points = { startX: actPoint.startX, startY: actPoint.startY,\n                        endX: actPoint.endX, endY: actPoint.endY,\n                        width: actPoint.width, height: actPoint.height };\n                }\n                this.drawObject('duplicate', null, true, points);\n            }\n        }\n    };\n    Draw.prototype.drawCustomSelection = function (cropShape, startX, startY, width, height) {\n        var parent = this.parent;\n        var actPoint = parent.activeObj.activePoint;\n        parent.currObjType.isCustomCrop = true;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.currObjType.shape = parent.activeObj.shape = cropShape.toLowerCase();\n        if (!isNullOrUndefined(startX) && !isNullOrUndefined(startY) && !isNullOrUndefined(width) && !isNullOrUndefined(height)) {\n            actPoint.startX = startX;\n            actPoint.startY = startY;\n            actPoint.endX = startX + width;\n            actPoint.endY = startY + height;\n            actPoint.width = width;\n            actPoint.height = height;\n        }\n        else {\n            if (isNullOrUndefined(parent.transform.zoomFactor) || parent.transform.zoomFactor === 0) {\n                var imgLeft_1 = parent.img.destLeft;\n                var imgTop_1 = parent.img.destTop;\n                var imgWidth_1 = parent.img.destWidth;\n                var imgHeight_1 = parent.img.destHeight;\n                var lowerCanvasWidth_1 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_1 = parent.lowerCanvas.height;\n                var activePoint_1 = actPoint;\n                if (imgLeft_1 >= 0 && imgTop_1 >= 0) {\n                    activePoint_1.startX = imgLeft_1;\n                    activePoint_1.startY = imgTop_1;\n                    activePoint_1.endX = imgLeft_1 + imgWidth_1;\n                    activePoint_1.endY = imgTop_1 + imgHeight_1;\n                }\n                else if (imgLeft_1 >= 0) {\n                    activePoint_1.startX = imgLeft_1;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = imgLeft_1 + imgWidth_1;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n                else if (imgTop_1 >= 0) {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = imgTop_1;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = imgTop_1 + imgHeight_1;\n                }\n                else {\n                    activePoint_1.startX = 7.5;\n                    activePoint_1.startY = 7.5;\n                    activePoint_1.endX = lowerCanvasWidth_1 - 15;\n                    activePoint_1.endY = lowerCanvasHeight_1 - 15;\n                }\n            }\n            else {\n                var imgLeft_2 = parent.img.destLeft;\n                var imgTop_2 = parent.img.destTop;\n                var imgWidth_2 = parent.img.destWidth;\n                var imgHeight_2 = parent.img.destHeight;\n                var lowerCanvasWidth_2 = parent.lowerCanvas.width;\n                var lowerCanvasHeight_2 = parent.lowerCanvas.height;\n                var activePoint_2 = actPoint;\n                activePoint_2.startX = Math.max(imgLeft_2 > 0 ? imgLeft_2 : 7.5, imgLeft_2);\n                activePoint_2.startY = Math.max(imgTop_2 > 0 ? imgTop_2 : 7.5, imgTop_2);\n                activePoint_2.endX = Math.min(imgLeft_2 + imgWidth_2 + 15 < lowerCanvasWidth_2 ? imgLeft_2 + imgWidth_2 - 15 :\n                    lowerCanvasWidth_2 - 15, imgLeft_2 + imgWidth_2);\n                activePoint_2.endY = Math.min(imgTop_2 + imgHeight_2 + 15 < lowerCanvasHeight_2 ? imgTop_2 + imgHeight_2 - 15 :\n                    lowerCanvasHeight_2 - 15, imgTop_2 + imgHeight_2);\n            }\n            var imgLeft = parent.img.destLeft;\n            var imgTop = parent.img.destTop;\n            var imgWidth = parent.img.destWidth;\n            var imgHeight = parent.img.destHeight;\n            var lowerCanvasWidth = parent.lowerCanvas.clientWidth;\n            var lowerCanvasHeight = parent.lowerCanvas.clientHeight;\n            var activePoint = actPoint;\n            activePoint.startX = Math.max(activePoint.startX, imgLeft);\n            activePoint.startY = Math.max(activePoint.startY, imgTop);\n            activePoint.endX = Math.min(activePoint.endX, imgLeft + imgWidth);\n            activePoint.endY = Math.min(activePoint.endY, imgTop + imgHeight);\n            if (activePoint.startX === imgLeft && imgLeft + imgWidth > lowerCanvasWidth) {\n                activePoint.endX = lowerCanvasWidth - 15;\n            }\n            if (activePoint.startY === imgTop && imgTop + imgHeight > lowerCanvasHeight) {\n                activePoint.endY = lowerCanvasHeight - 15;\n            }\n            parent.activeObj = this.updateWidthHeight(parent.activeObj);\n            this.updateActiveObject(actPoint, parent.activeObj);\n        }\n        this.updateSelectionInsert();\n    };\n    Draw.prototype.callUpdateCurrTransState = function () {\n        var parent = this.parent;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.isRotateZoom = true;\n        this.updateCurrTransState('initial');\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        var temp = this.lowerContext.filter;\n        if (parent.transform.degree === 0) {\n            parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        }\n        this.drawImage();\n        this.updateCurrTransState('reverse');\n        if (parent.transform.degree === 0 && parent.rotateFlipColl.length > 0) {\n            parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n        }\n        this.isRotateZoom = false;\n        parent.objColl = tempObjColl;\n        var tempTogglePen = parent.togglePen;\n        parent.togglePen = false;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        parent.img.destLeft -= parent.panPoint.totalPannedInternalPoint.x;\n        parent.img.destTop -= parent.panPoint.totalPannedInternalPoint.y;\n        parent.togglePen = tempTogglePen;\n        this.lowerContext.filter = temp;\n        parent.activeObj = tempActiveObj;\n    };\n    Draw.prototype.resetPanPoints = function () {\n        this.parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n        this.parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n    };\n    Draw.prototype.setClientTransDim = function (isPreventDimension) {\n        var parent = this.parent;\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            parent.img.destLeft = (parent.lowerCanvas.width - parent.img.destHeight) / 2;\n            parent.img.destTop = (parent.lowerCanvas.height - parent.img.destWidth) / 2;\n            var temp = parent.img.destWidth;\n            parent.img.destWidth = parent.img.destHeight;\n            parent.img.destHeight = temp;\n        }\n        else {\n            if (isNullOrUndefined(isPreventDimension)) {\n                parent.img.destLeft = (parent.lowerCanvas.width - parent.img.destWidth) / 2;\n                parent.img.destTop = (parent.lowerCanvas.height - parent.img.destHeight) / 2;\n            }\n        }\n    };\n    Draw.prototype.redrawImgWithObj = function () {\n        var parent = this.parent;\n        var obj = { canvasFilter: parent.canvasFilter };\n        this.lowerContext.filter = obj['canvasFilter'];\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            this.callUpdateCurrTransState();\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n        else {\n            this.callUpdateCurrTransState();\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n    };\n    Draw.prototype.setCurrentObj = function (obj) {\n        var parent = this.parent;\n        var isObj = obj ? true : false;\n        if (!isObj) {\n            parent.cropObj.aspectWidth = parent.aspectWidth;\n            parent.cropObj.aspectHeight = parent.aspectHeight;\n            parent.cropObj.frame = parent.frameObj.type;\n        }\n        obj = obj ? obj : parent.cropObj;\n        parent.transform.cropZoomFactor = obj.cropZoom;\n        parent.transform.defaultZoomFactor = obj.defaultZoom;\n        if (!isObj) {\n            parent.transform.zoomFactor = obj.cropZoom;\n        }\n        else {\n            if (obj.activeObj.shape && obj.activeObj.shape.split('-')[0] === 'crop') {\n                parent.transform.zoomFactor = obj.cropZoom;\n            }\n            else {\n                parent.transform.zoomFactor = obj.defaultZoom;\n            }\n        }\n        parent.setProperties({ zoomSettings: { zoomFactor: obj.zoomFactor } }, true);\n        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false, value: { previousZoomValue: obj.previousZoomValue } });\n        parent.panPoint.totalPannedPoint = extend({}, obj.totalPannedPoint, {}, true);\n        parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n        parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        var point = extend({}, obj.tempFlipPanPoint, {}, true);\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: point } });\n        parent.rotateFlipColl = extend([], obj.rotateFlipColl, [], true);\n        parent.transform.degree = obj.degree;\n        parent.frameObj.type = obj.frame;\n        parent.transform.currFlipState = obj.currFlipState;\n        parent.img.destLeft = obj.destPoints.startX;\n        parent.img.destTop = obj.destPoints.startY;\n        parent.img.destWidth = obj.destPoints.width;\n        parent.img.destHeight = obj.destPoints.height;\n        parent.img.srcLeft = obj.srcPoints.startX;\n        parent.img.srcTop = obj.srcPoints.startY;\n        parent.img.srcWidth = obj.srcPoints.width;\n        parent.img.srcHeight = obj.srcPoints.height;\n        parent.aspectWidth = obj.aspectWidth;\n        parent.aspectHeight = obj.aspectHeight;\n        if (obj.afterCropActions) {\n            parent.afterCropActions = obj.afterCropActions;\n        }\n        this.lowerContext.filter = obj.filter;\n        parent.notify('filter', { prop: 'setBrightnessAdjusted', onPropertyChange: false, value: { isBrightnessAdjusted: obj.isBrightAdjust } });\n        var isCircleCrop = parent.isCircleCrop;\n        var currSelectionPoint;\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            currSelectionPoint = null;\n        }\n        else {\n            currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            parent.currSelectionPoint = null;\n        }\n        parent.isCircleCrop = false;\n        this.drawCropSelectionImage(obj, false);\n        if (parent.transform.degree !== 0) {\n            if (parent.transform.currFlipState === '') {\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n            }\n            else {\n                parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: 0, yDiff: 0 } });\n            }\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n            parent.panPoint.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n            parent.panPoint.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        }\n        parent.activeObj = extend({}, obj.activeObj, {}, true);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            this.drawObject('duplicate', null, null, null, true);\n        }\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        var isAfterCropAction = false;\n        if (parent.afterCropActions.length > 0) {\n            var object = { collection: parent.afterCropActions };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.afterCropActions, isRotateFlipCollection: null, obj: object } });\n            parent.afterCropActions = object['collection'];\n        }\n        var afterCropActions = extend([], parent.afterCropActions, [], true);\n        if (!isObj && afterCropActions.length > 0) {\n            isAfterCropAction = true;\n            for (var i = 0; i < afterCropActions.length; i++) {\n                if (afterCropActions[i] === 'horizontalflip' || afterCropActions[i] === 'verticalflip') {\n                    parent.activeObj = extend({}, currSelectionPoint, {}, true);\n                    this.rotatedFlipCropSel = true;\n                }\n                parent.notify('transform', { prop: 'updateTransform', onPropertyChange: false, value: { text: afterCropActions[i] } });\n            }\n            activeObj = extend({}, parent.activeObj, {}, true);\n            this.resetPanPoints();\n            parent.activeObj = activeObj;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n            if (obj.degree !== parent.transform.degree) {\n                parent.transform.cropZoomFactor = null;\n                parent.transform.zoomFactor = 0;\n            }\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            if (this.rotatedFlipCropSel) {\n                this.rotatedFlipCropSel = false;\n            }\n        }\n        parent.afterCropActions = afterCropActions;\n        if (!this.isCancelAction && !isAfterCropAction) {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n        }\n        parent.activeObj = activeObj;\n        parent.isCircleCrop = isCircleCrop;\n        if (isNullOrUndefined(currSelectionPoint)) {\n            parent.currSelectionPoint = null;\n        }\n        else {\n            parent.currSelectionPoint = extend({}, currSelectionPoint, {}, true);\n            if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                parent.currSelectionPoint = null;\n            }\n        }\n    };\n    Draw.prototype.drawCropSelectionImage = function (obj, isObj) {\n        var parent = this.parent;\n        var temp = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n        if (isObj) {\n            this.updateCurrTransState('initial');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'initial');\n        }\n        parent.notify('transform', { prop: 'setDestPointsForFlipState', onPropertyChange: false });\n        this.drawImage();\n        if (isObj) {\n            this.updateCurrTransState('reverse');\n        }\n        else {\n            this.setTransformColl(this.lowerContext, 'reverse');\n        }\n        parent.img.destLeft = parent.cropObj.destPoints.startX;\n        parent.img.destTop = parent.cropObj.destPoints.startY;\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        this.lowerContext.filter = 'none';\n        if (this.isCancelAction) {\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        else {\n            parent.img.destLeft = obj.destPoints.startX;\n            parent.img.destTop = obj.destPoints.startY;\n            parent.img.destWidth = obj.destPoints.width;\n            parent.img.destHeight = obj.destPoints.height;\n            parent.img.srcLeft = obj.srcPoints.startX;\n            parent.img.srcTop = obj.srcPoints.startY;\n            parent.img.srcWidth = obj.srcPoints.width;\n            parent.img.srcHeight = obj.srcPoints.height;\n            if (obj.activeObj.activePoint.width !== 0 && obj.activeObj.activePoint.height !== 0) {\n                var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                    height: parent.img.destHeight };\n                parent.img.destLeft = obj.activeObj.activePoint.startX;\n                parent.img.destTop = obj.activeObj.activePoint.startY;\n                parent.img.destWidth = obj.activeObj.activePoint.width;\n                parent.img.destHeight = obj.activeObj.activePoint.height;\n                parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.img.destLeft = destPoints.startX;\n                parent.img.destTop = destPoints.startY;\n                parent.img.destWidth = destPoints.width;\n                parent.img.destHeight = destPoints.height;\n            }\n        }\n        parent.activeObj = activeObj;\n        this.lowerContext.filter = temp;\n    };\n    Draw.prototype.performPointZoom = function (x, y, type) {\n        var parent = this.parent;\n        var ratioX = (x - parent.img.destLeft) / parent.img.destWidth;\n        var ratioY = (y - parent.img.destTop) / parent.img.destHeight;\n        var isUndoRedo = parent.isUndoRedo;\n        parent.isUndoRedo = true;\n        parent.setProperties({ zoomSettings: { zoomPoint: { x: x, y: y } } }, true);\n        if (type === 'zoomIn') {\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: .1, zoomPoint: null }, isResize: null });\n        }\n        else if (type === 'zoomOut') {\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null }, isResize: null });\n        }\n        parent.isUndoRedo = isUndoRedo;\n        if (parent.transform.zoomFactor > 0) {\n            var destLeft = parent.img.destLeft;\n            var destTop = parent.img.destTop;\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft = x - (ratioX * parent.img.destWidth);\n                parent.img.destTop = y - (ratioY * parent.img.destHeight);\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.panPoint.currentPannedPoint = { x: (x - (ratioX * parent.img.destWidth)) - destLeft,\n                    y: (y - (ratioY * parent.img.destHeight)) - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n                parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n            this.adjustPanning(activeObj);\n            parent.activeObj = activeObj;\n            if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate', null, null, null, true);\n            }\n        }\n    };\n    Draw.prototype.adjustPanning = function (activeObj) {\n        var parent = this.parent;\n        if (activeObj.activePoint.width !== 0 && activeObj.activePoint.height !== 0) {\n            var destLeft = parent.img.destLeft;\n            var destTop = parent.img.destTop;\n            var point = { x: 0, y: 0 };\n            if (parent.img.destLeft > activeObj.activePoint.startX) {\n                point.x = parent.img.destLeft - activeObj.activePoint.startX;\n            }\n            else if (parent.img.destLeft + parent.img.destWidth < activeObj.activePoint.startX + activeObj.activePoint.width) {\n                point.x = (parent.img.destLeft + parent.img.destWidth) - (activeObj.activePoint.startX + activeObj.activePoint.width);\n            }\n            if (parent.img.destTop > activeObj.activePoint.startY) {\n                point.y = parent.img.destTop - activeObj.activePoint.startY;\n            }\n            else if (parent.img.destTop + parent.img.destHeight < activeObj.activePoint.startY + activeObj.activePoint.height) {\n                point.y = (parent.img.destTop + parent.img.destHeight) - (activeObj.activePoint.startY + activeObj.activePoint.height);\n            }\n            if (parent.transform.degree === 0) {\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                this.drawZoomPanImage(parent.img.destLeft - destLeft, parent.img.destTop - destTop);\n            }\n            else {\n                var isCropTab = parent.isCropTab;\n                parent.isCropTab = true;\n                var objColl = extend([], parent.objColl, [], true);\n                var pointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                var object = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: object } });\n                var cropSelPointColl = object['selPointColl'];\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.img.destLeft -= point.x;\n                parent.img.destTop -= point.y;\n                parent.panPoint.currentPannedPoint = { x: parent.img.destLeft - destLeft, y: parent.img.destTop - destTop };\n                parent.notify('transform', { prop: 'rotatePan', onPropertyChange: false,\n                    value: { isCropSelection: null, isDefaultZoom: null } });\n                parent.isCropTab = isCropTab;\n                parent.objColl = objColl;\n                parent.pointColl = pointColl;\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: cropSelPointColl } } });\n                parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n                parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n                    value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n            }\n        }\n    };\n    Draw.prototype.drawZoomPanImage = function (x, y) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: x, yDiff: y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: x, yDiff: y, panRegion: '' } });\n        this.renderImage(true);\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.img.srcWidth, height: parent.img.srcHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.panPoint.totalPannedPoint.x += x;\n        parent.panPoint.totalPannedPoint.y += y;\n        parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: { x: 0, y: 0 } } });\n    };\n    Draw.prototype.openNewImage = function () {\n        var parent = this.parent;\n        var inMemoryContext = parent.inMemoryCanvas.getContext('2d');\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var toolbar = document.querySelector('#' + parent.element.id + '_currPos');\n        if (toolbar) {\n            toolbar.style.display = 'none';\n        }\n        var obj = { defToolbarItems: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj } });\n            if (obj['defToolbarItems'].length === 0 &&\n                (isNullOrUndefined(document.getElementById(parent.element.id + '_toolbar')))) {\n                var height = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n                parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: height } });\n            }\n        }\n        else {\n            if (parent.element.querySelector('#' + parent.element.id + '_toolbarArea')) {\n                parent.toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n            }\n        }\n        parent.reset();\n        parent.update();\n        parent.transform.degree = 0;\n        parent.transform.zoomFactor = 0;\n        parent.isImageLoaded = false;\n        parent.currSelectionPoint = null;\n        var type = typeof (this.openURL);\n        if (type === 'string') {\n            var fileName = this.openURL.split('.');\n            if (fileName.length > 1) {\n                fileName = fileName[fileName.length - 2].split('/');\n                this.fileName = fileName[fileName.length - 1];\n            }\n            else {\n                this.fileName = 'ImageEditor';\n            }\n            this.fileType = this.getFileExtensionFromURL(this.openURL);\n            if (this.fileType) {\n                this.fileType = parent.toPascalCase(this.fileType);\n                var fileType = this.fileType.toLowerCase();\n                if (fileType === 'jpg' || fileType === 'jpeg') {\n                    this.fileType = 'Jpeg';\n                    fileType = 'jpeg';\n                }\n                if (fileType !== 'jpeg' && fileType !== 'png' && fileType !== 'svg') {\n                    this.fileType = null;\n                }\n            }\n            this.imageOnLoad(this.openURL);\n        }\n        else {\n            this.fileName = 'ImageEditor';\n            this.fileType = null;\n            parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n            parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n            this.upperContext = parent.upperCanvas.getContext('2d');\n            parent.clearContext(this.lowerContext);\n            parent.clearContext(this.upperContext);\n            parent.clearContext(inMemoryContext);\n            parent.inMemoryCanvas.width = this.openURL.width;\n            parent.inMemoryCanvas.height = this.openURL.height;\n            inMemoryContext.putImageData(this.openURL, 0, 0);\n            parent.baseImg.src = parent.inMemoryCanvas.toDataURL();\n        }\n    };\n    Draw.prototype.dlgBtnClick = function () {\n        var parent = this.parent;\n        parent.export();\n        if (this.isFileChanged) {\n            parent.isImageLoaded = this.isFileChanged = false;\n            parent.reset();\n            this.checkToolbarTemplate(this.inputElem, this.openURL);\n        }\n        else {\n            this.reset();\n            this.openNewImage();\n        }\n        if (!isBlazor()) {\n            getComponent(document.getElementById(parent.element.id + '_dialog'), 'dialog').destroy();\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.dlgCloseBtnClick = function () {\n        var parent = this.parent;\n        this.baseImgSrc = parent.baseImg.src;\n        if (this.isFileChanged) {\n            parent.isImageLoaded = this.isFileChanged = false;\n            parent.reset();\n            this.checkToolbarTemplate(this.inputElem, this.openURL);\n        }\n        else {\n            this.reset();\n            this.openNewImage();\n        }\n        if (!isBlazor()) {\n            getComponent(document.getElementById(parent.element.id + '_dialog'), 'dialog').destroy();\n        }\n        this.isImageEdited = false;\n    };\n    Draw.prototype.showDialogPopup = function () {\n        var headerObj = { key: 'ConfirmDialogHeader' };\n        this.parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n        var contentObj = { key: 'ConfirmDialogContent' };\n        this.parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n        var yesObj = { key: 'Yes' };\n        this.parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: yesObj } });\n        var noObj = { key: 'No' };\n        this.parent.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: noObj } });\n        this.parent.element.querySelector('#' + this.parent.element.id + '_dialog').style.display = 'block';\n        var dialog = new Dialog({\n            header: headerObj['value'],\n            closeOnEscape: true,\n            content: '<span>' + contentObj['value'] + '</span>',\n            target: document.getElementById('target'),\n            width: '285px',\n            isModal: true,\n            animationSettings: { effect: 'Zoom' },\n            close: this.dlgCloseBtnClick.bind(this),\n            buttons: [\n                { click: this.dlgCloseBtnClick.bind(this),\n                    buttonModel: { content: noObj['value'], iconCss: 'e-icons e-close' }\n                },\n                { click: this.dlgBtnClick.bind(this),\n                    buttonModel: { content: yesObj['value'], isPrimary: true, iconCss: 'e-icons e-check' } }\n            ]\n        });\n        dialog.appendTo('#' + this.parent.element.id + '_dialog');\n    };\n    Draw.prototype.restoreOldImage = function () {\n        if (this.parent.isImageLoaded) {\n            // if (this.isImageEdited || this.parent.pointColl.length > 0 || this.parent.objColl.length > 0) {\n            //     this.showDialogPopup();\n            // } else {\n            // this.reset();\n            // this.openNewImage();\n            // }\n            // const data: ImageData = this.parent.getImageData();\n            // const canvas: HTMLCanvasElement = document.createElement('canvas');\n            // canvas.width = data.width; canvas.height = data.height;\n            // canvas.getContext('2d').putImageData(data, 0, 0);\n            // this.baseImgSrc = canvas.toDataURL();\n            this.reset();\n            this.openNewImage();\n        }\n        else {\n            this.openNewImage();\n        }\n    };\n    Draw.prototype.open = function (data) {\n        document.getElementById(this.parent.element.id + '_dropArea').style.display = 'none';\n        if (!this.parent.disabled) {\n            this.openURL = data;\n            this.restoreOldImage();\n        }\n    };\n    Draw.prototype.getInitialLoaded = function (object) {\n        object['isInitialLoaded'] = this.isInitialLoading;\n    };\n    Draw.prototype.getFileExtensionFromURL = function (url) {\n        var lastDotIndex = url.lastIndexOf('.');\n        if (lastDotIndex !== -1) {\n            return url.slice(lastDotIndex + 1).toLowerCase();\n        }\n        return null;\n    };\n    Draw.prototype.fileSelect = function (inputElement, args) {\n        var parent = this.parent;\n        document.getElementById(parent.element.id + '_dropArea').style.display = 'none';\n        if (!parent.disabled) {\n            var filesData = void 0;\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var fileData = void 0;\n            if (args.target) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                filesData = args.target.files[0];\n                fileData = filesData;\n            }\n            else {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                filesData = fileData = args.filesData[0].rawFile;\n            }\n            var fileExtension = void 0;\n            if (fileData.name) {\n                var fileExtensionArray = fileData.name.split('.');\n                fileExtension = fileExtensionArray[fileExtensionArray.length - 1].toLowerCase();\n            }\n            if (fileExtension && ['jpg', 'jpeg', 'png', 'svg'].indexOf(fileExtension) === -1) {\n                this.errorLoading();\n                return;\n            }\n            showSpinner(parent.element);\n            parent.element.style.opacity = '0.5';\n            this.inputElem = inputElement;\n            fileExtension = fileData.name && fileData.name.split('.')[1];\n            if (fileExtension) {\n                var fileType = parent.toPascalCase(fileExtension);\n                if (fileType === 'JPG' || fileType === 'Jpg') {\n                    this.fileType = 'Jpeg';\n                }\n                else {\n                    this.fileType = fileType;\n                }\n            }\n            else {\n                this.fileType = null;\n            }\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var URL_1 = window.URL;\n            var url = URL_1.createObjectURL(filesData);\n            this.openURL = url;\n            if (parent.isImageLoaded && (this.isImageEdited || parent.pointColl.length > 0 || parent.objColl.length > 0)) {\n                this.isFileChanged = true;\n                if (!isBlazor()) {\n                    this.showDialogPopup();\n                }\n                else {\n                    parent.dotNetRef.invokeMethodAsync('UpdateDialog', true);\n                }\n            }\n            else {\n                this.checkToolbarTemplate(inputElement, url);\n            }\n        }\n    };\n    Draw.prototype.checkToolbarTemplate = function (inputElement, url) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbarTemplate)) {\n            parent.reset();\n            parent.update();\n        }\n        this.fileName = inputElement.value.split('\\\\')[inputElement.value.split('\\\\').length - 1];\n        this.fileName = this.fileName.split('.')[0];\n        this.imageOnLoad(url.toString());\n        inputElement.value = '';\n    };\n    Draw.prototype.moveToSelectionRange = function (type, activeObj) {\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            var isRotated = false;\n            for (var i = 0; i < parent.rotateFlipColl.length; i++) {\n                if (parent.rotateFlipColl[i] === 90 || parent.rotateFlipColl[i] === -90) {\n                    isRotated = true;\n                    break;\n                }\n            }\n            if (isRotated) {\n                if (parent.transform.degree === 0) {\n                    return;\n                }\n                var zoomFactor = parent.transform.zoomFactor;\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                if (type === 'rotateleft' || type === 'rotateright') {\n                    if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                        if (parent.objColl[parent.objColl.length - 1].activePoint.width < activeObj.activePoint.height) {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (parent.objColl[parent.objColl.length - 1].activePoint.width >= activeObj.activePoint.height ||\n                                    this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                    this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor += 0.1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                        else {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (parent.objColl[parent.objColl.length - 1].activePoint.width >= activeObj.activePoint.height ||\n                                    this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                    this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: 0.1, zoomPoint: null, isResize: null } });\n                                    }\n                                    break;\n                                }\n                                zoomFactor -= .1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                    }\n                    else {\n                        if (parent.objColl[parent.objColl.length - 1].activePoint.height < activeObj.activePoint.width) {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (parent.objColl[parent.objColl.length - 1].activePoint.height >= activeObj.activePoint.width ||\n                                    this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                    this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: -0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor += 0.1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                        else {\n                            for (var i = 2; i < parent.zoomSettings.maxZoomFactor; i++) {\n                                if (parent.objColl[parent.objColl.length - 1].activePoint.height >= activeObj.activePoint.width ||\n                                    this.isSelectionBiggerThanCanvas(parent.objColl[parent.objColl.length - 1]) ||\n                                    this.isSelectionOutsideCanvas(parent.objColl[parent.objColl.length - 1])) {\n                                    if (!isNullOrUndefined(zoomFactor)) {\n                                        parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                            value: { zoomFactor: 0.1, zoomPoint: null }, isResize: null });\n                                    }\n                                    break;\n                                }\n                                zoomFactor -= .1;\n                                parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                                    value: { zoomFactor: zoomFactor, zoomPoint: null }, isResize: null });\n                            }\n                        }\n                    }\n                }\n                var panX = (parent.lowerCanvas.clientWidth / 2) - (parent.objColl[parent.objColl.length - 1].activePoint.startX +\n                    (parent.objColl[parent.objColl.length - 1].activePoint.width / 2));\n                var panY = (parent.lowerCanvas.clientHeight / 2) - (parent.objColl[parent.objColl.length - 1].activePoint.startY +\n                    (parent.objColl[parent.objColl.length - 1].activePoint.height / 2));\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += panX;\n                    parent.img.destTop += panY;\n                    parent.notify('transform', { prop: 'drawPannImage', value: { point: { x: panX, y: panY } } });\n                }\n                else {\n                    parent.panPoint.currentPannedPoint = { x: panX, y: panY };\n                    parent.notify('transform', { prop: 'drawPannedImage', value: { xDiff: panX, yDiff: panY } });\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                }\n                parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                    value: { point: null } });\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1]);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n    };\n    Draw.prototype.isSelectionBiggerThanCanvas = function (obj) {\n        var isBigger = false;\n        if (obj.activePoint.startX <= this.parent.img.destLeft ||\n            obj.activePoint.startY <= this.parent.img.destTop ||\n            obj.activePoint.endX >= this.parent.img.destLeft + this.parent.img.destWidth ||\n            obj.activePoint.endY >= this.parent.img.destTop + this.parent.img.destHeight) {\n            isBigger = true;\n        }\n        return isBigger;\n    };\n    Draw.prototype.isSelectionOutsideCanvas = function (obj) {\n        var isOutside = false;\n        if ((obj.activePoint.height < this.parent.lowerCanvas.height - this.parent.toolbarHeight) ||\n            (obj.activePoint.width < this.parent.lowerCanvas.width)) {\n            isOutside = true;\n        }\n        return isOutside;\n    };\n    Draw.prototype.downScaleImgCanvas = function (ctx, isImgAnnotation, isHFlip, isVFlip) {\n        var parent = this.parent;\n        var canvas = isImgAnnotation ? parent.activeObj.imageCanvas : parent.baseImgCanvas;\n        var img = isImgAnnotation ? parent.activeObj.imageElement : parent.baseImg;\n        var width = isImgAnnotation ? parent.activeObj.activePoint.width : parent.img.destWidth;\n        var height = isImgAnnotation ? parent.activeObj.activePoint.height : parent.img.destHeight;\n        var obj = { width: 0, height: 0 };\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: img.height, height: img.width, obj: obj, isImgShape: isImgAnnotation } });\n        }\n        else {\n            parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n                value: { width: img.width, height: img.height, obj: obj, isImgShape: isImgAnnotation } });\n        }\n        if (isImgAnnotation || (parent.allowDownScale && !parent.isCropTab && !parent.isCropToolbar && img.width !== 0 && img.height !== 0\n            && obj['width'] * 0.75 > width && obj['height'] * 0.75 > height)) {\n            var tempCanvas = parent.createElement('canvas', {\n                id: parent.element.id + '_downScaleCanvas', attrs: { name: 'canvasImage' }\n            });\n            tempCanvas.width = isImgAnnotation ? img.width : this.parent.img.srcWidth;\n            tempCanvas.height = isImgAnnotation ? img.height : this.parent.img.srcHeight;\n            if (isImgAnnotation) {\n                tempCanvas.getContext('2d').drawImage(img, 0, 0, tempCanvas.width, tempCanvas.height);\n            }\n            else {\n                tempCanvas.getContext('2d').drawImage(canvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, tempCanvas.width, tempCanvas.height);\n            }\n            this.downScale(tempCanvas, width, height, isImgAnnotation);\n            if (isImgAnnotation) {\n                ctx.canvas.width = tempCanvas.width;\n                ctx.canvas.height = tempCanvas.height;\n                if (isHFlip && isVFlip) {\n                    ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                    ctx.scale(-1, 1);\n                    ctx.translate(0, parent.activeObj.imageCanvas.height);\n                    ctx.scale(1, -1);\n                }\n                else {\n                    if (isHFlip) {\n                        if (isNullOrUndefined(parent.activeObj.isHorImageFlip) || !parent.activeObj.isHorImageFlip) {\n                            parent.activeObj.isHorImageFlip = true;\n                            ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                            ctx.scale(-1, 1);\n                        }\n                        else if (parent.activeObj.isHorImageFlip) {\n                            parent.activeObj.isHorImageFlip = false;\n                        }\n                        if (parent.activeObj.isVerImageFlip) {\n                            ctx.translate(0, parent.activeObj.imageCanvas.height);\n                            ctx.scale(1, -1);\n                        }\n                    }\n                    else if (isVFlip) {\n                        if (isNullOrUndefined(parent.activeObj.isVerImageFlip) || !parent.activeObj.isVerImageFlip) {\n                            parent.activeObj.isVerImageFlip = true;\n                            ctx.translate(0, parent.activeObj.imageCanvas.height);\n                            ctx.scale(1, -1);\n                        }\n                        else if (parent.activeObj.isVerImageFlip) {\n                            parent.activeObj.isVerImageFlip = false;\n                        }\n                        if (parent.activeObj.isHorImageFlip) {\n                            ctx.translate(parent.activeObj.imageCanvas.width, 0);\n                            ctx.scale(-1, 1);\n                        }\n                    }\n                }\n                ctx.drawImage(tempCanvas, 0, 0);\n                ctx.setTransform(1, 0, 0, 1, 0, 0);\n            }\n            else {\n                ctx.drawImage(tempCanvas, 0, 0, tempCanvas.width, tempCanvas.height, parent.img.destLeft, parent.img.destTop, tempCanvas.width, tempCanvas.height);\n            }\n        }\n        else {\n            if (isNullOrUndefined(isImgAnnotation) || !isImgAnnotation) {\n                ctx.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, parent.img.destLeft, parent.img.destTop, parent.img.destWidth, parent.img.destHeight);\n            }\n        }\n    };\n    Draw.prototype.downScale = function (canvas, width, height, isImgAnnotation) {\n        var widthSource = canvas.width;\n        var heightSource = canvas.height;\n        width = Math.round(width);\n        height = Math.round(height);\n        var widthRatio = widthSource / width;\n        var heightRatio = heightSource / height;\n        var halfWidthRatio = Math.ceil(widthRatio / 2);\n        var halfHeightRatio = Math.ceil(heightRatio / 2);\n        var ctx = canvas.getContext('2d');\n        var img = ctx.getImageData(0, 0, widthSource, heightSource);\n        var img2 = ctx.createImageData(width, height);\n        var data = img.data;\n        var data2 = img2.data;\n        for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++) {\n                var x2 = (i + j * width) * 4;\n                var weight = 0;\n                var weights = 0;\n                var alphaWeights = 0;\n                var r = 0;\n                var g = 0;\n                var b = 0;\n                var a = 0;\n                var centerY = (j + 0.5) * heightRatio;\n                var startY = Math.floor(j * heightRatio);\n                var stopY = Math.ceil((j + 1) * heightRatio);\n                for (var y = startY; y < stopY; y++) {\n                    var dy = Math.abs(centerY - (y + 0.5)) / halfHeightRatio;\n                    var centerX = (i + 0.5) * widthRatio;\n                    var w0 = dy * dy; //pre-calc part of w\n                    var startX = Math.floor(i * widthRatio);\n                    var stopX = Math.ceil((i + 1) * widthRatio);\n                    for (var x = startX; x < stopX; x++) {\n                        var dx = Math.abs(centerX - (x + 0.5)) / halfWidthRatio;\n                        var w = Math.sqrt(w0 + dx * dx);\n                        if (w >= 1) {\n                            continue;\n                        }\n                        weight = 2 * w * w * w - 3 * w * w + 1;\n                        var xPos = 4 * (x + y * widthSource);\n                        a += weight * data[xPos + 3];\n                        alphaWeights += weight;\n                        weight = weight * data[xPos + 3] / 250;\n                        r += weight * data[xPos];\n                        g += weight * data[xPos + 1];\n                        b += weight * data[xPos + 2];\n                        weights += weight;\n                    }\n                }\n                data2[x2] = r / weights;\n                data2[x2 + 1] = g / weights;\n                data2[x2 + 2] = b / weights;\n                data2[x2 + 3] = a / alphaWeights;\n            }\n        }\n        canvas.width = isImgAnnotation ? this.parent.activeObj.activePoint.width : this.parent.lowerCanvas.width;\n        canvas.height = isImgAnnotation ? this.parent.activeObj.activePoint.height : this.parent.lowerCanvas.height;\n        ctx.putImageData(img2, 0, 0);\n    };\n    Draw.prototype.drawImgToCtx = function (ctx, preventImg) {\n        var parent = this.parent;\n        if (ctx.canvas.id !== parent.element.id + '_tempCanvas' && isNullOrUndefined(preventImg)) {\n            this.downScaleImgCanvas(ctx, null, null, null);\n        }\n    };\n    Draw.prototype.getFrameColor = function (frameObj, ctx, points) {\n        var parent = this.parent;\n        var color = parent.frameObj.color;\n        if (frameObj.gradientColor) {\n            var gradient = ctx.createLinearGradient(points.startX, points.startY, points.startX + points.width, points.startY + points.height);\n            gradient.addColorStop(0, frameObj.color);\n            gradient.addColorStop(1, frameObj.gradientColor);\n            color = gradient;\n        }\n        else {\n            color = frameObj.color;\n        }\n        return color;\n    };\n    Draw.prototype.applyFrame = function (ctx, frame, preventImg) {\n        var parent = this.parent;\n        parent.frameObj.type = frame;\n        var tempLineWidth;\n        var ratio = { width: 1, height: 1 };\n        var points = { startX: parent.img.destLeft - ctx.lineWidth, startY: parent.img.destTop - ctx.lineWidth,\n            width: parent.img.destWidth + (2 * ctx.lineWidth), height: parent.img.destHeight + (2 * ctx.lineWidth) };\n        var frameObj = { type: parent.frameObj.type, color: parent.frameObj.color, size: parent.frameObj.size,\n            inset: parent.frameObj.inset, offset: parent.frameObj.offset / 2, radius: parent.frameObj.radius,\n            amount: parent.frameObj.amount, border: parent.frameObj.border, gradientColor: parent.frameObj.gradientColor };\n        if (ctx.canvas.id === parent.element.id + '_tempCanvas') {\n            var newWidth = void 0;\n            var newHeight = void 0;\n            newWidth = ctx.canvas.width;\n            newHeight = ctx.canvas.height;\n            var obj = { width: 0, height: 0 };\n            parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n                value: { obj: obj, dimension: { width: newWidth, height: newHeight } } });\n            ratio = obj;\n            frameObj.size *= ((ratio.width + ratio.height) / 2);\n            frameObj.inset *= ((ratio.width + ratio.height) / 2);\n            frameObj.offset *= ((ratio.width + ratio.height) / 2);\n            frameObj.radius *= ((ratio.width + ratio.height) / 2);\n            points = { startX: 0, startY: 0, width: ctx.canvas.width, height: ctx.canvas.height };\n        }\n        else if (isNullOrUndefined(preventImg)) {\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        }\n        var valueForty = (40 * ((ratio.width + ratio.height) / 2));\n        var valueFifty = (50 * ((ratio.width + ratio.height) / 2));\n        frameObj.size += (frameObj.size * parent.transform.zoomFactor);\n        frameObj.inset += (frameObj.inset * parent.transform.zoomFactor);\n        frameObj.offset += (frameObj.offset * parent.transform.zoomFactor);\n        frameObj.radius += (frameObj.radius * parent.transform.zoomFactor);\n        valueForty += (valueForty * parent.transform.zoomFactor);\n        valueFifty += (valueFifty * parent.transform.zoomFactor);\n        var filter = ctx.filter;\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            this.drawImgToCtx(ctx, preventImg);\n        }\n        else {\n            switch (frame) {\n                case 'none':\n                    this.drawImgToCtx(ctx, preventImg);\n                    break;\n                case 'mat':\n                    this.drawImgToCtx(ctx, preventImg);\n                    ctx.filter = 'none';\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.beginPath();\n                    ctx.rect(points.startX, points.startY, points.width, points.height);\n                    ctx.rect(points.startX + frameObj.size, points.startY + frameObj.size, points.width -\n                        (2 * frameObj.size), points.height - (2 * frameObj.size));\n                    ctx.fill('evenodd');\n                    ctx.closePath();\n                    break;\n                case 'bevel':\n                    ctx.filter = 'none';\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.beginPath();\n                    ctx.fillRect(points.startX, points.startY, points.width, points.height);\n                    ctx.closePath();\n                    points.startX += frameObj.size;\n                    points.startY += frameObj.size;\n                    points.width -= (2 * frameObj.size);\n                    points.height -= (2 * frameObj.size);\n                    ctx.fillStyle = this.getFrameColor(frameObj, ctx, points);\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + valueForty, points.startY);\n                    ctx.lineTo(points.startX + points.width - valueForty, points.startY);\n                    ctx.quadraticCurveTo(points.startX + points.width, points.startY, points.startX + points.width, points.startY + valueForty);\n                    ctx.lineTo(points.startX + points.width, points.startY + points.height - valueForty);\n                    ctx.quadraticCurveTo(points.startX + points.width, points.startY + points.height, points.startX + points.width - valueForty, points.startY + points.height);\n                    ctx.lineTo(points.startX + valueForty, points.startY + points.height);\n                    ctx.quadraticCurveTo(points.startX, points.startY + points.height, points.startX, points.startY + points.height - valueForty);\n                    ctx.lineTo(points.startX, points.startY + valueForty);\n                    ctx.quadraticCurveTo(points.startX, points.startY, points.startX + valueForty, points.startY);\n                    ctx.closePath();\n                    ctx.clip();\n                    ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                    if (ctx.canvas.id === parent.element.id + '_tempCanvas') {\n                        if (preventImg) {\n                            preventImg = null;\n                            ctx.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, ctx.canvas.width, ctx.canvas.height);\n                            parent.frameObj.type = 'none';\n                            ctx.filter = 'none';\n                            parent.notify('export', { prop: 'drawAnnotation', onPropertyChange: false,\n                                value: { context: ctx, ratio: ratio } });\n                            parent.frameObj.type = 'bevel';\n                            ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                        }\n                        else {\n                            ctx.drawImage(parent.baseImg, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, ctx.canvas.width, ctx.canvas.height);\n                        }\n                    }\n                    else {\n                        if (preventImg) {\n                            preventImg = null;\n                            if (parent.transform.zoomFactor !== 0) {\n                                this.isRotateZoom = true;\n                            }\n                            this.updateCurrTransState('initial');\n                            this.drawImgToCtx(ctx, preventImg);\n                            this.updateCurrTransState('reverse');\n                            this.isRotateZoom = false;\n                            parent.frameObj.type = 'none';\n                            ctx.filter = 'none';\n                            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                                value: { context: ctx, points: null } });\n                            parent.frameObj.type = 'bevel';\n                            ctx.filter = filter === 'none' ? parent.canvasFilter : filter;\n                        }\n                        else {\n                            this.drawImgToCtx(ctx, preventImg);\n                        }\n                    }\n                    ctx.restore();\n                    break;\n                case 'line':\n                    this.drawImgToCtx(ctx, preventImg);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    for (var i = 0; i < parent.frameObj.amount; i++) {\n                        if (i > 0) {\n                            points.startX += frameObj.offset;\n                            points.startY += frameObj.offset;\n                            points.width -= (2 * frameObj.offset);\n                            points.height -= (2 * frameObj.offset);\n                        }\n                        var arcY2 = points.startY + points.height - frameObj.inset - frameObj.radius;\n                        var lineY = points.startY + frameObj.inset + frameObj.radius;\n                        var arcX2 = points.startX + points.width - frameObj.inset - frameObj.radius;\n                        var lineX = points.startX + frameObj.inset + frameObj.radius;\n                        var arcX1 = points.startX + frameObj.inset + frameObj.radius;\n                        var lineX2 = points.startX + points.width - frameObj.inset - frameObj.radius;\n                        var arcY1 = points.startY + frameObj.inset + frameObj.radius;\n                        var lineY2 = points.startY + points.height - frameObj.inset - frameObj.radius;\n                        if (arcY2 >= lineY && arcX2 >= lineX && arcX1 <= lineX2 && arcY1 <= lineY2) {\n                            ctx.filter = 'none';\n                            ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                            if (frameObj.border === 'dashed') {\n                                ctx.setLineDash([ctx.lineWidth * 2.5, ctx.lineWidth * 1.5]);\n                            }\n                            else if (frameObj.border === 'dotted') {\n                                ctx.setLineDash([ctx.lineWidth, ctx.lineWidth]);\n                            }\n                            ctx.beginPath();\n                            ctx.moveTo(points.startX + frameObj.inset + frameObj.radius, points.startY + frameObj.inset);\n                            ctx.lineTo(points.startX + points.width - frameObj.inset - frameObj.radius, points.startY + frameObj.inset);\n                            ctx.arcTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset, points.startX + points.width - frameObj.inset, points.startY + frameObj.inset + frameObj.radius, frameObj.radius);\n                            ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset -\n                                frameObj.radius);\n                            ctx.arcTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset, points.startX + points.width - frameObj.inset - frameObj.radius, points.startY + points.height\n                                - frameObj.inset, frameObj.radius);\n                            ctx.lineTo(points.startX + frameObj.inset + frameObj.radius, points.startY + points.height - frameObj.inset);\n                            ctx.arcTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset, points.startX + frameObj.inset, points.startY + points.height - frameObj.inset - frameObj.radius, frameObj.radius);\n                            ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset + frameObj.radius);\n                            ctx.arcTo(points.startX + frameObj.inset, points.startY + frameObj.inset, points.startX + frameObj.inset + frameObj.radius, points.startY + frameObj.inset, frameObj.radius);\n                            ctx.closePath();\n                            ctx.stroke();\n                            ctx.setLineDash([]);\n                        }\n                    }\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n                case 'inset':\n                    this.drawImgToCtx(ctx, preventImg);\n                    ctx.filter = 'none';\n                    ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + frameObj.offset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.offset, points.startY + frameObj.inset);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.offset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.offset);\n                    ctx.moveTo(points.startX + points.width - frameObj.offset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.offset, points.startY + points.height - frameObj.inset);\n                    ctx.moveTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.offset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.offset);\n                    ctx.stroke();\n                    ctx.closePath();\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n                case 'hook':\n                    this.drawImgToCtx(ctx, preventImg);\n                    ctx.filter = 'none';\n                    ctx.strokeStyle = this.getFrameColor(frameObj, ctx, points);\n                    tempLineWidth = ctx.lineWidth;\n                    ctx.lineWidth = frameObj.size / 10;\n                    ctx.beginPath();\n                    ctx.moveTo(points.startX + frameObj.inset + valueFifty, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + frameObj.inset + valueFifty);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset - valueFifty, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + frameObj.inset + valueFifty);\n                    ctx.moveTo(points.startX + points.width - frameObj.inset - valueFifty, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + points.width - frameObj.inset, points.startY + points.height - frameObj.inset - valueFifty);\n                    ctx.moveTo(points.startX + frameObj.inset + valueFifty, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset);\n                    ctx.lineTo(points.startX + frameObj.inset, points.startY + points.height - frameObj.inset - valueFifty);\n                    ctx.stroke();\n                    ctx.lineWidth = tempLineWidth;\n                    break;\n            }\n            if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: ctx, isSave: ctx.canvas.id === parent.element.id + '_tempCanvas' ? true : null, isFlip: null } });\n            }\n            ctx.filter = filter;\n        }\n    };\n    Draw.prototype.triggerFrameChange = function (prevFrameSettings) {\n        var _this = this;\n        var parent = this.parent;\n        var currFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n            gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n            offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n            lineCount: parent.frameObj.amount };\n        var frameChange = { cancel: false, previousFrameSetting: prevFrameSettings, currentFrameSetting: currFrameSettings };\n        if (isBlazor()) {\n            if (parent.events && parent.events.frameChanging.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('OnFrameChangingAsync', frameChange).then(function (args) {\n                    if (!args.cancel) {\n                        _this.setFrameObj(args.currentFrameSetting);\n                        var obj = { currObj: {} };\n                        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: obj } });\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                                operation: 'frame', previousObj: obj['currObj'], previousObjColl: obj['currObj']['objColl'],\n                                previousPointColl: obj['currObj']['pointColl'], previousSelPointColl: obj['currObj']['selPointColl'],\n                                previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                                previousFilter: null, isCircleCrop: null\n                            } });\n                        var fillColorDiv = parent.element.querySelector('.e-ie-toolbar-e-frame-color');\n                        if (fillColorDiv) {\n                            parent.element.querySelector('.e-ie-toolbar-e-frame-color' + parent.DDBPREVIEW).style.background = parent.frameObj.color;\n                        }\n                        var graColorDiv = parent.element.querySelector('.e-ie-toolbar-e-frame-gradient');\n                        if (graColorDiv) {\n                            var noColorDiv = document.querySelector('.e-dropdown-popup.e-frame-gradient-dd-btn');\n                            if (noColorDiv) {\n                                noColorDiv.querySelector('.e-nocolor-item').classList.remove('e-selected');\n                            }\n                            parent.element.querySelector('.e-ie-toolbar-e-frame-gradient' + parent.DDBPREVIEW).classList.remove('e-nocolor-item');\n                            if (parent.frameObj.gradientColor == '') {\n                                parent.element.querySelector('.e-ie-toolbar-e-frame-gradient' + parent.DDBPREVIEW).classList.add('e-nocolor-item');\n                            }\n                            else {\n                                parent.element.querySelector('.e-ie-toolbar-e-frame-gradient' + parent.DDBPREVIEW).style.background = parent.frameObj.gradientColor;\n                            }\n                        }\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                    }\n                });\n            }\n            else {\n                if (!frameChange.cancel) {\n                    this.setFrameObj(frameChange.currentFrameSetting);\n                }\n            }\n        }\n        else {\n            parent.trigger('frameChange', frameChange);\n            if (!frameChange.cancel) {\n                this.setFrameObj(frameChange.currentFrameSetting);\n            }\n        }\n        return frameChange;\n    };\n    Draw.prototype.setFrameObj = function (currFrameSettings) {\n        var parent = this.parent;\n        parent.frameObj.type = currFrameSettings.type.toLowerCase();\n        parent.frameObj.color = currFrameSettings.color;\n        parent.frameObj.gradientColor = currFrameSettings.gradientColor;\n        parent.frameObj.size = currFrameSettings.size;\n        parent.frameObj.inset = currFrameSettings.inset;\n        parent.frameObj.offset = currFrameSettings.offset;\n        parent.frameObj.radius = currFrameSettings.borderRadius;\n        parent.frameObj.border = currFrameSettings.frameLineStyle.toLowerCase();\n        parent.frameObj.amount = currFrameSettings.lineCount;\n    };\n    return Draw;\n}());\nexport { Draw };\n","import { extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Export = /** @class */ (function () {\n    function Export(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Export.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Export.prototype.addEventListener = function () {\n        this.parent.on('export', this.export, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Export.prototype.removeEventListener = function () {\n        this.parent.off('export', this.export);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Export.prototype.export = function (args) {\n        if (isBlazor()) {\n            var obj = { shape: '' };\n            this.parent.notify('selection', { prop: 'getCurrentDrawingShape', onPropertyChange: false, value: { obj: obj } });\n            if (obj['shape'] !== '') {\n                this.parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n                this.parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        else {\n            this.parent.notify('toolbar', { prop: 'refreshShapeDrawing', onPropertyChange: false });\n        }\n        this.updatePvtVar();\n        switch (args.prop) {\n            case 'export':\n                this.exportImg(args.value['type'], args.value['fileName']);\n                break;\n            case 'exportToCanvas':\n                this.exportToCanvas(args.value['object']);\n                break;\n            case 'drawAnnotation':\n                this.drawAnnotation(args.value['context'], args.value['ratio']);\n                break;\n        }\n    };\n    Export.prototype.getModuleName = function () {\n        return 'export';\n    };\n    Export.prototype.updatePvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Export.prototype.exportImg = function (type, fileName) {\n        var _this = this;\n        var parent = this.parent;\n        var obj = { fileName: '' };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var imageName = obj['fileName'];\n        if (!parent.disabled && parent.isImageLoaded) {\n            var dummyObj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: dummyObj } });\n            if (dummyObj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n            }\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            }\n            if (parent.textArea.style.display === 'block') {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            var obj_1 = { canvasFilter: this.parent.canvasFilter };\n            this.lowerContext.filter = obj_1['canvasFilter'];\n            type = type ? type : 'Png';\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            var beforeSave = { cancel: false, fileName: fileName ? fileName : imageName,\n                fileType: type };\n            if (isBlazor() && parent.events && parent.events.saving.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('BeforeSaveEventAsync', 'BeforeSave', beforeSave).then(function (beforeSave) {\n                    _this.beforeSaveEvent(beforeSave, type, fileName, imageName);\n                });\n            }\n            else {\n                parent.trigger('beforeSave', beforeSave);\n                this.beforeSaveEvent(beforeSave, type, fileName, imageName);\n            }\n        }\n    };\n    Export.prototype.beforeSaveEvent = function (observableSaveArgs, type, fileName, imageName) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.currObjType.isSave = true;\n            fileName = observableSaveArgs.fileName ? observableSaveArgs.fileName : fileName;\n            var lowerCaseType = type.toLowerCase();\n            fileName = fileName || imageName;\n            if (lowerCaseType === 'svg') {\n                this.toSVGImg(fileName);\n            }\n            else {\n                this.toBlobFn(fileName, lowerCaseType);\n            }\n            var saved = { fileName: fileName ? fileName : imageName, fileType: type };\n            parent.trigger('saved', saved);\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            parent.lowerCanvas.style.left = parent.upperCanvas.style.left = '';\n            parent.lowerCanvas.style.top = parent.upperCanvas.style.top = '';\n            parent.lowerCanvas.style.maxWidth = parent.upperCanvas.style.maxWidth = '';\n            parent.lowerCanvas.style.maxHeight = parent.upperCanvas.style.maxHeight = '';\n        }\n    };\n    Export.prototype.toSVGImg = function (fileName) {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var tempCanvas = this.exportToCanvas();\n        var dataUrl = tempCanvas.toDataURL();\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', tempCanvas.style.maxWidth);\n        svg.setAttribute('height', tempCanvas.style.maxHeight);\n        var XLinkNS = 'http://www.w3.org/1999/xlink';\n        var img = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        img.setAttributeNS(null, 'height', tempCanvas.height.toString());\n        img.setAttributeNS(null, 'width', tempCanvas.width.toString());\n        img.setAttributeNS(XLinkNS, 'xlink:href', dataUrl);\n        svg.appendChild(img);\n        var prefix = 'data:image/svg+xml;base64,';\n        var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n            + (\" width=\\\"\" + tempCanvas.width + \"\\\"\") + (\" height=\\\"\" + tempCanvas.height + \"\\\"\") + '>';\n        var footer = '</svg>';\n        var body = svg.innerHTML;\n        var data = header + body + footer;\n        var svgDataUrl = prefix + btoa(data);\n        if (fileName === null) {\n            return svgDataUrl;\n        }\n        else {\n            this.downloadImg(svgDataUrl, fileName + '.' + 'svg');\n            return null;\n        }\n    };\n    Export.prototype.toBlobFn = function (fileName, type) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var tempCanvas = this.exportToCanvas();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        tempCanvas.toBlob(function (blob) {\n            var blobUrl = URL.createObjectURL(blob);\n            proxy.downloadImg(blobUrl, fileName + '.' + type);\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n        }, 'image/png');\n    };\n    Export.prototype.exportToCanvas = function (object) {\n        var parent = this.parent;\n        var width;\n        var height;\n        if (this.parent.aspectWidth) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'resizeClick', value: { bool: false } });\n            }\n            else {\n                parent.performResizeClick();\n            }\n            parent.currentToolbar = 'resize-toolbar';\n            parent.okBtn();\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                width = this.parent.aspectHeight;\n                height = this.parent.aspectWidth;\n            }\n            else {\n                width = this.parent.aspectWidth;\n                height = this.parent.aspectHeight;\n            }\n        }\n        else if (parent.currSelectionPoint) {\n            width = parent.img.srcWidth;\n            height = parent.img.srcHeight;\n        }\n        else {\n            width = parent.baseImgCanvas.width;\n            height = parent.baseImgCanvas.height;\n        }\n        var obj = { width: 0, height: 0 };\n        parent.notify('crop', { prop: 'calcRatio', onPropertyChange: false,\n            value: { obj: obj, dimension: { width: width, height: height } } });\n        var ratio = obj;\n        var tempContextFilter = this.lowerContext.filter;\n        // Manipulating blur value\n        if (this.lowerContext.filter !== 'none') {\n            var splitWords = this.lowerContext.filter.split(' ');\n            var value = parseFloat(splitWords[5].split('(')[1]);\n            value *= ((ratio.width + ratio.height) / 2);\n            splitWords[5] = 'blur(' + value + 'px)';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n        var tempCanvas = parent.createElement('canvas', {\n            id: parent.element.id + '_tempCanvas', attrs: { name: 'canvasImage' }\n        });\n        var tempContext = tempCanvas.getContext('2d');\n        tempCanvas.width = width;\n        tempCanvas.height = height;\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: width, height: height, obj: dimObj } });\n        var maxDimension = dimObj;\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n        var temp = this.lowerContext.filter;\n        tempContext.filter = this.lowerContext.filter;\n        this.downScaleImgCanvas(tempContext, width, height);\n        this.updateFrame(tempContext);\n        this.lowerContext.filter = temp;\n        if (parent.transform.degree !== 0 || parent.transform.currFlipState !== '') {\n            this.updateSaveContext(tempContext);\n            this.exportTransformedImage(tempContext);\n        }\n        this.drawAnnotation(tempContext, ratio);\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: tempContext, isSave: true, isFlip: null } });\n        }\n        this.updateFrame(tempContext, true);\n        this.lowerContext.filter = tempContextFilter;\n        parent.canvasFilter = tempContextFilter;\n        if (object) {\n            object['canvas'] = tempCanvas;\n        }\n        return tempCanvas;\n    };\n    Export.prototype.drawAnnotation = function (tempContext, ratio) {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            var tempObjColl = extend([], parent.objColl, [], true);\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var activePoint = parent.objColl[i].activePoint;\n                // Subtracting destination left and top points\n                activePoint.startX -= parent.img.destLeft;\n                activePoint.startY -= parent.img.destTop;\n                activePoint.endX -= parent.img.destLeft;\n                activePoint.endY -= parent.img.destTop;\n                activePoint.width = activePoint.endX - activePoint.startX;\n                activePoint.height = activePoint.endY - activePoint.startY;\n                // Manipulating points\n                activePoint.startX *= ratio.width;\n                activePoint.startY *= ratio.height;\n                activePoint.endX *= ratio.width;\n                activePoint.endY *= ratio.height;\n                activePoint.width = activePoint.endX - activePoint.startX;\n                activePoint.height = activePoint.endY - activePoint.startY;\n                parent.objColl[i].strokeSettings.strokeWidth *= ((ratio.width + ratio.height) / 2);\n                if (parent.objColl[i].shape === 'text') {\n                    parent.objColl[i].textSettings.fontSize *= ((ratio.width + ratio.height) / 2);\n                }\n                else if (parent.objColl[i].shape === 'path') {\n                    for (var l = 0; l < parent.objColl[i].pointColl.length; l++) {\n                        parent.objColl[i].pointColl[l].x =\n                            (parent.objColl[i].pointColl[l].x - parent.img.destLeft) * ratio.width;\n                        parent.objColl[i].pointColl[l].y =\n                            (parent.objColl[i].pointColl[l].y - parent.img.destTop) * ratio.height;\n                    }\n                }\n                else if (parent.objColl[i].shape === 'image') {\n                    parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                    parent.notify('selection', { prop: 'upgradeImageQuality', onPropertyChange: false });\n                    parent.objColl[i] = extend({}, parent.activeObj, {}, true);\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'saveContext', obj: parent.objColl[i], isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: tempContext, isPreventSelection: null } });\n            }\n            tempContext.filter = temp;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.objColl = tempObjColl;\n        }\n        if (parent.freehandCounter > 0) {\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            for (var n = 0; n < parent.freehandCounter; n++) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n                var len = parent.points.length;\n                parent.pointColl[n].strokeWidth *= ((ratio.width + ratio.height) / 2);\n                for (var l = 0; l < len; l++) {\n                    parent.points[l].x = (parent.points[l].x - parent.img.destLeft) * ratio.width;\n                    parent.points[l].y = (parent.points[l].y - parent.img.destTop) * ratio.height;\n                }\n            }\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: tempContext, points: null } });\n            parent.pointColl = tempPointColl;\n        }\n    };\n    Export.prototype.downScaleImgCanvas = function (ctx, width, height) {\n        var parent = this.parent;\n        var canvas = parent.baseImgCanvas;\n        var img = parent.baseImg;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: img.width, height: img.height, obj: obj, isImgShape: null } });\n        if (obj['width'] > width && obj['height'] > height) {\n            var tempCanvas = parent.createElement('canvas', {\n                id: parent.element.id + '_downScaleCanvas', attrs: { name: 'canvasImage' }\n            });\n            tempCanvas.width = this.parent.img.srcWidth;\n            tempCanvas.height = this.parent.img.srcHeight;\n            tempCanvas.getContext('2d').drawImage(canvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, tempCanvas.width, tempCanvas.height);\n            parent.notify('draw', { prop: 'downScale', value: { canvas: tempCanvas, width: width, height: height } });\n            ctx.drawImage(tempCanvas, 0, 0);\n        }\n        else {\n            ctx.drawImage(parent.baseImgCanvas, parent.img.srcLeft, parent.img.srcTop, parent.img.srcWidth, parent.img.srcHeight, 0, 0, width, height);\n        }\n    };\n    Export.prototype.updateFrame = function (tempContext, isAnnotation) {\n        if (this.parent.frameObj.type !== 'none') {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            this.parent.notify('draw', { prop: 'applyFrame', value: { ctx: tempContext, frame: this.parent.frameObj.type, preventImg: isAnnotation } });\n            tempContext.filter = temp;\n        }\n    };\n    Export.prototype.downloadImg = function (blob, fileName) {\n        var a = document.createElement('a');\n        a.href = blob;\n        a.target = '_parent';\n        a.download = fileName;\n        (document.body || document.documentElement).appendChild(a);\n        a.click();\n        a.parentNode.removeChild(a);\n    };\n    Export.prototype.exportTransformedImage = function (tempContext) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        for (var i = 0, len = parent.rotateFlipColl.length; i < len; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var flip = parent.rotateFlipColl[i];\n            if (typeof flip === 'number') {\n                this.exportRotate(tempContext, flip);\n            }\n            else if (flip === 'horizontal') {\n                this.exportFlip(tempContext, true, false);\n            }\n            else if (flip === 'vertical') {\n                this.exportFlip(tempContext, false, true);\n            }\n        }\n        parent.transform.degree = degree;\n    };\n    Export.prototype.exportRotate = function (tempContext, degree) {\n        var parent = this.parent;\n        this.setMaxDim(parent.transform.degree, tempContext.canvas);\n        tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n        tempContext.rotate(Math.PI / 180 * degree);\n        tempContext.drawImage(parent.inMemoryCanvas, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.exportFlip = function (tempContext, flipHorizontal, flipVertical) {\n        if (flipHorizontal) {\n            tempContext.translate(tempContext.canvas.width, 0);\n            tempContext.scale(-1, 1);\n        }\n        if (flipVertical) {\n            tempContext.translate(0, tempContext.canvas.height);\n            tempContext.scale(1, -1);\n        }\n        tempContext.drawImage(this.parent.inMemoryCanvas, 0, 0);\n        this.updateSaveContext(tempContext);\n    };\n    Export.prototype.updateSaveContext = function (tempContext) {\n        var inMemoryContext = this.parent.inMemoryCanvas.getContext('2d');\n        tempContext.setTransform(1, 0, 0, 1, 0, 0);\n        var imageData = tempContext.getImageData(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        this.parent.inMemoryCanvas.width = imageData.width;\n        this.parent.inMemoryCanvas.height = imageData.height;\n        inMemoryContext.putImageData(imageData, 0, 0);\n    };\n    Export.prototype.setMaxDim = function (degree, tempCanvas) {\n        var newWidth;\n        var newHeight;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            newWidth = isNullOrUndefined(this.parent.currSelectionPoint) ? this.parent.baseImgCanvas.height : this.parent.img.srcHeight;\n            newHeight = isNullOrUndefined(this.parent.currSelectionPoint) ? this.parent.baseImgCanvas.width : this.parent.img.srcWidth;\n        }\n        else if (degree % 180 === 0 || degree === 0) {\n            newWidth = isNullOrUndefined(this.parent.currSelectionPoint) ? this.parent.baseImgCanvas.width : this.parent.img.srcWidth;\n            newHeight = isNullOrUndefined(this.parent.currSelectionPoint) ? this.parent.baseImgCanvas.height : this.parent.img.srcHeight;\n        }\n        if (!isNullOrUndefined(this.parent.aspectWidth)) {\n            newWidth = this.parent.aspectWidth;\n            newHeight = this.parent.aspectHeight;\n        }\n        tempCanvas.width = newWidth;\n        tempCanvas.height = newHeight;\n        var obj = { width: 0, height: 0 };\n        this.parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: newWidth, height: newHeight, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n    };\n    return Export;\n}());\nexport { Export };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nvar Filter = /** @class */ (function () {\n    function Filter(parent) {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, transparency: 100, sharpen: false, bw: false }; // for toolbar slider value\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, transparency: 100, sharpen: false, bw: false }; // for temp toolbar slider value\n        this.adjustmentValue = ''; // for internal slider value\n        this.isBrightnessAdjusted = false;\n        this.appliedFilter = '';\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Filter.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Filter.prototype.addEventListener = function () {\n        this.parent.on('filter', this.filter, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Filter.prototype.removeEventListener = function () {\n        this.parent.off('filter', this.filter);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Filter.prototype.filter = function (args) {\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'finetuneImage':\n                this.finetuneImage(args.value['option'], args.value['value']);\n                break;\n            case 'applyImageFilter':\n                this.setFilter(args.value['option']);\n                break;\n            case 'update-finetunes':\n                this.updateFinetunes();\n                break;\n            case 'set-adjustment':\n                this.setAdjustment(args.value['operation']);\n                break;\n            case 'update-filter':\n                this.updateFilter(args.value['operation'], args.value['filter']);\n                break;\n            case 'initFilter':\n                this.initFilter();\n                break;\n            case 'setCurrAdjValue':\n                this.setCurrAdjValue(args.value['type'], args.value['value']);\n                break;\n            case 'updateAdj':\n                this.updateAdj(args.value['type'], args.value['value'], args.value['isPreview'], args.value['ctx']);\n                break;\n            case 'getCurrentObj':\n                this.getCurrentObj(args.value['object']);\n                break;\n            case 'getAdjustmentLevel':\n                if (isNullOrUndefined(this.parent.activeObj.imageTransparency)) {\n                    this.adjustmentLevel.transparency = 100;\n                }\n                else {\n                    this.adjustmentLevel.transparency = this.parent.activeObj.imageTransparency * 100;\n                }\n                args.value['obj']['adjustmentLevel'] = this.adjustmentLevel;\n                break;\n            case 'setAdjustmentLevel':\n                this.adjustmentLevel = args.value['adjustmentLevel'];\n                break;\n            case 'getTempAdjustmentLevel':\n                args.value['obj']['tempAdjustmentLevel'] = this.tempAdjustmentLevel;\n                break;\n            case 'setTempAdjustmentLevel':\n                this.tempAdjustmentLevel = args.value['tempAdjustmentLevel'];\n                break;\n            case 'setAdjustmentValue':\n                this.adjustmentValue = args.value['adjustmentValue'];\n                break;\n            case 'getBrightnessAdjusted':\n                args.value['obj']['isBrightnessAdjusted'] = this.isBrightnessAdjusted;\n                break;\n            case 'setBrightnessAdjusted':\n                this.isBrightnessAdjusted = args.value['isBrightnessAdjusted'];\n                if (this.parent.currentFilter.split('_') && this.parent.currentFilter.split('_')[1] === 'cold') {\n                    this.isBrightnessAdjusted = false;\n                }\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Filter.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n    };\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.reset = function () {\n        this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, transparency: 100, sharpen: false, bw: false };\n        this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n            blur: 0, exposure: 0, transparency: 100, sharpen: false, bw: false };\n        this.adjustmentValue = this.parent.getDefaultFilter();\n        this.isBrightnessAdjusted = false;\n        this.appliedFilter = '';\n    };\n    Filter.prototype.updateFinetunes = function () {\n        var parent = this.parent;\n        var fs = parent.finetuneSettings;\n        if (fs) {\n            if (fs.brightness) {\n                this.adjustmentLevel.brightness = fs.brightness.defaultValue;\n                this.tempAdjustmentLevel.brightness = fs.brightness.defaultValue;\n            }\n            if (fs.contrast) {\n                this.adjustmentLevel.contrast = fs.contrast.defaultValue;\n                this.tempAdjustmentLevel.contrast = fs.contrast.defaultValue;\n            }\n            if (fs.hue) {\n                this.adjustmentLevel.hue = fs.hue.defaultValue;\n                this.tempAdjustmentLevel.hue = fs.hue.defaultValue;\n            }\n            if (fs.saturation) {\n                this.adjustmentLevel.saturation = fs.saturation.defaultValue;\n                this.tempAdjustmentLevel.saturation = fs.saturation.defaultValue;\n            }\n            if (fs.exposure) {\n                this.adjustmentLevel.exposure = fs.exposure.defaultValue;\n                this.tempAdjustmentLevel.exposure = fs.exposure.defaultValue;\n            }\n            if (fs.opacity) {\n                this.adjustmentLevel.opacity = fs.opacity.defaultValue;\n                this.tempAdjustmentLevel.opacity = fs.opacity.defaultValue;\n            }\n            if (fs.blur) {\n                this.adjustmentLevel.blur = fs.blur.defaultValue;\n                this.tempAdjustmentLevel.blur = fs.blur.defaultValue;\n            }\n            parent.notify('draw', { prop: 'isInitialLoading', onPropertyChange: false, value: { isInitialLoading: true } });\n        }\n    };\n    Filter.prototype.initFilter = function () {\n        this.setFilterAdj('brightness', this.adjustmentLevel.brightness);\n        this.setFilterAdj('contrast', this.adjustmentLevel.contrast);\n        this.setFilterAdj('hue', this.adjustmentLevel.hue);\n        this.setFilterAdj('saturation', this.adjustmentLevel.saturation);\n        this.setFilterAdj('exposure', this.adjustmentLevel.exposure);\n        this.setFilterAdj('opacity', this.adjustmentLevel.opacity);\n        this.setFilterAdj('blur', this.adjustmentLevel.blur);\n    };\n    Filter.prototype.updateAdj = function (type, value, isPreview, ctx) {\n        var parent = this.parent;\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var splitWords = this.lowerContext.filter.split(' ');\n        var values = [];\n        var opacityValue;\n        var brightnessValue;\n        if (splitWords[4]) {\n            opacityValue = parseFloat(splitWords[4].split('(')[1]);\n        }\n        if (splitWords[0]) {\n            brightnessValue = parseFloat(splitWords[0].split('(')[1]);\n        }\n        var brightness = this.getFilterValue(this.adjustmentLevel.brightness);\n        var excludedTypes = ['brightness', 'contrast', 'hue', 'saturation', 'exposure', 'opacity', 'blur'];\n        if (excludedTypes.indexOf(type) === -1) {\n            if (isNullOrUndefined(isPreview) && (this.adjustmentLevel.sharpen || this.adjustmentLevel.bw)) {\n                parent.isUndoRedo = true;\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                this.lowerContext.filter = temp;\n                parent.isUndoRedo = false;\n            }\n        }\n        var saturate;\n        var bright;\n        var saturatePercent;\n        var contrast;\n        var saturatePercentage;\n        switch (type) {\n            case 'brightness':\n                value = this.getFilterValue(this.adjustmentLevel.exposure) + (value * 0.005);\n                splitWords[0] = 'brightness(' + value + ')';\n                if (this.adjustmentLevel.brightness !== 0) {\n                    value = (this.adjustmentLevel.opacity / 100) - (this.adjustmentLevel.opacity * 0.3) / 100;\n                    splitWords[4] = 'opacity(' + value + ')';\n                }\n                else {\n                    value = this.adjustmentLevel.opacity / 100;\n                    splitWords[4] = 'opacity(' + value + ')';\n                }\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'contrast':\n                splitWords[1] = 'contrast(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'hue':\n                splitWords[2] = 'hue-rotate(' + value + 'deg)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'saturation':\n                splitWords[3] = 'saturate(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'opacity':\n                if (parseFloat(splitWords[0].split('(')[1]) !== 1) {\n                    value -= 0.2;\n                }\n                splitWords[4] = 'opacity(' + value + ')';\n                opacityValue = value;\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'blur':\n                splitWords[5] = 'blur(' + value + 'px)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'exposure':\n                if (value > 1) {\n                    value -= 1;\n                    value += brightness;\n                }\n                else if (value < 1) {\n                    value = 1 - value;\n                    value = brightness - value;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'chrome':\n                saturate = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturate *= 100;\n                value = saturate + (saturate * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'cold':\n                // Adjusting Brightness\n                bright = this.getFilterValue(this.adjustmentLevel.brightness);\n                bright *= 100;\n                value = bright * 0.9;\n                value *= 0.01;\n                splitWords[0] = 'brightness(' + value + ')';\n                // Adjusting Contrast\n                contrast = this.getFilterValue(this.adjustmentLevel.contrast);\n                contrast *= 100;\n                value = contrast + (contrast * 0.5);\n                splitWords[1] = 'contrast(' + value + '%)';\n                // Adjusting Saturation\n                saturatePercentage = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercentage *= 100;\n                value = saturatePercentage;\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'warm':\n                saturatePercent = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercent *= 100;\n                value = saturatePercent + (saturatePercent * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                splitWords[6] = 'sepia(25%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'grayscale':\n                splitWords[7] = 'grayscale(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'sepia':\n                splitWords[6] = 'sepia(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'invert':\n                splitWords[8] = 'invert(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                break;\n        }\n        if (type !== 'sharpen' && type !== 'blackandwhite') {\n            if (isNullOrUndefined(isPreview)) {\n                if (type === 'default') {\n                    splitWords = this.getDefaultCurrentFilter(splitWords);\n                }\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n            this.appliedFilter = this.lowerContext.filter;\n            parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            if (isNullOrUndefined(isPreview)) {\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            parent.initialAdjustmentValue = splitWords.join(' ');\n            var tempFilter = this.lowerContext.filter;\n            this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n            parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n            this.lowerContext.filter = tempFilter;\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            this.isBrightnessAdjusted = brightness !== 1;\n        }\n        var filter = splitWords.join(' ');\n        if (ctx) {\n            ctx.filter = filter;\n        }\n    };\n    Filter.prototype.setTempFilterValue = function (brightness, isPreview, splitWords, type) {\n        if (isPreview) {\n            if (type === 'default') {\n                splitWords = this.getDefaultCurrentFilter(splitWords);\n            }\n            else if (brightness !== 1) {\n                var tempSplitWords = this.lowerContext.filter.split(' ');\n                tempSplitWords[4] = splitWords[4];\n                this.lowerContext.filter = tempSplitWords.join(' ');\n            }\n        }\n        return splitWords;\n    };\n    Filter.prototype.getDefaultCurrentFilter = function (splitWords) {\n        var values = this.adjustmentValue.split(' ');\n        splitWords = [\n            values[0],\n            values[1],\n            values[2],\n            values[3],\n            values[4],\n            values[5],\n            'sepia(0%)',\n            'grayscale(0%)',\n            'invert(0%)'\n        ];\n        return splitWords;\n    };\n    Filter.prototype.getFilterValue = function (value) {\n        return (value === 0) ? 1 : 1 + ((value * 0.5) / 100);\n    };\n    Filter.prototype.getSaturationFilterValue = function (value) {\n        return value === 0 ? 1 : 1 + (value / 100);\n    };\n    Filter.prototype.setFilterAdj = function (type, value) {\n        var parent = this.parent;\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        this.adjustmentLevel[\"\" + type] = value;\n        switch (type) {\n            case 'contrast':\n            case 'exposure':\n                value = this.getFilterValue(value);\n                if (type === 'contrast') {\n                    value *= 100;\n                }\n                break;\n            case 'hue':\n                value *= 3;\n                break;\n            case 'saturation':\n                value = this.getSaturationFilterValue(value) * 100;\n                break;\n            case 'opacity':\n                if (value >= 50) {\n                    value /= 100;\n                }\n                else if (value === 40) {\n                    value = 0.45;\n                }\n                else if (value === 30) {\n                    value = 0.40;\n                }\n                else if (value === 20) {\n                    value = 0.35;\n                }\n                else if (value === 10) {\n                    value = 0.30;\n                }\n                else if (value === 0) {\n                    value = 0.25;\n                }\n                break;\n            case 'blur':\n                if (value !== 0) {\n                    value /= 20;\n                    // Since 0.5 is not working in blur we consider from 1\n                    value += 0.5;\n                }\n                break;\n        }\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, value);\n        parent.notify('undo-redo', {\n            prop: 'updateUndoRedoColl',\n            onPropertyChange: false,\n            value: {\n                operation: type,\n                previousObj: prevObj,\n                previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl,\n                previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj,\n                previousText: null,\n                currentText: null,\n                previousFilter: null,\n                isCircleCrop: null\n            }\n        });\n    };\n    Filter.prototype.setFilter = function (type) {\n        var parent = this.parent;\n        type = type.toLowerCase();\n        parent.notify('freehand-draw', { prop: 'apply-pen-draw', onPropertyChange: false });\n        var obj = { currentFilter: this.parent.currentFilter };\n        var prevFilter = obj['currentFilter'];\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.updateAdj(type, null);\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: type, previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: prevFilter, isCircleCrop: null } });\n    };\n    Filter.prototype.setAdjustment = function (type) {\n        var splitWords = this.lowerContext.filter.split(' ');\n        var value;\n        var valueArr;\n        switch (type) {\n            case 'brightness':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.brightness = this.setFilterValue(value);\n                break;\n            case 'contrast':\n                valueArr = splitWords[1].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.contrast = this.setFilterValue(value);\n                break;\n            case 'hue':\n                valueArr = splitWords[2].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 3;\n                this.adjustmentLevel.hue = value;\n                break;\n            case 'saturation':\n                valueArr = splitWords[3].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.saturation = this.setSaturationFilterValue(value);\n                break;\n            case 'opacity':\n                valueArr = splitWords[4].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                if (value === 0.45) {\n                    value = 40;\n                }\n                else if (value === 0.40) {\n                    value = 30;\n                }\n                else if (value === 0.35) {\n                    value = 20;\n                }\n                else if (value === 0.30) {\n                    value = 10;\n                }\n                else if (value === 0.25) {\n                    value = 0;\n                }\n                else {\n                    value *= 100;\n                }\n                this.adjustmentLevel.opacity = value;\n                break;\n            case 'blur':\n                valueArr = splitWords[5].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value *= 20;\n                this.adjustmentLevel.blur = value;\n                break;\n            case 'exposure':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.exposure = this.setFilterValue(value);\n                break;\n        }\n    };\n    Filter.prototype.setFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : ((value - 1) * 100) / 0.5);\n    };\n    Filter.prototype.setSaturationFilterValue = function (value) {\n        return Math.round((value === 1) ? 0 : (value - 1) * 100);\n    };\n    Filter.prototype.updateFilter = function (type, previousFilter) {\n        var parent = this.parent;\n        var validTypes = ['default', 'chrome', 'cold', 'warm', 'grayscale', 'blackandwhite', 'sepia', 'invert', 'sharpen'];\n        if (validTypes.indexOf(type) !== -1) {\n            var selEle = parent.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n            if (selEle) {\n                selEle.classList.remove('e-selected');\n            }\n            var filterCanvas = document.getElementById(parent.element.id + '_' + type + 'Canvas');\n            if (filterCanvas) {\n                filterCanvas.parentElement.classList.add('e-selected');\n            }\n            this.parent.currentFilter = previousFilter ? previousFilter : parent.element.id + '_' + type;\n        }\n    };\n    Filter.prototype.finetuneImage = function (finetuneOption, value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            switch (finetuneOption.toLowerCase()) {\n                case 'brightness':\n                    this.setFilterAdj('brightness', value);\n                    break;\n                case 'contrast':\n                    this.setFilterAdj('contrast', value);\n                    break;\n                case 'hue':\n                    this.setFilterAdj('hue', value);\n                    break;\n                case 'saturation':\n                    this.setFilterAdj('saturation', value);\n                    break;\n                case 'opacity':\n                    this.setFilterAdj('opacity', value);\n                    break;\n                case 'blur':\n                    this.setFilterAdj('blur', value);\n                    break;\n                case 'exposure':\n                    this.setFilterAdj('exposure', value);\n                    break;\n            }\n            this.parent.canvasFilter = this.lowerContext.filter;\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    Filter.prototype.setCurrAdjValue = function (type, value) {\n        this.parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        switch (type) {\n            case 'brightness':\n                this.setFilterAdj('brightness', value);\n                break;\n            case 'contrast':\n                this.setFilterAdj('contrast', value);\n                break;\n            case 'hue':\n                this.setFilterAdj('hue', value);\n                break;\n            case 'saturation':\n                this.setFilterAdj('saturation', value);\n                break;\n            case 'opacity':\n                this.setFilterAdj('opacity', value);\n                break;\n            case 'blur':\n                this.setFilterAdj('blur', value);\n                break;\n            case 'exposure':\n                this.setFilterAdj('exposure', value);\n                break;\n        }\n    };\n    Filter.prototype.getCurrentObj = function (dummyObj) {\n        var parent = this.parent;\n        var tempFlipPanPointObj = { point: null };\n        parent.notify('crop', { prop: 'getTempFlipPanPoint', value: { obj: tempFlipPanPointObj } });\n        var zoomObj = { previousZoomValue: null };\n        parent.notify('transform', { prop: 'getPreviousZoomValue', value: { obj: zoomObj } });\n        var obj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n            rotateFlipColl: [], degree: 0, currFlipState: '', zoomFactor: 0, previousZoomValue: 0,\n            destPoints: { startX: 0, startY: 0, width: 0, height: 0 }, frame: 'none',\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: this.isBrightnessAdjusted,\n            aspectWidth: null, aspectHeight: null };\n        obj.cropZoom = parent.transform.cropZoomFactor;\n        obj.defaultZoom = parent.transform.defaultZoomFactor;\n        obj.zoomFactor = parent.zoomSettings.zoomFactor;\n        obj.previousZoomValue = zoomObj['previousZoomValue'];\n        obj.totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, {}, true);\n        obj.totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n        obj.totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n        obj.tempFlipPanPoint = extend({}, tempFlipPanPointObj['point'], {}, true);\n        obj.activeObj = extend({}, parent.activeObj, {}, true);\n        obj.rotateFlipColl = extend([], parent.rotateFlipColl, [], true);\n        obj.degree = parent.transform.degree;\n        obj.currFlipState = parent.transform.currFlipState;\n        obj.destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, endX: 0, endY: 0,\n            width: parent.img.destWidth, height: parent.img.destHeight };\n        obj.srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, endX: 0, endY: 0,\n            width: parent.img.srcWidth, height: parent.img.srcHeight };\n        obj.filter = this.lowerContext.filter;\n        obj.aspectWidth = parent.aspectWidth;\n        obj.aspectHeight = parent.aspectHeight;\n        obj.frame = parent.frameObj.type;\n        obj.frameObj = extend({}, parent.frameObj);\n        if (dummyObj) {\n            dummyObj['currObj'] = obj;\n        }\n        return obj;\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ShapeType } from '../index';\nvar FreehandDrawing = /** @class */ (function () {\n    function FreehandDrawing(parent) {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = false;\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.isFreehandPointMoved = false;\n        this.pointCounter = 0;\n        // eslint-disable-next-line\n        this.selPointColl = {};\n        this.currFHDIdx = 0; // Specifies id for every freehand drawing - uses while deleting\n        this.selPoints = [];\n        this.dummyPoints = [];\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FreehandDrawing.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    FreehandDrawing.prototype.addEventListener = function () {\n        this.parent.on('freehand-draw', this.draw, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    FreehandDrawing.prototype.removeEventListener = function () {\n        this.parent.off('freehand-draw', this.draw);\n        this.parent.off('destroyed', this.destroy);\n    };\n    FreehandDrawing.prototype.draw = function (args) {\n        this.updateFhdPvtVar();\n        switch (args.prop) {\n            case 'hoverFhd': {\n                this.hoverFhd(args.value['strokeColor'], args.value['strokeWidth']);\n                break;\n            }\n            case 'freehandDownHandler':\n                this.freehandDownHandler(args.value['e'], args.value['canvas']);\n                break;\n            case 'freehandUpHandler':\n                this.freehandUpHandler(args.value['e'], args.value['canvas'], args.value['context']);\n                break;\n            case 'handle-freehand-draw': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                if (this.isFHDIdx(id)) {\n                    this.deleteFhd(id, true);\n                }\n                break;\n            }\n            case 'freehandRedraw':\n                this.freehandRedraw(args.value['context'], args.value['points']);\n                break;\n            case 'deleteFhd': {\n                var id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                this.deleteFhd(id, true);\n                break;\n            }\n            case 'selectFhd': {\n                var id = null;\n                if (args.value['id']) {\n                    id = parseInt(args.value['id'].split('_')[1], 10) - 1;\n                }\n                this.selectFhd(id);\n                break;\n            }\n            case 'applyFhd':\n                this.applyFhd();\n                break;\n            case 'cancelFhd':\n                this.cancelFhd();\n                break;\n            case 'updateFHDCurPts':\n                this.updateFHDCurPts();\n                break;\n            case 'rotateFhdColl':\n                this.rotateFhdColl();\n                break;\n            case 'flipFHDColl':\n                this.flipFHDColl(args.value['value']);\n                break;\n            case 'panFHDColl':\n                this.panFHDColl(args.value['xDiff'], args.value['yDiff'], args.value['panRegion']);\n                break;\n            case 'updateFHDColl':\n                this.updateFHDColl();\n                break;\n            case 'zoomFHDColl':\n                this.zoomFHDColl(args.value['isPreventApply']);\n                break;\n            case 'apply-pen-draw':\n                this.applyPenDraw();\n                break;\n            case 'freeHandDraw':\n                this.freeHandDraw(args.value['value']);\n                break;\n            case 'isFHDIdx':\n                this.isFHDIdx(args.value['index'], args.value['obj']);\n                break;\n            case 'getSqPtFD':\n                this.getSqPtFD(args.value['idx'], args.value['obj']);\n                break;\n            case 'getSelPointColl':\n                args.value['obj']['selPointColl'] = extend([], this.selPointColl);\n                break;\n            case 'setSelPointColl':\n                this.selPointColl = extend([], args.value['obj']['selPointColl']);\n                break;\n            case 'setFreehandDrawHoveredIndex':\n                this.fhdHovIdx = args.value['index'];\n                break;\n            case 'getFreehandDrawHoveredIndex':\n                args.value['obj']['index'] = this.fhdHovIdx;\n                break;\n            case 'setPointCounter':\n                this.pointCounter = args.value['value'];\n                break;\n            case 'getPenStrokeWidth':\n                args.value['obj']['penStrokeWidth'] = this.penStrokeWidth;\n                break;\n            case 'setPenStrokeWidth':\n                this.penStrokeWidth = args.value['value'];\n                break;\n            case 'getCurrentFreehandDrawIndex':\n                args.value['obj']['currentFreehandDrawIndex'] = this.currFHDIdx;\n                break;\n            case 'setCurrentFreehandDrawIndex':\n                this.currFHDIdx = args.value['value'];\n                break;\n            case 'updateCropPtsForSel':\n                this.updateCropPtsForSel();\n                break;\n            case 'getFreehandDrawSelectedId':\n                args.value['obj']['freehandDrawSelectedId'] = this.fhdSelID;\n                break;\n            case 'resetFreehandDrawSelectedId':\n                this.fhdSelID = null;\n                break;\n            case 'getTempFreeHandDrawEditingStyles':\n                args.value['obj']['tempFreeHandDrawEditingStyles'] = this.tempFHDStyles;\n                break;\n            case 'setFreehandSelectedIndex':\n                this.fhdSelIdx = args.value['index'];\n                break;\n            case 'getFreehandSelectedIndex':\n                args.value['obj']['freehandSelectedIndex'] = this.fhdSelIdx;\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    FreehandDrawing.prototype.updateFhdPvtVar = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    FreehandDrawing.prototype.reset = function () {\n        this.fhdObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        this.isFreehandDrawing = this.isFreehandPointMoved = false;\n        this.selPoints = [];\n        this.dummyPoints = [];\n        this.freehandDownPoint = { x: 0, y: 0 };\n        this.selPointColl = {};\n        this.fhdHovIdx = null;\n        this.pointCounter = 0;\n        this.fhdSelID = null;\n        this.penStrokeWidth = undefined;\n        this.currFHDIdx = 0;\n        this.fhdSelIdx = null;\n        this.tempFHDStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n    };\n    FreehandDrawing.prototype.getModuleName = function () {\n        return 'freehand-draw';\n    };\n    FreehandDrawing.prototype.hoverFhd = function (fillStyle, strokeWidth) {\n        var parent = this.parent;\n        parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        this.lowerContext = parent.lowerCanvas.getContext('2d');\n        parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        this.upperContext = parent.upperCanvas.getContext('2d');\n        var context = this.upperContext;\n        var idx = -1;\n        if (this.fhdHovIdx > -1) {\n            idx = this.fhdHovIdx;\n        }\n        else {\n            idx = this.fhdSelIdx;\n        }\n        parent.points = extend([], parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = parent.points.length;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        var minStrokeWidth = 0;\n        var maxStrokeWidth = 0;\n        context.fillStyle = fillStyle ? fillStyle : parent.pointColl[idx].strokeColor;\n        context.strokeStyle = context.fillStyle;\n        minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = strokeWidth ?\n            strokeWidth : parent.pointColl[idx].strokeWidth;\n        if (len === 1) {\n            controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n            this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n        }\n        for (var l = 0; l < len - 3; l++) {\n            if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                if (l === 0) {\n                    startPoint = parent.points[l];\n                }\n                else {\n                    startPoint = parent.points[l + 1];\n                }\n                endPoint = parent.points[l + 2];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n        context.closePath();\n        // Outer selection\n        var point = this.getSqPtFD(idx);\n        var tempLineWidth = context.lineWidth;\n        context.lineWidth = 2;\n        context.strokeStyle = parent.themeColl[parent.theme]['primaryColor'];\n        context.beginPath();\n        context.rect(point.startX, point.startY, point.width, point.height);\n        context.stroke();\n        context.closePath();\n        context.lineWidth = tempLineWidth;\n    };\n    FreehandDrawing.prototype.freehandDownHandler = function (e, canvas) {\n        this.parent.lowerCanvas = document.querySelector('#' + this.parent.element.id + '_lowerCanvas');\n        this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        this.parent.upperCanvas = document.querySelector('#' + this.parent.element.id + '_upperCanvas');\n        this.upperContext = this.parent.upperCanvas.getContext('2d');\n        this.fhdObj.time = new Date().getTime();\n        this.isFreehandDrawing = true;\n        if (e.type === 'mousedown') {\n            this.freehandDownPoint = { x: e.clientX, y: e.clientY };\n        }\n        else {\n            this.freehandDownPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n        }\n        this.isFreehandPointMoved = false;\n        EventHandler.add(canvas, 'mousemove touchmove', this.freehandMoveHandler, this);\n        var shapeSettings = { id: 'pen_' + (this.currFHDIdx + 1), type: ShapeType.FreehandDraw,\n            startX: this.freehandDownPoint.x, startY: this.freehandDownPoint.y,\n            strokeColor: this.parent.activeObj.strokeSettings.strokeColor, strokeWidth: this.penStrokeWidth,\n            points: null };\n        var shapeChangingArgs = { action: 'draw-start', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        this.triggerShapeChanging(shapeChangingArgs);\n    };\n    FreehandDrawing.prototype.freehandUpHandler = function (e, canvas, context) {\n        var rect = canvas.getBoundingClientRect();\n        var parent = this.parent;\n        EventHandler.remove(canvas, 'mousemove touchmove', this.freehandMoveHandler);\n        if (parent.points.length === 0) {\n            if (e.type === 'mouseup') {\n                this.processPoint(e.clientX - rect.left, e.clientY - rect.top, true, context);\n            }\n            else if (e.type === 'touchend' && e.changedTouches) {\n                this.processPoint(e.changedTouches[0].clientX - rect.left, e.changedTouches[0].clientY - rect.top, true, context);\n            }\n            else {\n                if (!this.isFreehandPointMoved) {\n                    this.processPoint(this.freehandDownPoint.x - rect.left, this.freehandDownPoint.y - rect.top, true, context);\n                }\n            }\n        }\n        context.closePath();\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var fhCnt = parent.freehandCounter;\n        parent.pointColl[fhCnt] = {};\n        parent.pointColl[fhCnt].points = extend([], parent.points);\n        parent.pointColl[fhCnt].strokeColor = parent.activeObj.strokeSettings.strokeColor;\n        parent.pointColl[fhCnt].strokeWidth = this.penStrokeWidth;\n        parent.pointColl[fhCnt].flipState = parent.transform.currFlipState;\n        parent.pointColl[fhCnt].id = 'pen_' + (this.currFHDIdx + 1);\n        parent.points = [];\n        this.dummyPoints = [];\n        this.selPointColl[fhCnt] = {};\n        this.selPointColl[fhCnt].points = extend([], this.selPoints);\n        this.selPoints = [];\n        this.pointCounter = 0;\n        parent.freehandCounter++;\n        this.isFreehandDrawing = false;\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'freehand-draw', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        var shapeSettings = { id: 'pen_' + (this.currFHDIdx + 1), type: ShapeType.FreehandDraw,\n            startX: this.freehandDownPoint.x, startY: this.freehandDownPoint.y,\n            strokeColor: this.parent.activeObj.strokeSettings.strokeColor, strokeWidth: this.penStrokeWidth,\n            points: this.parent.pointColl[this.currFHDIdx].points };\n        var shapeChangingArgs = { action: 'draw-end', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        this.triggerShapeChanging(shapeChangingArgs);\n        this.currFHDIdx++;\n    };\n    FreehandDrawing.prototype.freehandMoveHandler = function (e) {\n        this.isFreehandPointMoved = true;\n        var rect = this.parent.upperCanvas.getBoundingClientRect();\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX - rect.left;\n            y = e.clientY - rect.top;\n        }\n        else {\n            x = e.touches[0].clientX - rect.left;\n            y = e.touches[0].clientY - rect.top;\n        }\n        if (this.isFreehandDrawing) {\n            this.upperContext.fillStyle = this.parent.activeObj.strokeSettings.strokeColor;\n            this.processPoint(x, y, false, this.upperContext);\n        }\n    };\n    FreehandDrawing.prototype.processPoint = function (x, y, mouseDown, context) {\n        var parent = this.parent;\n        var lastPoint = this.point(x, y, new Date().getTime());\n        lastPoint = parent.points.length > 0 && parent.points[parent.points.length - 1];\n        var isLastPointTooClose = lastPoint ? this.distanceTo(lastPoint) <= 5 : false;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        this.selPoints.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n            ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n            time: this.fhdObj.time });\n        if (!lastPoint || !(lastPoint && isLastPointTooClose) || mouseDown) {\n            this.fhdObj.time = new Date().getTime();\n            parent.points.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n                ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n                time: this.fhdObj.time });\n            this.dummyPoints.push({ x: x, y: y, ratioX: (x - parent.img.destLeft) / parent.img.destWidth,\n                ratioY: (y - parent.img.destTop) / parent.img.destHeight,\n                time: this.fhdObj.time });\n            if (this.dummyPoints.length > 2) {\n                if (this.dummyPoints.length === 3) {\n                    this.dummyPoints.unshift(this.dummyPoints[0]);\n                }\n                var p0 = this.dummyPoints[0];\n                var p1 = this.dummyPoints[1];\n                var p2 = this.dummyPoints[2];\n                var p3 = this.dummyPoints[3];\n                controlPoint1 = this.calcCurveCP(p0, p1, p2).controlPoint2;\n                controlPoint2 = this.calcCurveCP(p1, p2, p3).controlPoint1;\n                startPoint = this.dummyPoints[1];\n                endPoint = this.dummyPoints[2];\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                this.pointCounter++;\n                this.dummyPoints.shift();\n            }\n            if (mouseDown) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = { x: x, y: y, time: new Date().getTime() };\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n    };\n    FreehandDrawing.prototype.calcCurveCP = function (p1, p2, p3) {\n        if (!p2) {\n            p2 = p1;\n        }\n        if (!p3) {\n            p3 = p2;\n        }\n        var dx1 = p1.x - p2.x;\n        var dy1 = p1.y - p2.y;\n        var dx2 = p2.x - p3.x;\n        var dy2 = p2.y - p3.y;\n        var m1 = { x: (p1.x + p2.x) / 2.0, y: (p1.y + p2.y) / 2.0 };\n        var m2 = { x: (p2.x + p3.x) / 2.0, y: (p2.y + p3.y) / 2.0 };\n        var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n        var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n        var dxm = (m1.x - m2.x);\n        var dym = (m1.y - m2.y);\n        var k = l2 / (l1 + l2);\n        var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n        var tx = p2.x - cm.x;\n        var ty = p2.y - cm.y;\n        return {\n            controlPoint1: this.point(m1.x + tx, m1.y + ty, 0),\n            controlPoint2: this.point(m2.x + tx, m2.y + ty, 0)\n        };\n    };\n    FreehandDrawing.prototype.point = function (x, y, time) {\n        this.fhdObj.pointX = x;\n        this.fhdObj.pointY = y;\n        return { x: this.fhdObj.pointX, y: this.fhdObj.pointY, time: time };\n    };\n    FreehandDrawing.prototype.startDraw = function (context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth) {\n        var tempVelocity;\n        tempVelocity = this.pointVelocity(startPoint);\n        tempVelocity = 0.7 * tempVelocity + (1 - 0.7) * this.fhdObj.lastVelocity;\n        var newWidth = Math.max(maxStrokeWidth / (0.7 + 1), minStrokeWidth);\n        this.drawCurve(this.fhdObj.time, newWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth);\n        this.fhdObj.lastVelocity = tempVelocity;\n        this.fhdObj.time = newWidth;\n    };\n    FreehandDrawing.prototype.pointVelocity = function (startPoint) {\n        return (this.fhdObj.time !== startPoint.time) ? this.distanceTo(startPoint) /\n            (this.fhdObj.time - startPoint.time) : 0;\n    };\n    FreehandDrawing.prototype.distanceTo = function (start) {\n        return Math.sqrt(Math.pow(this.fhdObj.pointX - start.x, 2) + Math.pow(this.fhdObj.pointY - start.y, 2));\n    };\n    FreehandDrawing.prototype.drawCurve = function (startWidth, endWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth) {\n        var width;\n        var i;\n        var t1;\n        var t2;\n        var t3;\n        var u1;\n        var u2;\n        var u3;\n        var x;\n        var y;\n        var widthValue = endWidth - startWidth;\n        var bezierLength = this.bezierLength(controlPoint1, controlPoint2, startPoint, endPoint);\n        var drawSteps = Math.ceil(bezierLength) * 2;\n        context.beginPath();\n        for (i = 0; i < drawSteps; i++) {\n            t1 = i / drawSteps;\n            t2 = t1 * t1;\n            t3 = t2 * t1;\n            u1 = 1 - t1;\n            u2 = u1 * u1;\n            u3 = u2 * u1;\n            x = u3 * startPoint.x;\n            x += 3 * u2 * t1 * controlPoint1.x;\n            x += 3 * u1 * t2 * controlPoint2.x;\n            x += t3 * endPoint.x;\n            y = u3 * startPoint.y;\n            y += 3 * u2 * t1 * controlPoint1.y;\n            y += 3 * u1 * t2 * controlPoint2.y;\n            y += t3 * endPoint.y;\n            width = Math.min(startWidth + t3 * widthValue, maxStrokeWidth);\n            this.drawArc(x, y, width, context);\n        }\n        context.closePath();\n        context.fill();\n    };\n    FreehandDrawing.prototype.bezierLength = function (controlPoint1, controlPoint2, startPoint, endPoint) {\n        var steps = 10;\n        var length = 0;\n        var i;\n        var t;\n        var pointX1;\n        var pointY1;\n        var pointX2;\n        var pointY2;\n        var pointX3;\n        var pointY3;\n        for (i = 0; i <= steps; i++) {\n            t = i / steps;\n            pointX1 = this.bezierPoint(t, startPoint.x, controlPoint1.x, controlPoint2.x, endPoint.x);\n            pointY1 = this.bezierPoint(t, startPoint.y, controlPoint1.y, controlPoint2.y, endPoint.y);\n            if (i > 0) {\n                pointX3 = pointX1 - pointX2;\n                pointY3 = pointY1 - pointY2;\n                length += Math.sqrt(pointX3 * pointX3 + pointY3 * pointY3);\n            }\n            pointX2 = pointX1;\n            pointY2 = pointY1;\n        }\n        return length;\n    };\n    FreehandDrawing.prototype.bezierPoint = function (t, startPoint, cp1, cp2, endPoint) {\n        return startPoint * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * cp1 * (1.0 - t) * (1.0 - t) * t + 3.0 *\n            cp2 * (1.0 - t) * t * t + endPoint * t * t * t;\n    };\n    FreehandDrawing.prototype.drawArc = function (x, y, size, context) {\n        if ((x > this.parent.img.destLeft && y > this.parent.img.destTop && x < (this.parent.img.destLeft + this.parent.img.destWidth) &&\n            y < (this.parent.img.destTop + this.parent.img.destHeight) ||\n            (context !== this.lowerContext && context !== this.upperContext))) {\n            context.moveTo(x, y);\n            context.arc(x, y, size, 0, 2 * Math.PI, false);\n        }\n    };\n    FreehandDrawing.prototype.freehandRedraw = function (context, points) {\n        var parent = this.parent;\n        parent.lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        this.lowerContext = parent.lowerCanvas.getContext('2d');\n        parent.upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        this.upperContext = parent.upperCanvas.getContext('2d');\n        var temp = context.filter;\n        context.filter = 'none';\n        if (points) {\n            parent.pointColl[parent.freehandCounter] = {};\n            parent.pointColl[parent.freehandCounter].points = points;\n            parent.pointColl[parent.freehandCounter].strokeColor = parent.activeObj.strokeSettings.strokeColor;\n            parent.pointColl[parent.freehandCounter].strokeWidth = this.penStrokeWidth;\n            parent.pointColl[parent.freehandCounter].flipState = parent.transform.currFlipState;\n            parent.freehandCounter++;\n        }\n        if (parent.freehandCounter > 0) {\n            for (var n = 0; n < parent.freehandCounter; n++) {\n                parent.points = extend([], parent.pointColl[n].points);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                var controlPoint1 = void 0;\n                var controlPoint2 = void 0;\n                var startPoint = void 0;\n                var endPoint = void 0;\n                var minStrokeWidth = void 0;\n                var maxStrokeWidth = void 0;\n                if (len > 0) {\n                    context.fillStyle = parent.pointColl[n].strokeColor;\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = parent.pointColl[n].strokeWidth;\n                }\n                if (len === 1) {\n                    controlPoint1 = controlPoint2 = startPoint = endPoint = parent.points[0];\n                    this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                }\n                for (var l = 0; l < len - 3; l++) {\n                    if (parent.points[l + 1] && parent.points[l + 2] && parent.points[l + 2]) {\n                        controlPoint1 = (this.calcCurveCP(parent.points[l + 0], parent.points[l + 1], parent.points[l + 2])).controlPoint2;\n                        controlPoint2 = (this.calcCurveCP(parent.points[l + 1], parent.points[l + 2], parent.points[l + 3])).controlPoint1;\n                        if (l === 0) {\n                            startPoint = parent.points[l];\n                        }\n                        else {\n                            startPoint = parent.points[l + 1];\n                        }\n                        endPoint = parent.points[l + 2];\n                        this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                    }\n                }\n                context.closePath();\n            }\n            if (context !== this.upperContext) {\n                parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n        }\n        context.filter = temp;\n    };\n    FreehandDrawing.prototype.getSqPtFD = function (idx, obj) {\n        var activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var sPoints = extend([], this.selPointColl[idx].points, []);\n        this.parent.points = extend([], this.parent.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = sPoints.length;\n        for (var l = 0; l < len; l++) {\n            if (activePoint.startX === 0 && activePoint.startY === 0 && activePoint.endX === 0 && activePoint.endY === 0) {\n                activePoint.startX = sPoints[l].x;\n                activePoint.startY = sPoints[l].y;\n                activePoint.endX = sPoints[l].x;\n                activePoint.endY = sPoints[l].y;\n            }\n            else {\n                activePoint.startX = Math.min(activePoint.startX, sPoints[l].x);\n                activePoint.startY = Math.min(activePoint.startY, sPoints[l].y);\n                activePoint.endX = Math.max(activePoint.endX, sPoints[l].x);\n                activePoint.endY = Math.max(activePoint.endY, sPoints[l].y);\n            }\n        }\n        activePoint.startX -= this.penStrokeWidth;\n        activePoint.startY -= this.penStrokeWidth;\n        activePoint.endX += this.penStrokeWidth;\n        activePoint.endY += this.penStrokeWidth;\n        activePoint.width = activePoint.endX - activePoint.startX;\n        activePoint.height = activePoint.endY - activePoint.startY;\n        if (obj) {\n            obj['activePoint'] = activePoint;\n        }\n        return activePoint;\n    };\n    FreehandDrawing.prototype.applyPenDraw = function () {\n        var parent = this.parent;\n        if (parent.currObjType.shape === 'freehanddraw') {\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.currObjType.shape = '';\n        }\n        parent.notify('shape', { prop: 'clearActObj' });\n    };\n    FreehandDrawing.prototype.applyFhd = function () {\n        var parent = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var selectedPoint = parent.pointColl[this.fhdSelIdx];\n        if (selectedPoint.strokeColor === '#42a5f5') {\n            selectedPoint.strokeColor = this.tempFHDStyles.strokeColor;\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n        if (selectedPoint) {\n            selectedPoint.isSelected = false;\n        }\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        this.fhdHovIdx = this.fhdSelIdx = null;\n    };\n    FreehandDrawing.prototype.cancelFhd = function () {\n        var parent = this.parent;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setSelectedFreehandColor', value: { color: '#42a5f5' } });\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.pointCounter = 0;\n        if (parent.pointColl[this.fhdSelIdx]) {\n            parent.pointColl[this.fhdSelIdx].strokeColor = this.tempFHDStyles.strokeColor;\n            parent.pointColl[this.fhdSelIdx].strokeWidth = this.tempFHDStyles.strokeWidth;\n            parent.pointColl[this.fhdSelIdx].isSelected = false;\n        }\n        this.fhdHovIdx = this.fhdSelIdx = this.fhdSelID = null;\n        parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n        parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor;\n        parent.activeObj.strokeSettings.strokeWidth = this.penStrokeWidth = this.tempFHDStyles.strokeWidth;\n        this.tempFHDStyles = { strokeColor: null, strokeWidth: null, fillColor: null };\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    FreehandDrawing.prototype.selectFhd = function (index) {\n        var parent = this.parent;\n        parent.notify('selection', { prop: 'setFreehandDrawEditing', onPropertyChange: false, value: { bool: true } });\n        if (index || index === 0) {\n            if (this.isFHDIdx(index)) {\n                this.fhdSelIdx = this.fhdHovIdx = index;\n                this.hoverFhd();\n                parent.upperCanvas.style.cursor = parent.cursor = 'pointer';\n            }\n            else {\n                return;\n            }\n        }\n        this.fhdSelIdx = this.fhdHovIdx;\n        parent.pointColl[this.fhdSelIdx].isSelected = true;\n        this.fhdSelID = parent.pointColl[this.fhdSelIdx].id;\n        if (parent.pointColl[this.fhdHovIdx].strokeColor !== '#42a5f5') {\n            parent.activeObj.strokeSettings.strokeColor = this.tempFHDStyles.strokeColor =\n                parent.pointColl[this.fhdHovIdx].strokeColor;\n        }\n        parent.activeObj.strokeSettings.strokeWidth = this.tempFHDStyles.strokeWidth =\n            parent.pointColl[this.fhdHovIdx].strokeWidth;\n        var obj = { bool: false };\n        parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var shapeSettings = { id: 'pen_' + (this.fhdSelIdx + 1), type: ShapeType.FreehandDraw,\n                startX: parent.pointColl[this.fhdSelIdx].points[0].x, startY: parent.pointColl[this.fhdSelIdx].points[0].y,\n                strokeColor: parent.pointColl[this.fhdSelIdx].strokeColor, strokeWidth: parent.pointColl[this.fhdSelIdx].strokeWidth,\n                points: parent.pointColl[this.fhdSelIdx].points };\n            var shapeChangingArgs = { action: 'select', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            this.triggerShapeChanging(shapeChangingArgs);\n        }\n        else {\n            parent.okBtn();\n        }\n    };\n    FreehandDrawing.prototype.deleteFhd = function (index, isId) {\n        var parent = this.parent;\n        if (this.isFHDIdx(index)) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, parent.pointColl, {}, true);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var tempSelPointColl = extend({}, this.selPointColl, {}, true);\n            parent.pointColl = {};\n            this.selPointColl = {};\n            var count = 0;\n            if (isNullOrUndefined(isId)) {\n                for (var i = 0; i < parent.freehandCounter; i++) {\n                    if (i !== index) {\n                        parent.pointColl[count] = tempPointColl[i];\n                        this.selPointColl[count] = tempSelPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < parent.freehandCounter; i++) {\n                    if (parseInt(tempPointColl[i].id.split('_')[1], 10) - 1 !== index) {\n                        parent.pointColl[count] = tempPointColl[i];\n                        this.selPointColl[count] = tempSelPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            parent.freehandCounter -= 1;\n            this.fhdHovIdx = this.fhdSelIdx = null;\n            parent.notify('selection', { prop: 'resetFreehandDrawVariables' });\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n    };\n    FreehandDrawing.prototype.zoomX = function (x) {\n        return (x * this.parent.img.destWidth) + this.parent.img.destLeft;\n    };\n    FreehandDrawing.prototype.zoomY = function (y) {\n        return (y * this.parent.img.destHeight) + this.parent.img.destTop;\n    };\n    FreehandDrawing.prototype.zoomFHDColl = function (isPreventApply) {\n        var parent = this.parent;\n        // Updating point collection for zoom\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].x = this.zoomX(parent.points[l].ratioX);\n                parent.points[l].y = this.zoomY(parent.points[l].ratioY);\n            }\n        }\n        // Updating each points for cursor styles for zoom\n        this.updateFHDCurPts();\n        if (isNullOrUndefined(isPreventApply)) {\n            this.freehandRedraw(this.lowerContext, null);\n        }\n    };\n    FreehandDrawing.prototype.updateFHDCurPts = function () {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].x = this.zoomX(this.selPoints[l].ratioX);\n                    this.selPoints[l].y = this.zoomY(this.selPoints[l].ratioY);\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.rotateFhdColl = function () {\n        var parent = this.parent;\n        // Update rotation points for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].y = parent.img.destTop + (parent.img.destHeight * parent.points[l].ratioX);\n                parent.points[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                    parent.points[l].ratioY);\n                parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        // Update rotation points for each point for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].y = parent.img.destTop + (parent.img.destHeight * this.selPoints[l].ratioX);\n                    this.selPoints[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                        this.selPoints[l].ratioY);\n                    this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.flipFHDColl = function (value) {\n        var lowercaseValue = value.toLowerCase();\n        if (lowercaseValue === 'horizontal') {\n            this.pointsHorizontalFlip();\n        }\n        else if (lowercaseValue === 'vertical') {\n            this.pointsVerticalFlip();\n        }\n        else {\n            this.pointsHorizontalFlip();\n            for (var i = 0; i < this.parent.freehandCounter; i++) {\n                this.parent.pointColl[i].shapeFlip = '';\n            }\n            this.pointsVerticalFlip();\n        }\n    };\n    FreehandDrawing.prototype.pointsHorizontalFlip = function () {\n        var parent = this.parent;\n        // Update flip value for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (parent.points[l].x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                        parent.points[l].x = (parent.img.destLeft + parent.img.destWidth) - (parent.points[l].x\n                            - parent.img.destLeft);\n                    }\n                    else if (parent.points[l].x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                        parent.points[l].x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                            parent.points[l].x);\n                    }\n                    parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        // Update flip value for each points for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        if (this.selPoints[l].x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            this.selPoints[l].x = (parent.img.destLeft + parent.img.destWidth) - (this.selPoints[l].x -\n                                parent.img.destLeft);\n                        }\n                        else if (this.selPoints[l].x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            this.selPoints[l].x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                                this.selPoints[l].x);\n                        }\n                        this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                        this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.pointsVerticalFlip = function () {\n        var parent = this.parent;\n        // Update flip value for point collection\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (parent.pointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                parent.points = extend([], parent.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = parent.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (parent.points[l].y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                        parent.points[l].y = (parent.img.destTop + parent.img.destHeight) -\n                            (parent.points[l].y - parent.img.destTop);\n                    }\n                    else if (parent.points[l].y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                        parent.points[l].y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                            parent.points[l].y);\n                    }\n                    parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                parent.pointColl[n].shapeFlip = parent.transform.currFlipState;\n            }\n        }\n        // Update flip value for each points for cursor styles\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                if (this.selPointColl[n].shapeFlip !== parent.transform.currFlipState) {\n                    this.selPoints = extend([], this.selPointColl[n].points, []);\n                    this.pointCounter = 0;\n                    var len = this.selPoints.length;\n                    for (var l = 0; l < len; l++) {\n                        if (this.selPoints[l].y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            this.selPoints[l].y = (parent.img.destTop + parent.img.destHeight) - (this.selPoints[l].y -\n                                parent.img.destTop);\n                        }\n                        else if (this.selPoints[l].y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            this.selPoints[l].y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                                this.selPoints[l].y);\n                        }\n                        this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                        this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n            }\n        }\n        this.updateFHDCurPts();\n    };\n    FreehandDrawing.prototype.updateFHDColl = function () {\n        var parent = this.parent;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            parent.objColl[i].imageRatio = { startX: ((parent.objColl[i].activePoint.startX - parent.img.destLeft) /\n                    parent.img.destWidth), startY: ((parent.objColl[i].activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                endX: ((parent.objColl[i].activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                endY: ((parent.objColl[i].activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                width: parent.img.destWidth / parent.objColl[i].activePoint.width, height: parent.img.destHeight /\n                    parent.objColl[i].activePoint.height };\n            if (parent.objColl[i].shape === 'path') {\n                for (var j = 0; j < parent.objColl[i].pointColl.length; j++) {\n                    parent.objColl[i].pointColl[j].ratioX =\n                        (parent.objColl[i].pointColl[j].x - parent.img.destLeft) / parent.img.destWidth;\n                    parent.objColl[i].pointColl[j].ratioY =\n                        (parent.objColl[i].pointColl[j].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                parent.points[l].ratioX = (parent.points[l].x - parent.img.destLeft) / parent.img.destWidth;\n                parent.points[l].ratioY = (parent.points[l].y - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].ratioX = (this.selPoints[l].x - parent.img.destLeft) / parent.img.destWidth;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y - parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.panFHDColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        // Updating point collection for panning\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            parent.points = extend([], parent.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = parent.points.length;\n            for (var l = 0; l < len; l++) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    parent.points[l].x += xDiff;\n                }\n                else {\n                    parent.points[l].x -= xDiff;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    parent.points[l].y += yDiff;\n                }\n                else {\n                    parent.points[l].y -= yDiff;\n                }\n            }\n        }\n        // Updating each points for cursor styles for panning\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            if (this.selPointColl[n]) {\n                this.selPoints = extend([], this.selPointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    if (panRegion === '' || panRegion === 'vertical') {\n                        this.selPoints[l].x += xDiff;\n                    }\n                    else {\n                        this.selPoints[l].x -= xDiff;\n                    }\n                    if (panRegion === '' || panRegion === 'horizontal') {\n                        this.selPoints[l].y += yDiff;\n                    }\n                    else {\n                        this.selPoints[l].y -= yDiff;\n                    }\n                }\n            }\n        }\n        this.freehandRedraw(this.lowerContext, null);\n    };\n    FreehandDrawing.prototype.freeHandDraw = function (value) {\n        var parent = this.parent;\n        if (value) {\n            parent.points = [];\n            this.dummyPoints = [];\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.togglePen = true;\n            parent.upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            parent.upperCanvas.style.display = 'block';\n            if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                var obj = { strokeSettings: {} };\n                parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                    value: { obj: obj } });\n                parent.activeObj.strokeSettings = obj['strokeSettings'];\n            }\n            if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n                parent.activeObj.strokeSettings.strokeWidth = 4;\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'pen');\n            }\n        }\n        else {\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            parent.notify('shape', { prop: 'apply', onPropertyChange: false, value: { shape: null, obj: null, canvas: null } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n            parent.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n        }\n    };\n    FreehandDrawing.prototype.isFHDIdx = function (index, obj) {\n        var isIndex = false;\n        for (var i = 0; i < this.parent.freehandCounter; i++) {\n            if (this.parent.pointColl[i].id &&\n                parseInt(this.parent.pointColl[i].id.split('_')[1], 10) - 1 === index) {\n                isIndex = true;\n                break;\n            }\n        }\n        if (obj) {\n            obj['isIndex'] = isIndex;\n        }\n        return isIndex;\n    };\n    FreehandDrawing.prototype.updateCropPtsForSel = function () {\n        var parent = this.parent;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            var obj = { selPointColl: extend([], this.selPointColl) };\n            if (obj['selPointColl'][n]) {\n                this.selPoints = extend([], obj['selPointColl'][n].points, []);\n                this.pointCounter = 0;\n                var len = this.selPoints.length;\n                for (var l = 0; l < len; l++) {\n                    this.selPoints[l].ratioX = (this.selPoints[l].x -\n                        parent.activeObj.activePoint.startX) / parent.activeObj.activePoint.width;\n                    this.selPoints[l].ratioY = (this.selPoints[l].y -\n                        parent.activeObj.activePoint.startY) / parent.activeObj.activePoint.height;\n                }\n            }\n        }\n    };\n    FreehandDrawing.prototype.triggerShapeChanging = function (shapeChangingArgs) {\n        var _this = this;\n        var parent = this.parent;\n        if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                _this.penStrokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n                if (parent.activeObj.strokeSettings.strokeColor !== shapeChangingArgs.currentShapeSettings.strokeColor) {\n                    parent.activeObj.strokeSettings.strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n                    var penColorElement = parent.element.querySelector('.e-ie-toolbar-e-pen-color .e-dropdownbtn-preview');\n                    if (penColorElement) {\n                        penColorElement.style.background = shapeChangingArgs.currentShapeSettings.strokeColor;\n                    }\n                }\n                if (_this.fhdSelID) {\n                    parent.pointColl[_this.fhdSelIdx].strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n                    parent.pointColl[_this.fhdSelIdx].strokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n                    parent.pointColl[_this.fhdSelIdx].points = shapeChangingArgs.currentShapeSettings.points;\n                }\n                if (shapeChangingArgs.action === 'select') {\n                    _this.freehandRedraw(_this.upperContext);\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                    parent.updateToolbar(parent.element, 'pen');\n                }\n            });\n        }\n        else {\n            parent.trigger('shapeChanging', shapeChangingArgs);\n            this.penStrokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n            if (parent.activeObj.strokeSettings.strokeColor !== shapeChangingArgs.currentShapeSettings.strokeColor) {\n                parent.activeObj.strokeSettings.strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n            }\n            if (this.fhdSelID) {\n                parent.pointColl[this.fhdSelIdx].strokeColor = shapeChangingArgs.currentShapeSettings.strokeColor;\n                parent.pointColl[this.fhdSelIdx].strokeWidth = shapeChangingArgs.currentShapeSettings.strokeWidth;\n                parent.pointColl[this.fhdSelIdx].points = shapeChangingArgs.currentShapeSettings.points;\n            }\n            if (shapeChangingArgs.action === 'select') {\n                this.freehandRedraw(this.upperContext);\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            }\n        }\n    };\n    return FreehandDrawing;\n}());\nexport { FreehandDrawing };\n","import { Browser, EventHandler, extend, getComponent, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ZoomTrigger } from '../index';\nvar Selection = /** @class */ (function () {\n    function Selection(parent) {\n        this.diffPoint = { x: 0, y: 0 }; // updates resize points\n        this.oldPoint = {};\n        this.isTouch = false;\n        this.isObjSelected = false;\n        this.isFhdPoint = false; // Specifies whether mouse cursor is on freehand drawing point or not\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 }; // updates drag start and end points in mousedown and mousemove\n        this.isShapeInserted = false;\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [] }; // for undo redo\n        this.isFirstMove = false; // for pinch zoom\n        this.startTouches = []; // for pinch zoom\n        this.tempTouches = []; // for pinch zoom\n        this.currMousePoint = { x: 0, y: 0 }; // To prevent mouse move event on pinch zoom\n        this.cursorTargetId = '';\n        this.isPreventDragging = false; // Shapes dragging is prevented when crop region is inside shape points\n        this.dragElement = '';\n        this.textRow = 1; // text area row count\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 }; // updates prev x and y points in mouseMove\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.isFhdEditing = false; // Specifies whether freehand drawing is in editing mode or not\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.touchTime = 0;\n        this.resizedElement = '';\n        this.isImageClarity = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Selection.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Selection.prototype.addEventListener = function () {\n        this.parent.on('selection', this.selection, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Selection.prototype.removeEventListener = function () {\n        this.parent.off('selection', this.selection);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Selection.prototype.selection = function (args) {\n        var _this = this;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'mouse-up':\n                this.selMouseUpEvent();\n                break;\n            case 'setCursor':\n                this.setCursor(args.value['x'], args.value['y']);\n                break;\n            case 'updateActivePoint':\n                this.updateActivePoint(args.value['x'], args.value['y'], args.value['isCropSelection']);\n                break;\n            case 'updateCursorStyles':\n                this.updateCursorStyles(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'setTextSelection':\n                this.setTextSelection(args.value['width'], args.value['height']);\n                break;\n            case 'setActivePoint':\n                this.setActivePoint(args.value['startX'], args.value['startY']);\n                break;\n            case 'clearSelection':\n                this.clearSelection();\n                break;\n            case 'calcShapeRatio':\n                this.calcShapeRatio(args.value['x'], args.value['y'], args.value['imgWidth'], args.value['imgHeight']);\n                break;\n            case 'applyCurrShape':\n                this.applyCurrShape(args.value['isShapeClick']);\n                break;\n            case 'tab':\n                this.performTabAction();\n                break;\n            case 'setDragDirection':\n                this.setDragDirection(args.value['width'], args.value['height']);\n                break;\n            case 'clearUpperCanvas':\n                if (this.isTouch) {\n                    setTimeout(function () {\n                        _this.parent.upperCanvas.getContext('2d').clearRect(0, 0, _this.parent.upperCanvas.width, _this.parent.upperCanvas.height);\n                    }, 550);\n                }\n                break;\n            case 'resetFreehandDrawVariables':\n                this.isFhdEditing = this.isFhdPoint = false;\n                break;\n            case 'isShapeInserted':\n                this.isShapeInserted = args.value['bool'];\n                break;\n            case 'redrawShape':\n                this.redrawShape(args.value['obj']);\n                break;\n            case 'setTextBoxStylesToActObj':\n                this.setTextBoxStylesToActObj();\n                break;\n            case 'mouseDownEventHandler':\n                this.mouseDownEventHandler(args.value['e']);\n                break;\n            case 'mouseMoveEventHandler':\n                this.mouseMoveEventHandler(args.value['e']);\n                break;\n            case 'mouseUpEventHandler':\n                this.mouseUpEventHandler(args.value['e']);\n                break;\n            case 'canvasMouseDownHandler':\n                this.canvasMouseDownHandler(args.value['e']);\n                break;\n            case 'canvasMouseMoveHandler':\n                this.canvasMouseMoveHandler(args.value['e']);\n                break;\n            case 'canvasMouseUpHandler':\n                this.canvasMouseUpHandler(args.value['e']);\n                break;\n            case 'touchStartHandler':\n                this.touchStartHandler(args.value['e']);\n                break;\n            case 'keyDownEventHandler':\n                this.keyDownEventHandler(args.value['e']);\n                break;\n            case 'handleScroll':\n                this.handleScroll(args.value['e']);\n                break;\n            case 'textKeyDown':\n                setTimeout(this.textKeyDown.bind(this), 1, args.value['e']);\n                break;\n            case 'deleteItem':\n                this.deleteItem();\n                break;\n            case 'updatePrevShapeSettings':\n                this.updatePrevShapeSettings(args.value['obj']);\n                break;\n            case 'getZoomType':\n                args.value['obj']['zoomType'] = this.zoomType;\n                break;\n            case 'setZoomType':\n                this.zoomType = args.value['zoomType'];\n                break;\n            case 'setInitialTextEdit':\n                this.isInitialTextEdited = args.value['bool'];\n                break;\n            case 'setDragCanvas':\n                this.dragCanvas = args.value['bool'];\n                break;\n            case 'setFreehandDrawCustomized':\n                this.isFhdCustomized = args.value['isFreehandDrawCustomized'];\n                break;\n            case 'setTouchEndPoint':\n                this.touchEndPoint.x = args.value['x'];\n                this.touchEndPoint.y = args.value['y'];\n                break;\n            case 'getPanDown':\n                args.value['obj']['panDown'] = this.panDown;\n                break;\n            case 'setPanDown':\n                this.panDown = args.value['panDown'];\n                break;\n            case 'getFreehandDrawEditing':\n                args.value['obj']['bool'] = this.isFhdEditing;\n                break;\n            case 'setFreehandDrawEditing':\n                this.isFhdEditing = args.value['bool'];\n                break;\n            case 'getTempActObj':\n                args.value['obj']['tempObj'] = this.tempActiveObj;\n                break;\n            case 'setTempActObj':\n                this.tempActiveObj = args.value['obj'];\n                break;\n            case 'isInside':\n                this.isInside(args.value['x'], args.value['y'], args.value['z1'], args.value['z2'], args.value['z3'], args.value['z4']);\n                break;\n            case 'setDragElement':\n                this.dragElement = args.value['value'];\n                break;\n            case 'setObjSelected':\n                this.isObjSelected = args.value['bool'];\n                break;\n            case 'adjustActObjForLineArrow':\n                this.adjustActObjForLineArrow(args.value['obj']);\n                break;\n            case 'findTarget':\n                this.findTarget(args.value['x'], args.value['y'], args.value['type']);\n                break;\n            case 'getCurrentFlipState':\n                this.getCurrentFlipState();\n                break;\n            case 'setDragWidth':\n                this.setDragWidth(args.value['width']);\n                break;\n            case 'setDragHeight':\n                this.setDragHeight(args.value['setDragHeight']);\n                break;\n            case 'annotate':\n                this.currentDrawingShape = args.value['shape'];\n                if (args.value['shape'] === 'text') {\n                    this.parent.activeObj.textSettings.fontSize = 100;\n                    this.parent.activeObj.keyHistory = 'Enter Text';\n                    this.parent.notify('shape', { prop: 'initializeTextShape', onPropertyChange: false,\n                        value: { text: null, fontFamily: null, fontSize: null, bold: null, italic: null, strokeColor: null } });\n                }\n                else if (args.value['shape'] === 'path') {\n                    this.parent.activeObj.pointColl = [];\n                }\n                break;\n            case 'getCurrentDrawingShape':\n                args.value['obj']['shape'] = this.currentDrawingShape;\n                break;\n            case 'setCurrentDrawingShape':\n                this.currentDrawingShape = args.value['value'];\n                break;\n            case 'getTransRotationPoint':\n                this.getTransRotationPoint(args.value['obj'], args.value['object']);\n                break;\n            case 'adjustNEPoints':\n                this.adjustNEPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'adjustRotationPoints':\n                this.adjustRotationPoints(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'getResizeDirection':\n                this.getResizeDirection(args.value['rectangle'], args.value['x'], args.value['y'], args.value['angle']);\n                break;\n            case 'setResizedElement':\n                this.resizedElement = args.value['value'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'unWireEvent':\n                this.unwireEvent();\n                break;\n            case 'updPtCollForShpRot':\n                this.updPtCollForShpRot(args.value['obj']);\n                break;\n            case 'findImageRatio':\n                this.findImageRatio(args.value['width'], args.value['height'], args.value['obj']);\n                break;\n            case 'getNumTextValue':\n                this.getNumTextValue(args.value['obj']);\n                break;\n            case 'setImageClarity':\n                this.isImageClarity = args.value['bool'];\n                break;\n            case 'upgradeImageQuality':\n                this.upgradeImageQuality();\n                break;\n            case 'triggerShapeChange':\n                this.triggerShapeChange(args.value['shapeResizingArgs'], args.value['shapeMovingArgs'], args.value['type']);\n                break;\n        }\n    };\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    Selection.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n    };\n    Selection.prototype.reset = function () {\n        this.diffPoint = { x: 0, y: 0 };\n        this.oldPoint = {};\n        this.isTouch = this.isObjSelected = this.isFhdPoint = this.isShapeInserted = false;\n        this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 };\n        this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [] };\n        this.isFirstMove = false;\n        this.cursorTargetId = this.dragElement = '';\n        this.startTouches = [];\n        this.tempTouches = [];\n        this.currMousePoint = { x: 0, y: 0 };\n        this.isPreventDragging = false;\n        this.timer = undefined;\n        this.tempObjColl = undefined;\n        this.textRow = 1;\n        this.mouseDownPoint = { x: 0, y: 0 };\n        this.previousPoint = { x: 0, y: 0 };\n        this.zoomType = 'Toolbar';\n        this.isInitialTextEdited = false;\n        this.dragCanvas = false;\n        this.isFhdCustomized = false;\n        this.touchEndPoint = {};\n        this.panDown = null;\n        this.isFhdEditing = false;\n        this.pathAdjustedIndex = null;\n        this.touchTime = 0;\n        this.isImageClarity = true;\n        this.currentDrawingShape = '';\n        this.initialPrevObj = {};\n        this.resizedElement = '';\n    };\n    Selection.prototype.performTabAction = function () {\n        if (this.parent.textArea.style.display === 'block') {\n            var allowUndoRedoPush = this.applyCurrShape(false);\n            this.parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            if (allowUndoRedoPush) {\n                this.parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n    };\n    Selection.prototype.selMouseUpEvent = function () {\n        this.oldPoint.x = undefined;\n        this.oldPoint.y = undefined;\n    };\n    Selection.prototype.getMouseCursor = function (actObj, x, y, isCropSelection, isApply) {\n        var rotationCirclePoint = this.getTransRotationPoint(actObj);\n        var cursor = 'default';\n        var ratio = isApply ? 0 : ((actObj.topLeftCircle.radius * 2));\n        if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.topLeftCircle.startY + ratio)) {\n            cursor = 'nw-resize';\n        }\n        else if (x >= (actObj.topLeftCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX - ratio) &&\n            y >= (actObj.topCenterCircle.startY - ratio) &&\n            y <= (actObj.topCenterCircle.startY + ratio)) {\n            cursor = 'n-resize';\n        }\n        else if (x >= (actObj.topRightCircle.startX - ratio) &&\n            x <= (actObj.topRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.topRightCircle.startY + ratio)) {\n            cursor = 'ne-resize';\n        }\n        else if (x >= (actObj.centerLeftCircle.startX - ratio) &&\n            x <= (actObj.centerLeftCircle.startX + ratio) &&\n            y >= (actObj.topLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY - ratio)) {\n            cursor = 'w-resize';\n        }\n        else if (x >= (actObj.centerRightCircle.startX - ratio) &&\n            x <= (actObj.centerRightCircle.startX + ratio) &&\n            y >= (actObj.topRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY - ratio)) {\n            cursor = 'e-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomLeftCircle.startX + ratio) &&\n            y >= (actObj.bottomLeftCircle.startY - ratio) &&\n            y <= (actObj.bottomLeftCircle.startY + ratio)) {\n            cursor = 'sw-resize';\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX - ratio) &&\n            y >= (actObj.bottomCenterCircle.startY - ratio) &&\n            y <= (actObj.bottomCenterCircle.startY + ratio)) {\n            cursor = 's-resize';\n        }\n        else if (x >= (actObj.bottomRightCircle.startX - ratio) &&\n            x <= (actObj.bottomRightCircle.startX + ratio) &&\n            y >= (actObj.bottomRightCircle.startY - ratio) &&\n            y <= (actObj.bottomRightCircle.startY + ratio)) {\n            cursor = 'se-resize';\n        }\n        else if ((x >= actObj.activePoint.startX &&\n            x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n            y <= actObj.activePoint.endY)) {\n            if (isCropSelection) {\n                cursor = 'grab';\n            }\n            else {\n                cursor = 'move';\n            }\n        }\n        else if (rotationCirclePoint && !isApply &&\n            x >= (rotationCirclePoint.x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= rotationCirclePoint.x + (actObj.bottomCenterCircle.radius + 2) &&\n            y >= rotationCirclePoint.y - (actObj.bottomCenterCircle.radius + 2) &&\n            y <= rotationCirclePoint.y + (actObj.bottomCenterCircle.radius + 2)) {\n            cursor = 'grabbing';\n        }\n        else {\n            cursor = 'default';\n        }\n        return cursor;\n    };\n    Selection.prototype.setCursor = function (x, y) {\n        var parent = this.parent;\n        var frameObject = { bool: null };\n        parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (parent.isResize || frameObject['bool']) {\n            parent.upperCanvas.style.cursor = 'default';\n            return;\n        }\n        var lowerCanvas = document.querySelector('#' + parent.element.id + '_lowerCanvas');\n        var upperCanvas = document.querySelector('#' + parent.element.id + '_upperCanvas');\n        var isCropSelection = false;\n        var splitWords;\n        if (this.currentDrawingShape !== '') {\n            upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            return;\n        }\n        if (parent.currObjType.isDragging) {\n            if (this.dragElement === '') {\n                upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.dragElement;\n            }\n            return;\n        }\n        if (parent.activeObj.horTopLine !== undefined) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (!isCropSelection && parent.togglePan) {\n                lowerCanvas.style.cursor = upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            var cursor = upperCanvas.style.cursor;\n            var actObj = extend({}, parent.activeObj, {}, true);\n            this.cursorTargetId = actObj.currIndex;\n            var degree = void 0;\n            if (actObj.shapeDegree === 0) {\n                degree = parent.transform.degree;\n            }\n            else {\n                degree = parent.transform.degree - actObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, upperCanvas);\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, false);\n                if ((actObj.shape === 'text') && (parent.cursor === 'n-resize' ||\n                    parent.cursor === 's-resize' || parent.cursor === 'e-resize' ||\n                    parent.cursor === 'w-resize')) {\n                    upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n            }\n            if (cursor === 'default' && parent.cursor === 'default' && isCropSelection) {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n            if (cursor === 'grab' && parent.cursor === 'default') {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n        }\n        else if (parent.togglePan && !parent.togglePen) {\n            lowerCanvas.style.cursor = upperCanvas.style.cursor = parent.cursor = 'grab';\n        }\n        else {\n            if (parent.currObjType.isCustomCrop || parent.togglePen) {\n                upperCanvas.style.cursor = parent.cursor = 'crosshair';\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n        if (parent.cursor === 'default' || parent.cursor === 'grab') {\n            var cursor = upperCanvas.style.cursor;\n            if (parent.objColl.length > 0 && (parent.cursor !== 'grab' || !isCropSelection)) {\n                this.setCursorFromObj(x, y, parent.objColl, upperCanvas, isCropSelection);\n            }\n            if (cursor === 'grab' && parent.cursor === 'default') {\n                upperCanvas.style.cursor = parent.cursor = 'grab';\n            }\n        }\n        if ((parent.cursor === 'default' || parent.cursor === 'grab')\n            && parent.pointColl[0] && (parent.cursor !== 'grab' || !isCropSelection)\n            && !parent.currObjType.isDragging && !parent.currObjType.isResize) {\n            this.setCursorForFreehandDrawing(x, y, upperCanvas);\n        }\n    };\n    Selection.prototype.setCursorForPath = function (actObj, x, y, upperCanvas) {\n        this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n        var parent = this.parent;\n        if (parent.cursor === 'default') {\n            var obj = extend({}, actObj, null, true);\n            var isMove = false;\n            for (var i = 1; i < actObj.pointColl.length; i++) {\n                if (isMove) {\n                    break;\n                }\n                obj.activePoint.startX = actObj.pointColl[i - 1].x;\n                obj.activePoint.startY = actObj.pointColl[i - 1].y;\n                obj.activePoint.endX = actObj.pointColl[i].x;\n                obj.activePoint.endY = actObj.pointColl[i].y;\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                for (var j = 0; j < obj.pointColl.length; j++) {\n                    var point = obj.pointColl[j];\n                    if (!isNullOrUndefined(point.x - (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.x + (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.y - (actObj.topLeftCircle.radius * 2)) &&\n                        !isNullOrUndefined(point.y + (actObj.topLeftCircle.radius * 2)) &&\n                        x >= (point.x - (actObj.topLeftCircle.radius * 2)) &&\n                        x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                        y >= (point.y - (actObj.topLeftCircle.radius * 2)) &&\n                        y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                        upperCanvas.style.cursor = parent.cursor = 'move';\n                        isMove = true;\n                        break;\n                    }\n                    else {\n                        upperCanvas.style.cursor = parent.cursor = 'default';\n                    }\n                }\n            }\n        }\n        return parent.cursor;\n    };\n    Selection.prototype.setCursorForLineArrow = function (actObj, x, y, upperCanvas) {\n        var index;\n        for (var i = 0; i < actObj.pointColl.length; i++) {\n            var point = actObj.pointColl[i];\n            if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                upperCanvas.style.cursor = this.parent.cursor = 'move';\n                index = i;\n                break;\n            }\n            else {\n                upperCanvas.style.cursor = this.parent.cursor = 'default';\n            }\n        }\n        return index;\n    };\n    Selection.prototype.setCursorForRotatedObject = function (actObj, x, y, upperCanvas) {\n        this.resizedElement = '';\n        var parent = this.parent;\n        if (x >= (actObj.horTopLinePointColl[0].x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horTopLinePointColl[0].x + (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horTopLinePointColl[0].y - (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horTopLinePointColl[0].y + (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n        }\n        else if (x >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n        }\n        else if (x >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].x -\n            (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].x +\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].y -\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horTopLinePointColl[Math.round(actObj.horTopLinePointColl.length - 1)].y +\n                (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n        }\n        else if (x >= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].y - 5)\n            && y <= (actObj.verLeftLinePointColl[Math.round(actObj.verLeftLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n        }\n        else if (x >= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].x + 5)\n            && y >= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.verRightLinePointColl[Math.round(actObj.verRightLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[0].x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horBottomLinePointColl[0].x + (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horBottomLinePointColl[0].y - (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horBottomLinePointColl[0].y + (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].x - 5) &&\n            x <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].x + 5) &&\n            y >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].y - 5) &&\n            y <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length / 2)].y + 5)) {\n            upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n        }\n        else if (x >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].x -\n            (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].x +\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y >= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].y -\n                (actObj.bottomCenterCircle.radius + 2)) &&\n            y <= (actObj.horBottomLinePointColl[Math.round(actObj.horBottomLinePointColl.length - 1)].y +\n                (actObj.bottomCenterCircle.radius + 2))) {\n            upperCanvas.style.cursor = parent.cursor = 'se-resize';\n        }\n        else if (actObj.rotationCirclePointColl &&\n            x >= (actObj.rotationCirclePointColl.x - (actObj.bottomCenterCircle.radius + 2)) &&\n            x <= actObj.rotationCirclePointColl.x + (actObj.bottomCenterCircle.radius + 2) &&\n            y >= actObj.rotationCirclePointColl.y - (actObj.bottomCenterCircle.radius + 2) &&\n            y <= actObj.rotationCirclePointColl.y + (actObj.bottomCenterCircle.radius + 2)) {\n            upperCanvas.style.cursor = parent.cursor = 'grabbing';\n        }\n        else {\n            upperCanvas.style.cursor = parent.cursor = 'default';\n            var isPointsInsideRectangle = this.getRectanglePoints(actObj.activePoint.startX, actObj.activePoint.startY, actObj.activePoint.width, actObj.activePoint.height, actObj.rotatedAngle * (180 / Math.PI), x, y);\n            if (isPointsInsideRectangle) {\n                upperCanvas.style.cursor = parent.cursor = 'move';\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horTopLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.horTopLinePointColl[i].x - 5) &&\n                    x <= (actObj.horTopLinePointColl[i].x + 5) &&\n                    y >= (actObj.horTopLinePointColl[i].y - 5) &&\n                    y <= (actObj.horTopLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'n-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.horBottomLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.horBottomLinePointColl[i].x - 5) &&\n                    x <= (actObj.horBottomLinePointColl[i].x + 5) &&\n                    y >= (actObj.horBottomLinePointColl[i].y - 5) &&\n                    y <= (actObj.horBottomLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 's-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verLeftLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.verLeftLinePointColl[i].x - 5) &&\n                    x <= (actObj.verLeftLinePointColl[i].x + 5) &&\n                    y >= (actObj.verLeftLinePointColl[i].y - 5) &&\n                    y <= (actObj.verLeftLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'w-resize';\n                    break;\n                }\n            }\n        }\n        if (parent.cursor === 'default') {\n            for (var i = 0, len = actObj.verRightLinePointColl.length; i < len; i++) {\n                if (x >= (actObj.verRightLinePointColl[i].x - 5) &&\n                    x <= (actObj.verRightLinePointColl[i].x + 5) &&\n                    y >= (actObj.verRightLinePointColl[i].y - 5) &&\n                    y <= (actObj.verRightLinePointColl[i].y + 5)) {\n                    upperCanvas.style.cursor = parent.cursor = this.resizedElement = 'e-resize';\n                    break;\n                }\n            }\n        }\n        this.adjustCursorStylesForRotatedState(actObj);\n        return parent.cursor;\n    };\n    Selection.prototype.adjustCursorStylesForRotatedState = function (actObj) {\n        var parent = this.parent;\n        var length = actObj.rotatedAngle * (180 / Math.PI);\n        length = length > 0 ? Math.floor(length) : Math.ceil(length);\n        if ((length >= 92 && length <= 182) || (length >= -178 && length <= -88)) {\n            var cursorMap = { 'nw-resize': 'ne-resize', 'n-resize': 's-resize',\n                'ne-resize': 'nw-resize', 'w-resize': 'e-resize', 'e-resize': 'w-resize',\n                'sw-resize': 'se-resize', 's-resize': 'n-resize', 'se-resize': 'sw-resize'\n            };\n            if (parent.cursor in cursorMap) {\n                parent.cursor = cursorMap[parent.cursor];\n            }\n        }\n        parent.upperCanvas.style.cursor = this.getResizeElement((actObj.rotatedAngle * (180 / Math.PI)), parent.cursor);\n        return parent.cursor;\n    };\n    Selection.prototype.getResizeElement = function (degree, element) {\n        var resizeMappings = [];\n        if (element === 'nw-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'nw-resize'], [22.5, 67.5, 'n-resize'], [67.5, 112.5, 'ne-resize'],\n                [112.5, 157.5, 'e-resize'], [157.5, 202.5, 'se-resize'],\n                [202.5, 247.5, 's-resize'], [247.5, 292.5, 'sw-resize'],\n                [292.5, 337.5, 'w-resize']\n            ];\n        }\n        else if (element === 'n-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'n-resize'], [22.5, 67.5, 'ne-resize'], [67.5, 112.5, 'e-resize'],\n                [112.5, 157.5, 'se-resize'], [157.5, 202.5, 's-resize'], [202.5, 247.5, 'sw-resize'],\n                [247.5, 292.5, 'w-resize'], [292.5, 337.5, 'nw-resize']\n            ];\n        }\n        else if (element === 'ne-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'ne-resize'], [22.5, 67.5, 'e-resize'],\n                [67.5, 112.5, 'se-resize'], [112.5, 157.5, 's-resize'], [157.5, 202.5, 'sw-resize'],\n                [202.5, 247.5, 'w-resize'], [247.5, 292.5, 'nw-resize'], [292.5, 337.5, 'n-resize']\n            ];\n        }\n        else if (element === 'e-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'e-resize'], [22.5, 67.5, 'se-resize'], [67.5, 112.5, 's-resize'],\n                [112.5, 157.5, 'sw-resize'], [157.5, 202.5, 'w-resize'], [202.5, 247.5, 'nw-resize'],\n                [247.5, 292.5, 'n-resize'], [292.5, 337.5, 'ne-resize']\n            ];\n        }\n        else if (element === 'se-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'se-resize'], [22.5, 67.5, 's-resize'], [67.5, 112.5, 'sw-resize'],\n                [112.5, 157.5, 'w-resize'], [157.5, 202.5, 'nw-resize'], [202.5, 247.5, 'n-resize'],\n                [247.5, 292.5, 'ne-resize'], [292.5, 337.5, 'e-resize']\n            ];\n        }\n        else if (element === 's-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 's-resize'], [22.5, 67.5, 'sw-resize'], [67.5, 112.5, 'w-resize'],\n                [112.5, 157.5, 'nw-resize'], [157.5, 202.5, 'n-resize'], [202.5, 247.5, 'ne-resize'],\n                [247.5, 292.5, 'e-resize'], [292.5, 337.5, 'se-resize']\n            ];\n        }\n        else if (element === 'sw-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'sw-resize'], [22.5, 67.5, 'w-resize'], [67.5, 112.5, 'nw-resize'],\n                [112.5, 157.5, 'n-resize'], [157.5, 202.5, 'ne-resize'], [202.5, 247.5, 'e-resize'],\n                [247.5, 292.5, 'se-resize'], [292.5, 337.5, 's-resize']\n            ];\n        }\n        else if (element === 'w-resize') {\n            resizeMappings = [\n                [337.5, 22.5, 'w-resize'], [22.5, 67.5, 'nw-resize'], [67.5, 112.5, 'n-resize'],\n                [112.5, 157.5, 'ne-resize'], [157.5, 202.5, 'e-resize'], [202.5, 247.5, 'se-resize'],\n                [247.5, 292.5, 's-resize'], [292.5, 337.5, 'sw-resize']\n            ];\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_1 = resizeMappings; _i < resizeMappings_1.length; _i++) {\n            var _a = resizeMappings_1[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.setCursorForFreehandDrawing = function (x, y, upperCanvas) {\n        var upperContext = upperCanvas.getContext('2d');\n        var parent = this.parent;\n        var textArea = document.querySelector('#' + parent.element.id + '_textArea');\n        var isEntered = false;\n        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n            value: { index: -1 } });\n        var sPoints;\n        for (var n = 0; n < parent.freehandCounter; n++) {\n            var obj = { selPointColl: {} };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false, value: { obj: obj } });\n            sPoints = extend([], obj['selPointColl'][n].points, []);\n            parent.points = extend([], parent.pointColl[n].points, []);\n            parent.notify('freehand-draw', { prop: 'setPointCounter', onPropertyChange: false, value: { value: 0 } });\n            var len = sPoints.length;\n            for (var l = 0; l < len; l++) {\n                if (l !== 0) {\n                    var isInside = false;\n                    if (sPoints[l - 1] && sPoints[l]) {\n                        isInside = this.isInside(x, y, sPoints[l - 1].x, sPoints[l - 1].y, sPoints[l].x, sPoints[l].y);\n                    }\n                    if (isInside) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                            value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || parent.pointColl[n].isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var strokeColor = parent.pointColl[n].strokeColor;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[n].strokeWidth } });\n                        }\n                        else {\n                            parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                                value: { index: null } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n                else {\n                    if (x > parent.points[l].x - parent.pointColl[n].strokeWidth &&\n                        x < parent.points[l].x + parent.pointColl[n].strokeWidth &&\n                        y > parent.points[l].y - parent.pointColl[n].strokeWidth &&\n                        y < parent.points[l].y + parent.pointColl[n].strokeWidth) {\n                        this.isFhdPoint = true;\n                        parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                            value: { index: n } });\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: null, strokeWidth: null } });\n                        upperCanvas.style.cursor = parent.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFhdEditing || parent.pointColl[n].isSelected) {\n                        if (this.isFhdPoint || this.isFhdEditing) {\n                            upperContext.clearRect(0, 0, upperCanvas.width, upperCanvas.height);\n                            if (parent.activeObj.shape && textArea.style.display === 'none') {\n                                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n                            }\n                        }\n                        if (this.isFhdEditing) {\n                            var strokeColor = parent.pointColl[n].strokeColor;\n                            parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                                value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[n].strokeWidth } });\n                        }\n                        this.isFhdPoint = false;\n                    }\n                }\n            }\n            if (isEntered) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.setCursorFromObj = function (x, y, obj, upperCanvas, isCropSelection) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.length; i < len; i++) {\n            if (parent.cursor === 'move') {\n                return;\n            }\n            var actObj = extend({}, obj[i], {}, true);\n            this.cursorTargetId = actObj.currIndex;\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, upperCanvas);\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, upperCanvas);\n            }\n            else if (!isNullOrUndefined(actObj.rotatedAngle) && actObj.rotatedAngle !== 0) {\n                this.setCursorForRotatedObject(actObj, x, y, upperCanvas);\n            }\n            else {\n                upperCanvas.style.cursor = parent.cursor = this.getMouseCursor(actObj, x, y, isCropSelection, true);\n            }\n        }\n    };\n    Selection.prototype.isInside = function (x, y, z1, z2, z3, z4) {\n        var x1 = Math.min(z1, z3);\n        var x2 = Math.max(z1, z3);\n        var y1 = Math.min(z2, z4);\n        var y2 = Math.max(z2, z4);\n        if ((x1 <= x && x <= x2) && (y1 <= y && y <= y2)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    Selection.prototype.updateActivePoint = function (x, y, isCropSelection) {\n        var parent = this.parent;\n        var obj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.activeObj.activePoint.width, height: parent.activeObj.activePoint.height, obj: obj, isImgShape: null } });\n        var maxDimension = obj;\n        var previousShapeSettings = this.updatePrevShapeSettings();\n        var shapeResizingArgs = { action: 'resize', previousShapeSettings: previousShapeSettings };\n        var shapeMovingArgs = { action: 'move', previousShapeSettings: previousShapeSettings };\n        this.shapeResizingArgs = shapeResizingArgs;\n        this.shapeMovingArgs = shapeMovingArgs;\n        if (parent.activeObj.shape === 'text' && this.dragElement !== '') {\n            parent.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: parent.activeObj, isTextArea: null } });\n        }\n        if (this.currentDrawingShape !== '' && (this.dragElement === '' || this.dragElement === 'move')) {\n            if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n                parent.activeObj.shape === 'path') {\n                this.dragElement = 'e-resize';\n            }\n            else {\n                if (x > parent.activeObj.activePoint.startX && y > parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'se-resize';\n                }\n                else if (x < parent.activeObj.activePoint.startX && y > parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'sw-resize';\n                }\n                else if (x > parent.activeObj.activePoint.startX && y < parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'ne-resize';\n                }\n                else if (x < parent.activeObj.activePoint.startX && y < parent.activeObj.activePoint.startY) {\n                    this.dragElement = 'nw-resize';\n                }\n            }\n        }\n        if (parent.activeObj.shape === 'arrow') {\n            if (Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2) > 0) {\n                parent.activeObj.rotatedAngle = -Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2);\n            }\n            else {\n                parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - parent.lowerCanvas.width / 2, y - parent.lowerCanvas.height / 2));\n            }\n        }\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        switch (this.dragElement.toLowerCase()) {\n            case 'nw-resize':\n                this.updateNWPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'n-resize':\n                this.updateNPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'ne-resize':\n                this.updateNEPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'w-resize':\n                this.updateWPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'e-resize':\n                this.updateEPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'sw-resize':\n                this.updateSWPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 's-resize':\n                this.updateSPoints(x, y);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'se-resize':\n                this.updateSEPoints(x, y, maxDimension);\n                parent.notify('shape', { prop: 'updateArrowDirection', onPropertyChange: false,\n                    value: { obj: parent.activeObj, flip: null, rotatedDegree: null } });\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'grabbing':\n                if (Math.atan2(x - (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2)), y - (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2))) > 0) {\n                    parent.activeObj.rotatedAngle = -Math.atan2(x - (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width\n                        / 2)), y - (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2)));\n                }\n                else {\n                    parent.activeObj.rotatedAngle = Math.abs(Math.atan2(x - (parent.activeObj.activePoint.startX +\n                        (parent.activeObj.activePoint.width / 2)), y - (parent.activeObj.activePoint.startY +\n                        (parent.activeObj.activePoint.height / 2))));\n                }\n                if (parent.activeObj.shapeDegree === 0) {\n                    degree = parent.transform.degree;\n                }\n                else {\n                    degree = parent.transform.degree - parent.activeObj.shapeDegree;\n                }\n                if (degree < 0) {\n                    degree = 360 + degree;\n                }\n                for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        isHorizontalflip = true;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        isVerticalflip = true;\n                    }\n                }\n                parent.activeObj.rotatedAngle -= (degree * (Math.PI / 180));\n                if (degree === 0 || degree === 360) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 90 || degree === -270) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 180 || degree === -180) {\n                    if (isVerticalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                else if (degree === 270 || degree === -90) {\n                    if (isHorizontalflip) {\n                        parent.activeObj.rotatedAngle -= (180 * (Math.PI / 180));\n                    }\n                }\n                break;\n            case 'pathdrag':\n                if (!isNullOrUndefined(this.pathAdjustedIndex)) {\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].x = x;\n                    parent.activeObj.pointColl[this.pathAdjustedIndex].y = y;\n                }\n                break;\n            default:\n                if (!isCropSelection && !parent.currObjType.isCustomCrop) {\n                    if (this.dragPoint.startX) {\n                        var width = (this.dragPoint.endX - this.previousPoint.x);\n                        var height = (this.dragPoint.endY - this.previousPoint.y);\n                        parent.activeObj.activePoint.startX += width;\n                        parent.activeObj.activePoint.endX += width;\n                        parent.activeObj.activePoint.startY += height;\n                        parent.activeObj.activePoint.endY += height;\n                        if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                            parent.activeObj.rotationCirclePointColl) {\n                            parent.activeObj.rotationCirclePointColl.x += width;\n                            parent.activeObj.rotationCirclePointColl.y += height;\n                            parent.activeObj.rotationCirclePoint.x += width;\n                            parent.activeObj.rotationCirclePoint.y += height;\n                        }\n                        if (parent.activeObj.shape === 'path') {\n                            for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                                parent.activeObj.pointColl[i].x += width;\n                                parent.activeObj.pointColl[i].y += height;\n                            }\n                        }\n                        if (!this.isPreventDragging && parent.activeObj.shape !== 'line' && (parent.activeObj.rotatedAngle === 0 && (parent.activeObj.activePoint.startX < parent.img.destLeft ||\n                            parent.activeObj.activePoint.startY < parent.img.destTop || parent.activeObj.activePoint.endX >\n                            parent.img.destLeft + parent.img.destWidth || parent.activeObj.activePoint.endY > parent.img.destTop\n                            + parent.img.destHeight))) {\n                            parent.activeObj.activePoint.startX -= width;\n                            parent.activeObj.activePoint.endX -= width;\n                            parent.activeObj.activePoint.startY -= height;\n                            parent.activeObj.activePoint.endY -= height;\n                            if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' &&\n                                parent.activeObj.rotationCirclePointColl) {\n                                parent.activeObj.rotationCirclePointColl.x -= width;\n                                parent.activeObj.rotationCirclePointColl.y -= height;\n                                parent.activeObj.rotationCirclePoint.x -= width;\n                                parent.activeObj.rotationCirclePoint.y -= height;\n                            }\n                            this.setDragWidth(width);\n                            this.setDragHeight(height);\n                        }\n                    }\n                    else {\n                        parent.activeObj.activePoint.startX = x < this.mouseDownPoint.x ? x : this.mouseDownPoint.x;\n                        parent.activeObj.activePoint.startY = y < this.mouseDownPoint.y ? y : this.mouseDownPoint.y;\n                        x = x < this.mouseDownPoint.x ? this.mouseDownPoint.x : x;\n                        y = y < this.mouseDownPoint.y ? this.mouseDownPoint.y : y;\n                        parent.activeObj.activePoint.endX = x;\n                        parent.activeObj.activePoint.endY = y;\n                    }\n                    this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'move');\n                }\n                break;\n        }\n    };\n    Selection.prototype.triggerShapeChange = function (shapeResizingArgs, shapeMovingArgs, type) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        var currentShapeSettings = this.updatePrevShapeSettings();\n        if (!isNullOrUndefined(this.shapeResizingArgs) && !isNullOrUndefined(this.shapeMovingArgs)) {\n            shapeResizingArgs.currentShapeSettings = this.shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n            shapeMovingArgs.currentShapeSettings = this.shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        }\n        else {\n            shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n            shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        }\n        if (type === 'resize') {\n            this.isCropSelection = false;\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.isCropSelection = true;\n            }\n            if (!this.isCropSelection && this.parent.eventType !== 'resize' && isBlazor() && parent.events && this.parent.events.onShapeResizeStart.hasDelegate === true) {\n                shapeResizingArgs.action = this.currentDrawingShape !== '' ? 'drawing' : 'resize-start';\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeResizeStart', shapeResizingArgs).then(function (shapeResizingArgs) {\n                    parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                        value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n                });\n            }\n            else if (!this.isCropSelection) {\n                if (this.currentDrawingShape !== '') {\n                    shapeResizingArgs.action = 'drawing';\n                }\n                parent.trigger('shapeChanging', shapeResizingArgs);\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n            }\n            else {\n                var selectionResizingArgs = { action: shapeResizingArgs.action,\n                    previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.previousShapeSettings.startX,\n                        startY: shapeResizingArgs.previousShapeSettings.startY,\n                        width: shapeResizingArgs.previousShapeSettings.width,\n                        height: shapeResizingArgs.previousShapeSettings.height },\n                    currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                        startX: shapeResizingArgs.currentShapeSettings.startX,\n                        startY: shapeResizingArgs.currentShapeSettings.startY,\n                        width: shapeResizingArgs.currentShapeSettings.width,\n                        height: shapeResizingArgs.currentShapeSettings.height } };\n                this.selectionResizingArgs = selectionResizingArgs;\n                if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events &&\n                    parent.events.onSelectionResizeStart.hasDelegate === true) {\n                    selectionResizingArgs.action = 'resize-start';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionResizingArgs).then(function (selectionResizingArgs) {\n                        parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                            value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                    });\n                }\n                else {\n                    parent.trigger('selectionChanging', selectionResizingArgs);\n                    parent.notify('shape', { prop: 'updSelChangeEventArgs', onPropertyChange: false,\n                        value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                }\n            }\n        }\n        else if (type === 'mouse-down' || type === 'mouse-up') {\n            if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeResizingArgs).then(function (shapeResizingArgs) {\n                    parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                        value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n                });\n            }\n            else {\n                parent.trigger('shapeChanging', shapeResizingArgs);\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n            }\n        }\n        else {\n            if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events &&\n                parent.events.onShapeDragStart.hasDelegate === true) {\n                shapeMovingArgs.action = 'drag-start';\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeDragStart', shapeMovingArgs).then(function (shapeMovingArgs) {\n                    parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                        value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n                });\n            }\n            else {\n                parent.trigger('shapeChanging', shapeMovingArgs);\n                parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                    value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n            }\n        }\n        this.parent.eventType = type;\n    };\n    Selection.prototype.setDragWidth = function (width) {\n        var parent = this.parent;\n        var tempWidth = width;\n        if (tempWidth >= 0) {\n            for (var i = 0; i < tempWidth; i++) {\n                width = tempWidth - i;\n                parent.activeObj.activePoint.startX += width;\n                parent.activeObj.activePoint.endX += width;\n                if (parent.activeObj.activePoint.startX >= parent.img.destLeft &&\n                    parent.activeObj.activePoint.endX <= parent.img.destLeft + parent.img.destWidth) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startX -= width;\n                    parent.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n        else {\n            for (var i = 1; i < Math.abs(tempWidth); i++) {\n                width = tempWidth + i;\n                parent.activeObj.activePoint.startX += width;\n                parent.activeObj.activePoint.endX += width;\n                if (parent.activeObj.activePoint.startX >= parent.img.destLeft &&\n                    parent.activeObj.activePoint.endX <= parent.img.destLeft + parent.img.destWidth) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startX -= width;\n                    parent.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n    };\n    Selection.prototype.setDragHeight = function (height) {\n        var parent = this.parent;\n        var tempHeight = height;\n        if (tempHeight >= 0) {\n            for (var i = 1; i < tempHeight; i++) {\n                height = tempHeight - i;\n                parent.activeObj.activePoint.startY += height;\n                parent.activeObj.activePoint.endY += height;\n                if (parent.activeObj.activePoint.startY >= parent.img.destTop &&\n                    parent.activeObj.activePoint.endY <= parent.img.destTop + parent.img.destHeight) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startY -= height;\n                    parent.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < Math.abs(tempHeight); i++) {\n                height = tempHeight + i;\n                parent.activeObj.activePoint.startY += height;\n                parent.activeObj.activePoint.endY += height;\n                if (parent.activeObj.activePoint.startY >= parent.img.destTop &&\n                    parent.activeObj.activePoint.endY <= parent.img.destTop + parent.img.destHeight) {\n                    break;\n                }\n                else {\n                    parent.activeObj.activePoint.startY -= height;\n                    parent.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n    };\n    Selection.prototype.limitDrag = function (isStart) {\n        var parent = this.parent;\n        var startX = isStart ? parent.activeObj.activePoint.startX : parent.activeObj.activePoint.endX;\n        var startY = isStart ? parent.activeObj.activePoint.startY : parent.activeObj.activePoint.endY;\n        var endX = isStart ? parent.activeObj.activePoint.endX : parent.activeObj.activePoint.startX;\n        var endY = isStart ? parent.activeObj.activePoint.endY : parent.activeObj.activePoint.startY;\n        if (startX < parent.img.destLeft) {\n            startX = parent.img.destLeft;\n        }\n        if (startY < parent.img.destTop) {\n            startY = parent.img.destTop;\n        }\n        if (endX > parent.img.destLeft + parent.img.destWidth) {\n            endX = parent.img.destLeft + parent.img.destWidth;\n        }\n        if (endY > parent.img.destTop + parent.img.destHeight) {\n            endY = parent.img.destTop + parent.img.destHeight;\n        }\n        if (isStart) {\n            parent.activeObj.activePoint.startX = startX;\n            parent.activeObj.activePoint.startY = startY;\n            parent.activeObj.activePoint.endX = endX;\n            parent.activeObj.activePoint.endY = endY;\n        }\n        else {\n            parent.activeObj.activePoint.startX = endX;\n            parent.activeObj.activePoint.startY = endY;\n            parent.activeObj.activePoint.endX = startX;\n            parent.activeObj.activePoint.endY = startY;\n        }\n    };\n    Selection.prototype.preventDraggingInvertly = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'image') {\n            return;\n        }\n        if (!this.isPreventDragging && parent.activeObj.rotatedAngle === 0) {\n            this.limitDrag(true);\n            if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n                parent.activeObj.shape === 'path') {\n                this.limitDrag(false);\n            }\n        }\n    };\n    Selection.prototype.preventTextDraggingInvertly = function () {\n        var parent = this.parent;\n        var isLimiting = false;\n        if (!this.isPreventDragging) {\n            if (parent.activeObj.activePoint.startX < parent.img.destLeft ||\n                parent.activeObj.activePoint.startY < parent.img.destTop ||\n                parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth ||\n                parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n                isLimiting = true;\n            }\n        }\n        return isLimiting;\n    };\n    Selection.prototype.preventInverseResize = function (tempActiveObj) {\n        var parent = this.parent;\n        if (parent.activeObj.activePoint.width < 0) {\n            parent.activeObj.activePoint.width = 0;\n            parent.activeObj.activePoint.startX = tempActiveObj.activePoint.startX;\n            parent.activeObj.activePoint.endX = tempActiveObj.activePoint.endX;\n        }\n        if (parent.activeObj.activePoint.height < 0) {\n            parent.activeObj.activePoint.height = 0;\n            parent.activeObj.activePoint.startY = tempActiveObj.activePoint.startY;\n            parent.activeObj.activePoint.endY = tempActiveObj.activePoint.endY;\n        }\n    };\n    Selection.prototype.getScaleRatio = function (scale) {\n        var parent = this.parent;\n        var point = { x: scale, y: scale };\n        if (parent.activeObj.shape && parent.activeObj.shape !== 'crop-custom' &&\n            parent.activeObj.shape !== 'crop-circle' && parent.activeObj.shape !== 'crop-square') {\n            var ratio = parent.activeObj.shape === 'image' ?\n                this.findImageRatio(parent.activeObj.activePoint.width, parent.activeObj.activePoint.height).split('-') :\n                parent.activeObj.shape.split('-');\n            if (ratio.length > 1 || parent.activeObj.shape === 'image') {\n                ratio = parent.activeObj.shape === 'image' ? ratio[0].split(':') : ratio[1].split(':');\n                var newScale = scale / (parseInt(ratio[1], 10));\n                point.x = newScale * (parseInt(ratio[0], 10));\n                point.y = newScale * (parseInt(ratio[1], 10));\n            }\n        }\n        return point;\n    };\n    Selection.prototype.findImageRatio = function (width, height, obj) {\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        var gcd = function (a, b) {\n            if (b === 0) {\n                return a;\n            }\n            return gcd(b, a % b);\n        };\n        var divisor = gcd(width, height);\n        var ratio = width / divisor + \":\" + height / divisor;\n        if (obj) {\n            obj['ratio'] = ratio;\n        }\n        return ratio;\n    };\n    Selection.prototype.updateNWPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = parent.activeObj.activePoint.startX - x;\n                this.diffPoint.y = parent.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.startX += (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.startY += (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape === 'image') {\n                    this.resizeImg(x, y, 'nw-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustNWPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.startY < y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var top_1 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.startX < left || parent.activeObj.activePoint.startY < top_1) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    var left = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var top_2 = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.startX < left || parent.activeObj.activePoint.startY < top_2) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateNPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.startY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = this.resizedElement = 's-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.startY < y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.startY < parent.img.destTop) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = parent.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.startY < parent.img.destTop) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateNEPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - parent.activeObj.activePoint.endX;\n                this.diffPoint.y = parent.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.endX += (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.endX -= (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.startY += (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape === 'image') {\n                    this.resizeImg(x, y, 'ne-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustNEPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                if (parent.activeObj.activePoint.startY > parent.activeObj.activePoint.endY) {\n                    var temp = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.startY < y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = y - parent.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.startY += newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.startY < endY) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = parent.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.startY -= newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop > 0 ? parent.img.destTop : 0;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.startY < endY) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateWPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.startX = x;\n                    parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    parent.activeObj.activePoint.startY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'e-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = this.resizedElement = 'e-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.endY > y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.startX < parent.img.destLeft || parent.activeObj.activePoint.endY >\n                        (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    if (parent.activeObj.activePoint.startX < parent.img.destLeft || parent.activeObj.activePoint.endY >\n                        (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateEPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.endX = x;\n                    parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path') {\n                    parent.activeObj.activePoint.endY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                    if (this.adjustActObjForLineArrow()) {\n                        this.dragElement = 'w-resize';\n                        if (parent.activeObj.triangleDirection === 'right') {\n                            parent.activeObj.triangleDirection = 'left';\n                        }\n                        else if (parent.activeObj.triangleDirection === 'left') {\n                            parent.activeObj.triangleDirection = 'right';\n                        }\n                    }\n                }\n                else if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = this.resizedElement = 'w-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateSWPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (isNullOrUndefined(this.oldPoint.x) && isNullOrUndefined(this.oldPoint.y)) {\n                this.diffPoint.x = parent.activeObj.activePoint.startX - x;\n                this.diffPoint.y = y - parent.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            parent.activeObj.activePoint.endY += (maxDimension.height / 100) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.startX += (maxDimension.width / 100) * percentage;\n                parent.activeObj.activePoint.endY -= (maxDimension.height / 100) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape === 'image') {\n                    this.resizeImg(x, y, 'sw-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustSWPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (parent.activeObj.activePoint.startX > parent.activeObj.activePoint.endX) {\n                    var temp = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.startX < x && parent.activeObj.activePoint.endY > y) {\n                    width = x - parent.activeObj.activePoint.startX;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX += newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    var endX = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.startX < endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.startX -= newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = parent.activeObj.activePoint.startX - x;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.startX -= newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    var endX = parent.img.destLeft > 0 ? parent.img.destLeft : 0;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.startX < endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.startX += newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.updateSPoints = function (x, y) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        if (parent.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape !== 'line' && parent.activeObj.shape !== 'arrow' && parent.activeObj.shape !== 'path' &&\n                    parent.activeObj.rotatedAngle !== 0 && this.dragPoint.startX) {\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    width = (this.dragPoint.endX - this.previousPoint.x);\n                    height = (this.dragPoint.endY - this.previousPoint.y);\n                    this.adjustRotationPoints(parent.activeObj.activePoint, width, height, parent.activeObj.rotatedAngle);\n                }\n                else {\n                    parent.activeObj.activePoint.endY = y;\n                    parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = this.resizedElement = 'n-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.x;\n                    if (parent.activeObj.activePoint.endX > (parent.img.destLeft + parent.img.destWidth) ||\n                        parent.activeObj.activePoint.endY > (parent.img.destTop + parent.img.destHeight)) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            }\n        }\n    };\n    Selection.prototype.updateSEPoints = function (x, y, maxDimension) {\n        var parent = this.parent;\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, parent.activeObj, null, true);\n        if (parent.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - parent.activeObj.activePoint.endX;\n                this.diffPoint.y = y - parent.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x >= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            parent.activeObj.activePoint.endX += (maxDimension.width / 50) * percentage;\n            parent.activeObj.activePoint.endY += (maxDimension.height / 50) * percentage;\n            if (this.preventTextDraggingInvertly()) {\n                parent.activeObj.activePoint.endX -= (maxDimension.width / 50) * percentage;\n                parent.activeObj.activePoint.endY -= (maxDimension.height / 50) * percentage;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.notify('shape', { prop: 'updateFontSize', onPropertyChange: false,\n                value: { obj: parent.activeObj } });\n        }\n        else {\n            var splitWords = void 0;\n            var newScale = void 0;\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.activeObj.shape === 'crop-custom' || (parent.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                if (parent.activeObj.shape === 'image') {\n                    this.resizeImg(x, y, 'se-resize', tempActiveObj);\n                }\n                else {\n                    this.adjustSEPoints(parent.activeObj.activePoint, x, y, parent.activeObj.rotatedAngle);\n                }\n                if (parent.activeObj.activePoint.endX < parent.activeObj.activePoint.startX) {\n                    var temp = parent.activeObj.activePoint.endX;\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n                    parent.activeObj.activePoint.startX = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                }\n                if (parent.activeObj.activePoint.endY < parent.activeObj.activePoint.startY) {\n                    var temp = parent.activeObj.activePoint.endY;\n                    parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n                    parent.activeObj.activePoint.startY = temp;\n                    this.dragElement = parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (parent.activeObj.activePoint.endX > x && parent.activeObj.activePoint.endY > y) {\n                    width = parent.activeObj.activePoint.endX - x;\n                    height = parent.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX -= newScale.x;\n                    parent.activeObj.activePoint.endY -= newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ?\n                        parent.img.destLeft + parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ?\n                        parent.img.destTop + parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.endX += newScale.x;\n                        parent.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - parent.activeObj.activePoint.endX;\n                    height = y - parent.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    newScale = this.getScaleRatio(scale);\n                    parent.activeObj.activePoint.endX += newScale.x;\n                    parent.activeObj.activePoint.endY += newScale.y;\n                    var endX = parent.img.destLeft + parent.img.destWidth < parent.lowerCanvas.width ? parent.img.destLeft +\n                        parent.img.destWidth : parent.lowerCanvas.width;\n                    var endY = parent.img.destTop + parent.img.destHeight < parent.lowerCanvas.height ? parent.img.destTop +\n                        parent.img.destHeight : parent.lowerCanvas.height;\n                    if (parent.activeObj.activePoint.endX > endX || parent.activeObj.activePoint.endY > endY) {\n                        parent.activeObj.activePoint.endX -= newScale.x;\n                        parent.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    Selection.prototype.resizeImg = function (x, y, elem, tempActiveObj) {\n        var parent = this.parent;\n        var width;\n        var height;\n        var scale;\n        var newScale;\n        if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n            switch (parent.upperCanvas.style.cursor) {\n                case 'se-resize':\n                case 's-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y > y) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'sw-resize':\n                    if (this.previousPoint.x < x || this.previousPoint.y > y) {\n                        width = (x - this.previousPoint.x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (this.previousPoint.x - x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'w-resize':\n                case 'nw-resize':\n                    if (this.previousPoint.x < x || this.previousPoint.y < y) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'n-resize':\n                case 'ne-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y < y) {\n                        width = (this.previousPoint.x - x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n                case 'e-resize':\n                    if (this.previousPoint.x > x || this.previousPoint.y > y) {\n                        width = (this.previousPoint.x - x);\n                        height = (this.previousPoint.y - y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, -Math.abs(newScale.x), -Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    else if (this.previousPoint.x !== 0 && this.previousPoint.y !== 0) {\n                        width = (x - this.previousPoint.x);\n                        height = (y - this.previousPoint.y);\n                        scale = (width + height) / 2;\n                        newScale = this.getScaleRatio(scale);\n                        this.adjustRotationPoints(parent.activeObj.activePoint, Math.abs(newScale.x), Math.abs(newScale.y), parent.activeObj.rotatedAngle, 'img-resize', elem);\n                    }\n                    break;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            if (parent.activeObj.activePoint.width < 10 || parent.activeObj.activePoint.height < 10) {\n                parent.activeObj = extend({}, tempActiveObj, null, true);\n            }\n        }\n        this.previousPoint = { x: x, y: y };\n    };\n    Selection.prototype.adjustNWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedC[0] + x) / 2, (rotatedC[1] + y) / 2];\n        var newBottomRight = this.rotatePoints(rotatedC[0], rotatedC[1], newCenter[0], newCenter[1], -angle);\n        var newTopLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newBottomRight[0];\n        rectangle.endY = newBottomRight[1];\n        rectangle.startY = newTopLeft[1];\n        rectangle.startX = newTopLeft[0];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustNEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedD[0] + x) / 2, (rotatedD[1] + y) / 2];\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = newTopRight[0] - newBottomLeft[0];\n        rectangle.height = newBottomLeft[1] - newTopRight[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.startY = rectangle.endY - rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustSWPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedB[0] + x) / 2, (rotatedB[1] + y) / 2];\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.endX = newTopRight[0];\n        rectangle.startY = newTopRight[1];\n        rectangle.startX = newBottomLeft[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.adjustSEPoints = function (rectangle, x, y, angle) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + x) / 2, (rotatedA[1] + y) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomRight = this.rotatePoints(x, y, newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.width = newBottomRight[0] - newTopLeft[0];\n        rectangle.height = newBottomRight[1] - newTopLeft[1];\n        rectangle.endX = rectangle.startX + rectangle.width;\n        rectangle.endY = rectangle.startY + rectangle.height;\n        return rectangle;\n    };\n    Selection.prototype.adjustRotationPoints = function (rectangle, x, y, angle, type, elem) {\n        var cx = rectangle.startX + rectangle.width / 2;\n        var cy = rectangle.startY + rectangle.height / 2;\n        this.getResizeDirection(rectangle, x, y, angle, type, elem);\n        var rotatedA = this.rotatePoints(rectangle.startX, rectangle.startY, cx, cy, angle);\n        var rotatedB = this.rotatePoints(rectangle.endX, rectangle.startY, cx, cy, angle);\n        var rotatedC = this.rotatePoints(rectangle.endX, rectangle.endY, cx, cy, angle);\n        var rotatedD = this.rotatePoints(rectangle.startX, rectangle.endY, cx, cy, angle);\n        var newCenter = [(rotatedA[0] + rotatedC[0]) / 2, (rotatedA[1] + rotatedC[1]) / 2];\n        var newTopLeft = this.rotatePoints(rotatedA[0], rotatedA[1], newCenter[0], newCenter[1], -angle);\n        var newBottomLeft = this.rotatePoints(rotatedD[0], rotatedD[1], newCenter[0], newCenter[1], -angle);\n        var newTopRight = this.rotatePoints(rotatedB[0], rotatedB[1], newCenter[0], newCenter[1], -angle);\n        rectangle.startX = newTopLeft[0];\n        rectangle.startY = newTopLeft[1];\n        rectangle.endX = newTopRight[0];\n        rectangle.endY = newBottomLeft[1];\n        rectangle.width = rectangle.endX - rectangle.startX;\n        rectangle.height = rectangle.endY - rectangle.startY;\n        return rectangle;\n    };\n    Selection.prototype.rotatePoints = function (x, y, cx, cy, angle) {\n        return [\n            (x - cx) * Math.cos(angle) - (y - cy) * Math.sin(angle) + cx,\n            (x - cx) * Math.sin(angle) + (y - cy) * Math.cos(angle) + cy\n        ];\n    };\n    Selection.prototype.setResizedValue = function (element, value, x, y) {\n        switch (element) {\n            case 'x':\n                value += x;\n                break;\n            case 'y':\n                value += y;\n                break;\n            case 'abs-x':\n                value += (x > 0 ? -x : Math.abs(x));\n                break;\n            case 'abs-y':\n                value += (y > 0 ? -y : Math.abs(y));\n                break;\n            case 'y-abs-x':\n                value += (y + ((x > 0 ? -x : Math.abs(x)) / 2));\n                break;\n            case 'abs-x-abs-y':\n                value += ((x > 0 ? -x : Math.abs(x)) + ((y > 0 ? -y : Math.abs(y)) / 2));\n                break;\n            case 'abs-y-x':\n                value += ((y > 0 ? -y : Math.abs(y)) + (x / 2));\n                break;\n            case 'x-y':\n                value += (x + (y / 2));\n                break;\n            case 'img-resize-x':\n                value += x;\n                break;\n            case 'img-resize-y':\n                value += y;\n                break;\n        }\n        return value;\n    };\n    Selection.prototype.getResizeDirection = function (rectangle, x, y, angle, type, elem) {\n        var rotatedAngle = angle * (180 / Math.PI);\n        var element = this.getResizedElement(rotatedAngle, this.resizedElement);\n        if (this.resizedElement === 'e-resize') {\n            rectangle.width = this.setResizedValue(element, rectangle.width, x, y);\n            rectangle.endX = rectangle.width + rectangle.startX;\n        }\n        else if (this.resizedElement === 'n-resize') {\n            rectangle.startY = this.setResizedValue(element, rectangle.startY, x, y);\n            rectangle.height = rectangle.endY - rectangle.startY;\n        }\n        else if (this.resizedElement === 'w-resize') {\n            rectangle.startX = this.setResizedValue(element, rectangle.startX, x, y);\n            rectangle.width = rectangle.startX + rectangle.endX;\n        }\n        else if (this.resizedElement === 's-resize') {\n            rectangle.height = this.setResizedValue(element, rectangle.height, x, y);\n            rectangle.endY = rectangle.height + rectangle.startY;\n        }\n        else if (type && type === 'img-resize') {\n            rectangle.width = this.setResizedValue('img-resize-x', rectangle.width, x, y);\n            rectangle.height = this.setResizedValue('img-resize-y', rectangle.height, x, y);\n            if (elem === 'se-resize') {\n                rectangle.endX = rectangle.width + rectangle.startX;\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n            else if (elem === 'sw-resize') {\n                rectangle.startX = rectangle.endX - rectangle.width;\n                rectangle.endY = rectangle.height + rectangle.startY;\n            }\n            else if (elem === 'ne-resize') {\n                rectangle.endX = rectangle.width + rectangle.startX;\n                rectangle.startY = rectangle.endY - rectangle.height;\n            }\n            else if (elem === 'nw-resize') {\n                rectangle.startX = rectangle.endX - rectangle.width;\n                rectangle.startY = rectangle.endY - rectangle.height;\n            }\n        }\n    };\n    Selection.prototype.getResizedElement = function (degree, element) {\n        var resizeMappings = [];\n        if (element === 'n-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'e-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        else if (element === 's-resize') {\n            resizeMappings = [\n                [337.5, 360, 'y'],\n                [0, 22.5, 'y'],\n                [22.5, 67.5, 'y-abs-x'],\n                [67.5, 112.5, 'abs-x'],\n                [112.5, 157.5, 'abs-x-abs-y'],\n                [157.5, 202.5, 'abs-y'],\n                [202.5, 247.5, 'abs-y-x'],\n                [247.5, 292.5, 'x'],\n                [292.5, 337.5, 'x-y']\n            ];\n        }\n        else if (element === 'w-resize') {\n            resizeMappings = [\n                [337.5, 360, 'x'],\n                [0, 22.5, 'x'],\n                [22.5, 67.5, 'x-y'],\n                [67.5, 112.5, 'y'],\n                [112.5, 157.5, 'y-abs-x'],\n                [157.5, 202.5, 'abs-x'],\n                [202.5, 247.5, 'abs-x-abs-y'],\n                [247.5, 292.5, 'abs-y'],\n                [292.5, 337.5, 'abs-y-x']\n            ];\n        }\n        var positiveDegree = degree < 0 ? 360 - Math.abs(degree) : degree;\n        for (var _i = 0, resizeMappings_2 = resizeMappings; _i < resizeMappings_2.length; _i++) {\n            var _a = resizeMappings_2[_i], startDegree = _a[0], endDegree = _a[1], resizeElement = _a[2];\n            if ((positiveDegree > startDegree && positiveDegree <= endDegree) ||\n                (positiveDegree + 360 > startDegree && positiveDegree + 360 <= endDegree)) {\n                return resizeElement;\n            }\n        }\n        return element;\n    };\n    Selection.prototype.updateCursorStyles = function (x, y, type) {\n        var parent = this.parent;\n        var isResize = false;\n        if (parent.activeObj.keyHistory !== '' && parent.activeObj.shape === undefined && !parent.currObjType.isCustomCrop &&\n            !parent.currObjType.isLine && parent.currObjType.isText) {\n            parent.activeObj.shape = 'text';\n        }\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.topLeftCircle)) {\n            return;\n        }\n        var degree;\n        if (actObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (this.isObjSelected) {\n            if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                isResize = this.updateCursorStylesForLineArrow(x, y, actObj);\n            }\n            else if (actObj.shape === 'path') {\n                isResize = this.updateCursorStylesForPath(x, y, actObj);\n            }\n            else if (actObj.rotatedAngle) {\n                this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'grabbing') {\n                    parent.upperCanvas.style.cursor = this.parent.cursor = 'grabbing';\n                    this.dragElement = parent.cursor;\n                }\n                else if (parent.cursor === 'move') {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                else if (parent.cursor !== 'default') {\n                    isResize = true;\n                    this.dragElement = parent.cursor;\n                    parent.currObjType.isResize = true;\n                }\n            }\n            else {\n                var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'nw-resize') {\n                    actObj.topLeftCircle.startX = actObj.topLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'nw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'n-resize') {\n                    actObj.topCenterCircle.startX = actObj.topCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'n-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.topRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.topRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'ne-resize') {\n                    actObj.topRightCircle.startX = actObj.topRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'ne-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.centerLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'w-resize') {\n                    actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'w-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.centerRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.centerRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'e-resize') {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'e-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'sw-resize') {\n                    actObj.bottomLeftCircle.startX = actObj.bottomLeftCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'sw-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 's-resize') {\n                    actObj.bottomCenterCircle.startX = actObj.bottomCenterCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 's-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (x >= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.bottomRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.bottomRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'se-resize') {\n                    actObj.bottomRightCircle.startX = actObj.bottomRightCircle.startY = 0;\n                    parent.upperCanvas.style.cursor = parent.cursor = 'se-resize';\n                    isResize = true;\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else if (rotationCirclePoint &&\n                    x >= rotationCirclePoint.x - (actObj.topLeftCircle.radius * 2) &&\n                    x <= rotationCirclePoint.x + (actObj.topLeftCircle.radius * 2) &&\n                    y >= rotationCirclePoint.y - (actObj.topLeftCircle.radius * 2) &&\n                    y <= rotationCirclePoint.y + (actObj.topLeftCircle.radius * 2) && this.dragElement !== 'grabbing') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'grabbing';\n                    this.dragElement = parent.upperCanvas.style.cursor;\n                }\n                else {\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n                if ((actObj.shape === 'text') && (parent.cursor === 'n-resize' ||\n                    parent.cursor === 's-resize' || parent.cursor === 'e-resize' ||\n                    parent.cursor === 'w-resize')) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                }\n            }\n        }\n        else {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        this.previousPoint.x = this.previousPoint.y = this.diffPoint.x = this.diffPoint.y = 0;\n        if (type === 'touchstart') {\n            if (isResize || (x >= actObj.activePoint.startX && x <= actObj.activePoint.endX\n                && y >= actObj.activePoint.startY && y <= actObj.activePoint.endY) || this.dragElement === 'grabbing') {\n                parent.currObjType.isDragging = true;\n            }\n            else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                this.setCursorForLineArrow(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n            else if (actObj.shape === 'path') {\n                this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                if (parent.cursor === 'move') {\n                    parent.currObjType.isDragging = true;\n                }\n            }\n        }\n        else {\n            parent.currObjType.isDragging = true;\n        }\n        if (actObj.rotatedAngle !== 0 && (this.dragElement === 'e-resize' ||\n            this.dragElement === 'w-resize' || this.dragElement === 'n-resize' ||\n            this.dragElement === 's-resize')) {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n    };\n    Selection.prototype.updateCursorStylesForLineArrow = function (x, y, actObj) {\n        var isResize = false;\n        var parent = this.parent;\n        var point;\n        for (var i = 0; i < 5; i++) {\n            point = actObj.pointColl[i];\n            if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n                this.dragElement = 'w-resize';\n                isResize = true;\n                break;\n            }\n        }\n        if (!isResize) {\n            for (var i = 1; i < 6; i++) {\n                point = actObj.pointColl[actObj.pointColl.length - i];\n                if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                    actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n                    this.dragElement = 'e-resize';\n                    isResize = true;\n                    break;\n                }\n            }\n        }\n        if (!isResize) {\n            for (var i = 0; i < actObj.pointColl.length; i++) {\n                point = actObj.pointColl[i];\n                if (x >= (point.x - (actObj.topLeftCircle.radius * 2)) && x <= (point.x + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (point.y - (actObj.topLeftCircle.radius * 2)) && y <= (point.y + (actObj.topLeftCircle.radius * 2))) {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                    this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n                    this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n                    break;\n                }\n                else {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                }\n            }\n        }\n        return isResize;\n    };\n    Selection.prototype.updateCursorStylesForPath = function (x, y, actObj) {\n        var isResize = false;\n        this.pathAdjustedIndex = this.setCursorForLineArrow(actObj, x, y, this.parent.upperCanvas);\n        if (this.parent.cursor === 'move') {\n            isResize = true;\n            this.dragElement = 'pathDrag';\n        }\n        if (!isResize) {\n            this.parent.upperCanvas.style.cursor = this.parent.cursor = 'move';\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        return isResize;\n    };\n    Selection.prototype.setTextSelection = function (width, height) {\n        var parent = this.parent;\n        var degree = parent.transform.degree;\n        if (parent.activeObj.shapeDegree === 0) {\n            degree = parent.transform.degree;\n        }\n        else {\n            degree = parent.transform.degree - parent.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0, len = parent.activeObj.flipObjColl.length; i < len; i++) {\n            var flip = parent.activeObj.flipObjColl[i].toLowerCase();\n            switch (degree) {\n                case 0:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.endX - width,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                                endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 90:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY, endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - width,\n                                endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY, endX: (parent.activeObj.activePoint.endX),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                    }\n                    break;\n                case 180:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + width),\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height;\n                            parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                                startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                                startY: parent.activeObj.activePoint.startY };\n                            break;\n                        default:\n                            parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                                startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                                startY: parent.activeObj.activePoint.endY - (height ? height : 0) };\n                            break;\n                    }\n                    break;\n                case 270:\n                    switch (flip) {\n                        case 'horizontal':\n                            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                                endX: parent.activeObj.activePoint.endX,\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                        case 'vertical':\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.startY,\n                                endX: (parent.activeObj.activePoint.startX + height),\n                                endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                            break;\n                        default:\n                            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                            parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                                startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                                endX: parent.activeObj.activePoint.endX,\n                                endY: parent.activeObj.activePoint.endY };\n                            break;\n                    }\n                    break;\n            }\n        }\n        if (parent.activeObj.flipObjColl.length === 0) {\n            switch (degree) {\n                case 0:\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n                        endX: (parent.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: parent.activeObj.activePoint.startY + (height ? height : 0) };\n                    break;\n                case 90:\n                    parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - height;\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n                        endX: (parent.activeObj.activePoint.endX),\n                        endY: parent.activeObj.activePoint.startY + (width ? width : 0) };\n                    break;\n                case 180:\n                    parent.activeObj.activePoint = { endX: parent.activeObj.activePoint.endX, endY: parent.activeObj.activePoint.endY,\n                        startX: (parent.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: parent.activeObj.activePoint.endY - (height ? height : 0) };\n                    break;\n                case 270:\n                    parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + height;\n                    parent.activeObj.activePoint = { startX: parent.activeObj.activePoint.startX,\n                        startY: parent.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: parent.activeObj.activePoint.endX,\n                        endY: parent.activeObj.activePoint.endY };\n                    break;\n            }\n        }\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        if (parent.transform.degree === 360 || parent.transform.degree === -360) {\n            parent.transform.degree = 0;\n        }\n    };\n    Selection.prototype.setActivePoint = function (startX, startY) {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.activeObj.activePoint)) {\n            return;\n        }\n        if (parent.currObjType.isText) {\n            var textWidth = startX ? startX : 0;\n            var textHeight = startY ? startY : parent.activeObj.textSettings.fontSize;\n            if (parent.activeObj.textSettings.fontSize === undefined) {\n                parent.activeObj.textSettings.fontSize = (Math.abs(parent.baseImgCanvas.width - parent.baseImgCanvas.height)) * 0.1;\n            }\n            this.setTextSelection(textWidth, textHeight);\n            this.mouseDownPoint.x = parent.activeObj.activePoint.endX;\n            this.mouseDownPoint.y = parent.activeObj.activePoint.endY;\n            if (parent.activeObj.horTopLine !== undefined) {\n                parent.activeObj.activePoint = extend({}, parent.activeObj.activePoint, {}, true);\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n        else if (startX && startY) {\n            parent.activeObj.activePoint.startX = this.mouseDownPoint.x = startX;\n            parent.activeObj.activePoint.startY = this.mouseDownPoint.y = startY;\n            parent.currObjType.isDragging = true;\n        }\n        else {\n            var selectInfo = parent.activeObj;\n            parent.activeObj.activePoint = { startX: selectInfo.horTopLine.startX, startY: selectInfo.horTopLine.startY,\n                endX: selectInfo.horTopLine.endX, endY: selectInfo.horTopLine.endY };\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n        }\n    };\n    Selection.prototype.mouseDownEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n        }\n        else {\n            this.isTouch = false;\n        }\n        if (e.type === 'touchstart' && e.currentTarget === parent.lowerCanvas && !parent.isImageLoaded) {\n            return;\n        }\n        this.isCropSelection = false;\n        this.isPan = true;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            this.isCropSelection = true;\n        }\n        if (this.isCropSelection) {\n            this.dragCanvas = parent.togglePan = true;\n        }\n        var imageEditorClickEventArgs = { point: this.setXYPoints(e) };\n        if (isBlazor() && parent.events && parent.events.clicked.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('ClickEventAsync', 'click', imageEditorClickEventArgs).then(function (imageEditorClickEventArgs) {\n                _this.clickEvent(imageEditorClickEventArgs, e);\n            });\n        }\n        else {\n            parent.trigger('click', imageEditorClickEventArgs);\n            this.clickEvent(imageEditorClickEventArgs, e);\n        }\n    };\n    Selection.prototype.getImagePoints = function (x, y) {\n        var parent = this.parent;\n        if (x < parent.img.destLeft) {\n            x = parent.img.destLeft;\n        }\n        else if (x > parent.img.destLeft + parent.img.destWidth) {\n            x = parent.img.destLeft + parent.img.destWidth;\n        }\n        if (y < parent.img.destTop) {\n            y = parent.img.destTop;\n        }\n        else if (y > parent.img.destTop + parent.img.destHeight) {\n            y = parent.img.destTop + parent.img.destHeight;\n        }\n        return { x: x, y: y };\n    };\n    Selection.prototype.clickEvent = function (imageEditorClickEventArgs, e) {\n        var parent = this.parent;\n        var x = imageEditorClickEventArgs.point.x;\n        var y = imageEditorClickEventArgs.point.y;\n        var cursor = parent.activeObj.shape && parent.activeObj.shape === 'text' ?\n            parent.cursor : 'default';\n        if (parent.isResize) {\n            // parent.okBtn();\n            this.performEnterAction();\n            return;\n        }\n        else if (JSON.stringify(parent.frameObj) !== JSON.stringify(parent.tempFrameObj)) {\n            parent.okBtn();\n        }\n        else if (this.currentDrawingShape !== '') {\n            var object_1 = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_1 } });\n            this.initialPrevObj = object_1['currObj'];\n            this.initialPrevObj.objColl = extend([], parent.objColl, [], true);\n            this.initialPrevObj.pointColl = extend([], parent.pointColl, [], true);\n            this.initialPrevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.initialPrevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.setActivePoint(x, y);\n            if (this.currentDrawingShape === 'path') {\n                var point = this.getImagePoints(x, y);\n                parent.activeObj.pointColl.push({ x: point.x, y: point.y });\n                if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                    parent.activeObj.activePoint.width = 0;\n                    parent.activeObj.activePoint.height = 0;\n                    parent.activeObj.activePoint.startX = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].x;\n                    parent.activeObj.activePoint.startY = parent.activeObj.pointColl[parent.activeObj.pointColl.length - 1].y;\n                }\n            }\n            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY;\n            parent.currObjType.isDragging = true;\n            var previousShapeSettings = this.updatePrevShapeSettings();\n            var shapeResizingArgs = { action: 'draw-start', previousShapeSettings: previousShapeSettings };\n            var shapeMovingArgs = { action: 'move', previousShapeSettings: previousShapeSettings };\n            this.shapeResizingArgs = shapeResizingArgs;\n            this.shapeMovingArgs = shapeMovingArgs;\n            this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-down');\n            return;\n        }\n        parent.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false });\n        if (this.isCropSelection && this.dragCanvas) {\n            this.setCursor(x, y);\n            if (parent.cursor !== 'move' && parent.cursor !== 'crosshair' &&\n                parent.cursor !== 'default' && parent.cursor !== 'grab') {\n                this.isPan = false;\n            }\n        }\n        if (parent.activeObj.shape) {\n            this.isObjSelected = true;\n        }\n        else {\n            this.isObjSelected = false;\n        }\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        var activeObj = extend({}, parent.activeObj, null, true);\n        var isShape = this.isShapeTouch(e, this.isCropSelection);\n        var isFreehandDraw = this.isFreehandDrawTouch(e, this.isCropSelection);\n        var isShapeClick = isShape ? isShape : this.isShapeClick(e, this.isCropSelection);\n        var allowUndoRedoPush = this.applyCurrShape(isShapeClick);\n        if (this.isTouch && !isShape && activeObj.shape && !this.isCropSelection) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n            if (allowUndoRedoPush) {\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        if (!isShape && !parent.togglePen && !this.isCropSelection) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n            }\n            else if (parent.isImageLoaded) {\n                parent.updateToolbar(parent.element, 'imageLoaded', 'okBtnClick');\n            }\n        }\n        if (this.dragCanvas && this.isPan && (parent.cursor === 'grab' || this.isTouch)\n            && !isShape && !isFreehandDraw && !parent.togglePen) {\n            if (this.applyObj(x, y)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            if (this.isFhdEditing) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.isFhdCustomized = false;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n            }\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'rectangle' ||\n                parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'line' ||\n                parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path' || parent.activeObj.shape === 'text' ||\n                parent.activeObj.shape === 'image')) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'setCurrentToolbar', value: { type: 'main' } });\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            this.canvasMouseDownHandler(e);\n        }\n        else {\n            var isLineArrow = false;\n            if (parent.activeObj.shape && (parent.activeObj.shape === 'line' ||\n                parent.activeObj.shape === 'arrow')) {\n                isLineArrow = true;\n            }\n            var points = this.setXYPoints(e);\n            var x_1 = points.x;\n            var y_1 = points.y;\n            if (this.applyObj(x_1, y_1)) {\n                parent.okBtn(true);\n                if (allowUndoRedoPush) {\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: x_1, y: y_1, isMouseDown: true } });\n            var obj = { index: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawHoveredIndex', onPropertyChange: false, value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (this.isFhdPoint || (this.isFhdCustomized && !parent.togglePen)) {\n                if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) &&\n                    indexObj['freehandSelectedIndex'] !== obj['index']) {\n                    var tempHoveredIndex = obj['index'];\n                    parent.okBtn();\n                    this.isFhdCustomized = false;\n                    parent.notify('freehand-draw', { prop: 'setFreehandDrawHoveredIndex', onPropertyChange: false,\n                        value: { index: tempHoveredIndex } });\n                    if (obj['index'] > -1) {\n                        var strokeColor = parent.pointColl[obj['index']].strokeColor;\n                        parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                            value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[obj['index']].strokeWidth } });\n                    }\n                }\n                indexObj['freehandSelectedIndex'] = null;\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                if (!isNullOrUndefined(obj['index']) && obj['index'] > -1) {\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { type: 'ok' } });\n                    parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                        value: { strokeColor: null, strokeWidth: null } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'pen');\n                        parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                    }\n                }\n                else if (indexObj['freehandSelectedIndex']) {\n                    parent.okBtn();\n                    var strokeColor = parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n                    parent.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                        value: { strokeColor: strokeColor, strokeWidth: parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth } });\n                }\n                else if (this.findTargetObj(x_1, y_1, false)) {\n                    this.findTarget(x_1, y_1, e.type);\n                }\n            }\n            else {\n                if (this.isFhdEditing) {\n                    parent.notify('freehand-draw', { prop: 'cancelFhd', value: { type: 'ok' } });\n                    if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n                        document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n                    }\n                }\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n                }\n                this.isFhdEditing = false;\n                if (isLineArrow) {\n                    this.setCursor(x_1, y_1);\n                }\n                else if (cursor !== 'default') {\n                    parent.upperCanvas.style.cursor = parent.cursor = cursor;\n                }\n                // this.setCursor(x, y);\n                if (parent.cursor === 'crosshair' || (Browser.isDevice && parent.togglePen)) {\n                    if (parent.togglePen) {\n                        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                            var obj_1 = { strokeSettings: {} };\n                            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                                value: { obj: obj_1 } });\n                            parent.activeObj.strokeSettings = obj_1['strokeSettings'];\n                        }\n                        var obj_2 = { penStrokeWidth: null };\n                        parent.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_2 } });\n                        if (isNullOrUndefined(obj_2['penStrokeWidth'])) {\n                            parent.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: 2 } });\n                        }\n                        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n                        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n                        parent.notify('freehand-draw', { prop: 'freehandDownHandler', onPropertyChange: false,\n                            value: { e: e, canvas: parent.upperCanvas } });\n                    }\n                    else {\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    }\n                    parent.currObjType.isActiveObj = false;\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n                }\n                if ((parent.cursor !== 'crosshair' && e.type.toLowerCase() === 'touchstart') ||\n                    (parent.currObjType.isActiveObj && parent.cursor !== 'default' && !parent.togglePen)) {\n                    this.findTarget(x_1, y_1, e.type);\n                }\n                else if ((parent.currObjType.shape === '' || parent.currObjType.isCustomCrop) && !parent.togglePen && parent.cursor !== 'default') {\n                    this.setActivePoint(x_1, y_1);\n                }\n            }\n        }\n        this.isShapeInserted = false;\n        this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n    };\n    Selection.prototype.mouseMoveEventHandler = function (e) {\n        var parent = this.parent;\n        var cursor = parent.cursor;\n        var canvasCursor = parent.upperCanvas.style.cursor;\n        e.preventDefault();\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        if (e.type === 'touchmove' && e.touches.length === 2) {\n            if (this.isFirstMove) {\n                this.startTouches = this.targetTouches(e.touches);\n                this.tempTouches = [];\n                this.tempTouches.push({ x: (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft) - bbox.left),\n                    y: (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n                this.tempTouches.push({ x: (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left,\n                    y: (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top });\n            }\n            else {\n                var firstFingerX = (e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var firstFingerY = (e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var secondFingerX = (e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft)) - bbox.left;\n                var secondFingerY = (e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop)) - bbox.top;\n                var center = { x: firstFingerX < secondFingerX ? secondFingerX - ((secondFingerX - firstFingerX) / 2) :\n                        firstFingerX - ((firstFingerX - secondFingerX) / 2), y: firstFingerY < secondFingerY ?\n                        secondFingerY - ((secondFingerY - firstFingerY) / 2) : firstFingerY - ((firstFingerY - secondFingerY) / 2) };\n                if (this.currMousePoint.x !== center.x && this.currMousePoint.y !== center.y) {\n                    var type = '';\n                    if (e.type === 'touchmove' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Pinch) === ZoomTrigger.Pinch) {\n                        this.zoomType = 'Pinch';\n                        var scale = this.calculateScale(this.startTouches, this.targetTouches(e.touches));\n                        this.startTouches = this.targetTouches(e.touches);\n                        if (scale > 1) {\n                            type = 'zoomIn';\n                        }\n                        else if (scale < 1) {\n                            type = 'zoomOut';\n                        }\n                    }\n                    if (type !== '') {\n                        parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                            value: { x: center.x, y: center.y, type: type } });\n                    }\n                    this.tempTouches = [];\n                    this.tempTouches.push({ x: e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop) });\n                    this.tempTouches.push({ x: e.touches[1].clientX || (e.touches[1].pageX - parent.lowerCanvas.offsetLeft),\n                        y: e.touches[1].clientY || (e.touches[1].pageY - parent.lowerCanvas.offsetTop) });\n                    this.currMousePoint.x = center.x;\n                    this.currMousePoint.y = center.y;\n                }\n            }\n            this.isFirstMove = false;\n            return;\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        x -= bbox.left;\n        y -= bbox.top;\n        this.canvasMouseMoveHandler(e);\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n        }\n        parent.upperCanvas.style.cursor = canvasCursor;\n        parent.cursor = cursor;\n        if (parent.currObjType.isActiveObj && (parent.activeObj.activePoint !== undefined || parent.objColl.length > 0) &&\n            !this.dragCanvas || parent.activeObj.activePoint !== undefined) {\n            if (this.dragElement === '') {\n                this.setCursor(x, y);\n                if ((parent.activeObj.activePoint &&\n                    (parent.activeObj.activePoint.width === 0 || (!isNullOrUndefined(parent.activeObj.currIndex) &&\n                        this.cursorTargetId !== parent.activeObj.currIndex)))\n                    && parent.cursor !== 'default' &&\n                    parent.cursor !== 'move' && parent.cursor !== 'crosshair'\n                    && parent.cursor !== 'grab' && parent.cursor !== 'pointer') {\n                    parent.upperCanvas.style.cursor = parent.cursor = 'move';\n                }\n                this.findTarget(x, y, e.type);\n            }\n        }\n        if (parent.currObjType.isDragging) {\n            this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.updateActivePoint(x, y, isCropSelection);\n            parent.notify('shape', { prop: 'updateTrianglePoints', onPropertyChange: false, value: { obj: parent.activeObj } });\n            if (this.isPreventDragging) {\n                if ((parent.activeObj.activePoint.startX > parent.img.destLeft) &&\n                    (parent.activeObj.activePoint.endX < parent.img.destLeft + parent.img.destWidth) &&\n                    (parent.activeObj.activePoint.startY > parent.img.destTop)\n                    && (parent.activeObj.activePoint.endY < parent.img.destTop + parent.img.destHeight)) {\n                    this.isPreventDragging = false;\n                }\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: null, saveContext: null, isPreventSelection: null } });\n            }\n            if (isCropSelection) {\n                this.dragCanvas = parent.togglePan = true;\n            }\n        }\n    };\n    Selection.prototype.mouseUpEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.type === 'touchstart') {\n            this.isTouch = false;\n        }\n        else if (e.type === 'touchend') {\n            e.stopImmediatePropagation();\n        }\n        e.preventDefault();\n        if (parent.togglePan) {\n            this.canvasMouseUpHandler(e);\n        }\n        var x;\n        var y;\n        if (e.type === 'mouseup') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            x = this.touchEndPoint.x;\n            y = this.touchEndPoint.y;\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (e.type === 'touchend') {\n            this.startTouches = this.tempTouches = [];\n            this.isFirstMove = false;\n            if (parent.textArea.style.display === 'none') {\n                this.timer = 0;\n            }\n        }\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isBlazor() && this.parent.eventType) {\n            if (this.parent.eventType === 'pan') {\n                if (parent.events && parent.events.onPanEnd.hasDelegate === true) {\n                    parent.dotNetRef.invokeMethodAsync('PanEventAsync', 'OnPanEnd', this.parent.panEventArgs);\n                }\n            }\n            else if (this.parent.eventType === 'resize') {\n                if (!this.isCropSelection && this.parent.events && this.parent.events.onShapeResizeEnd.hasDelegate === true) {\n                    this.shapeResizingArgs.currentShapeSettings = this.updatePrevShapeSettings();\n                    this.shapeResizingArgs.action = this.currentDrawingShape !== '' ? 'drawing' : 'resize-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeResizeEnd', this.shapeResizingArgs).then(function (shapeResizingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                            value: { shapeSettings: shapeResizingArgs.currentShapeSettings } });\n                    });\n                }\n                else if (this.shapeResizingArgs && this.selectionResizingArgs && this.parent.events &&\n                    this.parent.events.onSelectionResizeEnd.hasDelegate === true) {\n                    var currentSelectionSettings = { type: this.parent.activeObj.shape,\n                        startX: this.shapeResizingArgs.currentShapeSettings.startX,\n                        startY: this.shapeResizingArgs.currentShapeSettings.startY,\n                        width: this.shapeResizingArgs.currentShapeSettings.width,\n                        height: this.shapeResizingArgs.currentShapeSettings.height };\n                    this.selectionResizingArgs.currentSelectionSettings = currentSelectionSettings;\n                    this.selectionResizingArgs.action = 'resize-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeEnd', this.selectionResizingArgs).then(function (selectionResizingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateSelectionChangeEventArgs', onPropertyChange: false,\n                            value: { selectionSettings: selectionResizingArgs.currentSelectionSettings } });\n                    });\n                }\n            }\n            else {\n                if (this.shapeMovingArgs && this.parent.events && this.parent.events.onShapeDragEnd.hasDelegate === true) {\n                    this.shapeMovingArgs.currentShapeSettings = this.updatePrevShapeSettings();\n                    this.shapeMovingArgs.action = 'drag-end';\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShapeDragEnd', this.shapeMovingArgs).then(function (shapeMovingArgs) {\n                        _this.parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n                            value: { shapeSettings: shapeMovingArgs.currentShapeSettings } });\n                    });\n                }\n            }\n            this.shapeResizingArgs = null;\n            this.shapeMovingArgs = null;\n            this.parent.panEventArgs = null;\n            this.parent.eventType = null;\n        }\n        if (this.currentDrawingShape === 'path') {\n            var elem = e.srcElement;\n            if (e.currentTarget !== parent.upperCanvas && e.currentTarget !== parent.lowerCanvas && parent.activeObj.pointColl.length > 0 &&\n                (elem.classList.contains('e-upload-icon') || elem.parentElement.id === parent.element.id + '_zoomIn' ||\n                    elem.parentElement.id === parent.element.id + '_zoomOut' || elem.parentElement.id === parent.element.id + '_annotationBtn' ||\n                    elem.parentElement.id === parent.element.id + '_borderColorBtn' || elem.parentElement.id === parent.element.id + '_borderWidthBtn' ||\n                    elem.parentElement.id === parent.element.id + '_saveBtn')) {\n                this.parent.notify('shape', { prop: 'stopPathDrawing', onPropertyChange: false, value: { e: e, isApply: true } });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n            }\n            return;\n        }\n        if (e.currentTarget === parent.upperCanvas && !parent.isResize) {\n            this.pathAdjustedIndex = null;\n            if (this.currentDrawingShape !== '') {\n                if (this.currentDrawingShape === 'text') {\n                    var prevCropObj_1 = extend({}, parent.cropObj, {}, true);\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'shapeTransform', previousObj: this.initialPrevObj, previousObjColl: this.initialPrevObj.objColl,\n                            previousPointColl: this.initialPrevObj.pointColl, previousSelPointColl: this.initialPrevObj.selPointColl,\n                            previousCropObj: prevCropObj_1, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                }\n                else {\n                    parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: this.initialPrevObj.objColl } });\n                }\n                this.isShapeInserted = true;\n                this.currentDrawingShape = '';\n                if (parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) {\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                }\n                var previousShapeSettings = this.updatePrevShapeSettings();\n                var shapeResizingArgs = { action: 'draw-end', previousShapeSettings: previousShapeSettings };\n                var shapeMovingArgs = { action: 'move', previousShapeSettings: previousShapeSettings };\n                this.shapeResizingArgs = shapeResizingArgs;\n                this.shapeMovingArgs = shapeMovingArgs;\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'mouse-up');\n            }\n            this.adjustActObjForLineArrow();\n            this.updPtCollForShpRot();\n            parent.currObjType.shape = parent.currObjType.shape.toLowerCase();\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (!parent.togglePen && !isCropSelection) {\n                if (this.tempObjColl && parent.activeObj.activePoint.width !== 0) {\n                    parent.objColl.push(parent.activeObj);\n                    if (JSON.stringify(parent.activeObj.activePoint) !== JSON.stringify(this.tempActiveObj.activePoint)) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                                previousCropObj: prevCropObj, previousText: null,\n                                currentText: null, previousFilter: null, isCircleCrop: null } });\n                    }\n                    this.redrawShape(parent.objColl[parent.objColl.length - 1], true);\n                    this.tempObjColl = undefined;\n                }\n                if (!this.isFhdEditing) {\n                    this.applyCurrActObj(x, y);\n                    parent.currObjType.isResize = false;\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                }\n            }\n            if (parent.activeObj) {\n                var isCropSelection_1 = false;\n                var splitWords_1;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords_1 = parent.activeObj.shape.split('-');\n                }\n                if (splitWords_1 === undefined && (parent.currObjType.isCustomCrop || parent.togglePen)) {\n                    isCropSelection_1 = true;\n                }\n                else if (splitWords_1 !== undefined && splitWords_1[0] === 'crop') {\n                    isCropSelection_1 = true;\n                }\n                if (!isBlazor()) {\n                    if ((parent.activeObj.shape === 'rectangle') || (parent.activeObj.shape === 'ellipse')\n                        || (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path')) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (parent.activeObj.shape === 'text') {\n                        if (parent.textArea.style.display === 'none') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    else if (this.isFhdEditing) {\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    else if (!isCropSelection_1) {\n                        var eventargs = { type: 'main', isApplyBtn: null, isCropping: false, isZooming: null };\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: eventargs });\n                    }\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                }\n                else {\n                    if ((parent.activeObj.shape === 'rectangle') || (parent.activeObj.shape === 'ellipse')\n                        || (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path'\n                            || parent.activeObj.shape === 'image')) {\n                        parent.updateToolbar(parent.element, parent.activeObj.shape);\n                    }\n                    else if (parent.activeObj.shape === 'text' && parent.textArea.style.display === 'none') {\n                        parent.updateToolbar(parent.element, 'text');\n                    }\n                }\n            }\n        }\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (parent.activeObj.shape && !isCropSelection && e.currentTarget === parent.upperCanvas &&\n            parent.textArea.style.display === 'none') {\n            if (parent.activeObj.shape === 'text') {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n            }\n            else {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n            }\n        }\n        if (parent.togglePen && e.currentTarget === parent.upperCanvas) {\n            parent.notify('freehand-draw', { prop: 'freehandUpHandler', onPropertyChange: false,\n                value: { e: e, canvas: parent.upperCanvas, context: this.upperContext } });\n        }\n        else {\n            parent.currObjType.shape = '';\n        }\n        this.dragElement = '';\n        parent.currObjType.isInitialLine = parent.currObjType.isDragging = false;\n        this.selMouseUpEvent();\n    };\n    Selection.prototype.adjustActObjForLineArrow = function (obj) {\n        var isAdjusted = false;\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && (obj.shape === 'line' || parent.activeObj.shape === 'arrow')) {\n            var temp = void 0;\n            if ((this.dragElement === 'e-resize' && obj.activePoint.endX < obj.activePoint.startX) ||\n                (this.dragElement === 'w-resize' && obj.activePoint.startX > obj.activePoint.endX)) {\n                isAdjusted = true;\n                temp = obj.activePoint.startX;\n                obj.activePoint.startX = obj.activePoint.endX;\n                obj.activePoint.endX = temp;\n                temp = obj.activePoint.startY;\n                obj.activePoint.startY = obj.activePoint.endY;\n                obj.activePoint.endY = temp;\n            }\n            obj.activePoint.width = Math.abs(obj.activePoint.endX - obj.activePoint.startX);\n            obj.activePoint.height = Math.abs(obj.activePoint.endY - obj.activePoint.startY);\n            if (parent.activeObj.shape !== 'path') {\n                parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                    value: { obj: obj } });\n                // Updating ratio for point collection\n                for (var i = 0; i < obj.pointColl.length; i++) {\n                    obj.pointColl[i].ratioX = (obj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    obj.pointColl[i].ratioY = (obj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n        return isAdjusted;\n    };\n    Selection.prototype.updPtCollForShpRot = function (obj) {\n        var parent = this.parent;\n        obj = obj ? obj : parent.activeObj;\n        if (obj.shape && obj.rotatedAngle !== 0) {\n            parent.notify('shape', { prop: 'setPointCollForShapeRotation', onPropertyChange: false,\n                value: { obj: obj } });\n            // Updating ratio for point collection\n            for (var i = 0; i < obj.horTopLinePointColl.length; i++) {\n                obj.horTopLinePointColl[i].ratioX = (obj.horTopLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.horTopLinePointColl[i].ratioY = (obj.horTopLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.horBottomLinePointColl.length; i++) {\n                obj.horBottomLinePointColl[i].ratioX = (obj.horBottomLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.horBottomLinePointColl[i].ratioY = (obj.horBottomLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.verLeftLinePointColl.length; i++) {\n                obj.verLeftLinePointColl[i].ratioX = (obj.verLeftLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.verLeftLinePointColl[i].ratioY = (obj.verLeftLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n            for (var i = 0; i < obj.verRightLinePointColl.length; i++) {\n                obj.verRightLinePointColl[i].ratioX = (obj.verRightLinePointColl[i].x -\n                    parent.img.destLeft) / parent.img.destWidth;\n                obj.verRightLinePointColl[i].ratioY = (obj.verRightLinePointColl[i].y -\n                    parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n    };\n    Selection.prototype.setXYPoints = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        return { x: x, y: y };\n    };\n    Selection.prototype.getCurrentIndex = function () {\n        var index;\n        var parent = this.parent;\n        for (var i = 0; i < parent.objColl.length; i++) {\n            if (parent.activeObj.currIndex === parent.objColl[i].currIndex) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    Selection.prototype.isShapeClick = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.togglePen) {\n            return isShape;\n        }\n        if (parent.activeObj.shape && parent.activeObj.shape === 'text' && this.isShapeInserted) {\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                if (isShape) {\n                    parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                        value: { x: null, y: null, isMouseDown: true } });\n                }\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if ((!isNullOrUndefined(index) &&\n                    JSON.stringify(parent.activeObj.activePoint) === JSON.stringify(parent.objColl[index].activePoint))) {\n                    parent.objColl.splice(index, 1);\n                }\n                else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                    parent.objColl.pop();\n                }\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.isShapeTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isShape = false;\n        if (e.type === 'touchstart' && !parent.togglePen) {\n            if (parent.activeObj && parent.activeObj.shape === 'text') {\n                this.timer = setTimeout(this.setTimer.bind(this), 1000, e);\n            }\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n            if (!isCropSelection) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (!isShape && activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n            // this.timer = null;\n        }\n        return isShape;\n    };\n    Selection.prototype.isFreehandDrawTouch = function (e, isCropSelection) {\n        var parent = this.parent;\n        var isFreehandDraw = false;\n        if (e.type === 'touchstart' && !isCropSelection && !parent.togglePen) {\n            var isTextArea = parent.textArea.style.display === 'block' ? true : false;\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.setCursor(x, y);\n            if (this.isFhdPoint) {\n                isFreehandDraw = true;\n            }\n            if (isTextArea) {\n                parent.textArea.value = parent.objColl[parent.objColl.length - 1].keyHistory;\n                parent.textArea.style.display = 'block';\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (isNullOrUndefined(index)) {\n                    parent.objColl.pop();\n                }\n                else {\n                    parent.objColl.splice(index, 1);\n                }\n            }\n            else if (activeObj.shape) {\n                parent.activeObj = activeObj;\n                var index = this.getCurrentIndex();\n                if (!isCropSelection) {\n                    if ((!isNullOrUndefined(index) && JSON.stringify(parent.activeObj.activePoint) ===\n                        JSON.stringify(parent.objColl[index].activePoint))) {\n                        parent.objColl.splice(index, 1);\n                    }\n                    else if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                        parent.objColl.pop();\n                    }\n                }\n            }\n        }\n        return isFreehandDraw;\n    };\n    Selection.prototype.applyObj = function (x, y) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.activeObj.shape && (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse' ||\n            parent.activeObj.shape === 'text' || parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ||\n            parent.activeObj.shape === 'path' || parent.activeObj.shape === 'image')) {\n            if (x >= (parent.activeObj.activePoint.startX - (parent.activeObj.topLeftCircle.radius * 2)) &&\n                x <= (parent.activeObj.activePoint.endX + (parent.activeObj.topLeftCircle.radius * 2)) &&\n                y >= (parent.activeObj.activePoint.startY - (parent.activeObj.topLeftCircle.radius * 2)) &&\n                y <= (parent.activeObj.activePoint.endY + (parent.activeObj.topLeftCircle.radius * 2))) {\n                isApply = false;\n            }\n            else if (parent.upperCanvas.style.cursor !== 'default' && parent.upperCanvas.style.cursor !== 'grab' &&\n                parent.upperCanvas.style.cursor !== 'crosshair' && parent.upperCanvas.style.cursor !== 'pointer' &&\n                parent.upperCanvas.style.cursor !== 'move') {\n                isApply = false;\n            }\n            else {\n                isApply = true;\n            }\n        }\n        return isApply;\n    };\n    Selection.prototype.applyCurrShape = function (isShapeClick) {\n        var parent = this.parent;\n        var isApply = false;\n        if (parent.togglePen) {\n            return isApply;\n        }\n        var obj = extend({}, parent.activeObj, null, true);\n        if (this.isShapeInserted && parent.activeObj.shape === 'text' && isShapeClick) {\n            this.isInitialTextEdited = true;\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n        }\n        if (parent.textArea.style.display === 'block') {\n            var activeObj = extend({}, parent.activeObj, null, true);\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            obj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n            parent.objColl.pop();\n            parent.activeObj = extend({}, activeObj, null, true);\n            parent.textArea.value = obj.keyHistory;\n            parent.textArea.style.display = 'block';\n            var strokeColor = obj.strokeSettings && obj.strokeSettings.strokeColor ? obj.strokeSettings.strokeColor.split('(')[0] === 'rgb' ?\n                this.rgbToHex(parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[0]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[1]), parseFloat(obj.strokeSettings.strokeColor.split('(')[1].split(',')[2])) :\n                obj.strokeSettings.strokeColor : null;\n            if (strokeColor && strokeColor === '#ffffff') {\n                strokeColor = '#fff';\n            }\n            if (this.tempActiveObj.strokeSettings && this.tempActiveObj.strokeSettings.strokeColor &&\n                this.tempActiveObj.strokeSettings.strokeColor === '#ffffff') {\n                this.tempActiveObj.strokeSettings.strokeColor = '#fff';\n            }\n            if (obj.keyHistory !== this.tempActiveObj.keyHistory ||\n                (strokeColor && (strokeColor !== this.tempActiveObj.strokeSettings.strokeColor)) ||\n                (obj.textSettings && obj.textSettings.fontFamily !== this.tempActiveObj.textSettings.fontFamily) ||\n                (obj.textSettings && Math.round(obj.textSettings.fontSize) !== Math.round(this.tempActiveObj.textSettings.fontSize)) ||\n                (obj.textSettings && Math.round(obj.textSettings.fontRatio) !== Math.round(this.tempActiveObj.textSettings.fontRatio)) ||\n                (obj.textSettings && obj.textSettings.bold !== this.tempActiveObj.textSettings.bold) ||\n                (obj.textSettings && obj.textSettings.italic !== this.tempActiveObj.textSettings.italic) ||\n                (obj.textSettings && obj.textSettings.underline !== this.tempActiveObj.textSettings.underline)) {\n                isApply = true;\n            }\n            if (this.isInitialTextEdited && !isApply) {\n                isApply = true;\n                this.isInitialTextEdited = false;\n            }\n        }\n        else {\n            this.tempActiveObj.activePoint.height = Math.abs(this.tempActiveObj.activePoint.height);\n            isApply = JSON.stringify(obj) !== JSON.stringify(this.tempActiveObj);\n        }\n        return isApply;\n    };\n    Selection.prototype.canvasMouseDownHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.offsetX || (e.pageX - parent.lowerCanvas.offsetLeft);\n            y = e.offsetY || (e.pageY - parent.lowerCanvas.offsetTop);\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.panDown = { x: x, y: y };\n        var tempPanMoveObj = { tempPanMove: null };\n        parent.notify('transform', { prop: 'getTempPanMove', onPropertyChange: false,\n            value: { obj: tempPanMoveObj } });\n        if (isNullOrUndefined(tempPanMoveObj['tempPanMove'])) {\n            parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                value: { point: { x: x, y: y } } });\n        }\n    };\n    Selection.prototype.canvasMouseMoveHandler = function (e) {\n        var parent = this.parent;\n        var frameObject = { bool: null };\n        parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (parent.isResize || frameObject['bool']) {\n            parent.upperCanvas.style.cursor = 'default';\n            return;\n        }\n        if (this.dragCanvas) {\n            parent.lowerCanvas.style.cursor = 'grab';\n        }\n        else {\n            this.dragCanvas = parent.togglePan = false;\n            parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.offsetX;\n            y = e.offsetY;\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - parent.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - parent.lowerCanvas.offsetTop);\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        var panMove = { x: x, y: y };\n        parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n            value: { point: { x: x, y: y } } });\n        if (this.panDown && panMove && parent.togglePan && this.dragCanvas) {\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: null, yDiff: null } });\n        }\n    };\n    Selection.prototype.canvasMouseUpHandler = function (e) {\n        var parent = this.parent;\n        e.preventDefault();\n        var panMoveObj = { panMove: null };\n        parent.notify('transform', { prop: 'getPanMove', onPropertyChange: false,\n            value: { obj: panMoveObj } });\n        if (parent.togglePan) {\n            if (this.panDown && panMoveObj['panMove'] && parent.togglePan && this.dragCanvas) {\n                this.panDown = null;\n                parent.notify('transform', { prop: 'setPanMove', onPropertyChange: false,\n                    value: { point: null } });\n                parent.notify('transform', { prop: 'setTempPanMove', onPropertyChange: false,\n                    value: { point: null } });\n            }\n        }\n        if (this.currentDrawingShape !== 'path') {\n            parent.currObjType.isDragging = false;\n        }\n    };\n    Selection.prototype.touchStartHandler = function (e) {\n        e.preventDefault();\n        if (this.touchTime === 0) {\n            this.touchTime = new Date().getTime();\n        }\n        else {\n            if (((new Date().getTime()) - this.touchTime) < 400) {\n                this.parent.notify('shape', { prop: 'stopPathDrawing', onPropertyChange: false, value: { e: e, isApply: null } });\n                this.touchTime = 0;\n            }\n            else {\n                this.touchTime = new Date().getTime();\n            }\n        }\n        if (e.touches.length === 2) {\n            this.isFirstMove = true;\n        }\n        else {\n            this.mouseDownEventHandler(e);\n        }\n        EventHandler.add(this.parent.lowerCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.parent.lowerCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.parent.upperCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.parent.upperCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n    };\n    Selection.prototype.unwireEvent = function () {\n        EventHandler.remove(this.parent.lowerCanvas, 'touchend', this.mouseUpEventHandler);\n        EventHandler.remove(this.parent.lowerCanvas, 'touchmove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.parent.upperCanvas, 'touchend', this.mouseUpEventHandler);\n        EventHandler.remove(this.parent.upperCanvas, 'touchmove', this.mouseMoveEventHandler);\n    };\n    Selection.prototype.keyDownEventHandler = function (e) {\n        var _this = this;\n        var parent = this.parent;\n        if (e.ctrlKey && (e.key === '+' || e.key === '-')) {\n            e.preventDefault();\n        }\n        var obj = { fileName: '', fileType: null };\n        parent.notify('draw', { prop: 'getFileName', onPropertyChange: false, value: { obj: obj } });\n        var beforeSave = { fileName: obj['fileName'], fileType: obj['fileType'], cancel: false };\n        switch (e.key) {\n            case (e.ctrlKey && 's'):\n                if (isBlazor() && parent.events && parent.events.saving.hasDelegate === true) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('BeforeSaveEventAsync', 'BeforeSave', beforeSave).then(function (args) {\n                        _this.beforeSaveEvent(args, e);\n                    });\n                }\n                else {\n                    parent.trigger('beforeSave', beforeSave);\n                    this.beforeSaveEvent(beforeSave, e);\n                }\n                break;\n            case (e.ctrlKey && 'z'):\n                if (parent.allowUndoRedo) {\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                }\n                break;\n            case (e.ctrlKey && 'y'):\n                if (parent.allowUndoRedo) {\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                }\n                break;\n            case (e.ctrlKey && '+'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: .1, zoomPoint: null }, isResize: null });\n                }\n                break;\n            case (e.ctrlKey && '-'):\n                if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Commands) === ZoomTrigger.Commands) {\n                    this.zoomType = 'Commands';\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -.1, zoomPoint: null }, isResize: null });\n                }\n                break;\n            case 'Delete':\n                this.deleteItem();\n                break;\n            case 'Escape':\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                break;\n            case 'Enter':\n                this.performEnterAction(e);\n                break;\n            case 'Tab':\n                this.performTabAction();\n                break;\n            default:\n                if (Browser.isDevice && parent.textArea.style.display === 'block') {\n                    setTimeout(this.textKeyDown.bind(this), 1, e);\n                }\n                break;\n        }\n    };\n    Selection.prototype.performEnterAction = function (e) {\n        var parent = this.parent;\n        if (parent.isResize) {\n            var isValue = this.isValueUpdated();\n            if (!isValue) {\n                return;\n            }\n            var point = this.getNumTextValue();\n            var aspectRatioElement = this.parent.element.querySelector('#' + this.parent.element.id + '_aspectratio');\n            var blrAspRatElem = this.parent.element.querySelector('.e-ie-toolbar-aspect-ratio-btn');\n            if (point && point.x && point.y) {\n                if (aspectRatioElement || (blrAspRatElem && !blrAspRatElem.classList.contains('e-hidden'))) {\n                    parent.notify('transform', { prop: 'resize', value: { width: point.x, height: null, isAspectRatio: true } });\n                }\n                else {\n                    parent.notify('transform', { prop: 'resize', value: { width: point.x, height: point.y, isAspectRatio: false } });\n                }\n            }\n            if (isBlazor()) {\n                var aspectRatioHeight = this.parent.element.querySelector('.e-ie-toolbar-e-resize-height-input .e-numerictextbox');\n                var aspectRatioWidth = this.parent.element.querySelector('.e-ie-toolbar-e-resize-width-input .e-numerictextbox');\n                if ((blrAspRatElem && blrAspRatElem.classList.contains('e-hidden'))) {\n                    if (aspectRatioHeight && aspectRatioHeight.value === \"\") {\n                        aspectRatioHeight.value = aspectRatioHeight.placeholder;\n                        aspectRatioHeight.value = Math.floor(parent.img.destHeight).toString();\n                    }\n                    if (aspectRatioWidth && aspectRatioWidth.value === \"\") {\n                        aspectRatioWidth.value = aspectRatioWidth.placeholder;\n                        aspectRatioWidth.value = Math.floor(parent.img.destWidth).toString();\n                    }\n                }\n            }\n            else {\n                var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n                var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n                if (isNullOrUndefined(aspectRatioElement)) {\n                    if (aspectRatioHeight) {\n                        var elem = getComponent(aspectRatioHeight, 'numerictextbox');\n                        if (aspectRatioHeight && isNullOrUndefined(elem.value)) {\n                            elem.value = parseFloat(elem.placeholder);\n                            aspectRatioHeight.value = Math.floor(parent.img.destHeight).toString() + ' px';\n                        }\n                    }\n                    if (aspectRatioWidth) {\n                        var elem = getComponent(aspectRatioWidth, 'numerictextbox');\n                        if (aspectRatioWidth && isNullOrUndefined(elem.value)) {\n                            elem.value = parseFloat(elem.placeholder);\n                            aspectRatioWidth.value = Math.floor(parent.img.destWidth).toString() + ' px';\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            var splitWords = void 0;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (e && this.isKeyBoardCrop(e) &&\n                parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] === 'crop')) {\n                parent.crop();\n            }\n        }\n    };\n    Selection.prototype.isKeyBoardCrop = function (e) {\n        var bool = false;\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var target = e.target;\n        if ((target.id === this.parent.element.id + '_ok' || target.id === '') && !isBlazor()) {\n            bool = true;\n        }\n        return bool;\n    };\n    Selection.prototype.beforeSaveEvent = function (observableSaveArgs, e) {\n        var parent = this.parent;\n        if (!observableSaveArgs.cancel) {\n            parent.notify('export', { prop: 'export', onPropertyChange: false,\n                value: { type: observableSaveArgs.fileType, fileName: observableSaveArgs.fileName } });\n        }\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    Selection.prototype.handleScroll = function (e) {\n        var parent = this.parent;\n        var x;\n        var y;\n        var isInsideCanvas = false;\n        if (e.type === 'mousewheel') {\n            // eslint-disable-next-line\n            x = e.clientX;\n            y = e.clientY;\n        }\n        var bbox = parent.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (x > parent.img.destLeft && x < parent.img.destLeft + parent.img.destWidth && y > parent.img.destTop &&\n            y < parent.img.destTop + parent.img.destHeight) {\n            isInsideCanvas = true;\n        }\n        e.stopPropagation();\n        if (e.ctrlKey === true && isInsideCanvas) {\n            e.preventDefault();\n            if (!parent.isCropTab && (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] !== 'crop')) {\n                parent.okBtn();\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n                }\n            }\n            var type = '';\n            if (e.type === 'mousewheel' && (parent.zoomSettings.zoomTrigger & ZoomTrigger.MouseWheel) === ZoomTrigger.MouseWheel) {\n                this.zoomType = 'MouseWheel';\n                // eslint-disable-next-line\n                if (e.wheelDelta > 0) {\n                    type = 'zoomIn';\n                }\n                else {\n                    type = 'zoomOut';\n                }\n            }\n            if (type !== '') {\n                parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                    value: { x: x, y: y, type: type } });\n            }\n        }\n    };\n    Selection.prototype.textKeyDown = function (e) {\n        var parent = this.parent;\n        if (String.fromCharCode(e.which) === '\\r') {\n            this.textRow += 1;\n        }\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        parent.textArea.style.height = 'auto';\n        parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n        parent.notify('shape', { prop: 'setTextBoxWidth', onPropertyChange: false, value: { e: e } });\n        if (Browser.isDevice) {\n            parent.textArea.style.width = parseFloat(parent.textArea.style.width) + parent.textArea.style.fontSize + 'px';\n        }\n        var rows = parent.textArea.value.split('\\n');\n        this.textRow = rows.length;\n        parent.textArea.setAttribute('rows', this.textRow.toString());\n        this.isInitialTextEdited = false;\n    };\n    Selection.prototype.clearSelection = function () {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.togglePen = false;\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.dragElement = '';\n            this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n            parent.currObjType.shape = '';\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isActiveObj = true;\n            parent.currObjType.isCustomCrop = false;\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        }\n    };\n    Selection.prototype.setDragDirection = function (width, height) {\n        var arcRadius = (7.5);\n        var parent = this.parent;\n        if (parent.img.destWidth > parent.img.destHeight) {\n            parent.activeObj.activePoint.startX = this.dragPoint.startX = ((width / 2) - (height / 2))\n                + arcRadius;\n            parent.activeObj.activePoint.startY = this.dragPoint.startY = ((height / 2) - (height / 2))\n                + arcRadius;\n            parent.activeObj.activePoint.endX = ((width / 2) + (height / 2)) - arcRadius;\n            parent.activeObj.activePoint.endY = ((height / 2) + (height / 2)) - arcRadius;\n        }\n        else {\n            parent.activeObj.activePoint.startY = this.dragPoint.startX = ((height / 2) - (width) / 2)\n                + arcRadius;\n            parent.activeObj.activePoint.endY = ((height / 2) + (width) / 2) - arcRadius;\n            parent.activeObj.activePoint.startX = this.dragPoint.startX = arcRadius;\n            parent.activeObj.activePoint.endX = width - arcRadius;\n        }\n    };\n    Selection.prototype.calcShapeRatio = function (x, y, imgWidth, imgHeight) {\n        var parent = this.parent;\n        var arcRadius = (7.5);\n        var originalWidth = imgWidth;\n        var originalHeight = imgHeight;\n        var presetRatio = x / y;\n        var standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n        var width = standardSize * presetRatio;\n        var height = standardSize;\n        var scaleWidth = this.getScale(width, originalWidth);\n        var snippetArray = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray.push(width * scaleWidth);\n            }\n            else {\n                snippetArray.push(height * scaleWidth);\n            }\n        }\n        width = snippetArray[0];\n        height = snippetArray[1];\n        var scaleHeight = this.getScale(height, originalHeight);\n        var snippetArray1 = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray1.push(width * scaleHeight);\n            }\n            else {\n                snippetArray1.push(height * scaleHeight);\n            }\n        }\n        width = snippetArray1[0];\n        height = snippetArray1[1];\n        parent.activeObj.activePoint.width = width;\n        parent.activeObj.activePoint.height = height;\n        parent.activeObj.activePoint.startX = (this.dragPoint.startX = (originalWidth - width) / 2) + arcRadius;\n        parent.activeObj.activePoint.startY = (this.dragPoint.startY = (originalHeight - height) / 2) + arcRadius;\n        parent.activeObj.activePoint.endX = ((originalWidth - width) / 2 + width) - arcRadius;\n        parent.activeObj.activePoint.endY = ((originalHeight - height) / 2 + height) - arcRadius;\n        if (parent.activeObj.activePoint.startX < parent.img.destLeft && parent.img.destLeft + parent.img.destWidth >\n            parent.lowerCanvas.clientWidth) {\n            parent.activeObj.activePoint.startX = parent.img.destLeft;\n            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + width - arcRadius;\n        }\n        if (parent.activeObj.activePoint.startY < parent.img.destTop && parent.img.destTop + parent.img.destHeight >\n            parent.lowerCanvas.clientHeight) {\n            parent.activeObj.activePoint.startY = parent.img.destTop;\n            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height - arcRadius;\n        }\n        parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n        parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n    };\n    Selection.prototype.getScale = function (value, originalValue) {\n        return value > originalValue ? originalValue / value : 1;\n    };\n    Selection.prototype.findTarget = function (x, y, type) {\n        var parent = this.parent;\n        if (type.toLowerCase() === 'mousedown' || type.toLowerCase() === 'touchstart') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (parent.activeObj.shape) {\n                splitWords = parent.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            this.findTargetObj(x, y, isCrop);\n            this.updateCursorStyles(x, y, type);\n        }\n        else {\n            switch (this.dragElement.toLowerCase()) {\n                case 'nw-resize':\n                    parent.activeObj.topLeftCircle.startX = x;\n                    parent.activeObj.topLeftCircle.startY = y;\n                    break;\n                case 'n-resize':\n                    parent.activeObj.topCenterCircle.startX = x;\n                    parent.activeObj.topCenterCircle.startY = y;\n                    break;\n                case 'ne-resize':\n                    parent.activeObj.topRightCircle.startX = x;\n                    parent.activeObj.topRightCircle.startY = y;\n                    break;\n                case 'w-resize':\n                    parent.activeObj.centerLeftCircle.startX = x;\n                    parent.activeObj.centerLeftCircle.startY = y;\n                    break;\n                case 'e-resize':\n                    parent.activeObj.centerRightCircle.startX = x;\n                    parent.activeObj.centerRightCircle.startY = y;\n                    break;\n                case 'sw-resize':\n                    parent.activeObj.bottomLeftCircle.startX = x;\n                    parent.activeObj.bottomLeftCircle.startY = y;\n                    break;\n                case 's-resize':\n                    parent.activeObj.bottomCenterCircle.startX = x;\n                    parent.activeObj.bottomCenterCircle.startY = y;\n                    break;\n                case 'se-resize':\n                    parent.activeObj.bottomRightCircle.startX = x;\n                    parent.activeObj.bottomRightCircle.startY = y;\n                    break;\n                default:\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    break;\n            }\n        }\n    };\n    Selection.prototype.findTargetObj = function (x, y, isCrop) {\n        var _this = this;\n        var parent = this.parent;\n        var isShape = false;\n        if (parent.objColl.length !== 0 && !parent.currObjType.isCustomCrop && !isCrop) {\n            var diffX = 0;\n            var i = void 0;\n            for (var index = 0; index < parent.objColl.length; index++) {\n                var cursor = parent.upperCanvas.style.cursor;\n                this.setCursor(x, y);\n                var actObj = extend({}, parent.objColl[index], {}, true);\n                if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n                    for (var j = 0; j < actObj.pointColl.length; j++) {\n                        if (x >= actObj.pointColl[j].x - (actObj.topLeftCircle.radius * 2) &&\n                            x <= actObj.pointColl[j].x + (actObj.topLeftCircle.radius * 2) &&\n                            y >= actObj.pointColl[j].y - (actObj.topLeftCircle.radius * 2) &&\n                            y <= actObj.pointColl[j].y + (actObj.topLeftCircle.radius * 2)) {\n                            if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                                JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                                i = index;\n                                break;\n                            }\n                            else {\n                                if (this.isTouch || parent.cursor === 'move' ||\n                                    parent.cursor === 'grab' || this.isShapeInserted) {\n                                    if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                        diffX = x - parent.objColl[index].activePoint.startX;\n                                        i = index;\n                                    }\n                                }\n                                else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                    i = index;\n                                }\n                            }\n                            break;\n                        }\n                    }\n                }\n                else if (actObj.shape === 'path') {\n                    var cursor_1 = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n                    if (cursor_1 !== 'default' && cursor_1 !== 'grab') {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                                if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                    diffX = x - parent.objColl[index].activePoint.startX;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n                else if (actObj.rotatedAngle !== 0) {\n                    var cursor_2 = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n                    if (cursor_2 !== 'default' && cursor_2 !== 'grab') {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || parent.cursor === 'move' || parent.cursor === 'grab' || this.isShapeInserted) {\n                                if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                    diffX = x - parent.objColl[index].activePoint.startX;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n                else {\n                    var rotationCirclePoint = this.getTransRotationPoint(actObj);\n                    if ((x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                        x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                        y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                        y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) ||\n                        (rotationCirclePoint &&\n                            x >= (rotationCirclePoint.x - (actObj.topLeftCircle.radius * 2)) &&\n                            x <= (rotationCirclePoint.x + (actObj.topLeftCircle.radius * 2)) &&\n                            y >= (rotationCirclePoint.y - (actObj.topLeftCircle.radius * 2)) &&\n                            y <= (rotationCirclePoint.y + (actObj.topLeftCircle.radius * 2)))) {\n                        if (this.tempActiveObj && this.tempActiveObj.activePoint &&\n                            JSON.stringify(this.tempActiveObj.activePoint) === JSON.stringify(actObj.activePoint)) {\n                            i = index;\n                            break;\n                        }\n                        else {\n                            if (this.isTouch || cursor === 'move' || cursor === 'grabbing' || this.isShapeInserted\n                                || parent.cursor === 'move' || parent.cursor === 'grabbing') {\n                                if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                                    diffX = x - parent.objColl[index].activePoint.startX;\n                                    i = index;\n                                }\n                            }\n                            else if (parent.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                                i = index;\n                            }\n                        }\n                    }\n                }\n            }\n            if (isNullOrUndefined(i)) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                isShape = false;\n            }\n            else {\n                this.tempObjColl = extend([], parent.objColl, [], true);\n                parent.currObjType.isCustomCrop = false;\n                parent.activeObj = extend({}, parent.objColl[i], {}, true);\n                var temp = extend({}, parent.objColl[i], {}, true);\n                parent.objColl.splice(i, 1);\n                if (parent.transform.degree === 0) {\n                    var temp_1 = this.lowerContext.filter;\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n                    this.lowerContext.filter = 'none';\n                    parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                    parent.activeObj = extend({}, temp_1, {}, true);\n                    parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                        value: { context: this.lowerContext, points: null } });\n                    this.lowerContext.filter = temp_1;\n                    this.getCurrentFlipState();\n                }\n                else {\n                    parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                    parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                        value: { context: this.lowerContext, points: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.activeObj = extend({}, temp, {}, true);\n                this.setActivePoint();\n                parent.activeObj = extend({}, temp, {}, true);\n                var tempStrokeSettings = extend({}, parent.activeObj.strokeSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempStrokeSettings', onPropertyChange: false,\n                    value: { tempStrokeSettings: tempStrokeSettings } });\n                var tempTextSettings = extend({}, parent.activeObj.textSettings, {}, true);\n                parent.notify('draw', { prop: 'setTempTextSettings', onPropertyChange: false, value: { tempTextSettings: tempTextSettings } });\n                var shapeSettings = this.updatePrevShapeSettings();\n                var shapeChangingArgs_1 = { action: 'select', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings };\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n                    shapeChangingArgs_1.currentShapeSettings.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n                    shapeChangingArgs_1.currentShapeSettings.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n                }\n                this.isCropSelection = false;\n                var splitWords = void 0;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    this.isCropSelection = true;\n                }\n                if (!this.isCropSelection && isBlazor() && isNullOrUndefined(this.parent.eventType) &&\n                    parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs_1).then(function (shapeChangingArgs) {\n                        _this.shapeEvent(shapeChangingArgs);\n                    });\n                }\n                else if (!this.isCropSelection) {\n                    parent.trigger('shapeChanging', shapeChangingArgs_1);\n                    this.shapeEvent(shapeChangingArgs_1);\n                }\n                else {\n                    var selectionChangingArgs = { action: shapeChangingArgs_1.action,\n                        previousSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs_1.previousShapeSettings.startX,\n                            startY: shapeChangingArgs_1.previousShapeSettings.startY,\n                            width: shapeChangingArgs_1.previousShapeSettings.width,\n                            height: shapeChangingArgs_1.previousShapeSettings.height },\n                        currentSelectionSettings: { type: parent.getSelectionType(parent.activeObj.shape),\n                            startX: shapeChangingArgs_1.currentShapeSettings.startX,\n                            startY: shapeChangingArgs_1.currentShapeSettings.startY,\n                            width: shapeChangingArgs_1.currentShapeSettings.width,\n                            height: shapeChangingArgs_1.currentShapeSettings.height } };\n                    if (isBlazor() && parent.events && parent.events.onSelectionResizeStart.hasDelegate === true) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        parent.dotNetRef.invokeMethodAsync('SelectionEventAsync', 'OnSelectionResizeStart', selectionChangingArgs).then(function (selectionChangingArgs) {\n                            shapeChangingArgs_1.currentShapeSettings.startX = selectionChangingArgs.currentSelectionSettings.startX;\n                            shapeChangingArgs_1.currentShapeSettings.startY = selectionChangingArgs.currentSelectionSettings.startY;\n                            shapeChangingArgs_1.currentShapeSettings.width = selectionChangingArgs.currentSelectionSettings.width;\n                            shapeChangingArgs_1.currentShapeSettings.height = selectionChangingArgs.currentSelectionSettings.height;\n                            _this.shapeEvent(shapeChangingArgs_1);\n                        });\n                    }\n                    else {\n                        parent.trigger('selectionChanging', selectionChangingArgs);\n                        shapeChangingArgs_1.currentShapeSettings.startX = selectionChangingArgs.currentSelectionSettings.startX;\n                        shapeChangingArgs_1.currentShapeSettings.startY = selectionChangingArgs.currentSelectionSettings.startY;\n                        shapeChangingArgs_1.currentShapeSettings.width = selectionChangingArgs.currentSelectionSettings.width;\n                        shapeChangingArgs_1.currentShapeSettings.height = selectionChangingArgs.currentSelectionSettings.height;\n                        this.shapeEvent(shapeChangingArgs_1);\n                    }\n                }\n                isShape = true;\n            }\n        }\n        return isShape;\n    };\n    Selection.prototype.shapeEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'updateShapeChangeEventArgs', onPropertyChange: false,\n            value: { shapeSettings: shapeChangingArgs.currentShapeSettings } });\n        if (parent.activeObj.activePoint) {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(obj['prevActObj'])) {\n                parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n                    value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n            }\n            if (parent.activeObj.shape === 'image' && !this.isImageClarity) {\n                this.upgradeImageQuality();\n                this.isImageClarity = true;\n            }\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: true } });\n            if (!this.isShapeInserted) {\n                if (parent.activeObj.activePoint.startX < parent.img.destLeft) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.endX > parent.img.destLeft + parent.img.destWidth) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.startY < parent.img.destTop) {\n                    this.isPreventDragging = true;\n                }\n                else if (parent.activeObj.activePoint.endY > parent.img.destTop + parent.img.destHeight) {\n                    this.isPreventDragging = true;\n                }\n            }\n        }\n    };\n    Selection.prototype.upgradeImageQuality = function () {\n        var parent = this.parent;\n        var activeObj = extend({}, parent.activeObj, null, true);\n        var ctx = parent.activeObj.imageCanvas.getContext('2d');\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: parent.activeObj.imageElement.width, height: parent.activeObj.imageElement.height, obj: dimObj, isImgShape: null } });\n        parent.notify('shape', { prop: 'updateObj', onPropertyChange: false, value: { dimObj: dimObj, x: null, y: null } });\n        ctx.clearRect(0, 0, parent.activeObj.imageCanvas.width, parent.activeObj.imageCanvas.height);\n        parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: ctx, isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n        parent.activeObj = activeObj;\n    };\n    // eslint-disable-next-line\n    Selection.prototype.targetTouches = function (touches) {\n        var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n        var p1 = { x: touches[0].pageX - bbox.left, y: touches[0].pageY - bbox.top };\n        var p2 = { x: touches[1].pageX - bbox.left, y: touches[1].pageY - bbox.top };\n        var points = [p1, p2];\n        return points;\n    };\n    Selection.prototype.calculateScale = function (startTouches, endTouches) {\n        var startDistance = this.getDistance(startTouches[0], startTouches[1]);\n        var endDistance = this.getDistance(endTouches[0], endTouches[1]);\n        return endDistance / startDistance;\n    };\n    Selection.prototype.getDistance = function (a, b) {\n        var x = 0;\n        var y = 0;\n        if (a && b) {\n            x = a.x - b.x;\n            y = a.y - b.y;\n        }\n        return Math.sqrt(x * x + y * y);\n    };\n    Selection.prototype.redrawShape = function (obj, isMouseUp) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (JSON.stringify(obj) === JSON.stringify(parent.objColl[i])) {\n                parent.objColl.splice(i, 1);\n                break;\n            }\n        }\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (this.isPreventDragging) {\n            if (parent.activeObj.activePoint.startX > parent.img.destLeft) {\n                this.isPreventDragging = false;\n            }\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n        else {\n            if (isMouseUp && parent.activeObj.rotatedAngle !== 0) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n            else {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: null, isCropRatio: null,\n                        points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            }\n        }\n    };\n    Selection.prototype.setTimer = function (e) {\n        if (this.timer > 10) {\n            clearTimeout(this.timer);\n            this.timer = 0;\n            this.parent.notify('shape', { prop: 'findTextTarget', onPropertyChange: false, value: { e: e } });\n            if (Browser.isDevice) {\n                this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n            }\n        }\n    };\n    Selection.prototype.applyCurrActObj = function (x, y) {\n        var parent = this.parent;\n        var isInside = false;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.activePoint)) {\n            return;\n        }\n        var radius = actObj.topLeftCircle ? actObj.topLeftCircle.radius : 0;\n        if ((x >= Math.floor(actObj.activePoint.startX) &&\n            x <= Math.ceil(actObj.activePoint.endX) &&\n            y >= Math.floor(actObj.activePoint.startY) &&\n            y <= Math.ceil(actObj.activePoint.endY))) {\n            isInside = true;\n        }\n        else if (radius !== 0 && (x >= Math.floor(actObj.activePoint.startX) - radius &&\n            x <= Math.ceil(actObj.activePoint.endX) + radius &&\n            y >= Math.floor(actObj.activePoint.startY) - radius &&\n            y <= Math.ceil(actObj.activePoint.endY) + radius)) {\n            isInside = true;\n            this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n                flipObjColl: [], triangle: [], triangleRatio: [] };\n        }\n        else if ((actObj.shape === 'text' || actObj.shape === 'image') && this.dragElement !== '') {\n            isInside = true;\n        }\n        else if (actObj.shape === 'line' || actObj.shape === 'arrow') {\n            var smallPoint = { x: actObj.activePoint.startX < actObj.activePoint.endX ? actObj.activePoint.startX :\n                    actObj.activePoint.endX,\n                y: actObj.activePoint.startY < actObj.activePoint.endY ? actObj.activePoint.startY : actObj.activePoint.endY };\n            var largePoint = { x: actObj.activePoint.startX > actObj.activePoint.endX ? actObj.activePoint.startX :\n                    actObj.activePoint.endX,\n                y: actObj.activePoint.startY > actObj.activePoint.endY ? actObj.activePoint.startY : actObj.activePoint.endY };\n            if (x >= (Math.floor(smallPoint.x) - 5) && x <= (Math.ceil(largePoint.x) + 5) &&\n                y >= (Math.floor(smallPoint.y) - 5) && y <= (Math.ceil(largePoint.y) + 5)) {\n                isInside = true;\n            }\n        }\n        else if (actObj.shape === 'path') {\n            var cursor = this.setCursorForPath(actObj, x, y, parent.upperCanvas);\n            if (cursor === 'move') {\n                isInside = true;\n            }\n        }\n        else if (this.dragElement === 'grabbing') {\n            isInside = true;\n        }\n        else if (actObj.rotatedAngle !== 0) {\n            var cursor = this.setCursorForRotatedObject(actObj, x, y, parent.upperCanvas);\n            if ((cursor !== 'default' && cursor !== 'grab') || this.dragElement === 'n-resize' || this.dragElement === 'e-resize' ||\n                this.dragElement === 's-resize' || this.dragElement === 'w-resize') {\n                isInside = true;\n            }\n        }\n        else if (parent.textArea.style.display === 'block') {\n            isInside = true;\n        }\n        if (!isInside) {\n            if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                parent.activeObj.currIndex = 'shape_' + (parent.objColl.length + 1);\n            }\n            parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n            if (parent.activeObj.horTopLine !== undefined && parent.activeObj.horTopLine.startX !== 0 && parent.activeObj.horTopLine.endX\n                !== 0 && !parent.currObjType.isCustomCrop && parent.currObjType.shape !== '') {\n                parent.objColl.push(extend({}, parent.activeObj, {}, true));\n            }\n            if (parent.activeObj.shape === 'text' || (parent.currObjType.shape === 'ellipse' || parent.currObjType.shape === 'rectangle' ||\n                parent.currObjType.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path' ||\n                parent.activeObj.shape === 'image')) {\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' +\n                    'invert(0%)';\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    var obj = { isInside: false };\n                    parent.notify('crop', { prop: 'isObjInImage', onPropertyChange: false,\n                        value: { obj: parent.objColl[i], object: obj } });\n                    if (obj['isInside']) {\n                        parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                            value: { shape: parent.objColl[i].shape, obj: parent.objColl[i], canvas: null } });\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    }\n                }\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                this.lowerContext.filter = tempFilter;\n                if (parent.activeObj.shape) {\n                    parent.notify('shape', { prop: 'apply', onPropertyChange: false,\n                        value: { shape: null, obj: null, canvas: null } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                if (parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n            }\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n    };\n    Selection.prototype.getCurrentFlipState = function () {\n        var parent = this.parent;\n        if (parent.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, {}, true);\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n            parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n        }\n        else {\n            parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n        }\n    };\n    Selection.prototype.setTextBoxStylesToActObj = function () {\n        var parent = this.parent;\n        parent.activeObj.textSettings.fontFamily = parent.textArea.style.fontFamily;\n        parent.activeObj.strokeSettings.strokeColor = parent.textArea.style.color !== '' &&\n            parent.textArea.style.color.split('(')[1] && parent.textArea.style.color.split('(')[1].split(',')[0] &&\n            parent.textArea.style.color.split('(')[1].split(',')[1] && parent.textArea.style.color.split('(')[1].split(',')[2] ?\n            this.rgbToHex(parseFloat(parent.textArea.style.color.split('(')[1].split(',')[0]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[1]), parseFloat(parent.textArea.style.color.split('(')[1].split(',')[2])) :\n            parent.textArea.style.color;\n        if (parent.textArea.style.fontWeight === 'bold') {\n            parent.activeObj.textSettings.bold = true;\n        }\n        else {\n            parent.activeObj.textSettings.bold = false;\n        }\n        if (parent.textArea.style.fontStyle === 'italic') {\n            parent.activeObj.textSettings.italic = true;\n        }\n        else {\n            parent.activeObj.textSettings.italic = false;\n        }\n        parent.activeObj.textSettings.fontSize = (parseFloat(parent.textArea.style.fontSize));\n    };\n    Selection.prototype.rgbToHex = function (r, g, b) {\n        return '#' + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\n    };\n    Selection.prototype.componentToHex = function (rgb) {\n        var hex = rgb.toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    };\n    Selection.prototype.deleteItem = function () {\n        var parent = this.parent;\n        var shapeChangingArgs = {};\n        var previousShapeSettings = {};\n        if (this.isFhdEditing) {\n            this.updateFreehandDrawColorChange();\n            var prevCropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, [], true);\n            prevObj.pointColl = extend([], parent.pointColl, [], true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            var obj = { freehandDrawSelectedId: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('freehand-draw', { prop: 'deleteFhd', value: { id: obj['freehandDrawSelectedId'] } });\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'deleteFreehandDrawing', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            parent.notify('freehand-draw', { prop: 'resetFreehandDrawSelectedId' });\n        }\n        else if (parent.textArea.style.display === 'none') {\n            var obj = { prevActObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            if (obj['prevActObj']) {\n                obj['prevActObj']['activePoint']['width'] = Math.abs(obj['prevActObj']['activePoint']['width']);\n                obj['prevActObj']['activePoint']['height'] = Math.abs(obj['prevActObj']['activePoint']['height']);\n            }\n            if (obj['prevActObj'] && JSON.stringify(obj['prevActObj']) !== JSON.stringify(parent.activeObj)) {\n                var index = parent.activeObj.currIndex;\n                parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (parent.objColl[i].currIndex === index) {\n                        parent.objColl.splice(i, 1);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                        break;\n                    }\n                }\n            }\n            var object = { isNewPath: null };\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: object } });\n            if (object['isNewPath']) {\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            else if (parent.activeObj.shape) {\n                parent.objColl.push(parent.activeObj);\n                var prevCropObj = extend({}, parent.cropObj, {}, true);\n                var object_2 = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object_2 } });\n                var prevObj = object_2['currObj'];\n                prevObj.objColl = extend([], parent.objColl, [], true);\n                prevObj.pointColl = extend([], parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.objColl.pop();\n                previousShapeSettings = this.updatePrevShapeSettings();\n                shapeChangingArgs = { action: 'delete', previousShapeSettings: previousShapeSettings, currentShapeSettings: null };\n                parent.notify('shape', { prop: 'setKeyHistory', onPropertyChange: false, value: { keyHistory: '' } });\n                parent.clearSelection();\n                if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                    parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs);\n                }\n                else {\n                    parent.trigger('shapeChanging', shapeChangingArgs);\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                    }\n                }\n                if (!isNullOrUndefined(prevObj.objColl[prevObj.objColl.length - 1].currIndex)) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                        value: { operation: 'deleteObj', previousObj: prevObj, previousObjColl: this.tempObjColl,\n                            previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                            previousCropObj: prevCropObj, previousText: null,\n                            currentText: null, previousFilter: null, isCircleCrop: null } });\n                    parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                }\n            }\n            parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n    };\n    Selection.prototype.updateFreehandDrawColorChange = function () {\n        var parent = this.parent;\n        var indexObj = { freehandSelectedIndex: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n        if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && !isNullOrUndefined(parent.pointColl[indexObj['freehandSelectedIndex']])\n            && parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor === '#42a5f5') {\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor = obj['tempFreeHandDrawEditingStyles'].strokeColor;\n        }\n    };\n    Selection.prototype.updatePrevShapeSettings = function (obj) {\n        var parent = this.parent;\n        var fontStyle = [];\n        if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n            if (parent.activeObj.textSettings.bold) {\n                fontStyle.push('bold');\n            }\n            if (parent.activeObj.textSettings.italic) {\n                fontStyle.push('italic');\n            }\n            if (parent.activeObj.textSettings.underline) {\n                fontStyle.push('underline');\n            }\n        }\n        var shapeSettingsObj = {\n            id: !isNullOrUndefined(parent.activeObj.currIndex) ? parent.activeObj.currIndex : null,\n            type: parent.toPascalCase(parent.activeObj.shape),\n            startX: parent.activeObj.activePoint.startX, startY: parent.activeObj.activePoint.startY,\n            width: parent.activeObj.activePoint.width, height: parent.activeObj.activePoint.height,\n            strokeColor: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeColor : null,\n            strokeWidth: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeWidth : null,\n            fillColor: parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.fillColor : null,\n            radius: parent.activeObj.shape === 'ellipse' ? parent.activeObj.activePoint.width / 2 : null,\n            length: parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' ? parent.activeObj.activePoint.width : null,\n            text: parent.activeObj.shape === 'text' ? (parent.activeObj.keyHistory ? parent.activeObj.keyHistory :\n                (parent.activeObj.textSettings.text ? parent.activeObj.textSettings.text : null)) : null,\n            fontSize: parent.activeObj.shape === 'text' ? (parent.activeObj.textSettings ? parent.activeObj.textSettings.fontSize : null) : null,\n            fontFamily: parent.activeObj.shape === 'text' ? (parent.activeObj.textSettings ? parent.activeObj.textSettings.fontFamily : null) : null,\n            fontStyle: parent.activeObj.shape === 'text' ? fontStyle : null,\n            color: parent.activeObj.shape === 'text' ? (parent.activeObj.strokeSettings ? parent.activeObj.strokeSettings.strokeColor : null) : null,\n            degree: parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'image' ?\n                parent.activeObj.rotatedAngle * (180 / Math.PI) : null,\n            imageData: parent.activeObj.shape === 'image' ? parent.activeObj.imageElement.src : null\n        };\n        if (obj) {\n            obj['shapeSettingsObj'] = shapeSettingsObj;\n        }\n        return shapeSettingsObj;\n    };\n    Selection.prototype.getRectanglePoints = function (rectX, rectY, rectWidth, rectHeight, rectAngle, pointX, pointY) {\n        var centerX = rectX + rectWidth / 2;\n        var centerY = rectY + rectHeight / 2;\n        var angleRad = rectAngle * (Math.PI / 180);\n        var cosAngle = Math.cos(angleRad);\n        var sinAngle = Math.sin(angleRad);\n        var localX = pointX - centerX;\n        var localY = pointY - centerY;\n        var rotatedX = localX * cosAngle + localY * sinAngle;\n        var rotatedY = -localX * sinAngle + localY * cosAngle;\n        var halfWidth = rectWidth / 2;\n        var halfHeight = rectHeight / 2;\n        // Check if the rotated point is within the bounds of the rectangle\n        if (rotatedX >= -halfWidth && rotatedX <= halfWidth && rotatedY >= -halfHeight &&\n            rotatedY <= halfHeight) {\n            return true; // Point is inside the rotated rectangle\n        }\n        else {\n            return false; // Point is outside the rotated rectangle\n        }\n    };\n    Selection.prototype.getTransRotationPoint = function (obj, object) {\n        var rotationCirclePoint;\n        var degree;\n        var isHorizontalflip = false;\n        var isVerticalflip = false;\n        if (obj.shapeDegree === 0) {\n            degree = this.parent.transform.degree;\n        }\n        else {\n            degree = this.parent.transform.degree - obj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (obj.flipObjColl) {\n            for (var i = 0; i < obj.flipObjColl.length; i++) {\n                if (obj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    isHorizontalflip = true;\n                }\n                else if (obj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    isVerticalflip = true;\n                }\n            }\n        }\n        if (degree === 0 || degree === 360) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX,\n                    y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                    y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 90 || degree === -270) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX +\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX -\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        else if (degree === 180 || degree === -180) {\n            if (isVerticalflip) {\n                rotationCirclePoint = { x: obj.bottomCenterCircle.startX,\n                    y: obj.bottomCenterCircle.startY + obj.rotationCircleLine };\n            }\n            else {\n                rotationCirclePoint = { x: obj.topCenterCircle.startX,\n                    y: obj.topCenterCircle.startY - obj.rotationCircleLine };\n            }\n        }\n        else if (degree === 270 || degree === -90) {\n            if (isHorizontalflip) {\n                rotationCirclePoint = { x: obj.centerLeftCircle.startX -\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n            else {\n                rotationCirclePoint = { x: obj.centerRightCircle.startX +\n                        obj.rotationCircleLine, y: obj.centerLeftCircle.startY };\n            }\n        }\n        if (object) {\n            object['rotationCirclePoint'] = rotationCirclePoint;\n        }\n        return rotationCirclePoint;\n    };\n    Selection.prototype.getNumTextValue = function (obj) {\n        var height;\n        var width;\n        var widthElement;\n        var heightElement;\n        if (!isBlazor()) {\n            widthElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeWidth');\n            heightElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeHeight');\n        }\n        else {\n            widthElement = this.parent.element.querySelector('.e-ie-toolbar-e-resize-width-input .e-numerictextbox');\n            heightElement = this.parent.element.querySelector('.e-ie-toolbar-e-resize-height-input .e-numerictextbox');\n        }\n        if (widthElement && heightElement) {\n            var heightString = heightElement.value.replace(/,/g, '');\n            var widthString = widthElement.value.replace(/,/g, '');\n            if (heightString === '') {\n                heightString = heightElement.placeholder.replace(/,/g, '');\n            }\n            if (widthString === '') {\n                widthString = widthElement.placeholder.replace(/,/g, '');\n            }\n            height = parseFloat(heightString);\n            width = parseFloat(widthString);\n        }\n        if (obj) {\n            obj['width'] = width;\n            obj['height'] = height;\n        }\n        return { x: width, y: height };\n    };\n    Selection.prototype.isValueUpdated = function () {\n        var isValue = true;\n        var widthElement;\n        var heightElement;\n        if (!isBlazor()) {\n            widthElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeWidth');\n            heightElement = this.parent.element.querySelector('#' + this.parent.element.id + '_resizeHeight');\n        }\n        else {\n            widthElement = this.parent.element.querySelector('.e-ie-toolbar-e-resize-width-input .e-numerictextbox');\n            heightElement = this.parent.element.querySelector('.e-ie-toolbar-e-resize-height-input .e-numerictextbox');\n        }\n        if (widthElement && heightElement) {\n            if (heightElement.value.replace(/,/g, '') === '' && widthElement.value.replace(/,/g, '') === '') {\n                isValue = false;\n            }\n        }\n        return isValue;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { EventHandler, extend, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ShapeType } from '../index';\nvar Shape = /** @class */ (function () {\n    function Shape(parent) {\n        this.textSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.keyHistory = ''; // text history\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Shape.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Shape.prototype.addEventListener = function () {\n        this.parent.on('shape', this.shape, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Shape.prototype.removeEventListener = function () {\n        this.parent.off('shape', this.shape);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Shape.prototype.shape = function (args) {\n        this.initShapePvtProps();\n        var uploader;\n        switch (args.prop) {\n            case 'drawEllipse':\n                this.drawEllipse(args.value['x'], args.value['y'], args.value['radiusX'], args.value['radiusY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['degree']);\n                break;\n            case 'drawLine':\n                this.drawLine(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor']);\n                break;\n            case 'drawArrow':\n                this.drawArrow(args.value['startX'], args.value['startY'], args.value['endX'], args.value['endY'], args.value['strokeWidth'], args.value['strokeColor'], args.value['arrowStart'], args.value['arrowEnd']);\n                break;\n            case 'drawPath':\n                this.drawPath(args.value['pointColl'], args.value['strokeWidth'], args.value['strokeColor']);\n                break;\n            case 'drawRectangle':\n                this.drawRectangle(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['degree']);\n                break;\n            case 'drawText':\n                this.drawText(args.value['x'], args.value['y'], args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['color']);\n                break;\n            case 'redrawActObj':\n                this.redrawActObj(args.value['x'], args.value['y'], args.value['isMouseDown']);\n                break;\n            case 'apply':\n                this.apply(args.value['shape'], args.value['obj'], args.value['canvas']);\n                break;\n            case 'updateShapeChangeEventArgs':\n                this.updateShapeChangeEventArgs(args.value['shapeSettings']);\n                break;\n            case 'updSelChangeEventArgs':\n                this.updSelChangeEventArgs(args.value['selectionSettings']);\n                break;\n            case 'iterateObjColl':\n                this.iterateObjColl();\n                break;\n            case 'updImgRatioForActObj':\n                this.updImgRatioForActObj();\n                break;\n            case 'zoomObjColl':\n                this.zoomObjColl(args.value['isPreventApply']);\n                break;\n            case 'redrawObj':\n                this.redrawObj(args.value['degree']);\n                break;\n            case 'rotateObjColl':\n                this.rotateObjColl();\n                break;\n            case 'draw-shape-text':\n                this.drawShapeText();\n                break;\n            case 'redraw-text':\n                this.redrawText();\n                break;\n            case 'draw-shape':\n                this.drawShape(args.value['obj'], args.value['strokeWidth'], args.value['strokeColor'], args.value['fillColor'], args.value['start'], args.value['width'], args.value['height']);\n                break;\n            case 'renderTextArea':\n                this.renderTextArea(args.value['x'], args.value['y'], args.value['actObj']);\n                break;\n            case 'setTextBoxWidth':\n                this.setTextBoxWidth(args.value['e']);\n                break;\n            case 'findTextTarget':\n                this.findTextTarget(args.value['e']);\n                break;\n            case 'panObjColl':\n                this.panObjColl(args.value['xDiff'], args.value['yDiff'], args.value['panRegion']);\n                break;\n            case 'updateFontStyles':\n                this.updateFontStyles(args.value['isTextBox']);\n                break;\n            case 'applyFontStyle':\n                this.applyFontStyle(args.value['item']);\n                break;\n            case 'updateFontRatio':\n                this.updateFontRatio(args.value['obj'], args.value['isTextArea']);\n                break;\n            case 'updateFontSize':\n                this.updateFontSize(args.value['obj']);\n                break;\n            case 'updateObjColl':\n                this.updateObjColl(args.value['item'], args.value['objColl']);\n                break;\n            case 'pushActItemIntoObj':\n                this.pushActItemIntoObj();\n                break;\n            case 'clearActObj':\n                this.clearActObj();\n                break;\n            case 'refreshActiveObj':\n                this.refreshActiveObj();\n                break;\n            case 'applyActObj':\n                this.applyActObj(args.value['isMouseDown']);\n                break;\n            case 'wireEvent':\n                EventHandler.add(this.parent.upperCanvas, 'dblclick', this.findTextTarget, this);\n                EventHandler.add(this.parent.textArea, 'mousedown', this.findTextTarget, this);\n                uploader = document.getElementById(this.parent.element.id + '_fileUpload');\n                if (uploader) {\n                    EventHandler.add(uploader, 'change', this.fileChanged, this);\n                }\n                break;\n            case 'unWireEvent':\n                EventHandler.remove(this.parent.upperCanvas, 'dblclick', this.findTextTarget);\n                EventHandler.remove(this.parent.textArea, 'mousedown', this.findTextTarget);\n                uploader = document.getElementById(this.parent.element.id + '_fileUpload');\n                EventHandler.remove(uploader, 'change', this.fileChanged);\n                break;\n            case 'getShapeSetting':\n                this.getShapeSetting(args.value['id'], args.value['obj']);\n                break;\n            case 'getShapeSettings':\n                this.getShapeSettings(args.value['obj']);\n                break;\n            case 'isPointsInRange':\n                this.isPointsInRange(args.value['x'], args.value['y'], args.value['obj']);\n                break;\n            case 'alignRotateFlipColl':\n                this.alignRotateFlipColl(args.value['collection'], args.value['isRotateFlipCollection'], args.value['obj']);\n                break;\n            case 'selectShape':\n                this.selectShape(args.value['id'], args.value['obj']);\n                break;\n            case 'deleteShape':\n                this.deleteShape(args.value['id']);\n                break;\n            case 'getMaxText':\n                this.getMaxText(args.value['isTextBox'], args.value['text'], args.value['obj']);\n                break;\n            case 'setPointCollForLineArrow':\n                args.value['obj'].pointColl = this.getLinePoints(args.value['obj'].activePoint.startX, args.value['obj'].activePoint.startY, args.value['obj'].activePoint.endX, args.value['obj'].activePoint.endY);\n                break;\n            case 'setPointCollForShapeRotation':\n                this.setPointCollForShapeRotation(args.value['obj']);\n                break;\n            case 'setTextSettings':\n                if (args.value['textSettings']) {\n                    this.textSettings = args.value['textSettings'];\n                }\n                else if (args.value['fontFamily']) {\n                    this.textSettings.fontFamily = args.value['fontFamily'];\n                }\n                else if (args.value['fontSize']) {\n                    this.textSettings.fontSize = args.value['fontSize'];\n                }\n                break;\n            case 'setStrokeSettings':\n                if (args.value['strokeSettings']) {\n                    this.strokeSettings = args.value['strokeSettings'];\n                }\n                else if (args.value['strokeColor']) {\n                    this.strokeSettings.strokeColor = args.value['strokeColor'];\n                }\n                else if (args.value['fillColor']) {\n                    this.strokeSettings.fillColor = args.value['fillColor'];\n                }\n                else if (args.value['strokeWidth']) {\n                    this.strokeSettings.strokeWidth = args.value['strokeWidth'];\n                }\n                break;\n            case 'getStrokeSettings':\n                args.value['obj']['strokeSettings'] = this.strokeSettings;\n                break;\n            case 'setKeyHistory':\n                this.keyHistory = args.value['keyHistory'];\n                break;\n            case 'getKeyHistory':\n                args.value['obj']['keyHistory'] = this.keyHistory;\n                break;\n            case 'setTextBoxPos':\n                this.setTextBoxPos(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'setTextBoxPoints':\n                this.setTextBoxPoints(args.value['actObj'], args.value['degree'], args.value['flip'], args.value['x'], args.value['y']);\n                break;\n            case 'alignTextAreaIntoCanvas':\n                this.alignTextAreaIntoCanvas();\n                break;\n            case 'initializeTextShape':\n                this.initializeTextShape(args.value['text'], args.value['fontFamily'], args.value['fontSize'], args.value['bold'], args.value['italic'], args.value['strokeColor']);\n                break;\n            case 'stopPathDrawing':\n                this.stopPathDrawing(args.value['e'], args.value['isApply']);\n                break;\n            case 'updateArrowRatio':\n                this.updateArrowRatio(args.value['obj']);\n                break;\n            case 'getSquarePointForRotatedShape':\n                this.getSquarePointForRotatedShape(args.value['obj'], args.value['object']);\n                break;\n            case 'drawImage':\n                this.drawImage(args.value['x'], args.value['y'], args.value['width'], args.value['height'], args.value['src'], args.value['degree'], args.value['isAspectRatio']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'fileChanged':\n                this.fileChanged(args.value['e']);\n                break;\n            case 'updateObj':\n                this.updateObj(args.value['dimObj'], args.value['x'], args.value['y']);\n                break;\n            case 'updateSelectionChangeEventArgs':\n                this.updateSelectionChangeEventArgs(args.value['selectionSettings']);\n                break;\n        }\n    };\n    Shape.prototype.getModuleName = function () {\n        return 'shape';\n    };\n    Shape.prototype.initShapePvtProps = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n        if (isNullOrUndefined(this.shapeImg)) {\n            this.shapeImg = this.parent.createElement('img', {\n                id: this.parent.element.id + '_shapeImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n            });\n        }\n    };\n    Shape.prototype.reset = function () {\n        this.textSettings =\n            { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n    };\n    Shape.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor, degree) {\n        this.initializeShape('ellipse');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('ellipse', strokeWidth, strokeColor, fillColor, start, radiusX, radiusY, null, null, null, degree);\n    };\n    Shape.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor) {\n        this.initializeShape('line');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('line', strokeWidth, strokeColor, null, start, width, height);\n    };\n    Shape.prototype.drawPath = function (pointColl, strokeWidth, strokeColor) {\n        this.initializeShape('path');\n        if (pointColl) {\n            this.drawShape('path', strokeWidth, strokeColor, null, null, null, null, pointColl);\n        }\n        else {\n            this.drawShape('line', strokeWidth, strokeColor, null, null, null, null);\n            var obj = extend({}, this.parent.objColl[this.parent.objColl.length - 1], null, true);\n            obj.shape = 'path';\n            obj.lineDraw = null;\n            obj.pointColl = [{ x: obj.activePoint.startX, y: obj.activePoint.startY },\n                { x: obj.activePoint.endX, y: obj.activePoint.endY }];\n            this.parent.objColl[this.parent.objColl.length - 1] = obj;\n        }\n    };\n    Shape.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd) {\n        this.initializeShape('arrow');\n        var start = startX && startY ? { x: startX, y: startY } : null;\n        var width = endX - startX;\n        var height = endY - startY;\n        this.drawShape('arrow', strokeWidth, strokeColor, null, start, width, height, null, arrowStart, arrowEnd);\n    };\n    Shape.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor, degree) {\n        this.initializeShape('rectangle');\n        var start = x && y ? { x: x, y: y } : null;\n        this.drawShape('rectangle', strokeWidth, strokeColor, fillColor, start, width, height, null, null, null, degree);\n    };\n    Shape.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color) {\n        this.drawShapeText(text, fontFamily, fontSize, bold, italic, color, x, y);\n    };\n    Shape.prototype.initializeShape = function (type) {\n        this.redrawActObj();\n        this.parent.activeObj.shape = type;\n        if (this.parent.currObjType.shape === 'freehanddraw') {\n            this.apply();\n            this.parent.upperCanvas.style.cursor = this.parent.cursor = 'default';\n            this.parent.currObjType.shape = '';\n        }\n        this.parent.currObjType.isCustomCrop = false;\n    };\n    Shape.prototype.updateWidthHeight = function (obj) {\n        obj.activePoint.width = obj.activePoint.endX - obj.activePoint.startX;\n        obj.activePoint.height = obj.activePoint.endY - obj.activePoint.startY;\n        return obj;\n    };\n    Shape.prototype.setDimension = function (width, height) {\n        if (width && height) {\n            this.parent.activeObj.activePoint.width = width;\n            this.parent.activeObj.activePoint.height = height;\n            if (this.parent.currObjType.shape.toLowerCase() === 'ellipse') {\n                this.parent.activeObj.activePoint.width = 2 * width;\n                this.parent.activeObj.activePoint.height = 2 * height;\n            }\n        }\n    };\n    Shape.prototype.getArrowType = function (type) {\n        var arrowType = type;\n        if (type) {\n            var typeToArrowType = { 'None': 'none', 'Arrow': 'arrow', 'SolidArrow': 'arrowSolid',\n                'Circle': 'circle', 'SolidCircle': 'circleSolid', 'Square': 'square', 'SolidSquare': 'squareSolid', 'Bar': 'bar' };\n            arrowType = typeToArrowType[\"\" + type];\n        }\n        return arrowType;\n    };\n    Shape.prototype.drawShape = function (type, strokeWidth, strokeColor, fillColor, start, width, height, pointColl, arrowStart, arrowEnd, degree) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            this.redrawActObj();\n            var objColl_1 = extend([], parent.objColl, [], true);\n            parent.togglePen = false;\n            this.keyHistory = '';\n            this.parent.upperCanvas.style.display = 'block';\n            this.refreshActiveObj();\n            parent.currObjType.shape = type;\n            if (parent.currObjType.shape.toLowerCase() === 'path' && isNullOrUndefined(pointColl)) {\n                parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                parent.activeObj.pointColl = [];\n                parent.upperCanvas.style.cursor = this.parent.cursor = 'crosshair';\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: 'path' } });\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                }\n            }\n            else {\n                if (parent.currObjType.shape.toLowerCase() !== 'freehanddraw' && parent.currObjType.shape.toLowerCase() !== '') {\n                    parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n                        parent.activeObj.strokeSettings = this.strokeSettings;\n                    }\n                    if (parent.currObjType.shape.toLowerCase() === 'path' && pointColl) {\n                        parent.activeObj.pointColl = pointColl;\n                    }\n                    parent.activeObj.strokeSettings.strokeWidth = strokeWidth ? strokeWidth : parent.activeObj.strokeSettings.strokeWidth;\n                    parent.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : parent.activeObj.strokeSettings.strokeColor;\n                    parent.activeObj.strokeSettings.fillColor = fillColor ? fillColor : parent.activeObj.strokeSettings.fillColor;\n                    var tempWidth = parent.img.destWidth > 100 ? 100 : parent.img.destWidth / 2;\n                    var tempHeight = parent.img.destHeight > 100 ? 100 : parent.img.destHeight / 2;\n                    parent.activeObj.activePoint.width = tempWidth;\n                    parent.activeObj.activePoint.height = tempHeight;\n                    if (parent.currObjType.shape.toLowerCase() === 'line' || parent.currObjType.shape.toLowerCase() === 'arrow') {\n                        parent.activeObj.lineDraw = 'horizontal';\n                        parent.activeObj.activePoint.height = 0;\n                        if (parent.currObjType.shape.toLowerCase() === 'arrow') {\n                            parent.activeObj.activePoint.width += 50;\n                            parent.activeObj.start = this.getArrowType(arrowStart);\n                            parent.activeObj.end = this.getArrowType(arrowEnd);\n                        }\n                    }\n                    else if (parent.currObjType.shape.toLowerCase() === 'rectangle') {\n                        parent.activeObj.activePoint.width += parent.activeObj.activePoint.width / 2;\n                    }\n                    this.setDimension(width, height);\n                    if (start) {\n                        parent.activeObj.activePoint.startX = start.x;\n                        parent.activeObj.activePoint.startY = start.y;\n                        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX +\n                            parent.activeObj.activePoint.width;\n                        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY +\n                            parent.activeObj.activePoint.height;\n                    }\n                    else {\n                        this.setCenterPoints();\n                    }\n                    this.setPointCollForLineAndArrow();\n                    if (parent.currObjType.shape.toLowerCase() === 'arrow') {\n                        parent.activeObj.triangleDirection = 'right';\n                    }\n                    parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n                    this.initShapeProps();\n                    var obj = { shapeSettingsObj: {} };\n                    parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n                    var shapeSettings = obj['shapeSettingsObj'];\n                    var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                        currentShapeSettings: shapeSettings };\n                    if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        this.parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                            _this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                            _this.setDimension(width, height);\n                            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                            if (degree) {\n                                parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n                                parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n                            }\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'shape');\n                            parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n                            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl_1 } });\n                            if (parent.isPublicMethod) {\n                                parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                            }\n                            parent.isPublicMethod = false;\n                        });\n                    }\n                    else {\n                        parent.trigger('shapeChanging', shapeChangingArgs);\n                        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                        this.setDimension(width, height);\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        if (degree) {\n                            parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n                            parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n                        }\n                        if (!isBlazor()) {\n                            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'shape');\n                        }\n                        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n                        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl_1 } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                        if (parent.isPublicMethod) {\n                            parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                        }\n                        parent.isPublicMethod = false;\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.initShapeProps = function () {\n        var parent = this.parent;\n        parent.activeObj.shapeDegree = parent.transform.degree;\n        parent.activeObj.shapeFlip = parent.transform.currFlipState;\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        parent.activeObj.flipObjColl = [];\n    };\n    Shape.prototype.setPointCollForLineAndArrow = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n            parent.activeObj.pointColl = this.getLinePoints(parent.activeObj.activePoint.startX, parent.activeObj.activePoint.startY, parent.activeObj.activePoint.endX, parent.activeObj.activePoint.endY);\n            if (parent.activeObj.pointColl) {\n                for (var i = 0, len = parent.activeObj.pointColl.length; i < len; i++) {\n                    parent.activeObj.pointColl[i].ratioX = (parent.activeObj.pointColl[i].x -\n                        parent.img.destLeft) / parent.img.destWidth;\n                    parent.activeObj.pointColl[i].ratioY = (parent.activeObj.pointColl[i].y -\n                        parent.img.destTop) / parent.img.destHeight;\n                }\n            }\n        }\n    };\n    Shape.prototype.prevObjColl = function () {\n        var parent = this.parent;\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        this.prevObj = object['currObj'];\n        this.prevObj.objColl = extend([], parent.objColl, [], true);\n        this.prevObj.pointColl = extend([], parent.pointColl, [], true);\n        this.prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        this.prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n    };\n    Shape.prototype.drawShapeText = function (text, fontFamily, fontSize, bold, italic, strokeColor, x, y) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (parent.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                parent.upperCanvas.style.cursor = parent.cursor = 'default';\n                parent.currObjType.shape = '';\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.togglePen = false;\n            this.redrawActObj();\n            this.prevObjColl();\n            this.refreshActiveObj();\n            parent.activeObj.shape = parent.currObjType.shape = 'text';\n            parent.currObjType.isCustomCrop = false;\n            this.initializeTextShape(text, fontFamily, fontSize, bold, italic, strokeColor);\n            parent.currObjType.isText = parent.currObjType.isInitialText = true;\n            if (isNullOrUndefined(parent.activeObj.textSettings.fontSize)) {\n                parent.getFontSizes();\n                parent.activeObj.textSettings.fontSize = parseInt(parent.fontSizeColl[(parseInt('3', 10) - 1)].text, 10);\n            }\n            if (parent.img.destWidth < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destWidth / 20));\n            }\n            else if (parent.img.destHeight < 100) {\n                parent.activeObj.textSettings.fontSize = Math.floor((parent.img.destHeight / 20));\n            }\n            parent.activeObj.shapeDegree = parent.transform.degree;\n            parent.activeObj.shapeFlip = parent.transform.currFlipState;\n            parent.activeObj.flipObjColl = [];\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(parent.activeObj.textSettings.text).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n            var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n            if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n                parent.activeObj.activePoint.startX = x;\n                parent.activeObj.activePoint.startY = y;\n                parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + width;\n                parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + height;\n            }\n            else {\n                this.setCenterPoints(true, width, height);\n            }\n            var obj = { shapeSettingsObj: {} };\n            parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                    _this.drawShapeTextEvent(shapeChangingArgs);\n                    if (parent.isPublicMethod) {\n                        parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                    }\n                    parent.isPublicMethod = false;\n                });\n            }\n            else {\n                parent.trigger('shapeChanging', shapeChangingArgs);\n                this.drawShapeTextEvent(shapeChangingArgs);\n                if (parent.isPublicMethod) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                }\n                parent.isPublicMethod = false;\n            }\n        }\n    };\n    Shape.prototype.drawShapeImageEvent = function (shapeChangingArgs, isSelect) {\n        var parent = this.parent;\n        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        parent.objColl.push(parent.activeObj);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: this.prevObj, previousObjColl: this.prevObj.objColl,\n                previousPointColl: this.prevObj.pointColl, previousSelPointColl: this.prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        if (isSelect) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n            else {\n                parent.updateToolbar(parent.element, parent.activeObj.shape);\n                parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n            }\n        }\n        else {\n            parent.okBtn();\n        }\n        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n    };\n    Shape.prototype.drawShapeTextEvent = function (shapeChangingArgs) {\n        var parent = this.parent;\n        this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n        this.addLetter(parent.activeObj.textSettings.text);\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        this.updateFontRatio(parent.activeObj);\n        parent.objColl.push(parent.activeObj);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: this.prevObj, previousObjColl: this.prevObj.objColl,\n                previousPointColl: this.prevObj.pointColl, previousSelPointColl: this.prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'quickAccessToolbar', 'text');\n        }\n        parent.notify('selection', { prop: 'isShapeInserted', onPropertyChange: false, value: { bool: true } });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'text');\n        }\n    };\n    Shape.prototype.initializeTextShape = function (text, fontFamily, fontSize, bold, italic, strokeColor) {\n        var parent = this.parent;\n        this.keyHistory = '';\n        parent.upperCanvas.style.display = 'block';\n        if (isNullOrUndefined(parent.activeObj.textSettings)) {\n            parent.activeObj.textSettings = this.textSettings;\n        }\n        if (isNullOrUndefined(parent.activeObj.strokeSettings)) {\n            parent.activeObj.strokeSettings = this.strokeSettings;\n        }\n        parent.activeObj.strokeSettings.strokeColor = strokeColor || parent.activeObj.strokeSettings.strokeColor;\n        parent.activeObj.textSettings.text = text || parent.activeObj.textSettings.text;\n        parent.activeObj.textSettings.fontFamily = fontFamily || parent.activeObj.textSettings.fontFamily;\n        parent.activeObj.textSettings.fontSize = fontSize || parent.activeObj.textSettings.fontSize;\n        parent.activeObj.textSettings.bold = bold || parent.activeObj.textSettings.bold;\n        parent.activeObj.textSettings.italic = italic || parent.activeObj.textSettings.italic;\n    };\n    Shape.prototype.drawImage = function (x, y, width, height, src, degree, isAspectRatio) {\n        this.initializeShape('image');\n        this.onLoadImgShape(x, y, width, height, src, null, degree, isAspectRatio);\n    };\n    Shape.prototype.redrawActObj = function (x, y, isMouseDown) {\n        var splitWords;\n        var parent = this.parent;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.activeObj.horTopLine && (parent.activeObj.shape && splitWords[0] !== 'crop')) {\n            if (parent.textArea.style.display === 'block') {\n                parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n                this.updateFontRatio(parent.activeObj, true);\n                if (x && y) {\n                    if ((x !== parent.activeObj.activePoint.startX) && (y !== parent.activeObj.activePoint.startY)) {\n                        this.updateTextFromTextArea();\n                    }\n                }\n                else {\n                    this.updateTextFromTextArea();\n                    parent.textArea.style.transform = '';\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                }\n                this.refreshActiveObj();\n            }\n            else {\n                this.applyActObj(isMouseDown);\n            }\n        }\n    };\n    Shape.prototype.apply = function (shape, obj, canvas) {\n        var parent = this.parent;\n        if (!parent.disabled) {\n            if (parent.togglePen && !parent.currObjType.isCustomCrop) {\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                var destWidth = parent.img.destWidth;\n                var destHeight = parent.img.destHeight;\n                parent.notify('draw', { prop: 'callUpdateCurrTransState', onPropertyChange: false });\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.togglePen = false;\n                this.iterateObjColl();\n                parent.notify('freehandDraw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                parent.togglePen = false;\n                if (parent.isCircleCrop || (parent.currSelectionPoint &&\n                    parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.img.destWidth = destWidth;\n                parent.img.destHeight = destHeight;\n                this.lowerContext.filter = temp;\n            }\n            else {\n                canvas = canvas ? canvas : 'original';\n                if (isNullOrUndefined(parent.activeObj.shape) && isNullOrUndefined(shape)) {\n                    parent.currObjType.shape = '';\n                }\n                else {\n                    parent.currObjType.shape = shape || parent.currObjType.shape;\n                }\n                if (parent.currObjType.shape !== '') {\n                    this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    if (parent.activeObj.shape === 'text') {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj, isCropRatio: null,\n                                points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n                        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                    }\n                    else {\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: canvas, obj: obj } });\n                    }\n                    parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n                    if (!shape && parent.currObjType.shape !== '' && !parent.currObjType.isCustomCrop) {\n                        parent.objColl.push(extend({}, parent.activeObj, {}, true));\n                    }\n                    this.keyHistory = '';\n                }\n            }\n        }\n    };\n    Shape.prototype.setCenterPoints = function (text, width, height) {\n        var parent = this.parent;\n        var renderWidth;\n        var renderHeight;\n        if (text && width && height) {\n            renderWidth = width;\n            renderHeight = height;\n        }\n        else {\n            renderWidth = parent.activeObj.activePoint.width;\n            renderHeight = parent.activeObj.activePoint.height;\n        }\n        parent.activeObj.activePoint.startX = (parent.lowerCanvas.width / 2) - renderWidth / 2;\n        parent.activeObj.activePoint.startY = (parent.lowerCanvas.height / 2) - renderHeight / 2;\n        parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + renderWidth / 2;\n        parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) + renderHeight / 2;\n    };\n    Shape.prototype.updSelChangeEventArgs = function (selectionSettings) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.startX = selectionSettings.startX;\n        parent.activeObj.activePoint.startY = selectionSettings.startY;\n        parent.activeObj.activePoint.width = selectionSettings.width;\n        parent.activeObj.activePoint.height = selectionSettings.height;\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n    };\n    Shape.prototype.updateShapeChangeEventArgs = function (shapeSettings) {\n        var parent = this.parent;\n        parent.activeObj.currIndex = shapeSettings.id;\n        parent.activeObj.activePoint.startX = shapeSettings.startX;\n        parent.activeObj.activePoint.startY = shapeSettings.startY;\n        parent.activeObj.activePoint.width = shapeSettings.width;\n        parent.activeObj.activePoint.height = shapeSettings.height;\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n        parent.activeObj.strokeSettings.strokeColor = shapeSettings.strokeColor;\n        parent.activeObj.strokeSettings.fillColor = shapeSettings.fillColor;\n        if (isNullOrUndefined(shapeSettings.degree)) {\n            shapeSettings.degree = 0;\n        }\n        switch (parent.activeObj.shape) {\n            case 'ellipse':\n                parent.activeObj.activePoint.width = shapeSettings.radius * 2;\n                parent.activeObj.rotatedAngle = shapeSettings.degree * (Math.PI / 180);\n                break;\n            case 'line':\n            case 'arrow':\n                parent.activeObj.activePoint.width = shapeSettings.length;\n                break;\n            case 'text':\n                parent.activeObj.keyHistory = parent.activeObj.textSettings.text = shapeSettings.text;\n                parent.activeObj.textSettings.fontSize = shapeSettings.fontSize;\n                parent.activeObj.strokeSettings.strokeColor = shapeSettings.color;\n                parent.activeObj.textSettings.fontFamily = shapeSettings.fontFamily;\n                break;\n            case 'rectangle':\n            case 'image':\n                if (shapeSettings.degree) {\n                    parent.activeObj.rotatedAngle = shapeSettings.degree * (Math.PI / 180);\n                }\n                break;\n        }\n        if (parent.activeObj.shape === 'text' && parent.activeObj.textSettings) {\n            for (var i = 0; i < shapeSettings.fontStyle.length; i++) {\n                switch (shapeSettings.fontStyle[i]) {\n                    case 'bold':\n                        parent.activeObj.textSettings.bold = true;\n                        break;\n                    case 'italic':\n                        parent.activeObj.textSettings.italic = true;\n                        break;\n                    case 'underline':\n                        parent.activeObj.textSettings.underline = true;\n                        break;\n                }\n            }\n        }\n    };\n    Shape.prototype.updateSelectionChangeEventArgs = function (selectionSettings) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.startX = selectionSettings.startX;\n        parent.activeObj.activePoint.startY = selectionSettings.startY;\n        if (selectionSettings.width && selectionSettings.height) {\n            parent.activeObj.activePoint.width = selectionSettings.width;\n            parent.activeObj.activePoint.height = selectionSettings.height;\n            parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + parent.activeObj.activePoint.width;\n            parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + parent.activeObj.activePoint.height;\n        }\n    };\n    Shape.prototype.addLetter = function (letter) {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'none' && (parent.currObjType.isText || parent.activeObj.shape === 'text')) {\n            if (letter === 'Backspace') {\n                this.keyHistory = this.keyHistory.slice(0, -1);\n            }\n            else {\n                this.keyHistory += letter;\n            }\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(this.keyHistory).width\n                + parent.activeObj.textSettings.fontSize * 0.5;\n            var height = parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25;\n            this.upperContext.fillText(this.keyHistory, parent.activeObj.activePoint.startX, parent.activeObj.activePoint.startY +\n                parent.activeObj.textSettings.fontSize);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.currObjType.isText = true;\n            parent.notify('selection', { prop: 'setActivePoint', onPropertyChange: false,\n                value: { startX: width, startY: height } });\n        }\n    };\n    Shape.prototype.redrawText = function () {\n        var parent = this.parent;\n        var fontStyle = '';\n        if (parent.activeObj.textSettings.bold) {\n            fontStyle += 'bold ';\n        }\n        if (parent.activeObj.textSettings.italic) {\n            fontStyle += 'italic ';\n        }\n        this.upperContext.font = fontStyle + parent.activeObj.textSettings.fontSize + 'px ' + parent.activeObj.textSettings.fontFamily;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        var text = parent.textArea.style.display === 'block' ? this.getMaxText(true) : this.getMaxText();\n        var width = this.upperContext.measureText(text).width + parent.activeObj.textSettings.fontSize * 0.5;\n        var height = rows.length * (parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25);\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n            value: { obj: parent.activeObj } });\n    };\n    Shape.prototype.updateTextFromTextArea = function () {\n        var parent = this.parent;\n        var allowUndoRedo = false;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        if (parent.activeObj.keyHistory !== parent.textArea.value) {\n            allowUndoRedo = true;\n        }\n        parent.activeObj.keyHistory = parent.textArea.value;\n        parent.textArea.style.display = 'none';\n        parent.textArea.value = '';\n        this.updateFontStyles();\n        var width = this.upperContext.measureText(parent.activeObj.keyHistory).width +\n            parent.activeObj.textSettings.fontSize * 0.5;\n        var height = parent.activeObj.textSettings.fontSize + this.parent.activeObj.textSettings.fontSize * 0.25;\n        var rows = parent.activeObj.keyHistory.split('\\n');\n        if (rows.length > 1) {\n            height *= rows.length;\n            var widthColl = [];\n            for (var i = 0, len = rows.length; i < len; i++) {\n                widthColl.push(this.upperContext.measureText(rows[i]).width +\n                    parent.activeObj.textSettings.fontSize * 0.5);\n            }\n            width = Math.max.apply(Math, widthColl);\n        }\n        parent.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n            value: { width: width, height: height } });\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n        this.updImgRatioForActObj();\n        if (allowUndoRedo) {\n            this.apply(parent.activeObj.shape, parent.activeObj);\n            parent.objColl.push(extend({}, parent.activeObj, {}, true));\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'text', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: parent.activeObj.keyHistory,\n                    currentText: parent.textArea.value, previousFilter: null, isCircleCrop: null } });\n        }\n        else {\n            this.apply(parent.activeObj.shape, parent.activeObj);\n            parent.objColl.push(extend({}, parent.activeObj, {}, true));\n        }\n    };\n    Shape.prototype.iterateObjColl = function () {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                this.apply(parent.objColl[i].shape, parent.objColl[i]);\n                this.refreshActiveObj();\n            }\n            parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n        }\n    };\n    Shape.prototype.updImgRatioForActObj = function () {\n        var parent = this.parent;\n        parent.activeObj.imageRatio = { startX: ((parent.activeObj.activePoint.startX - parent.img.destLeft) /\n                parent.img.destWidth),\n            startY: ((parent.activeObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n            endX: ((parent.activeObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n            endY: ((parent.activeObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n            width: parent.img.destWidth / parent.activeObj.activePoint.width, height: parent.img.destHeight /\n                parent.activeObj.activePoint.height };\n        if (parent.activeObj.rotationCirclePointColl) {\n            parent.activeObj.rotationCirclePointColl.ratioX = (parent.activeObj.rotationCirclePointColl.x -\n                parent.img.destLeft) / parent.img.destWidth;\n            parent.activeObj.rotationCirclePointColl.ratioY = (parent.activeObj.rotationCirclePointColl.y -\n                parent.img.destTop) / parent.img.destHeight;\n        }\n        if (parent.activeObj.shape === 'path') {\n            this.updatePathRatio(parent.activeObj);\n        }\n        else if (parent.activeObj.shape === 'arrow') {\n            this.updateArrowRatio(parent.activeObj);\n        }\n    };\n    Shape.prototype.zoomObjColl = function (preventApply) {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.activePoint.startX = (currObj.imageRatio.startX * parent.img.destWidth) + parent.img.destLeft;\n            currObj.activePoint.startY = (currObj.imageRatio.startY * parent.img.destHeight) + parent.img.destTop;\n            currObj.activePoint.endX = (currObj.imageRatio.endX * parent.img.destWidth) + parent.img.destLeft;\n            currObj.activePoint.endY = (currObj.imageRatio.endY * parent.img.destHeight) + parent.img.destTop;\n            currObj = this.updateWidthHeight(currObj);\n            if (currObj.shape === 'text') {\n                this.updateFontSize(currObj);\n            }\n            else if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                for (var n = 0, len_1 = currObj.pointColl.length; n < len_1; n++) {\n                    currObj.pointColl[n].ratioX =\n                        (currObj.pointColl[n].x - parent.img.destLeft) / parent.img.destWidth;\n                    currObj.pointColl[n].ratioY =\n                        (currObj.pointColl[n].y - parent.img.destTop) / parent.img.destHeight;\n                }\n                if (currObj.shape === 'arrow') {\n                    this.updateArrowSize(currObj);\n                }\n            }\n            else if (currObj.shape === 'path') {\n                for (var l = 0, len_2 = currObj.pointColl.length; l < len_2; l++) {\n                    currObj.pointColl[l].x = (currObj.pointColl[l].ratioX * parent.img.destWidth)\n                        + parent.img.destLeft;\n                    currObj.pointColl[l].y = (currObj.pointColl[l].ratioY * parent.img.destHeight) +\n                        parent.img.destTop;\n                }\n                this.updatePathRatio(currObj);\n            }\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                    obj: currObj } });\n            if (isNullOrUndefined(preventApply)) {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.apply(currObj.shape, currObj);\n                this.refreshActiveObj();\n                this.lowerContext.filter = temp;\n                parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n            }\n            if (currObj.shape !== 'line' && currObj.shape !== 'arrow' && currObj.shape !== 'path' && currObj.rotatedAngle !== 0) {\n                this.setPointCollForShapeRotation(currObj);\n                currObj.rotationCirclePoint.x =\n                    (currObj.rotationCirclePoint.ratioX * parent.img.destWidth) + parent.img.destLeft;\n                currObj.rotationCirclePoint.y =\n                    (currObj.rotationCirclePoint.ratioY * parent.img.destHeight) + parent.img.destTop;\n                currObj.rotationCirclePointColl.x =\n                    (currObj.rotationCirclePointColl.ratioX * parent.img.destWidth) +\n                        parent.img.destLeft;\n                currObj.rotationCirclePointColl.y =\n                    (currObj.rotationCirclePointColl.ratioY * parent.img.destHeight) +\n                        parent.img.destTop;\n            }\n        }\n    };\n    Shape.prototype.redrawObj = function (degree) {\n        var parent = this.parent;\n        var isShape = false;\n        if (this.parent.objColl.length > 0) {\n            if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n                degree === 'horizontalVertical' || degree === 'verticalHorizontal') {\n                this.updateCurrentActiveObjPoint(degree.toLowerCase());\n            }\n            else if (typeof (degree) === 'number') {\n                this.updateCurrentActiveObjPoint(degree);\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                    'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var splitWords = parent.objColl[i].shape.split('-');\n                    if (splitWords[0] !== 'crop') {\n                        this.apply(parent.objColl[i].shape, parent.objColl[i]);\n                        isShape = true;\n                    }\n                }\n                if (isShape) {\n                    parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n                }\n                this.lowerContext.filter = tempFilter;\n            }\n        }\n    };\n    Shape.prototype.updateCurrentActiveObjPoint = function (degree) {\n        var parent = this.parent;\n        var currActObjIndex;\n        for (var index = 0, len = parent.objColl.length; index < len; index++) {\n            var currObj = parent.objColl[index];\n            if (parent.activeObj.shape === currObj.shape &&\n                parent.activeObj.activePoint.startX === currObj.activePoint.startX &&\n                parent.activeObj.activePoint.startY === currObj.activePoint.startY &&\n                parent.activeObj.activePoint.endX === currObj.activePoint.endX &&\n                parent.activeObj.activePoint.endY === currObj.activePoint.endY &&\n                parent.activeObj.currIndex === currObj.currIndex) {\n                currActObjIndex = index;\n                break;\n            }\n        }\n        if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n            degree === 'horizontalvertical' || degree === 'verticalhorizontal') {\n            if (degree === 'horizontal' || degree === 'Horizontal') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) - (currObj.activePoint.startX -\n                                parent.img.destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.startX = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                                currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'horizontal');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = currObj.rotatedAngle + (Math.PI - currObj.rotatedAngle) * 2;\n                            if (currObj.rotationCirclePointColl.x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = (parent.img.destLeft + parent.img.destWidth) -\n                                    (currObj.rotationCirclePointColl.x - parent.img.destLeft);\n                            }\n                            else if (currObj.rotationCirclePointColl.x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                                currObj.rotationCirclePointColl.x = parent.img.destLeft +\n                                    (parent.img.destLeft + parent.img.destWidth - currObj.rotationCirclePointColl.x);\n                            }\n                            currObj.rotationCirclePointColl.ratioX =\n                                (currObj.rotationCirclePointColl.x - parent.img.destLeft) / parent.img.destWidth;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'vertical' || degree === 'Vertical') {\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startY <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            currObj.activePoint.endY = (parent.img.destTop + parent.img.destHeight) -\n                                (currObj.activePoint.startY - parent.img.destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY - currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= this.parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = parent.img.destTop + (parent.img.destTop +\n                                parent.img.destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY +\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                                    obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' ||\n                            currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, 'vertical');\n                        }\n                        else if (currObj.rotatedAngle !== 0) {\n                            currObj.rotatedAngle = -currObj.rotatedAngle;\n                            if (currObj.rotationCirclePointColl.y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = (parent.img.destTop + parent.img.destHeight) -\n                                    (currObj.rotationCirclePointColl.y - parent.img.destTop);\n                            }\n                            else if (currObj.rotationCirclePointColl.y >= parent.img.destTop +\n                                (parent.img.destHeight / 2)) {\n                                currObj.rotationCirclePointColl.y = parent.img.destTop + (parent.img.destTop +\n                                    parent.img.destHeight - currObj.rotationCirclePointColl.y);\n                            }\n                            currObj.rotationCirclePointColl.ratioY =\n                                (currObj.rotationCirclePointColl.y - parent.img.destTop) / parent.img.destHeight;\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            else if (degree === 'verticalhorizontal' || degree === 'horizontalvertical') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    var currObj = parent.objColl[i];\n                    if (currObj.shapeFlip !== parent.transform.currFlipState) {\n                        if (currObj.activePoint.startX <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) - (currObj.activePoint.startX -\n                                parent.img.destLeft);\n                            currObj.activePoint.startX = currObj.activePoint.endX - currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startX >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                            currObj.activePoint.startX = parent.img.destLeft + (parent.img.destLeft +\n                                parent.img.destWidth - currObj.activePoint.endX);\n                            currObj.activePoint.endX = currObj.activePoint.startX + currObj.activePoint.width;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.activePoint.startY <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                            currObj.activePoint.endY = (parent.img.destTop + parent.img.destHeight) -\n                                (currObj.activePoint.startY - parent.img.destTop);\n                            currObj.activePoint.startY = currObj.activePoint.endY -\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        else if (currObj.activePoint.startY >= this.parent.lowerCanvas.height / 2) {\n                            currObj.activePoint.startY = parent.img.destTop + (parent.img.destTop +\n                                parent.img.destHeight - currObj.activePoint.endY);\n                            currObj.activePoint.endY = currObj.activePoint.startY +\n                                currObj.activePoint.height;\n                            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint, obj: currObj } });\n                        }\n                        if (currObj.shape === 'line' || currObj.shape === 'arrow' || currObj.shape === 'path') {\n                            this.flipLineArrowObj(currObj, degree);\n                        }\n                        currObj.shapeFlip = parent.transform.currFlipState;\n                        currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                            startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                            endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                            endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                            width: parent.img.destWidth / currObj.activePoint.width,\n                            height: parent.img.destHeight / currObj.activePoint.height };\n                    }\n                }\n            }\n            if (currActObjIndex !== undefined) {\n                parent.activeObj = extend({}, parent.objColl[currActObjIndex], {}, true);\n            }\n        }\n        else if (degree === 90) {\n            this.rotateObjColl();\n        }\n        else if (degree === -90) {\n            for (var i = 0; i < 3; i++) {\n                this.rotateObjColl();\n            }\n        }\n        else if (typeof (degree) === 'number') {\n            if (degree > 0) {\n                this.rotateObjColl();\n            }\n            else {\n                for (var i = 0; i < 3; i++) {\n                    this.rotateObjColl();\n                }\n            }\n        }\n    };\n    Shape.prototype.rotateObjColl = function () {\n        var parent = this.parent;\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.activePoint.startY = parent.img.destTop + (parent.img.destHeight * currObj.imageRatio.startX);\n            currObj.activePoint.endY = parent.img.destTop + (parent.img.destHeight * currObj.imageRatio.endX);\n            currObj.activePoint.startX = (parent.img.destLeft + parent.img.destWidth) -\n                (parent.img.destWidth * currObj.imageRatio.endY);\n            currObj.activePoint.endX = (parent.img.destLeft + parent.img.destWidth) -\n                (parent.img.destWidth * currObj.imageRatio.startY);\n            currObj = this.updateWidthHeight(parent.objColl[i]);\n            this.updateFontSize(currObj);\n            if (currObj.shape === 'line' || currObj.shape === 'arrow' ||\n                currObj.shape === 'path') {\n                this.rotateLineArrowObj(currObj);\n                if (currObj.shape === 'arrow') {\n                    this.updateArrowSize(currObj);\n                }\n            }\n            else if (currObj.rotatedAngle !== 0) {\n                currObj.rotationCirclePointColl.y = parent.img.destTop + (parent.img.destHeight * currObj.rotationCirclePointColl.ratioX);\n                currObj.rotationCirclePointColl.x = (parent.img.destLeft + parent.img.destWidth) -\n                    (parent.img.destWidth * currObj.rotationCirclePointColl.ratioY);\n                currObj.rotationCirclePointColl.ratioX = (currObj.rotationCirclePointColl.x\n                    - parent.img.destLeft) / parent.img.destWidth;\n                currObj.rotationCirclePointColl.ratioY = (currObj.rotationCirclePointColl.y\n                    - parent.img.destTop) / parent.img.destHeight;\n            }\n        }\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.objColl[i].activePoint, obj: parent.objColl[i] } });\n        }\n        // Update current image ratio for all objects\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var currObj = parent.objColl[i];\n            currObj.imageRatio = { startX: ((currObj.activePoint.startX - parent.img.destLeft) / parent.img.destWidth),\n                startY: ((currObj.activePoint.startY - parent.img.destTop) / parent.img.destHeight),\n                endX: ((currObj.activePoint.endX - parent.img.destLeft) / parent.img.destWidth),\n                endY: ((currObj.activePoint.endY - parent.img.destTop) / parent.img.destHeight),\n                width: parent.img.destWidth / currObj.activePoint.width,\n                height: parent.img.destHeight / currObj.activePoint.height };\n        }\n    };\n    Shape.prototype.rotateLineArrowObj = function (obj) {\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        var parent = this.parent;\n        if (obj.pointColl.length > 0) {\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].y = parent.img.destTop + (parent.img.destHeight * obj.pointColl[n].ratioX);\n                obj.pointColl[n].x = (parent.img.destLeft + parent.img.destWidth) - (parent.img.destWidth *\n                    obj.pointColl[n].ratioY);\n            }\n            for (var n = 0; n < obj.pointColl.length; n++) {\n                obj.pointColl[n].ratioX = (obj.pointColl[n].x - parent.img.destLeft) / parent.img.destWidth;\n                obj.pointColl[n].ratioY = (obj.pointColl[n].y - parent.img.destTop) / parent.img.destHeight;\n            }\n            var prevPoint = void 0;\n            if (isNullOrUndefined(obj.pointColl[obj.pointColl.length - 2])) {\n                prevPoint = { x: 0, y: 0 };\n            }\n            else {\n                prevPoint = { x: obj.pointColl[obj.pointColl.length - 2].x, y: obj.pointColl[obj.pointColl.length - 2].y };\n            }\n            var diffX = obj.pointColl[obj.pointColl.length - 1].x - prevPoint.x;\n            var diffY = obj.pointColl[obj.pointColl.length - 1].y - prevPoint.y;\n            obj.activePoint.startX = obj.pointColl[0].x;\n            obj.activePoint.startY = obj.pointColl[0].y;\n            obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x + (diffX / 2);\n            obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y + (diffY / 2);\n            obj = this.updateWidthHeight(obj);\n        }\n    };\n    Shape.prototype.flipLineArrowObj = function (obj, value) {\n        if (isNullOrUndefined(obj.pointColl)) {\n            return;\n        }\n        if (value.toLowerCase() === 'horizontal') {\n            this.lineArrowHorizontalFlip(obj);\n        }\n        else if (value.toLowerCase() === 'vertical') {\n            this.lineArrowVerticalFlip(obj);\n        }\n        else {\n            this.lineArrowHorizontalFlip(obj);\n            obj.shapeFlip = '';\n            this.lineArrowVerticalFlip(obj);\n        }\n        obj.activePoint.startX = obj.pointColl[0].x;\n        obj.activePoint.startY = obj.pointColl[0].y;\n        obj.activePoint.endX = obj.pointColl[obj.pointColl.length - 1].x;\n        obj.activePoint.endY = obj.pointColl[obj.pointColl.length - 1].y;\n        if (obj.activePoint.startX > obj.activePoint.endX) {\n            var temp = obj.activePoint.startX;\n            obj.activePoint.startX = obj.activePoint.endX;\n            obj.activePoint.endX = temp;\n            temp = obj.activePoint.startY;\n            obj.activePoint.startY = obj.activePoint.endY;\n            obj.activePoint.endY = temp;\n        }\n    };\n    Shape.prototype.lineArrowHorizontalFlip = function (obj) {\n        var parent = this.parent;\n        // Update flip value for point collection\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.x <= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                    currPoint.x = (parent.img.destLeft + parent.img.destWidth) - (currPoint.x\n                        - parent.img.destLeft);\n                }\n                else if (currPoint.x >= parent.img.destLeft + (parent.img.destWidth / 2)) {\n                    currPoint.x = parent.img.destLeft + (parent.img.destLeft + parent.img.destWidth -\n                        currPoint.x);\n                }\n                currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n                currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n            }\n            if (obj.shape === 'arrow') {\n                var value = obj.start;\n                obj.start = obj.end;\n                obj.end = value;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.lineArrowVerticalFlip = function (obj) {\n        var parent = this.parent;\n        // Update flip value for point collection\n        if (obj.shapeFlip !== parent.transform.currFlipState) {\n            for (var l = 0, len = obj.pointColl.length; l < len; l++) {\n                var currPoint = obj.pointColl[l];\n                if (currPoint.y <= parent.img.destTop + (parent.img.destHeight / 2)) {\n                    currPoint.y = (parent.img.destTop + parent.img.destHeight) -\n                        (currPoint.y - parent.img.destTop);\n                }\n                else if (currPoint.y >= parent.img.destTop + (parent.img.destHeight / 2)) {\n                    currPoint.y = parent.img.destTop + (parent.img.destTop + parent.img.destHeight -\n                        currPoint.y);\n                }\n                currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n                currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n            }\n            obj.shapeFlip = parent.transform.currFlipState;\n        }\n    };\n    Shape.prototype.getRotDegOfShape = function (obj) {\n        var degree;\n        if (obj.shapeDegree === 0) {\n            degree = this.parent.transform.degree;\n        }\n        else {\n            degree = this.parent.transform.degree - obj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        return degree;\n    };\n    Shape.prototype.renderTextArea = function (x, y, actObj) {\n        var parent = this.parent;\n        var degree = this.getRotDegOfShape(parent.activeObj);\n        this.transformTextArea();\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_duplicate')) {\n            parent.element.querySelector('#' + parent.element.id + '_duplicate').classList.add('e-disabled');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_remove')) {\n            parent.element.querySelector('#' + parent.element.id + '_remove').classList.add('e-disabled');\n        }\n        if (parent.element.querySelector('#' + parent.element.id + '_editText')) {\n            parent.element.querySelector('#' + parent.element.id + '_editText').classList.add('e-disabled');\n        }\n        parent.textArea.style.display = 'block';\n        parent.textArea.style.left = x + 'px';\n        parent.textArea.style.top = y + 'px';\n        parent.textArea.style.fontFamily = actObj.textSettings.fontFamily;\n        parent.textArea.style.fontSize = actObj.textSettings.fontSize + 'px';\n        parent.textArea.style.color = actObj.strokeSettings.strokeColor;\n        parent.textArea.style.fontWeight = actObj.textSettings.bold ? 'bold' : 'normal';\n        parent.textArea.style.fontStyle = actObj.textSettings.italic ? 'italic' : 'normal';\n        parent.textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        parent.textArea.value = actObj.keyHistory;\n        parent.textArea.style.overflow = 'hidden';\n        parent.textArea.style.width = 'auto';\n        parent.textArea.style.height = 'auto';\n        parent.textArea.focus();\n        var zoomFactor = parent.transform.zoomFactor;\n        var _a = actObj.activePoint, width = _a.width, height = _a.height;\n        if (degree % 90 === 0 && degree % 180 !== 0 && degree !== 0) {\n            parent.textArea.style.width = (zoomFactor === 0 ? height : height) + 'px';\n            parent.textArea.style.height = (zoomFactor === 0 ? width : width) + 'px';\n        }\n        else {\n            parent.textArea.style.width = (zoomFactor === 0 ? width : width) + 'px';\n            parent.textArea.style.height = (zoomFactor === 0 ? height : height) + 'px';\n        }\n        this.setTextBoxWidth();\n        var obj = { flipColl: null };\n        parent.notify('transform', { prop: 'getFlipColl', onPropertyChange: false, value: { obj: obj } });\n        if (obj['flipColl'].length <= 1) {\n            this.setTextBoxHeight();\n        }\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destTop +\n                parent.img.destHeight) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        else {\n            if (parseFloat(parent.textArea.style.left) + parseFloat(parent.textArea.style.width) > parent.img.destLeft +\n                parent.img.destWidth) {\n                this.alignTextAreaIntoCanvas();\n            }\n        }\n        parent.notify('selection', { prop: 'clearUpperCanvas', onPropertyChange: false });\n    };\n    Shape.prototype.setTextBoxWidth = function (e) {\n        var parent = this.parent;\n        var text = this.getMaxText(true);\n        if (parent.textArea.style.display === 'block') {\n            this.updateFontStyles(true);\n        }\n        else {\n            this.updateFontStyles();\n        }\n        var textAreaWidth = (this.upperContext.measureText(text).width + (parseFloat(parent.textArea.style.fontSize) / 2));\n        var letterWidth = e ? this.upperContext.measureText(String.fromCharCode(e.which)).width : 0;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.shapeFlip !== parent.transform.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = parent.transform.currFlipState;\n        }\n        if ((e && parseFloat(parent.textArea.style.width) < (textAreaWidth + letterWidth)) || isNullOrUndefined(e)) {\n            if (degree === 0) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(parent.textArea.style.left) - parent.img.destLeft) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                    parent.img.destLeft)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 90) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(parent.textArea.style.top) - parent.img.destTop) - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else if ((parent.img.destHeight - (parseFloat(parent.textArea.style.top) -\n                    parent.img.destTop)) > (textAreaWidth + letterWidth)) {\n                    parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                }\n            }\n            else if (degree === 180) {\n                var textAreaLeft = parseFloat(parent.textArea.style.left);\n                var destLeft = parent.img.destLeft;\n                if (flip.toLowerCase() === 'horizontal') {\n                    var remainingWidth = parent.img.destWidth - (textAreaLeft - destLeft);\n                    if (remainingWidth > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToLeft = textAreaLeft - destLeft;\n                    if (distanceToLeft - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 270) {\n                var textAreaTop = parseFloat(parent.textArea.style.top);\n                var destTop = parent.img.destTop;\n                if (flip.toLowerCase() === 'vertical') {\n                    var remainingHeight = parent.img.destHeight - (textAreaTop - destTop);\n                    if (remainingHeight > textAreaWidth + letterWidth) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    var distanceToTop = textAreaTop - destTop;\n                    if (distanceToTop - textAreaWidth - letterWidth > 0) {\n                        parent.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.setTextBoxHeight = function () {\n        var parent = this.parent;\n        var textAreaTop;\n        var actObj = extend({}, parent.activeObj, {}, true);\n        var flip = '';\n        var degree = this.getRotDegOfShape(actObj);\n        if (actObj.textFlip === parent.transform.currFlipState) {\n            flip = '';\n        }\n        else if (actObj.textFlip === '') {\n            flip = parent.transform.currFlipState;\n        }\n        else {\n            flip = actObj.textFlip;\n        }\n        switch (degree) {\n            case 0:\n                if (flip.toLowerCase() === 'vertical') {\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - (parent.img.destHeight -\n                        parseFloat(parent.textArea.style.top))) + 'px';\n                }\n                else {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                break;\n            case 90:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parent.img.destWidth - (parseFloat(parent.textArea.style.left) -\n                        parent.img.destLeft)) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                break;\n            case 180:\n                if (flip.toLowerCase() === 'vertical') {\n                    textAreaTop = parseFloat(parent.textArea.style.top) - parent.img.destTop;\n                    parent.textArea.style.maxHeight = (parent.img.destHeight - textAreaTop) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.top) - parent.img.destTop) + 'px';\n                }\n                break;\n            case 270:\n                if (flip.toLowerCase() === 'horizontal') {\n                    parent.textArea.style.maxHeight = (parseFloat(parent.textArea.style.left) - parent.img.destLeft) + 'px';\n                }\n                else {\n                    parent.textArea.style.maxHeight = parent.img.destWidth - (parseFloat(parent.textArea.style.left)\n                        - parent.img.destLeft) + 'px';\n                }\n                break;\n        }\n    };\n    Shape.prototype.updatePathRatio = function (obj) {\n        var parent = this.parent;\n        for (var i = 0, len = obj.pointColl.length; i < len; i++) {\n            var currPoint = obj.pointColl[i];\n            currPoint.ratioX = (currPoint.x - parent.img.destLeft) / parent.img.destWidth;\n            currPoint.ratioY = (currPoint.y - parent.img.destTop) / parent.img.destHeight;\n        }\n    };\n    Shape.prototype.stopPathDrawing = function (e, isApply) {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'path') {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] === 'path') {\n                var prevCropObj = extend({}, this.parent.cropObj, {}, true);\n                var object = { currObj: {} };\n                this.parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                var prevObj = object['currObj'];\n                prevObj.objColl = extend([], this.parent.objColl, [], true);\n                prevObj.pointColl = extend([], this.parent.pointColl, [], true);\n                prevObj.afterCropActions = extend([], this.parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                this.parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n                parent.notify('selection', { prop: 'setCurrentDrawingShape', value: { value: '' } });\n                parent.currObjType.isDragging = false;\n                if (e && e.type !== 'touchstart' && isNullOrUndefined(isApply)) {\n                    parent.activeObj.pointColl.pop();\n                }\n                this.updatePathRatio(parent.activeObj);\n                parent.objColl.push(parent.activeObj);\n                parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                parent.objColl.pop();\n                if (e) {\n                    parent.notify('selection', { prop: 'mouseUpEventHandler', value: { e: e } });\n                }\n                parent.notify('draw', { prop: 'setNewPath', value: { bool: true } });\n                if (parent.objColl[parent.objColl.length - 1]) {\n                    parent.selectShape(parent.objColl[parent.objColl.length - 1].currIndex);\n                }\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                }\n                var obj_1 = { shapeSettingsObj: {} };\n                parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj_1 } });\n                var shapeSettings = obj_1['shapeSettingsObj'];\n                var shapeResizingArgs = { action: 'draw-end', previousShapeSettings: shapeSettings };\n                var shapeMovingArgs = { action: 'move', previousShapeSettings: shapeSettings };\n                parent.notify('selection', { prop: 'triggerShapeChange', onPropertyChange: false,\n                    value: { shapeResizingArgs: shapeResizingArgs, shapeMovingArgs: shapeMovingArgs, type: 'mouse-up' } });\n            }\n        }\n    };\n    Shape.prototype.findTextTarget = function (e) {\n        var parent = this.parent;\n        if (parent.activeObj.shape !== 'text') {\n            this.stopPathDrawing(e, null);\n            return;\n        }\n        var x;\n        var y;\n        if (e.type === 'dblclick') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else if (e.type === 'touchstart') {\n            x = e.touches[0].clientX;\n            y = e.touches[0].clientY;\n            parent.notify('selection', { prop: 'setTouchEndPoint', onPropertyChange: false,\n                value: { x: e.touches[0].clientX, y: e.touches[0].clientY } });\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: true } });\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'setPreventZoomBtn', onPropertyChange: false, value: { isPrevent: false } });\n            parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn', 'textAreaClicked');\n        }\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            var bbox = this.parent.lowerCanvas.getBoundingClientRect();\n            x -= bbox.left;\n            y -= bbox.top;\n            var flip = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.textFlip === '') {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            else {\n                if (parent.activeObj.textFlip === parent.transform.currFlipState) {\n                    flip = '';\n                }\n                else if (parent.transform.currFlipState === '') {\n                    flip = parent.activeObj.textFlip;\n                }\n                else {\n                    flip = parent.transform.currFlipState;\n                }\n            }\n            var temp = void 0;\n            if (parent.textArea.style.display === 'none') {\n                temp = extend({}, parent.activeObj, {}, true);\n                for (var i = 0; i < parent.objColl.length; i++) {\n                    if (JSON.stringify(parent.activeObj) === JSON.stringify(parent.objColl[i])) {\n                        parent.objColl.splice(i, 1);\n                    }\n                }\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                this.lowerContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                parent.activeObj = temp;\n                this.updateFontStyles();\n                var actObj = extend({}, parent.activeObj, {}, true);\n                if (x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) {\n                    this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n                    if (actObj.flipObjColl.length === 4) {\n                        actObj.flipObjColl = [];\n                        flip = '';\n                        actObj.shapeFlip = '';\n                    }\n                    if (flip === '' && actObj.flipObjColl.length > 1) {\n                        flip = actObj.flipObjColl[actObj.flipObjColl.length - 1];\n                    }\n                    if (actObj.flipObjColl.length <= 1) {\n                        var points = this.setTextBoxPos(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    else {\n                        var points = this.setTextBoxPoints(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    if (parent.activeObj.rotatedAngle !== 0) {\n                        x = parent.activeObj.horTopLinePointColl[0].x;\n                        y = parent.activeObj.horTopLinePointColl[0].y;\n                    }\n                    this.renderTextArea(x, y, actObj);\n                }\n                else {\n                    this.applyActObj();\n                }\n            }\n        }\n        else if (parent.textArea.style.display === 'block' && this.selectedText() !== '' && e.type === 'mousedown') {\n            var temp = parent.textArea.value;\n            parent.textArea.value += 'a';\n            parent.textArea.value = temp;\n        }\n        else if (parent.textArea.style.display === 'none') {\n            parent.textArea.style.display = 'block';\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Shape.prototype.fileChanged = function (e) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var filesData = e.target.files[0];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var fileData = filesData;\n        var fileExtension = fileData.name && fileData.name.split('.')[1].toLowerCase();\n        if (fileExtension && ['jpg', 'jpeg', 'png', 'svg'].indexOf(fileExtension) === -1) {\n            this.refreshActiveObj();\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/tslint/config, @typescript-eslint/no-explicit-any\n        var URL = window.URL;\n        var url = URL.createObjectURL(e.target.files[0]);\n        this.onLoadImgShape(null, null, null, null, url.toString(), true);\n        if (!isBlazor()) {\n            document.getElementById(this.parent.element.id + '_fileUpload').value = '';\n        }\n    };\n    Shape.prototype.onLoadImgShape = function (x, y, width, height, url, isSelect, degree, isAspectRatio) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (typeof (url) === 'string') {\n            this.shapeImg.src = url;\n        }\n        else {\n            this.parent.inMemoryCanvas.width = url.width;\n            this.parent.inMemoryCanvas.height = url.height;\n            this.parent.inMemoryCanvas.getContext('2d').putImageData(url, 0, 0);\n            this.shapeImg.src = this.parent.inMemoryCanvas.toDataURL();\n        }\n        this.prevObjColl();\n        this.parent.activeObj.shape = 'image';\n        this.initShapeProps();\n        this.shapeImg.onload = function () {\n            proxy.upperContext.drawImage(proxy.shapeImg, 0, 0, proxy.shapeImg.width, proxy.shapeImg.height);\n            proxy.updateImgCanvas(isSelect, x, y, width, height, degree, isAspectRatio);\n        };\n    };\n    Shape.prototype.updateImgCanvas = function (isSelect, x, y, width, height, degree, isAspectRatio) {\n        var _this = this;\n        var parent = this.parent;\n        parent.activeObj.imageElement = this.shapeImg;\n        parent.activeObj.imageCanvas = parent.createElement('canvas');\n        var dimObj = { width: 0, height: 0 };\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: dimObj, isImgShape: null } });\n        if (width && height) {\n            if (isAspectRatio) {\n                var obj_2 = { ratio: null };\n                parent.notify('selection', { prop: 'findImageRatio', onPropertyChange: false,\n                    value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: obj_2 } });\n                dimObj = this.resizeImage(width, obj_2['ratio']);\n            }\n            else {\n                dimObj = { width: width, height: height };\n            }\n        }\n        this.updateObj(dimObj, x, y);\n        parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: parent.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n        parent.notify('transform', { prop: 'calcMaxDimension', onPropertyChange: false,\n            value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: dimObj, isImgShape: true } });\n        if (width && height) {\n            if (isAspectRatio) {\n                var obj_3 = { ratio: null };\n                parent.notify('selection', { prop: 'findImageRatio', onPropertyChange: false,\n                    value: { width: this.shapeImg.width, height: this.shapeImg.height, obj: obj_3 } });\n                dimObj = this.resizeImage(width, obj_3['ratio']);\n            }\n            else {\n                dimObj = { width: width, height: height };\n            }\n        }\n        this.updateObj(dimObj, x, y);\n        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        this.shapeImg = null;\n        if (degree) {\n            parent.activeObj.rotatedAngle = degree * (Math.PI / 180);\n            parent.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: parent.activeObj } });\n        }\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n            currentShapeSettings: shapeSettings };\n        if (isBlazor() && parent.events && parent.events.shapeChanging.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'OnShape', shapeChangingArgs).then(function (shapeChangingArgs) {\n                _this.drawShapeImageEvent(shapeChangingArgs, isSelect);\n                if (parent.isPublicMethod) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n                }\n                parent.isPublicMethod = false;\n            });\n        }\n        else {\n            parent.trigger('shapeChanging', shapeChangingArgs);\n            this.drawShapeImageEvent(shapeChangingArgs, isSelect);\n            if (parent.isPublicMethod) {\n                parent.notify('undo-redo', { prop: 'updateUndoRedo', onPropertyChange: false });\n            }\n            parent.isPublicMethod = false;\n        }\n    };\n    Shape.prototype.updateObj = function (dimObj, x, y) {\n        var parent = this.parent;\n        parent.activeObj.activePoint.width = dimObj['width'];\n        parent.activeObj.activePoint.height = dimObj['height'];\n        parent.activeObj.activePoint.startX = x ? x : (parent.lowerCanvas.width / 2) - (dimObj['width'] / 2);\n        parent.activeObj.activePoint.startY = y ? y : (parent.lowerCanvas.height / 2) - (dimObj['height'] / 2);\n        parent.activeObj.activePoint.endX = parent.activeObj.activePoint.startX + dimObj['width'];\n        parent.activeObj.activePoint.endY = parent.activeObj.activePoint.startY + dimObj['height'];\n    };\n    Shape.prototype.resizeImage = function (newWidth, aspectRatio) {\n        var aspectRatioArray = aspectRatio.split(':');\n        var aspectRatioWidth = parseInt(aspectRatioArray[0], 10);\n        var aspectRatioHeight = parseInt(aspectRatioArray[1], 10);\n        var newHeight = Math.round((newWidth * aspectRatioHeight) / aspectRatioWidth);\n        return { width: newWidth, height: newHeight };\n    };\n    Shape.prototype.setTextBoxPos = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        switch (degree) {\n            case 0:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                break;\n            case 90:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                break;\n            case 180:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                break;\n            case 270:\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = actObj.activePoint.endX;\n                    point.y = actObj.activePoint.endY;\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.startY;\n                }\n                else {\n                    point.x = actObj.activePoint.startX;\n                    point.y = actObj.activePoint.endY;\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.setTextBoxPoints = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        switch (degree) {\n            case 0:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                break;\n            case 90:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                break;\n            case 180:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                break;\n            case 270:\n                if (actObj.flipObjColl[0] && actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.startX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                }\n                else {\n                    if (flip.toLowerCase() === 'horizontal') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.startY);\n                    }\n                    else if (flip.toLowerCase() === 'vertical') {\n                        point.x = (actObj.activePoint.endX);\n                        point.y = (actObj.activePoint.endY);\n                    }\n                }\n                break;\n        }\n        return point;\n    };\n    Shape.prototype.selectedText = function () {\n        var start = this.parent.textArea.selectionStart;\n        var finish = this.parent.textArea.selectionEnd;\n        return this.parent.textArea.value.substring(start, finish);\n    };\n    Shape.prototype.panObjColl = function (xDiff, yDiff, panRegion) {\n        var parent = this.parent;\n        if (parent.objColl.length > 0) {\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var currObj = parent.objColl[i];\n                if (panRegion === '' || panRegion === 'vertical') {\n                    currObj.activePoint.startX += xDiff;\n                    currObj.activePoint.endX += xDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.x += xDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0, len_3 = currObj.pointColl.length; l < len_3; l++) {\n                            currObj.pointColl[l].x += xDiff;\n                        }\n                    }\n                }\n                else {\n                    currObj.activePoint.startX -= xDiff;\n                    currObj.activePoint.endX -= xDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.x -= xDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0, len_4 = currObj.pointColl.length; l < len_4; l++) {\n                            currObj.pointColl[l].x -= xDiff;\n                        }\n                    }\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    currObj.activePoint.startY += yDiff;\n                    currObj.activePoint.endY += yDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.y += yDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0; l < currObj.pointColl.length; l++) {\n                            currObj.pointColl[l].y += yDiff;\n                        }\n                    }\n                }\n                else {\n                    currObj.activePoint.startY -= yDiff;\n                    currObj.activePoint.endY -= yDiff;\n                    if (currObj.rotationCirclePointColl) {\n                        currObj.rotationCirclePointColl.y -= yDiff;\n                    }\n                    if (currObj.shape === 'path') {\n                        for (var l = 0; l < currObj.pointColl.length; l++) {\n                            currObj.pointColl[l].y -= yDiff;\n                        }\n                    }\n                }\n                currObj = this.updateWidthHeight(currObj);\n                parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: currObj.activePoint,\n                        obj: currObj } });\n                if (currObj.shape === 'line' || currObj.shape === 'arrow') {\n                    currObj.pointColl = this.getLinePoints(currObj.activePoint.startX, currObj.activePoint.startY, currObj.activePoint.endX, currObj.activePoint.endY);\n                    for (var j = 0, len_5 = currObj.pointColl.length; j < len_5; j++) {\n                        currObj.pointColl[j].ratioX =\n                            (currObj.pointColl[j].x - parent.img.destLeft) / parent.img.destWidth;\n                        currObj.pointColl[j].ratioY =\n                            (currObj.pointColl[j].y - parent.img.destTop) / parent.img.destHeight;\n                    }\n                }\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.apply(currObj.shape, currObj);\n                this.lowerContext.filter = temp;\n                this.refreshActiveObj();\n            }\n            parent.notify('draw', { prop: 'applyFrame', value: { ctx: this.lowerContext, frame: parent.frameObj.type, preventImg: true } });\n        }\n    };\n    Shape.prototype.updateFontStyles = function (isTextBox) {\n        var parent = this.parent;\n        this.upperContext.strokeStyle = parent.activeObj.strokeSettings.strokeColor;\n        this.upperContext.fillStyle = parent.activeObj.strokeSettings.strokeColor;\n        var textStyle = '';\n        if (parent.activeObj.textSettings.bold) {\n            textStyle = 'bold ';\n        }\n        if (parent.activeObj.textSettings.italic) {\n            textStyle = 'italic ';\n        }\n        if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n            textStyle = 'italic bold ';\n        }\n        var fontSize = isTextBox ? parseFloat(parent.textArea.style.fontSize) : parent.activeObj.textSettings.fontSize;\n        var fontFamily = parent.textArea.style.display === 'block' ? parent.textArea.style.fontFamily : parent.activeObj.textSettings.fontFamily;\n        this.upperContext.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n    };\n    Shape.prototype.applyFontStyle = function (item) {\n        var parent = this.parent;\n        var obj = { shapeSettingsObj: {} };\n        parent.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        this.pushActItemIntoObj();\n        var objColl = extend([], parent.objColl, [], true);\n        parent.objColl.pop();\n        if (parent.textArea.style.display === 'none') {\n            this.updateFontRatio(parent.activeObj);\n        }\n        else {\n            this.updateFontRatio(parent.activeObj, true);\n        }\n        switch (item) {\n            case 'default':\n                this.updateFontStyle(item, objColl, 'normal', 'normal');\n                break;\n            case 'bold':\n                this.updateFontStyle(item, objColl, 'bold', 'normal');\n                break;\n            case 'italic':\n                this.updateFontStyle(item, objColl, 'normal', 'italic');\n                break;\n            case 'bolditalic':\n                this.updateFontStyle(item, objColl, 'bold', 'italic');\n                break;\n        }\n        var shapeChangedArgs = { action: 'font-style', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontStyle = [item];\n        parent.triggerShapeChanged(shapeChangedArgs);\n    };\n    Shape.prototype.updateFontStyle = function (item, objColl, fontWeight, fontStyle) {\n        var parent = this.parent;\n        if (parent.textArea.style.display === 'block') {\n            var width = this.getTextAreaWidth(item);\n            parent.textArea.style.width = width + 'px';\n            parent.textArea.style.fontWeight = fontWeight;\n            parent.textArea.style.fontStyle = fontStyle;\n            this.updateObjColl(item, objColl);\n        }\n        else {\n            this.textSettings.bold = parent.activeObj.textSettings.bold = fontWeight === 'normal' ? false : true;\n            this.textSettings.italic = parent.activeObj.textSettings.italic = fontStyle === 'normal' ? false : true;\n            this.redrawText();\n            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n        }\n    };\n    Shape.prototype.updateArrowRatio = function (obj) {\n        var parent = this.parent;\n        var object = { arrowDimension: null };\n        parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        if (Math.abs(obj.activePoint.width) > Math.abs(obj.activePoint.height)) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_1 = dimensions; _i < dimensions_1.length; _i++) {\n            dimension = dimensions_1[_i];\n            var ratioX = length / object['arrowDimension'][dimension]['width'];\n            var ratioY = length / object['arrowDimension'][dimension]['height'];\n            object['arrowDimension'][dimension]['ratioX'] = ratioX;\n            object['arrowDimension'][dimension]['ratioY'] = ratioY;\n        }\n    };\n    Shape.prototype.updateArrowSize = function (obj) {\n        var object = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: object } });\n        var length;\n        if (Math.abs(obj.activePoint.width) > Math.abs(obj.activePoint.height)) {\n            length = Math.abs(obj.activePoint.width);\n        }\n        else {\n            length = Math.abs(obj.activePoint.height);\n        }\n        var dimension;\n        var dimensions = ['bar', 'arrow', 'arrowSolid', 'circle', 'square'];\n        for (var _i = 0, dimensions_2 = dimensions; _i < dimensions_2.length; _i++) {\n            dimension = dimensions_2[_i];\n            var ratioX = object['arrowDimension'][dimension]['ratioX'];\n            var ratioY = object['arrowDimension'][dimension]['ratioY'];\n            object['arrowDimension'][dimension]['width'] = length / ratioX;\n            object['arrowDimension'][dimension]['height'] = length / ratioY;\n        }\n    };\n    Shape.prototype.updateFontRatio = function (obj, isTextArea) {\n        var parent = this.parent;\n        var text = this.getMaxText(isTextArea);\n        var width = this.upperContext.measureText(text).width +\n            parent.activeObj.textSettings.fontSize * 0.5;\n        var height = (parent.activeObj.textSettings.fontSize + parent.activeObj.textSettings.fontSize * 0.25);\n        var degree = this.getRotDegOfShape(obj);\n        if (isNullOrUndefined(isTextArea)) {\n            if (degree === 0 || Math.abs(degree) === 180) {\n                obj.textSettings.fontRatio = width / obj.textSettings.fontSize;\n            }\n            else {\n                obj.textSettings.fontRatio = height / obj.textSettings.fontSize;\n            }\n        }\n        else if (isTextArea) {\n            obj.textSettings.fontRatio = width / parseFloat(parent.textArea.style.fontSize);\n        }\n    };\n    Shape.prototype.updateFontSize = function (obj) {\n        var degree = this.getRotDegOfShape(obj);\n        if (degree === 0 || Math.abs(degree) === 180) {\n            obj.textSettings.fontSize = (obj.activePoint.width / obj.textSettings.fontRatio);\n        }\n        else {\n            obj.textSettings.fontSize = (obj.activePoint.height / obj.textSettings.fontRatio);\n        }\n    };\n    Shape.prototype.updateObjColl = function (item, objColl) {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = objColl;\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        parent.objColl.push(parent.activeObj);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        parent.objColl.pop();\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n    };\n    Shape.prototype.pushActItemIntoObj = function () {\n        if (this.parent.textArea.style.display === 'none') {\n            this.parent.objColl.push(this.parent.activeObj);\n        }\n        else {\n            var temp = extend({}, this.parent.activeObj, {}, true);\n            this.parent.notify('selection', { prop: 'setTextBoxStylesToActObj', onPropertyChange: false });\n            this.parent.objColl.push(this.parent.activeObj);\n            this.parent.activeObj = temp;\n        }\n    };\n    Shape.prototype.clearActObj = function () {\n        if (this.parent.textArea.style.display === 'none') {\n            this.refreshActiveObj();\n            this.applyActObj();\n            this.refreshActiveObj();\n            this.parent.currObjType.isCustomCrop = false;\n        }\n    };\n    Shape.prototype.refreshActiveObj = function () {\n        this.parent.activeObj = {};\n        this.parent.activeObj.activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        this.parent.activeObj.triangle = [];\n        this.parent.activeObj.triangleRatio = [];\n        this.parent.activeObj.flipObjColl = [];\n        this.parent.activeObj.strokeSettings = this.strokeSettings;\n        this.parent.activeObj.textSettings = this.textSettings;\n        this.parent.activeObj.rotatedAngle = 0;\n    };\n    Shape.prototype.applyActObj = function (isMouseDown) {\n        var isActObj = false;\n        if (this.parent.activeObj.shape !== undefined && this.parent.activeObj.shape === 'text' && this.parent.activeObj.keyHistory === '') {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.parent.upperCanvas.width, this.parent.upperCanvas.height);\n        }\n        else {\n            var splitWords = void 0;\n            var isCropSelection = false;\n            if (this.parent.activeObj.shape !== undefined) {\n                splitWords = this.parent.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.parent.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (this.parent.activeObj.shape && !isCropSelection && this.parent.activeObj.shape !== 'shape') {\n                for (var i = 0; i < this.parent.objColl.length; i++) {\n                    if (JSON.stringify(this.parent.activeObj) === JSON.stringify(this.parent.objColl[i])) {\n                        isActObj = true;\n                        break;\n                    }\n                }\n                if (!isActObj) {\n                    if (isNullOrUndefined(this.parent.activeObj.currIndex)) {\n                        this.parent.activeObj.currIndex = 'shape_' + (this.parent.objColl.length + 1);\n                    }\n                    this.updImgRatioForActObj();\n                    var splitWords_1 = this.parent.activeObj.currIndex.split('_');\n                    var tempObjColl = this.parent.objColl.splice(0, parseInt(splitWords_1[1], 10) - 1);\n                    tempObjColl.push(extend({}, this.parent.activeObj, {}, true));\n                    for (var i = 0; i < this.parent.objColl.length; i++) {\n                        tempObjColl.push(this.parent.objColl[i]);\n                    }\n                    this.parent.objColl = tempObjColl;\n                    tempObjColl = [];\n                    this.refreshActiveObj();\n                    this.lowerContext.clearRect(0, 0, this.parent.lowerCanvas.width, this.parent.lowerCanvas.height);\n                    this.parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n                    this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                    this.parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n                    this.parent.currObjType.shape = '';\n                    this.refreshActiveObj();\n                    if (this.parent.isCircleCrop) {\n                        this.parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                            value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                    }\n                    if (!isBlazor()) {\n                        this.parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    else {\n                        this.parent.updateToolbar(this.parent.element, 'destroyQuickAccessToolbar');\n                    }\n                    if (isNullOrUndefined(isMouseDown)) {\n                        this.parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                        this.parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false, value: { prevActObj: null } });\n                    }\n                }\n            }\n        }\n    };\n    Shape.prototype.alignTextAreaIntoCanvas = function () {\n        var parent = this.parent;\n        var letters = parent.textArea.value;\n        parent.textArea.value = '';\n        for (var i = 0, len = letters.length; i < len; i++) {\n            parent.textArea.value += letters[i];\n            parent.textArea.style.height = 'auto';\n            parent.textArea.style.height = parent.textArea.scrollHeight + 'px';\n            this.setTextBoxWidth();\n        }\n    };\n    Shape.prototype.transformTextArea = function () {\n        var parent = this.parent;\n        if (parent.activeObj.shape === 'text') {\n            parent.textArea.style.transformOrigin = '0 0';\n            var rotatedDegree = parent.activeObj.rotatedAngle * (180 / Math.PI);\n            var scale = '';\n            var degree = this.getRotDegOfShape(parent.activeObj);\n            if (parent.activeObj.flipObjColl.length > 0) {\n                // need to add scale value according to length.\n                for (var i = 0; i < parent.activeObj.flipObjColl.length; i++) {\n                    if (degree !== 0 && degree % 90 === 0 && degree !== 180) {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(1, -1)' :\n                            'scale(-1, 1)';\n                    }\n                    else {\n                        scale += parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(-1, 1)' :\n                            'scale(1, -1)';\n                    }\n                    degree += rotatedDegree;\n                    if (parent.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                    else if (parent.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        parent.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                }\n            }\n            else {\n                degree += rotatedDegree;\n                parent.textArea.style.transform = 'rotate(' + degree + 'deg)';\n            }\n        }\n    };\n    Shape.prototype.getTextAreaWidth = function (item) {\n        var parent = this.parent;\n        var tempBold = parent.activeObj.textSettings.bold;\n        var tempItalic = parent.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                parent.activeObj.textSettings.bold = false;\n                parent.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                parent.activeObj.textSettings.bold = true;\n                parent.activeObj.textSettings.italic = true;\n                break;\n        }\n        this.updateFontStyles();\n        var width;\n        if (parent.textArea.style.display === 'none') {\n            width = this.upperContext.measureText(parent.activeObj.keyHistory).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        else {\n            width = this.upperContext.measureText(parent.textArea.value).width +\n                parent.activeObj.textSettings.fontSize * 0.5;\n        }\n        parent.activeObj.textSettings.bold = tempBold;\n        parent.activeObj.textSettings.italic = tempItalic;\n        return width;\n    };\n    Shape.prototype.getObjDetails = function (obj) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = obj.currIndex;\n        shapeDetails.type = parent.toPascalCase(obj.shape);\n        shapeDetails.startX = obj.activePoint.startX;\n        shapeDetails.startY = obj.activePoint.startY;\n        switch (obj.shape) {\n            case 'rectangle':\n                shapeDetails.width = obj.activePoint.width;\n                shapeDetails.height = obj.activePoint.height;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'ellipse':\n                shapeDetails.radius = obj.activePoint.width / 2;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.fillColor = obj.strokeSettings.fillColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'line':\n            case 'arrow':\n                shapeDetails.length = obj.activePoint.width;\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n            case 'text':\n                shapeDetails.text = obj.keyHistory;\n                shapeDetails.fontSize = obj.textSettings.fontSize;\n                shapeDetails.color = obj.strokeSettings.strokeColor;\n                shapeDetails.fontStyle = [];\n                if (obj.textSettings.bold) {\n                    shapeDetails.fontStyle.push('bold');\n                }\n                if (obj.textSettings.italic) {\n                    shapeDetails.fontStyle.push('italic');\n                }\n                break;\n            case 'path':\n                shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n                shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n                break;\n        }\n        return shapeDetails;\n    };\n    Shape.prototype.getFreehandDrawDetails = function (index) {\n        var parent = this.parent;\n        var shapeDetails = {};\n        shapeDetails.id = parent.pointColl[index].id;\n        shapeDetails.type = ShapeType.FreehandDraw;\n        shapeDetails.points = extend([], parent.pointColl[index].points);\n        shapeDetails.strokeColor = parent.pointColl[index].strokeColor;\n        shapeDetails.strokeWidth = parent.pointColl[index].strokeWidth;\n        return shapeDetails;\n    };\n    Shape.prototype.getShapeSetting = function (id, obj) {\n        var parent = this.parent;\n        var shapeDetails;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj_4;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_4 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                shapeDetails = this.getObjDetails(obj_4);\n            }\n            else if (id.split('_')[0] === 'pen') {\n                shapeDetails = this.getFreehandDrawDetails(parseInt(id.split('_')[1], 10) - 1);\n            }\n        }\n        obj['shapeDetails'] = shapeDetails;\n    };\n    Shape.prototype.getShapeSettings = function (obj) {\n        var parent = this.parent;\n        var shapeDetailsColl = [];\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                var shapeDetails = this.getObjDetails(parent.objColl[i]);\n                shapeDetailsColl.push(shapeDetails);\n            }\n            for (var i = 0; i < parent.freehandCounter; i++) {\n                var shapeDetails = this.getFreehandDrawDetails(i);\n                shapeDetailsColl.push(shapeDetails);\n            }\n        }\n        obj['shapeDetailsColl'] = shapeDetailsColl;\n    };\n    Shape.prototype.isPointsInRange = function (x, y, obj) {\n        var inRange = false;\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y) && x >= this.parent.img.destLeft && y >= this.parent.img.destTop &&\n            x <= this.parent.img.destLeft + this.parent.img.destWidth && y <= this.parent.img.destTop + this.parent.img.destHeight) {\n            inRange = true;\n        }\n        obj['inRange'] = inRange;\n    };\n    Shape.prototype.alignRotateFlipColl = function (collection, isRotateFlipCollection, obj) {\n        collection = this.popForDefaultTransformedState(collection);\n        collection = this.popForDefaultFlipState(collection);\n        collection = this.popForDefaultRotateState(collection);\n        if (collection.length === 0 && isRotateFlipCollection) {\n            this.parent.transform.degree = 0;\n            this.parent.transform.currFlipState = '';\n        }\n        obj['collection'] = collection;\n        return collection;\n    };\n    Shape.prototype.popForDefaultTransformedState = function (collection) {\n        var rotateRight = 0;\n        var rotateleft = 0;\n        var horizontal = 0;\n        var vertical = 0;\n        for (var i = 0; i < collection.length; i++) {\n            if (collection[i] === 90 || collection[i] === 'rotateRight') {\n                rotateRight++;\n                rotateleft = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateRight === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === -90 || collection[i] === 'rotateLeft') {\n                rotateleft++;\n                rotateRight = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateleft === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                || collection[i] === 'horizontalflip') {\n                horizontal++;\n                rotateleft = 0;\n                rotateRight = 0;\n                vertical = 0;\n                if (horizontal === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'vertical' || collection[i] === 'Vertical'\n                || collection[i] === 'verticalflip') {\n                vertical++;\n                horizontal = 0;\n                rotateleft = 0;\n                rotateRight = 0;\n                if (vertical === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultFlipState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 3])) {\n                if ((collection[i] === 'horizontal' || collection[i] === 'Horizontal'\n                    || collection[i] === 'horizontalFlip')\n                    && (collection[i + 1] === 'vertical' || collection[i + 1] === 'Vertical'\n                        || collection[i] === 'verticalFlip') &&\n                    (collection[i + 2] === 'horizontal' || collection[i + 2] === 'Horizontal'\n                        || collection[i] === 'horizontalFlip') &&\n                    (collection[i + 3] === 'vertical' || collection[i + 3] === 'Vertical'\n                        || collection[i] === 'verticalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === 'vertical' || collection[i] === 'Vertical'\n                    || collection[i] === 'verticalFlip')\n                    && (collection[i + 1] === 'horizontal' || collection[i + 1] === 'Horizontal'\n                        || collection[i + 1] === 'horizontalFlip') &&\n                    (collection[i + 2] === 'vertical' || collection[i + 2] === 'Vertical' || collection[i] === 'verticalFlip') &&\n                    (collection[i + 3] === 'horizontal' || collection[i + 3] === 'Horizontal' || collection[i] === 'horizontalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.popForDefaultRotateState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 1])) {\n                if ((collection[i] === 90 || collection[i] === 'rotateRight') &&\n                    (collection[i + 1] === -90 || collection[i] === 'rotateLeft')) {\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === -90 || collection[i] === 'rotateLeft') &&\n                    (collection[i + 1] === 90 || collection[i] === 'rotateRight')) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    Shape.prototype.selectShape = function (id, obj) {\n        var parent = this.parent;\n        var isSelected = false;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj_5;\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        obj_5 = extend({}, parent.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                if (isNullOrUndefined(obj_5)) {\n                    isSelected = false;\n                }\n                else {\n                    isSelected = true;\n                    parent.activeObj = obj_5;\n                    var object = { canvasFilter: null };\n                    parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n                    this.lowerContext.filter = object['canvasFilter'];\n                    parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj } });\n                    if (!isBlazor()) {\n                        if (parent.activeObj.shape === 'text') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'text',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        else if (parent.activeObj.shape === 'pen') {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'pen',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        else {\n                            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, parent.activeObj.shape);\n                        if (parent.activeObj.shape === 'path') {\n                            parent.updateToolbar(this.parent.element, 'path', 'pathQuickAccessToolbar');\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                        }\n                    }\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                var object = { bool: false };\n                parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: object } });\n                if (object['bool']) {\n                    parent.okBtn();\n                }\n                var obj_6 = { isIndex: false };\n                parent.notify('freehand-draw', { prop: 'isFHDIdx', value: { index: parseInt(id.split('_')[1], 10) - 1, obj: obj_6 } });\n                if (obj_6['isIndex']) {\n                    isSelected = true;\n                    parent.notify('freehand-draw', { prop: 'selectFhd', value: { id: id } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                        parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'pen');\n                        parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                    }\n                }\n                else {\n                    isSelected = false;\n                }\n            }\n        }\n        obj['isSelected'] = isSelected;\n    };\n    Shape.prototype.deleteShape = function (id) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                for (var i = 0, len = parent.objColl.length; i < len; i++) {\n                    if (parent.objColl[i].currIndex === id) {\n                        parent.objColl.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                parent.notify('freehand-draw', { prop: 'handle-freehand-draw', value: { id: id } });\n            }\n            var object = { canvasFilter: null };\n            parent.notify('toolbar', { prop: 'getCanvasFilter', onPropertyChange: false, value: { obj: object } });\n            this.lowerContext.filter = object['canvasFilter'];\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'imageLoaded');\n            }\n        }\n    };\n    Shape.prototype.getMaxText = function (isTextBox, text, obj) {\n        if (isNullOrUndefined(text)) {\n            text = isTextBox ? this.parent.textArea.value : this.parent.activeObj.keyHistory;\n        }\n        var maxi;\n        var rows = text.split('\\n');\n        var maxStr = rows[0].length;\n        var maxText = rows[0];\n        for (var i = 1; i < rows.length; i++) {\n            maxi = rows[i].length;\n            if (maxi > maxStr) {\n                maxText = rows[i];\n                maxStr = maxi;\n            }\n        }\n        if (obj) {\n            obj['maxText'] = maxText;\n        }\n        return maxText;\n    };\n    Shape.prototype.getLinePoints = function (x1, y1, x2, y2) {\n        var points = [];\n        var i;\n        var j;\n        if (x1 === x2) {\n            if (y1 < y2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, true);\n            var b = this.getIntercept(i, m);\n            for (var y = i[1]; y <= j[1]; y++) {\n                var x = m * y + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        else {\n            if (x1 < x2) {\n                i = [x1, y1];\n                j = [x2, y2];\n            }\n            else {\n                j = [x1, y1];\n                i = [x2, y2];\n            }\n            var m = this.getSlope(i, j, false);\n            var b = this.getIntercept(i, m);\n            for (var x = i[0]; x <= j[0]; x++) {\n                var y = m * x + b;\n                points.push({ x: x, y: y });\n            }\n        }\n        if (Math.floor(x1) === Math.floor(x2) || (points.length < 10 && (y2 - y1 > 10 || y1 - y2 > 10))) {\n            points = [];\n            var lesserY = Math.min(y1, y2);\n            for (var i_1 = 0; i_1 < Math.abs(Math.floor(y2) - Math.floor(y1)); i_1++) {\n                points.push({ x: x1, y: lesserY + i_1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        else if (Math.floor(y1) === Math.floor(y2) || (points.length < 10 && (x2 - x1 > 10 || x1 - x2 > 10))) {\n            points = [];\n            var lesserX = Math.min(x1, x2);\n            for (var i_2 = 0; i_2 < Math.abs(Math.floor(x2) - Math.floor(x1)); i_2++) {\n                points.push({ x: lesserX + i_2, y: y1 });\n            }\n            if (points.length > 1) {\n                var prev = void 0;\n                if (isNullOrUndefined(points[points.length - 2])) {\n                    prev = { x: 0, y: 0 };\n                }\n                else {\n                    prev = points[points.length - 2];\n                }\n                var diffX = points[points.length - 1]['x'] - prev.x;\n                var diffY = points[points.length - 1]['y'] - prev.y;\n                points.push({ x: points[points.length - 1]['x'] + (diffX / 2), y: points[points.length - 1]['y'] + (diffY / 2) });\n            }\n        }\n        return points;\n    };\n    Shape.prototype.getSlope = function (a, b, isSameAxis) {\n        var slope;\n        if (isSameAxis) {\n            if (a[1] === b[1]) {\n                return null;\n            }\n            slope = (b[0] - a[0]) / (b[1] - a[1]);\n        }\n        else {\n            if (a[0] === b[0]) {\n                return null;\n            }\n            slope = (b[1] - a[1]) / (b[0] - a[0]);\n        }\n        return slope;\n    };\n    Shape.prototype.getIntercept = function (point, getSlope) {\n        if (getSlope === null) {\n            return point[0];\n        }\n        return point[1] - getSlope * point[0];\n    };\n    Shape.prototype.setPointCollForShapeRotation = function (obj) {\n        var center = { x: obj.activePoint.startX + (obj.activePoint.width / 2), y: obj.activePoint.startY +\n                (obj.activePoint.height / 2) };\n        var p1 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.y };\n        var p2 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p3 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        var p4 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        obj.horTopLinePointColl = this.getLinePoints(p1.x, p1.y, p2.x, p2.y);\n        obj.horBottomLinePointColl = this.getLinePoints(p3.x, p3.y, p4.x, p4.y);\n        obj.verLeftLinePointColl = this.getLinePoints(p1.x, p1.y, p3.x, p3.y);\n        obj.verRightLinePointColl = this.getLinePoints(p2.x, p2.y, p4.x, p4.y);\n        obj.verLeftLinePointColl.reverse();\n        obj.verRightLinePointColl.reverse();\n        // Updating ratio for point collection\n        for (var i = 0; i < obj.horTopLinePointColl.length; i++) {\n            obj.horTopLinePointColl[i].ratioX = (obj.horTopLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horTopLinePointColl[i].ratioY = (obj.horTopLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.horBottomLinePointColl.length; i++) {\n            obj.horBottomLinePointColl[i].ratioX = (obj.horBottomLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.horBottomLinePointColl[i].ratioY = (obj.horBottomLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verLeftLinePointColl.length; i++) {\n            obj.verLeftLinePointColl[i].ratioX = (obj.verLeftLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verLeftLinePointColl[i].ratioY = (obj.verLeftLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        for (var i = 0; i < obj.verRightLinePointColl.length; i++) {\n            obj.verRightLinePointColl[i].ratioX = (obj.verRightLinePointColl[i].x -\n                this.parent.img.destLeft) / this.parent.img.destWidth;\n            obj.verRightLinePointColl[i].ratioY = (obj.verRightLinePointColl[i].y -\n                this.parent.img.destTop) / this.parent.img.destHeight;\n        }\n        if (this.parent.upperCanvas.style.cursor !== 'move') {\n            var object = { rotationCirclePoint: null };\n            this.parent.notify('selection', { prop: 'getTransRotationPoint', value: { obj: obj, object: object } });\n            var rotationCirclePoint = object['rotationCirclePoint'];\n            if (rotationCirclePoint) {\n                obj.rotationCirclePointColl = { x: Math.cos(obj.rotatedAngle) * (rotationCirclePoint.x - center.x) -\n                        Math.sin(obj.rotatedAngle) * (rotationCirclePoint.y - center.y) + center.x,\n                    y: Math.sin(obj.rotatedAngle) * (rotationCirclePoint.x - center.x) + Math.cos(obj.rotatedAngle)\n                        * (rotationCirclePoint.y - center.y) + center.y };\n                obj.rotationCirclePointColl.ratioX = (obj.rotationCirclePointColl.x - this.parent.img.destLeft) /\n                    this.parent.img.destWidth;\n                obj.rotationCirclePointColl.ratioY = (obj.rotationCirclePointColl.y - this.parent.img.destTop) /\n                    this.parent.img.destHeight;\n            }\n        }\n    };\n    Shape.prototype.getSquarePointForRotatedShape = function (obj, object) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        var center = { x: obj.activePoint.startX + (obj.activePoint.width / 2), y: obj.activePoint.startY +\n                (obj.activePoint.height / 2) };\n        var p1 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle)\n                * (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p2 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.startY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.startY\n                - center.y) + center.y };\n        var p3 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.startX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.startX - center.x) + Math.cos(obj.rotatedAngle) * (obj.activePoint.endY\n                - center.y) + center.y };\n        var p4 = { x: Math.cos(obj.rotatedAngle) * (obj.activePoint.endX - center.x) - Math.sin(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.x,\n            y: Math.sin(obj.rotatedAngle) * (obj.activePoint.endX - center.x) + Math.cos(obj.rotatedAngle) *\n                (obj.activePoint.endY - center.y) + center.y };\n        point.startX = p1.x;\n        point.startY = p1.y;\n        point.endX = p1.x;\n        point.endY = p1.y;\n        if (point.startX > p2.x) {\n            point.startX = p2.x;\n        }\n        if (point.startX > p3.x) {\n            point.startX = p3.x;\n        }\n        if (point.startX > p4.x) {\n            point.startX = p4.x;\n        }\n        if (point.startY > p2.y) {\n            point.startY = p2.y;\n        }\n        if (point.startY > p3.y) {\n            point.startY = p3.y;\n        }\n        if (point.startY > p4.y) {\n            point.startY = p4.y;\n        }\n        if (point.endX < p2.x) {\n            point.endX = p2.x;\n        }\n        if (point.endX < p3.x) {\n            point.endX = p3.x;\n        }\n        if (point.endX < p4.x) {\n            point.endX = p4.x;\n        }\n        if (point.endY < p2.y) {\n            point.endY = p2.y;\n        }\n        if (point.endY < p3.y) {\n            point.endY = p3.y;\n        }\n        if (point.endY < p4.y) {\n            point.endY = p4.y;\n        }\n        point.width = point.endX - point.startX;\n        point.height = point.endY - point.startY;\n        if (object) {\n            object['activePoint'] = point;\n        }\n        return point;\n    };\n    return Shape;\n}());\nexport { Shape };\n","import { Browser, extend, getComponent, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Direction } from '../index';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar Transform = /** @class */ (function () {\n    function Transform(parent) {\n        this.isReverseFlip = false; // True when rotate method is called from iteration\n        this.disablePan = false; // auto enable / disable pan while zooming\n        this.isReverseRotate = false; // True when rotate method is called from iteration\n        this.flipColl = []; // To store flip order\n        this.prevZoomValue = 1;\n        this.cropDimension = { width: 0, height: 0 };\n        this.isPreventSelect = false;\n        this.preventDownScale = false;\n        this.resizedImgAngle = null;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    Transform.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    Transform.prototype.addEventListener = function () {\n        this.parent.on('transform', this.transform, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    Transform.prototype.removeEventListener = function () {\n        this.parent.off('transform', this.transform);\n        this.parent.off('destroyed', this.destroy);\n    };\n    Transform.prototype.transform = function (args) {\n        this.initTransformPvtVar();\n        switch (args.prop) {\n            case 'rotateImage':\n                this.rotateImage(args.value['degree']);\n                break;\n            case 'flipImage':\n                this.flipImage(args.value['direction']);\n                break;\n            case 'setDestPointsForFlipState':\n                this.setDestPointsForFlipState();\n                break;\n            case 'zoomAction':\n                this.zoomAction(args.value['zoomFactor'], args.value['zoomPoint'], args.value['isResize']);\n                break;\n            case 'disableZoomOutBtn':\n                this.disableZoomOutBtn(args.value['isZoomOut']);\n                break;\n            case 'rotatedFlip':\n                this.rotatedFlip();\n                break;\n            case 'drawPannedImage':\n                this.drawPannedImage(args.value['xDiff'], args.value['yDiff']);\n                break;\n            case 'drawPannImage':\n                this.drawPannImage(args.value['point']);\n                break;\n            case 'performTransformation':\n                this.performTransformation(args.value['text']);\n                break;\n            case 'updateTransform':\n                this.updateTransform(args.value['text']);\n                break;\n            case 'rotatePan':\n                this.rotatePan(args.value['isCropSelection'], args.value['isDefaultZoom']);\n                break;\n            case 'drawRotatedImage':\n                this.drawRotatedImage(args.value['degree']);\n                break;\n            case 'limitPan':\n                this.limitPan();\n                break;\n            case 'updateFlipActiveObj':\n                this.updateFlipActiveObj(args.value['panRegion']);\n                break;\n            case 'resetZoom':\n                this.resetZoom();\n                break;\n            case 'pan':\n                this.pan(args.value['value']);\n                break;\n            case 'zoom':\n                this.zoom(args.value['zoomFactor'], args.value['zoomPoint']);\n                break;\n            case 'setCurrPanRegion':\n                this.setCurrPanRegion(args.value['region'], args.value['type'], args.value['obj']);\n                break;\n            case 'rotate':\n                this.rotate(args.value['degree'], args.value['obj']);\n                break;\n            case 'flip':\n                this.flip(args.value['direction']);\n                break;\n            case 'update':\n                this.update();\n                break;\n            case 'calcMaxDimension':\n                this.calcMaxDimension(args.value['width'], args.value['height'], args.value['obj'], args.value['isImgShape']);\n                break;\n            case 'updatePanPoints':\n                this.updatePanPoints(args.value['panRegion'], args.value['obj']);\n                break;\n            case 'getPanMove':\n                args.value['obj']['panMove'] = this.panMove;\n                break;\n            case 'setPanMove':\n                this.panMove = args.value['point'];\n                break;\n            case 'getTempPanMove':\n                args.value['obj']['tempPanMove'] = this.tempPanMove;\n                break;\n            case 'setTempPanMove':\n                this.tempPanMove = args.value['point'];\n                break;\n            case 'setReverseFlip':\n                this.isReverseFlip = args.value['isReverseFlip'];\n                break;\n            case 'setDisablePan':\n                this.disablePan = args.value['bool'];\n                break;\n            case 'setCurrDestinationPoint':\n                this.currDestPoint = args.value['point'];\n                this.currDestPoint.startX -= this.parent.cropObj.totalPannedPoint.x;\n                this.currDestPoint.startY -= this.parent.cropObj.totalPannedPoint.y;\n                break;\n            case 'setReverseRotate':\n                this.isReverseRotate = args.value['bool'];\n                break;\n            case 'getFlipColl':\n                args.value['obj']['flipColl'] = this.flipColl;\n                break;\n            case 'setFlipColl':\n                this.flipColl = args.value['flipColl'];\n                break;\n            case 'getPreviousZoomValue':\n                args.value['obj']['previousZoomValue'] = this.prevZoomValue;\n                break;\n            case 'setPreviousZoomValue':\n                this.prevZoomValue = args.value['previousZoomValue'];\n                break;\n            case 'getCropDimension':\n                args.value['obj']['cropDimension'] = this.cropDimension;\n                break;\n            case 'setCropDimension':\n                this.cropDimension.width = args.value['width'];\n                this.cropDimension.height = args.value['height'];\n                break;\n            case 'getPreventSelect':\n                args.value['obj']['bool'] = this.isPreventSelect;\n                break;\n            case 'setPreventSelect':\n                this.isPreventSelect = args.value['bool'];\n                break;\n            case 'resizeImage':\n                this.resizeImage(args.value['width'], args.value['height']);\n                break;\n            case 'resizeCrop':\n                this.resizeCrop(args.value['width'], args.value['height']);\n                break;\n            case 'setPreventDownScale':\n                this.preventDownScale = args.value['bool'];\n                break;\n            case 'updateResize':\n                this.updateResize();\n                break;\n            case 'resize':\n                this.resize(args.value['width'], args.value['height'], args.value['isAspectRatio']);\n                break;\n            case 'setResizedImgAngle':\n                this.resizedImgAngle = args.value['angle'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    Transform.prototype.getModuleName = function () {\n        return 'transform';\n    };\n    Transform.prototype.initTransformPvtVar = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    Transform.prototype.reset = function () {\n        this.zoomBtnHold = null;\n        this.tempPanMove = null;\n        this.panMove = null;\n        this.disablePan = false;\n        this.currDestPoint = null;\n        this.isReverseRotate = false;\n        this.flipColl = [];\n        this.resizedImgAngle = null;\n        this.transCurrObj = null;\n        this.prevZoomValue = 1;\n        this.isPreventSelect = this.preventDownScale = false;\n    };\n    Transform.prototype.rotateImage = function (degree) {\n        var _this = this;\n        var parent = this.parent;\n        var transitionArgs = { cancel: false, previousDegree: parent.transform.degree,\n            currentDegree: Math.abs(parent.transform.degree + degree) === 360 ? 0 : parent.transform.degree + degree };\n        if (!this.isPreventSelect && isBlazor() && parent.events && parent.events.rotating.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('RotateEventAsync', 'OnRotate', transitionArgs).then(function (args) {\n                _this.rotateEvent(args, degree);\n            });\n        }\n        else {\n            if (!this.isPreventSelect) {\n                parent.trigger('rotating', transitionArgs);\n            }\n            this.rotateEvent(transitionArgs, degree);\n        }\n    };\n    Transform.prototype.rotateEvent = function (transitionArgs, degree) {\n        var parent = this.parent;\n        if (!transitionArgs.cancel) {\n            var prevObj = void 0;\n            if (isNullOrUndefined(this.transCurrObj)) {\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                prevObj = object['currObj'];\n                prevObj.objColl = extend([], parent.objColl, null, true);\n                prevObj.pointColl = extend({}, parent.pointColl, null, true);\n                prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n                var selPointCollObj = { selPointColl: null };\n                parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                    value: { obj: selPointCollObj } });\n                prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            }\n            parent.afterCropActions.push(degree === 90 ? 'rotateRight' : 'rotateLeft');\n            var splitWords = [];\n            var activeObjShape = void 0;\n            if (parent.activeObj.activePoint && parent.activeObj.shape) {\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n            }\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: true } });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            this.drawRotatedImage(degree);\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n            parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            if (activeObjShape) {\n                this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n                parent.objColl.pop();\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n            parent.isUndoRedo = false;\n            var obj = { collection: parent.rotateFlipColl };\n            parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n            parent.rotateFlipColl = obj['collection'];\n            if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n                this.isPreventSelect = true;\n                parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                    value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n                this.isPreventSelect = false;\n                parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n                this.prevZoomValue = parent.zoomSettings.zoomFactor;\n            }\n        }\n    };\n    Transform.prototype.drawRotatedImage = function (degree) {\n        var parent = this.parent;\n        if (degree === 0) {\n            parent.transform.degree = 0;\n        }\n        else {\n            parent.transform.degree += degree;\n        }\n        if (Math.abs(parent.transform.degree) === 360) {\n            parent.transform.degree = 0;\n        }\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        this.rotateDegree(degree);\n        if (!this.isReverseRotate) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            parent.rotateFlipColl.push(degree);\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (degree > 0) {\n            parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n        }\n        else {\n            for (var i = 0; i < 3; i++) {\n                parent.notify('freehand-draw', { prop: 'rotateFhdColl', onPropertyChange: false });\n            }\n        }\n        parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n            value: { context: this.lowerContext, points: null } });\n        this.updateCurrSelectionPoint(degree);\n    };\n    Transform.prototype.rotateDegree = function (degree) {\n        var parent = this.parent;\n        this.lowerContext.save();\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        this.lowerContext.translate(parent.lowerCanvas.width / 2, parent.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * -degree);\n        this.lowerContext.translate(-parent.lowerCanvas.width / 2, -parent.lowerCanvas.height / 2);\n        this.lowerContext.restore();\n    };\n    Transform.prototype.updateCurrSelectionPoint = function (degree) {\n        var parent = this.parent;\n        if (parent.currSelectionPoint && this.currDestPoint) {\n            var activeObj = extend({}, parent.activeObj, {}, true);\n            var objColl = extend([], parent.objColl, [], true);\n            var srcPoints = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                height: parent.img.srcHeight };\n            var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = [];\n            parent.objColl.push(extend({}, parent.currSelectionPoint, {}, true));\n            if (isNullOrUndefined(parent.objColl[0].imageRatio)) {\n                parent.activeObj = parent.objColl[0];\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                parent.objColl[0] = parent.activeObj;\n            }\n            parent.img.srcLeft = 0;\n            parent.img.srcTop = 0;\n            parent.img.srcWidth = parent.baseImgCanvas.width;\n            parent.img.srcHeight = parent.baseImgCanvas.height;\n            parent.img.destLeft = this.currDestPoint.startX;\n            parent.img.destTop = this.currDestPoint.startY;\n            parent.img.destWidth = this.currDestPoint.width;\n            parent.img.destHeight = this.currDestPoint.height;\n            if (typeof (degree) === 'number') {\n                parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: degree } });\n            parent.currSelectionPoint = extend({}, parent.objColl[0], {}, true);\n            this.currDestPoint = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n                height: parent.img.destHeight };\n            parent.objColl = objColl;\n            parent.activeObj = activeObj;\n            parent.img.srcLeft = srcPoints.startX;\n            parent.img.srcTop = srcPoints.startY;\n            parent.img.srcWidth = srcPoints.width;\n            parent.img.srcHeight = srcPoints.height;\n            parent.img.destLeft = destPoints.startX;\n            parent.img.destTop = destPoints.startY;\n            parent.img.destWidth = destPoints.width;\n            parent.img.destHeight = destPoints.height;\n        }\n    };\n    Transform.prototype.flipImage = function (direction) {\n        var _this = this;\n        var parent = this.parent;\n        var transitionArgs = { direction: direction, cancel: false,\n            previousDirection: parent.toPascalCase(parent.transform.currFlipState || direction) };\n        if (!this.isPreventSelect && isBlazor() && parent.events && parent.events.flipping.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('FlipEventAsync', 'OnFlip', transitionArgs).then(function (args) {\n                _this.flipEvent(args, direction);\n            });\n        }\n        else {\n            if (!this.isPreventSelect) {\n                parent.trigger('flipping', transitionArgs);\n            }\n            this.flipEvent(transitionArgs, direction);\n        }\n    };\n    Transform.prototype.flipEvent = function (transitionArgs, direction) {\n        var parent = this.parent;\n        if (transitionArgs.cancel) {\n            return;\n        }\n        var prevObj;\n        if (isNullOrUndefined(this.transCurrObj)) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], parent.objColl, null, true);\n            prevObj.pointColl = extend({}, parent.pointColl, null, true);\n            prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        }\n        parent.afterCropActions.push(direction.toLowerCase() === 'horizontal' ? 'horizontalflip' : 'verticalflip');\n        var splitWords = [];\n        var activeObjShape;\n        if (parent.activeObj.activePoint) {\n            if (parent.activeObj.shape !== undefined) {\n                splitWords = parent.activeObj.shape.split('-');\n            }\n            if (parent.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                activeObjShape = parent.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                parent.objColl.push(parent.activeObj);\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.clearContext(this.lowerContext);\n        parent.clearContext(this.upperContext);\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        }\n        var lowercaseDirection = direction.toLowerCase();\n        this.updateFlipState(lowercaseDirection);\n        if (lowercaseDirection === 'horizontal') {\n            parent.transform.currFlipState = (parent.transform.currFlipState.toLowerCase() === 'horizontal') ? '' : 'horizontal';\n        }\n        else {\n            parent.transform.currFlipState = (parent.transform.currFlipState.toLowerCase() === 'vertical') ? '' : 'vertical';\n        }\n        var selObj = { isSelected: null };\n        parent.notify('draw', { prop: 'getRotatedFlipCropSelection', onPropertyChange: false, value: { bool: selObj } });\n        if (selObj['isSelected']) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n        this.updateFlipState(direction.toLowerCase());\n        if (!this.isReverseFlip) {\n            parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            this.updateFlipColl(direction.toLocaleLowerCase());\n            parent.rotateFlipColl.push(direction.toLowerCase());\n        }\n        if (parent.rotateFlipColl.length === 1) {\n            var panObj = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj } });\n            if (panObj['panRegion'] === '') {\n                parent.notify('draw', { prop: 'setClientTransDim', onPropertyChange: false,\n                    value: { isPreventDimension: null } });\n            }\n            else {\n                this.setDestPointsForFlipState();\n            }\n        }\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.objColl = extend([], tempObjColl, [], true);\n        parent.activeObj = extend({}, tempActiveObj, {}, true);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            var flipObjColl = parent.objColl[i].flipObjColl;\n            if (flipObjColl.length === 0) {\n                flipObjColl.push(direction);\n            }\n            else if (flipObjColl[flipObjColl.length - 1] === direction) {\n                flipObjColl.pop();\n            }\n            else {\n                flipObjColl.push(direction);\n            }\n        }\n        parent.notify('shape', { prop: 'redrawObj', onPropertyChange: false, value: { degree: direction.toLowerCase() } });\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        if (direction.toLowerCase() === 'horizontal' || direction.toLowerCase() === 'vertical') {\n            parent.notify('freehand-draw', { prop: 'flipFHDColl', onPropertyChange: false,\n                value: { value: direction.toLowerCase() } });\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        else {\n            parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                value: { context: this.lowerContext, points: null } });\n        }\n        this.lowerContext.filter = tempFilter;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.updateCurrSelectionPoint(direction.toLowerCase());\n        parent.isUndoRedo = false;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.upperContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (activeObjShape) {\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            parent.objColl.pop();\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n        }\n        var obj = { collection: parent.rotateFlipColl };\n        parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n            value: { collection: parent.rotateFlipColl, isRotateFlipCollection: true, obj: obj } });\n        parent.rotateFlipColl = obj['collection'];\n        if (parent.cropObj.activeObj.shape && !this.isPreventSelect) {\n            this.isPreventSelect = true;\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n            this.isPreventSelect = false;\n            parent.setProperties({ zoomSettings: { zoomFactor: 1 } }, true);\n            this.prevZoomValue = parent.zoomSettings.zoomFactor;\n        }\n    };\n    Transform.prototype.updateFlipState = function (direction) {\n        var degree = this.parent.transform.degree;\n        if (direction === 'horizontal') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.verticalFlip();\n            }\n            else {\n                this.horizontalFlip();\n            }\n        }\n        else if (direction === 'vertical') {\n            if (degree % 90 === 0 && degree % 180 !== 0) {\n                this.horizontalFlip();\n            }\n            else {\n                this.verticalFlip();\n            }\n        }\n    };\n    Transform.prototype.horizontalFlip = function () {\n        this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n        this.lowerContext.scale(-1, 1);\n        this.upperContext.translate(this.upperContext.canvas.width, 0);\n        this.upperContext.scale(-1, 1);\n    };\n    Transform.prototype.verticalFlip = function () {\n        this.lowerContext.translate(0, this.lowerContext.canvas.height);\n        this.lowerContext.scale(1, -1);\n        this.upperContext.translate(0, this.upperContext.canvas.height);\n        this.upperContext.scale(1, -1);\n    };\n    Transform.prototype.updateFlipColl = function (direction) {\n        if (this.isPreventSelect) {\n            return;\n        }\n        if (this.flipColl.length === 0 || this.flipColl[this.flipColl.length - 1] !== direction) {\n            this.flipColl.push(direction);\n        }\n        else {\n            this.flipColl.pop();\n        }\n        if (this.flipColl.length >= 4) {\n            var lastFourItems = this.flipColl.slice(-4);\n            if ((lastFourItems[0] === 'horizontal' && lastFourItems[1] === 'vertical' &&\n                lastFourItems[2] === 'horizontal' && lastFourItems[3] === 'vertical') ||\n                (lastFourItems[0] === 'vertical' && lastFourItems[1] === 'horizontal' &&\n                    lastFourItems[2] === 'vertical' && lastFourItems[3] === 'horizontal')) {\n                this.flipColl.splice(-4);\n            }\n        }\n    };\n    Transform.prototype.setDestPointsForFlipState = function () {\n        var parent = this.parent;\n        var panObj = { panRegion: '' };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] !== '') {\n            if (panObj['panRegion'] === 'horizontal') {\n                parent.img.destLeft = parent.lowerCanvas.clientWidth - (parent.img.destWidth + parent.img.destLeft);\n            }\n            else if (panObj['panRegion'] === 'vertical') {\n                parent.img.destTop = parent.lowerCanvas.clientHeight - (parent.img.destHeight + parent.img.destTop);\n            }\n            else {\n                parent.img.destLeft = parent.lowerCanvas.clientWidth - (parent.img.destWidth + parent.img.destLeft);\n                parent.img.destTop = parent.lowerCanvas.clientHeight - (parent.img.destHeight + parent.img.destTop);\n            }\n        }\n    };\n    Transform.prototype.zoomAction = function (zoomFactor, zoomPoint, isResize) {\n        var _this = this;\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (isNullOrUndefined(isResize) && (parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor && zoomFactor > 0 ||\n                (parent.zoomSettings.zoomFactor > parent.zoomSettings.minZoomFactor && zoomFactor < 0 && this.disableZoomOutBtn(true)) ||\n                (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor && zoomFactor < 0))) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'zoom-up-handler', onPropertyChange: false });\n                }\n                return;\n            }\n            parent.notify('draw', { prop: 'setImageEdited', onPropertyChange: false });\n            var tempZoomFactor = zoomFactor;\n            zoomFactor = tempZoomFactor > 0 ? 0.1 : -0.1;\n            for (var i = 0; i < Math.round(Math.abs(tempZoomFactor / 0.1)); i++) {\n                if (this.prevZoomValue === 1) {\n                    this.prevZoomValue += zoomFactor > 0 ? zoomFactor * 10 : (zoomFactor * 10) / 10;\n                }\n                else if (this.prevZoomValue > 1) {\n                    this.prevZoomValue += (zoomFactor * 10);\n                }\n                else if (this.prevZoomValue < 1) {\n                    this.prevZoomValue += (zoomFactor * 10) / 10;\n                    var powerOften = Math.pow(10, 1);\n                    this.prevZoomValue = (Math.round(this.prevZoomValue * powerOften) / powerOften);\n                }\n            }\n            zoomFactor = tempZoomFactor;\n            parent.setProperties({ zoomSettings: { zoomFactor: this.prevZoomValue } }, true);\n            var splitWords = void 0;\n            this.tempActiveObj = null;\n            this.isShape = false;\n            if (parent.activeObj.shape !== undefined) {\n                if (parent.activeObj.shape === 'shape') {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                }\n                else {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                this.tempActiveObj = extend({}, parent.activeObj, {}, true);\n                parent.isCropTab = true;\n            }\n            else if (parent.activeObj.shape && splitWords[0] !== 'crop') {\n                this.isShape = true;\n            }\n            var obj = { zoomType: null };\n            parent.notify('selection', { prop: 'getZoomType', onPropertyChange: false, value: { obj: obj } });\n            if (isNullOrUndefined(zoomPoint)) {\n                if (parent.isCropTab && this.tempActiveObj) {\n                    zoomPoint = { x: parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2),\n                        y: parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2) };\n                }\n                else {\n                    zoomPoint = { x: parent.lowerCanvas.clientWidth / 2, y: parent.lowerCanvas.clientHeight / 2 };\n                }\n                if (obj['zoomType'] === 'MouseWheel' || obj['zoomType'] === 'Pinch') {\n                    zoomPoint = { x: parent.zoomSettings.zoomPoint.x, y: parent.zoomSettings.zoomPoint.y };\n                }\n            }\n            var previousZoomFactor = parent.zoomSettings.zoomFactor - (zoomFactor * 10);\n            var zoomEventArgs = { zoomPoint: zoomPoint, cancel: false, previousZoomFactor: previousZoomFactor,\n                currentZoomFactor: parent.zoomSettings.zoomFactor, zoomTrigger: obj['zoomType'] };\n            if (isBlazor() && !parent.isCropToolbar && parent.currentToolbar !== 'resize-toolbar' && parent.currentToolbar !== 'frame-toolbar'\n                && parent.events && parent.events.zooming.hasDelegate === true) {\n                zoomEventArgs.zoomTrigger = parseInt(this.getZoomTriggerType(zoomEventArgs.zoomTrigger));\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                parent.dotNetRef.invokeMethodAsync('ZoomEventAsync', 'OnZoom', zoomEventArgs).then(function (args) {\n                    _this.zoomEvent(args, zoomFactor);\n                });\n            }\n            else {\n                if (!parent.isCropToolbar) {\n                    parent.trigger('zooming', zoomEventArgs);\n                }\n                this.zoomEvent(zoomEventArgs, zoomFactor);\n            }\n        }\n    };\n    Transform.prototype.getZoomTriggerType = function (type) {\n        switch (type) {\n            case 'MouseWheel':\n                return '1';\n            case 'Pinch':\n                return '2';\n            case 'Commands':\n                return '4';\n            default:\n                return '8';\n        }\n    };\n    Transform.prototype.zoomEvent = function (zoomEventArgs, zoomFactor) {\n        var parent = this.parent;\n        if (zoomEventArgs.cancel) {\n            return;\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'close-contextual-toolbar', onPropertyChange: false });\n        }\n        else if (parent.currentToolbar !== 'resize-toolbar' && parent.element.querySelector('.e-contextual-toolbar-wrapper') && !parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hidden')) {\n            parent.updateToolbar(parent.element, 'closeContextualToolbar');\n        }\n        parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n            value: { x: null, y: null, isMouseDown: true } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        var object = { canvasFilter: this.parent.canvasFilter };\n        this.lowerContext.filter = object['canvasFilter'];\n        parent.upperCanvas.style.cursor = parent.cursor = 'default';\n        var objColl = extend([], parent.objColl, [], true);\n        if (!parent.isCropTab) {\n            if (parent.transform.degree !== 0) {\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                var temp = parent.allowDownScale;\n                parent.allowDownScale = false;\n                this.rotatePan(true, true);\n                parent.allowDownScale = temp;\n            }\n            else if (parent.transform.currFlipState !== '') {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        }\n        if (parent.transform.degree === 0) {\n            this.drawZoomImgToCanvas(zoomFactor, this.tempActiveObj);\n            var panObj_1 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj_1 } });\n            if (panObj_1['panRegion'] !== '') {\n                parent.notify('crop', { prop: 'setTempFlipPanPoint', onPropertyChange: false, value: { point: parent.panPoint.totalPannedPoint, isAdd: true } });\n                objColl = extend([], parent.objColl, [], true);\n                parent.objColl = [];\n                var destLeft = parent.img.destLeft;\n                var destTop = parent.img.destTop;\n                this.setDestPointsForFlipState();\n                this.rotatedFlip();\n                parent.img.destLeft = destLeft;\n                parent.img.destTop = destTop;\n                parent.objColl = objColl;\n                parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            }\n            if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor && !parent.isCropTab) {\n                parent.panPoint.totalPannedPoint = { x: 0, y: 0 };\n            }\n        }\n        else {\n            parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n            parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n            parent.panPoint.totalPannedInternalPoint = { x: 0, y: 0 };\n            this.rotateZoom(zoomFactor);\n            var panObj_2 = { panRegion: '' };\n            parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n                value: { panObj: panObj_2 } });\n            if (panObj_2['panRegion'] !== '') {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                this.lowerContext.filter = temp;\n            }\n        }\n        var powerOften = Math.pow(10, 1);\n        if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor ||\n            (Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 2) {\n            clearInterval(this.zoomBtnHold);\n            this.zoomBtnHold = 0;\n        }\n        var panObj = { panRegion: '' };\n        parent.notify('crop', { prop: 'getCurrFlipState', onPropertyChange: false,\n            value: { panObj: panObj } });\n        if (panObj['panRegion'] === '') {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            this.lowerContext.filter = temp;\n        }\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            if (parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                parent.currSelectionPoint = null;\n            }\n        }\n        parent.isUndoRedo = false;\n        var zoomOut;\n        if (!isBlazor()) {\n            zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n            if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                zoomOut.classList.add('e-disabled');\n                zoomOut.parentElement.classList.add('e-overlay');\n            }\n            else if (zoomOut) {\n                zoomOut.classList.remove('e-disabled');\n                zoomOut.parentElement.classList.remove('e-overlay');\n            }\n        }\n        else {\n            zoomOut = parent.element.querySelector('#zoomout');\n            if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n                zoomOut.classList.add('e-overlay');\n            }\n            else if (zoomOut) {\n                zoomOut.classList.remove('e-overlay');\n            }\n        }\n        this.autoEnablePan();\n        if (this.tempActiveObj) {\n            parent.activeObj = extend({}, this.tempActiveObj, {}, true);\n        }\n        if (parent.activeObj.shape === 'crop-custom') {\n            parent.currObjType.isCustomCrop = true;\n        }\n        var panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n        if (panBtn && parent.togglePan) {\n            panBtn.classList.add('e-selected-btn');\n        }\n        else if (panBtn) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        if (this.isShape) {\n            parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n            parent.objColl.pop();\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n                parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n            }\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        parent.notify('selection', { prop: 'setZoomType', onPropertyChange: false, value: { zoomType: 'Toolbar' } });\n    };\n    Transform.prototype.disableZoomOutBtn = function (isZoomOut) {\n        var parent = this.parent;\n        var isDisabled = false;\n        var zoomOut;\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor -= 0.1;\n        }\n        if (!isBlazor()) {\n            zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n        }\n        else {\n            zoomOut = this.parent.element.querySelector('#zoomout');\n        }\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        var destWidth = parent.img.destWidth;\n        var destHeight = parent.img.destHeight;\n        if (parent.activeObj.shape) {\n            this.setZoomDimension(-0.1, parent.activeObj);\n            if (!isNullOrUndefined(zoomOut)) {\n                if (parent.img.destLeft > parent.activeObj.activePoint.startX || parent.img.destTop > parent.activeObj.activePoint.startY\n                    || parent.img.destLeft + parent.img.destWidth < parent.activeObj.activePoint.endX || parent.img.destTop +\n                    parent.img.destHeight < parent.activeObj.activePoint.endY || parent.zoomSettings.zoomFactor ===\n                    parent.zoomSettings.minZoomFactor) {\n                    if (!isBlazor()) {\n                        zoomOut.classList.add('e-disabled');\n                        zoomOut.parentElement.classList.add('e-overlay');\n                    }\n                    else {\n                        zoomOut.classList.add('e-overlay');\n                    }\n                    isDisabled = true;\n                }\n                else {\n                    if (!isBlazor()) {\n                        zoomOut.classList.remove('e-disabled');\n                        zoomOut.parentElement.classList.remove('e-overlay');\n                    }\n                    else {\n                        zoomOut.classList.remove('e-overlay');\n                    }\n                    isDisabled = false;\n                }\n            }\n        }\n        else {\n            this.setZoomDimension(-0.1, null);\n        }\n        if (!isNullOrUndefined(isZoomOut)) {\n            parent.transform.zoomFactor += 0.1;\n        }\n        parent.img.destLeft = destLeft;\n        parent.img.destTop = destTop;\n        parent.img.destWidth = destWidth;\n        parent.img.destHeight = destHeight;\n        return isDisabled;\n    };\n    Transform.prototype.drawZoomImgToCanvas = function (value, selectionObj) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        parent.transform[parent.isCropTab ? 'cropZoomFactor' : 'defaultZoomFactor'] = parent.transform.zoomFactor;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.isCropTab) {\n            maxDimension = this.cropZoom(value, selectionObj);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n            maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n            maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        }\n        parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n        maxDimension.width = this.cropDimension.width;\n        maxDimension.height = this.cropDimension.height;\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.rotatedFlip = function () {\n        var parent = this.parent;\n        this.isReverseFlip = true;\n        var tempCurrFlipState = parent.transform.currFlipState;\n        var tempFlipColl = this.flipColl;\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        this.flipColl = [];\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, context: null, isPreventCircleCrop: null } });\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'currTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, context: null, isPreventCircleCrop: null } });\n        if (tempCurrFlipState === '' && parent.transform.currFlipState !== '') {\n            tempCurrFlipState = parent.transform.currFlipState;\n        }\n        parent.transform.currFlipState = tempCurrFlipState;\n        this.flipColl = tempFlipColl;\n        parent.objColl = extend([], tempObjColl, [], true);\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        if (tempActiveObj.activePoint.width !== 0) {\n            parent.activeObj = extend({}, tempActiveObj, {}, true);\n        }\n        this.isReverseFlip = false;\n    };\n    Transform.prototype.rotateZoom = function (value) {\n        var parent = this.parent;\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(parent.transform.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            parent.transform.zoomFactor = 0;\n        }\n        else {\n            parent.transform.zoomFactor += value;\n        }\n        if (parent.isCropTab) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n        }\n        else {\n            parent.transform.defaultZoomFactor = parent.transform.zoomFactor;\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempActiveObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = [];\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'setDestPoints', onPropertyChange: false });\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.objColl = tempObjColl;\n        parent.activeObj = tempActiveObj;\n        var maxDimension = { width: this.cropDimension.width, height: this.cropDimension.height };\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n    };\n    Transform.prototype.autoEnablePan = function () {\n        if (this.parent.transform.zoomFactor <= 0) {\n            this.parent.togglePan = false;\n            this.parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n            this.parent.pan(false);\n            this.disablePan = false;\n        }\n        else {\n            this.parent.pan(!this.disablePan);\n        }\n    };\n    Transform.prototype.cropZoom = function (value, selectionObj) {\n        var parent = this.parent;\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.img.srcLeft === 0 || parent.img.srcTop === 0) {\n            if (isNullOrUndefined(selectionObj)) {\n                maxDimension = this.setZoomDimension(value, null);\n            }\n            else {\n                maxDimension = this.setZoomDimension(value, selectionObj);\n            }\n        }\n        else {\n            if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n                maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n            }\n            else {\n                maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n            }\n            maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n            maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        }\n        parent.img.destLeft = destLeft - ((maxDimension.width - parent.img.destWidth) / 2);\n        parent.img.destTop = destTop - ((maxDimension.height - parent.img.destHeight) / 2);\n        destLeft = parent.img.destLeft;\n        destTop = parent.img.destTop;\n        if (selectionObj) {\n            if (parent.img.destLeft > selectionObj.activePoint.startX) {\n                parent.img.destLeft = selectionObj.activePoint.startX;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop > selectionObj.activePoint.startY) {\n                parent.img.destTop = selectionObj.activePoint.startY;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n            if (parent.img.destLeft + maxDimension.width < selectionObj.activePoint.endX) {\n                parent.img.destLeft = selectionObj.activePoint.endX - maxDimension.width;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.x -= (destLeft - parent.img.destLeft);\n                }\n            }\n            if (parent.img.destTop + maxDimension.height < selectionObj.activePoint.endY) {\n                parent.img.destTop = selectionObj.activePoint.endY - maxDimension.height;\n                if (parent.transform.degree === 0) {\n                    parent.panPoint.totalPannedPoint.y -= (destTop - parent.img.destTop);\n                }\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.setZoomDimension = function (value, selectionObj) {\n        var parent = this.parent;\n        var maxDimension = { width: 0, height: 0 };\n        if (parent.transform.degree % 90 === 0 && parent.transform.degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(parent.img.srcHeight, parent.img.srcWidth);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight);\n        }\n        maxDimension.width += (maxDimension.width * parent.transform.zoomFactor);\n        maxDimension.height += (maxDimension.height * parent.transform.zoomFactor);\n        parent.img.destLeft += ((parent.img.destWidth - maxDimension.width) / 2);\n        parent.img.destTop += ((parent.img.destHeight - maxDimension.height) / 2);\n        // While zoom out limit image to draw inside the selection range\n        if (value < 0 && selectionObj) {\n            var startX = selectionObj.activePoint.startX;\n            var startY = selectionObj.activePoint.startY;\n            var width = selectionObj.activePoint.width;\n            var height = selectionObj.activePoint.height;\n            var maxDestLeft = parent.img.destLeft + maxDimension.width;\n            var maxDestTop = parent.img.destTop + maxDimension.height;\n            if (parent.img.destLeft > startX) {\n                parent.img.destLeft = startX;\n            }\n            if (parent.img.destTop > startY) {\n                parent.img.destTop = startY;\n            }\n            if (maxDestLeft < startX + width) {\n                parent.img.destLeft = startX + width - maxDimension.width;\n            }\n            if (maxDestTop < startY + height) {\n                parent.img.destTop = startY + height - maxDimension.height;\n            }\n        }\n        else if (value < 0 && isNullOrUndefined(selectionObj)) {\n            if (parent.img.destLeft > 0) {\n                parent.img.destLeft = 0;\n            }\n            if (parent.img.destTop > 0) {\n                parent.img.destTop = 0;\n            }\n            if (parent.img.destLeft + maxDimension.width < parent.lowerCanvas.width) {\n                parent.img.destLeft = parent.lowerCanvas.width - parent.img.destWidth;\n            }\n            if (parent.img.destTop + maxDimension.height < parent.lowerCanvas.height) {\n                parent.img.destTop = parent.lowerCanvas.height - parent.img.destHeight;\n            }\n        }\n        return maxDimension;\n    };\n    Transform.prototype.drawPannedImage = function (xDiff, yDiff) {\n        var _this = this;\n        var parent = this.parent;\n        var obj = { panDown: null };\n        parent.notify('selection', { prop: 'getPanDown', onPropertyChange: false, value: { obj: obj } });\n        var panEventArgs = { startPoint: obj['panDown'], endPoint: this.panMove, cancel: false };\n        if (isBlazor() && isNullOrUndefined(this.parent.eventType) && parent.events && parent.events.onPanStart.hasDelegate === true) {\n            this.parent.eventType = 'pan';\n            this.parent.panEventArgs = panEventArgs;\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('PanEventAsync', 'OnPanStart', panEventArgs).then(function (args) {\n                _this.panEvent(args, xDiff, yDiff);\n            });\n        }\n        else {\n            parent.trigger('panning', panEventArgs);\n            this.panEvent(panEventArgs, xDiff, yDiff);\n        }\n    };\n    Transform.prototype.panEvent = function (panEventArgs, xDiff, yDiff) {\n        if (panEventArgs.cancel) {\n            return;\n        }\n        var parent = this.parent;\n        var isObjCreated = false;\n        if (parent.activeObj.shape && parent.activeObj.shape === 'shape') {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        }\n        if (isNullOrUndefined(parent.activeObj.shape)) {\n            isObjCreated = true;\n            parent.activeObj.activePoint = { startX: parent.img.destLeft, startY: parent.img.destTop,\n                endX: parent.img.destLeft + parent.img.destWidth, endY: parent.img.destTop + parent.img.destHeight };\n            var startX = parent.activeObj.activePoint.startX;\n            var startY = parent.activeObj.activePoint.startY;\n            var endX = parent.activeObj.activePoint.endX;\n            var endY = parent.activeObj.activePoint.endY;\n            if (startX < 0) {\n                parent.activeObj.activePoint.startX = 0;\n            }\n            if (startY < 0) {\n                parent.activeObj.activePoint.startY = 0;\n            }\n            if (endX > parent.lowerCanvas.width) {\n                parent.activeObj.activePoint.endX =\n                    parent.lowerCanvas.width;\n            }\n            if (endY > parent.lowerCanvas.height) {\n                parent.activeObj.activePoint.endY =\n                    parent.lowerCanvas.height;\n            }\n            parent.activeObj.activePoint.width = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.startX;\n            parent.activeObj.activePoint.height = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.startY;\n            parent.activeObj.shape = 'crop-custom';\n            var obj = { strokeSettings: {} };\n            parent.notify('shape', { prop: 'getStrokeSettings', onPropertyChange: false,\n                value: { obj: obj } });\n            parent.activeObj.strokeSettings = obj['strokeSettings'];\n            parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                    isMouseMove: null, x: null, y: null } });\n            parent.isCropTab = true;\n        }\n        if (parent.transform.degree === 0) {\n            var point = void 0;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                point = this.updatePanPoints('');\n            }\n            else {\n                point = { x: xDiff, y: yDiff };\n            }\n            parent.panPoint.totalPannedPoint.x += point.x;\n            parent.panPoint.totalPannedPoint.y += point.y;\n            var tempSelectionObj = extend({}, parent.activeObj, {}, true);\n            var temp = this.lowerContext.filter;\n            this.drawPannImage(point);\n            this.lowerContext.filter = temp;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n            parent.activeObj = extend({}, tempSelectionObj, {}, true);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (parent.activeObj.shape) {\n                parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj } });\n            }\n        }\n        else {\n            var tempFlipState = parent.transform.currFlipState;\n            parent.isCropTab = true;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                parent.panPoint.currentPannedPoint = this.updatePanPoints('');\n            }\n            else {\n                parent.panPoint.currentPannedPoint = { x: xDiff, y: yDiff };\n            }\n            parent.transform.currFlipState = tempFlipState;\n            this.rotatePan();\n            parent.isCropTab = false;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n        }\n        if (isObjCreated) {\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            parent.isCropTab = false;\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n    };\n    Transform.prototype.drawPannImage = function (point) {\n        var parent = this.parent;\n        var filter = this.lowerContext.filter;\n        var destPoints = { startX: parent.img.destLeft, startY: parent.img.destTop, width: parent.img.destWidth,\n            height: parent.img.destHeight };\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        this.setDestPointsForFlipState();\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        if ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n        this.lowerContext.filter = filter;\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n        parent.img.destLeft = destPoints.startX;\n        parent.img.destTop = destPoints.startY;\n        parent.img.destWidth = destPoints.width;\n        parent.img.destHeight = destPoints.height;\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: point.x, yDiff: point.y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: point.x, yDiff: point.y, panRegion: '' } });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: true } });\n        }\n    };\n    Transform.prototype.resetZoom = function () {\n        var parent = this.parent;\n        if (parent.transform.defaultZoomFactor !== 0) {\n            var isUndoRedo = parent.isUndoRedo;\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            this.transCurrObj = object['currObj'];\n            this.transCurrObj.objColl = extend([], parent.objColl, null, true);\n            this.transCurrObj.pointColl = extend({}, parent.pointColl, null, true);\n            this.transCurrObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            this.transCurrObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            parent.isUndoRedo = parent.isCropToolbar = true;\n            if (parent.transform.defaultZoomFactor > 0) {\n                this.zoomAction(-parent.transform.defaultZoomFactor);\n            }\n            else {\n                this.zoomAction(Math.abs(parent.transform.defaultZoomFactor));\n            }\n            parent.isCropToolbar = false;\n            parent.isUndoRedo = isUndoRedo;\n        }\n    };\n    Transform.prototype.performTransformation = function (text) {\n        var parent = this.parent;\n        var tempZoomFactor = parent.transform.defaultZoomFactor;\n        var isUndoRedo = parent.isUndoRedo;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        this.resetZoom();\n        this.updateTransform(text);\n        for (var i = 0, len = parent.objColl.length; i < len; i++) {\n            if (parent.objColl[i].flipObjColl.length > 0) {\n                var flipObjColl = { collection: parent.objColl[i].flipObjColl };\n                parent.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                    value: { collection: parent.objColl[i].flipObjColl, isRotateFlipCollection: null, obj: flipObjColl } });\n                parent.objColl[i].flipObjColl = flipObjColl['collection'];\n                if (parent.objColl[i].flipObjColl.length === 0) {\n                    parent.objColl[i].shapeFlip = '';\n                }\n            }\n        }\n        if (tempZoomFactor !== 0) {\n            parent.isUndoRedo = true;\n            this.zoomAction(tempZoomFactor);\n            parent.isUndoRedo = isUndoRedo;\n            var state = '';\n            if (text === 'rotateleft' || text === 'rotateright') {\n                state = 'rotate';\n            }\n            else if (text === 'horizontalflip' || text === 'verticalflip') {\n                state = 'flip';\n            }\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: state, previousObj: this.transCurrObj, previousObjColl: this.transCurrObj.objColl,\n                    previousPointColl: this.transCurrObj.pointColl, previousSelPointColl: this.transCurrObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.transCurrObj = null;\n        }\n    };\n    Transform.prototype.updateTransform = function (text) {\n        switch (text.toLowerCase()) {\n            case 'rotateleft':\n                this.rotateImage(-90);\n                break;\n            case 'rotateright':\n                this.rotateImage(90);\n                break;\n            case 'horizontalflip':\n                this.flipImage(Direction.Horizontal);\n                break;\n            case 'verticalflip':\n                this.flipImage(Direction.Vertical);\n                break;\n        }\n    };\n    Transform.prototype.rotatePan = function (isCropSelection, isDefaultZoom) {\n        var parent = this.parent;\n        this.isReverseRotate = true;\n        var tempDegree = parent.transform.degree;\n        var rotatePanActiveObj;\n        var object = { selPointColl: null };\n        if (parent.activeObj.activePoint && parent.activeObj.shape) {\n            rotatePanActiveObj = extend({}, parent.activeObj, {}, true);\n        }\n        var tempObjColl = extend([], parent.objColl, [], true);\n        var tempPointColl = extend([], parent.pointColl, [], true);\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: object } });\n        var cropSelPointColl = object['selPointColl'];\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: [] } } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: true } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n        var initialDestLeft = parent.img.destLeft;\n        var initialDestTop = parent.img.destTop;\n        if (parent.isCropTab) {\n            parent.img.destLeft += parent.panPoint.totalPannedInternalPoint.x;\n            parent.img.destTop += parent.panPoint.totalPannedInternalPoint.y;\n        }\n        parent.notify('crop', { prop: 'updateRotatePan', onPropertyChange: false });\n        if (parent.isCropTab) {\n            parent.panPoint.totalPannedInternalPoint.x = parent.img.destLeft - initialDestLeft;\n            parent.panPoint.totalPannedInternalPoint.y = parent.img.destTop - initialDestTop;\n        }\n        var temp = this.lowerContext.filter;\n        parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n        parent.notify('draw', { prop: 'setRotateZoom', onPropertyChange: false, value: { isRotateZoom: false } });\n        parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n            value: { type: 'reverse', isPreventDestination: true, isRotatePan: true } });\n        var destLeft = parent.img.destLeft;\n        var destTop = parent.img.destTop;\n        parent.img.destLeft += parent.panPoint.totalPannedClientPoint.x;\n        parent.img.destTop += parent.panPoint.totalPannedClientPoint.y;\n        parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n        parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n        parent.panPoint.totalPannedClientPoint.x = parent.img.destLeft - destLeft;\n        parent.panPoint.totalPannedClientPoint.y =\n            parent.img.destTop - destTop;\n        parent.objColl = tempObjColl;\n        parent.pointColl = tempPointColl;\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: cropSelPointColl } } });\n        parent.transform.degree = tempDegree;\n        this.lowerContext.filter = 'none';\n        if (isCropSelection) {\n            if (isDefaultZoom) {\n                parent.panPoint.totalPannedClientPoint.x = -parent.panPoint.totalPannedClientPoint.x;\n                parent.panPoint.totalPannedClientPoint.y = -parent.panPoint.totalPannedClientPoint.y;\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n                parent.panPoint.totalPannedClientPoint = { x: 0, y: 0 };\n                parent.img.destLeft += parent.panPoint.currentPannedPoint.x;\n                parent.img.destTop += parent.panPoint.currentPannedPoint.y;\n            }\n            else {\n                parent.panPoint.currentPannedPoint = extend({}, parent.panPoint.totalPannedClientPoint, {}, true);\n            }\n        }\n        parent.notify('shape', { prop: 'panObjColl', onPropertyChange: false,\n            value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n        parent.notify('freehand-draw', { prop: 'panFHDColl', onPropertyChange: false,\n            value: { xDiff: parent.panPoint.currentPannedPoint.x, yDiff: parent.panPoint.currentPannedPoint.y, panRegion: '' } });\n        this.lowerContext.filter = temp;\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.activeObj = extend({}, rotatePanActiveObj, {}, true);\n        if (parent.activeObj.activePoint) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj, isCropRatio: null,\n                    points: null, isPreventDrag: true, saveContext: null, isPreventSelection: null } });\n        }\n        this.isReverseRotate = false;\n    };\n    Transform.prototype.limitPan = function () {\n        var parent = this.parent;\n        if (parent.activeObj.activePoint) {\n            if (parent.img.destLeft > parent.activeObj.activePoint.startX) {\n                parent.img.destLeft = parent.activeObj.activePoint.startX;\n            }\n            if (parent.img.destTop > parent.activeObj.activePoint.startY) {\n                parent.img.destTop = parent.activeObj.activePoint.startY;\n            }\n            if (parent.img.destLeft + parent.img.destWidth < parent.activeObj.activePoint.endX) {\n                parent.img.destLeft = parent.activeObj.activePoint.endX - parent.img.destWidth;\n            }\n            if (parent.img.destTop + parent.img.destHeight < parent.activeObj.activePoint.endY) {\n                parent.img.destTop = parent.activeObj.activePoint.endY - parent.img.destHeight;\n            }\n        }\n    };\n    Transform.prototype.updateFlipActiveObj = function (panRegion) {\n        var parent = this.parent;\n        if (panRegion === 'horizontal') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) -\n                    (parent.activeObj.activePoint.startX - (parent.lowerCanvas.width / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + ((parent.lowerCanvas.width / 2) -\n                    parent.activeObj.activePoint.startX);\n            }\n            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.width;\n        }\n        else if (panRegion === 'vertical') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) -\n                    (parent.activeObj.activePoint.startY - (parent.lowerCanvas.height / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) +\n                    ((parent.lowerCanvas.height / 2) - parent.activeObj.activePoint.startY);\n            }\n            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.height;\n        }\n        else if (panRegion === 'verticalHorizontal' || panRegion === 'horizontalVertical') {\n            if (parent.activeObj.activePoint.startX > parent.lowerCanvas.width / 2) {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) -\n                    (parent.activeObj.activePoint.startX - (parent.lowerCanvas.width / 2));\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) -\n                    (parent.activeObj.activePoint.startY - (parent.lowerCanvas.height / 2));\n            }\n            else {\n                parent.activeObj.activePoint.endX = (parent.lowerCanvas.width / 2) + ((parent.lowerCanvas.width / 2) -\n                    parent.activeObj.activePoint.startX);\n                parent.activeObj.activePoint.endY = (parent.lowerCanvas.height / 2) +\n                    ((parent.lowerCanvas.height / 2) - parent.activeObj.activePoint.startY);\n            }\n            parent.activeObj.activePoint.startX = parent.activeObj.activePoint.endX - parent.activeObj.activePoint.width;\n            parent.activeObj.activePoint.startY = parent.activeObj.activePoint.endY - parent.activeObj.activePoint.height;\n        }\n        parent.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: parent.activeObj.activePoint, obj: parent.activeObj,\n                isMouseMove: null, x: null, y: null } });\n    };\n    Transform.prototype.pan = function (value) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (value) {\n                parent.togglePan = true;\n                parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                    value: { x: null, y: null, isMouseDown: null } });\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'grab';\n                parent.notify('selection', { prop: 'setPanDown', onPropertyChange: false, value: { panDown: null } });\n            }\n            else {\n                parent.togglePan = parent.currObjType.isCustomCrop = false;\n                parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n                parent.lowerCanvas.style.cursor = parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            }\n        }\n    };\n    Transform.prototype.zoom = function (zoomFactor, zoomPoint) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            var value = this.getCurrentZoomFactor(zoomFactor);\n            if (isNullOrUndefined(zoomPoint)) {\n                this.zoomAction(value, zoomPoint);\n            }\n            else {\n                var type = value > 0 ? 'zoomIn' : 'zoomOut';\n                for (var i = 0; i < (Math.abs(value) * 10); i++) {\n                    parent.notify('draw', { prop: 'performPointZoom', onPropertyChange: false,\n                        value: { x: zoomPoint.x, y: zoomPoint.y, type: type } });\n                }\n            }\n        }\n    };\n    Transform.prototype.getCurrentZoomFactor = function (zoomFactor) {\n        return zoomFactor >= 1 ? (this.prevZoomValue < 1 ? (zoomFactor - this.prevZoomValue) : (zoomFactor - this.prevZoomValue) * 0.1) :\n            (zoomFactor - this.prevZoomValue);\n    };\n    Transform.prototype.setCurrPanRegion = function (region, type, obj) {\n        var panRegion = region;\n        if (region === '') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontal';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'vertical';\n            }\n        }\n        else if (region === 'horizontal') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'vertical';\n            }\n            else if (type === -90) {\n                panRegion = 'horizontal';\n            }\n        }\n        else if (region === 'vertical') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'horizontal';\n            }\n            else if (type === -90) {\n                panRegion = 'vertical';\n            }\n        }\n        else {\n            if (type === 'horizontal') {\n                panRegion = 'vertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'horizontal';\n            }\n        }\n        obj['panRegion'] = panRegion;\n    };\n    Transform.prototype.rotate = function (degree, obj) {\n        var parent = this.parent;\n        var isRotate = false;\n        if (!parent.disabled && parent.isImageLoaded && (degree % 90 === 0)) {\n            this.rotateImage(degree);\n        }\n        obj['isRotate'] = isRotate;\n    };\n    Transform.prototype.flip = function (direction) {\n        var parent = this.parent;\n        if (!parent.disabled && parent.isImageLoaded) {\n            this.flipImage(direction);\n        }\n    };\n    Transform.prototype.update = function () {\n        var parent = this.parent;\n        var toolbarHeight = 0;\n        var isFrameToolbar = false;\n        var isActiveObj = false;\n        var freehandObj = { bool: false };\n        if (parent.isImageLoaded) {\n            var frameObj = { bool: null };\n            parent.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObj } });\n            if (frameObj['bool'] || (isBlazor() && parent.currentToolbar == 'frame-toolbar')) {\n                isFrameToolbar = true;\n            }\n            if ((parent.element.querySelector('#' + parent.element.id + '_contextualToolbar') &&\n                !parent.element.querySelector('#' + parent.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n                (parent.element.querySelector('#' + parent.element.id + '_headWrapper')\n                    && !parent.element.querySelector('#' + parent.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n                parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                parent.okBtn();\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'imageLoaded');\n                }\n            }\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: freehandObj } });\n            if (freehandObj['bool']) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n                }\n            }\n            if (parent.activeObj.shape !== undefined) {\n                isActiveObj = true;\n                if (parent.textArea.style.display === 'block') {\n                    parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                        value: { x: null, y: null, isMouseDown: null } });\n                    if (!isBlazor()) {\n                        parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                    }\n                    else {\n                        parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n                    }\n                }\n                else {\n                    parent.notify('shape', { prop: 'updImgRatioForActObj', onPropertyChange: false });\n                    parent.objColl.push(parent.activeObj);\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            }\n        }\n        var tempFilter = this.lowerContext.filter;\n        var canvasWrapper = document.querySelector('#' + parent.element.id + '_canvasWrapper');\n        if (canvasWrapper) {\n            canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n        }\n        parent.lowerCanvas.width = parent.upperCanvas.width = parent.element.offsetWidth - 2;\n        if (parent.toolbarTemplate) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbarArea').clientHeight;\n        }\n        else if (parent.element.querySelector('#' + parent.element.id + '_toolbar')) {\n            toolbarHeight = parent.element.querySelector('#' + parent.element.id + '_toolbar').clientHeight;\n        }\n        parent.notify('toolbar', { prop: 'setToolbarHeight', value: { height: toolbarHeight } });\n        if (Browser.isDevice) {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - (2 * toolbarHeight) - 5 + 'px';\n            }\n            parent.lowerCanvas.height = parent.upperCanvas.height = parent.element.offsetHeight - (2 * toolbarHeight) - 5;\n        }\n        else {\n            if (canvasWrapper) {\n                canvasWrapper.style.height = parent.element.offsetHeight - toolbarHeight - 3 + 'px';\n            }\n            parent.lowerCanvas.height = parent.upperCanvas.height = parent.element.offsetHeight - toolbarHeight - 3;\n        }\n        this.lowerContext.filter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.canvasFilter = this.lowerContext.filter;\n        this.parent.initialAdjustmentValue = this.lowerContext.filter;\n        parent.clearContext(this.lowerContext);\n        this.parent.clearContext(this.upperContext);\n        if (parent.isImageLoaded) {\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.lowerContext.filter = tempFilter;\n            parent.initialAdjustmentValue = tempFilter;\n            parent.canvasFilter = this.lowerContext.filter;\n            if (parent.isImageLoaded) {\n                showSpinner(parent.element);\n                parent.element.style.opacity = '0.5';\n            }\n            this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (canvasWrapper) {\n                canvasWrapper.style.width = parent.element.offsetWidth - 2 + 'px';\n                canvasWrapper.style.height = parent.element.offsetHeight + 'px';\n                var obj_1 = { toolbarHeight: !isBlazor() ? 0 : parent.toolbarHeight };\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj_1 } });\n                }\n                if (Browser.isDevice) {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - (2 * obj_1['toolbarHeight'])) - 3 + 'px';\n                }\n                else {\n                    canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - obj_1['toolbarHeight']) - 3 + 'px';\n                }\n            }\n            var obj = { width: 0, height: 0 };\n            this.calcMaxDimension(parent.img.srcWidth, parent.img.srcHeight, obj);\n            var maxDimension = obj;\n            if (parent.transform.defaultZoomFactor > 0) {\n                maxDimension.width += (maxDimension.width * parent.transform.defaultZoomFactor);\n                maxDimension.height += (maxDimension.height * parent.transform.defaultZoomFactor);\n            }\n            parent.img.destLeft = (parent.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            parent.img.destTop = (parent.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            if (parent.transform.degree === 0 && parent.transform.currFlipState === '') {\n                if (parent.transform.defaultZoomFactor > 0) {\n                    parent.img.destLeft += parent.panPoint.totalPannedPoint.x;\n                    parent.img.destTop += parent.panPoint.totalPannedPoint.y;\n                }\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n            }\n            else {\n                parent.notify('draw', { prop: 'draw-image-to-canvas', value: { dimension: maxDimension } });\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'initial', isPreventDestination: null, isRotatePan: null } });\n                var temp = this.lowerContext.filter;\n                parent.notify('draw', { prop: 'drawImage', onPropertyChange: false });\n                this.lowerContext.filter = temp;\n                parent.notify('draw', { prop: 'updateCurrTransState', onPropertyChange: false,\n                    value: { type: 'reverse', isPreventDestination: null, isRotatePan: null } });\n            }\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n            if (parent.isCircleCrop) {\n                parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                    value: { context: this.lowerContext, isSave: null, isFlip: null } });\n            }\n            hideSpinner(parent.element);\n            parent.element.style.opacity = '1';\n            var obj1 = { defToolbarItems: null };\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'getDefToolbarItems', value: { obj: obj1 } });\n                if (obj1['defToolbarItems'] && obj1['defToolbarItems'].length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_1 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                    toolbar_1.refreshOverflow();\n                    if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                    }\n                }\n            }\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n            if (isActiveObj) {\n                var activeObj = extend({}, parent.objColl[parent.objColl.length - 1], null, true);\n                parent.objColl.pop();\n                if (activeObj.activePoint.width !== 0 && activeObj.activePoint.height !== 0) {\n                    this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: activeObj } });\n                    if (parent.activeObj.shape === 'rectangle' || parent.activeObj.shape === 'ellipse' || parent.activeObj.shape === 'text' ||\n                        parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow' || parent.activeObj.shape === 'path' ||\n                        parent.activeObj.shape === 'image') {\n                        if (!isBlazor()) {\n                            parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                        }\n                        else {\n                            parent.updateToolbar(parent.element, 'quickAccessToolbar', parent.activeObj.shape);\n                        }\n                    }\n                }\n            }\n            if (freehandObj['bool']) {\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'quickAccessToolbar', 'pen');\n                }\n            }\n            if (isFrameToolbar) {\n                if (isBlazor()) {\n                    parent.updateToolbar(parent.element, 'frame');\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'callFrameToolbar', onPropertyChange: false });\n                }\n            }\n            else if (parent.isResize) {\n                parent.aspectWidth = Math.ceil(parent.img.destWidth);\n                parent.aspectHeight = Math.ceil(parent.img.destHeight);\n                if (isBlazor()) {\n                    parent.updateToolbar(parent.element, 'resize');\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: false, isCropping: false } });\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: false, isCropping: false } });\n                }\n            }\n            if ((parent.transform.degree !== 0 || parent.transform.currFlipState !== '') && parent.transform.defaultZoomFactor > 0) {\n                var totalPannedPoint = extend({}, parent.panPoint.totalPannedPoint, null, true);\n                var totalPannedInternalPoint = extend({}, parent.panPoint.totalPannedInternalPoint, null, true);\n                var totalPannedClientPoint = extend({}, parent.panPoint.totalPannedClientPoint, null, true);\n                this.zoomAction(.1);\n                this.zoomAction(-.1);\n                if (parent.transform.degree === 0) {\n                    parent.img.destLeft += totalPannedPoint.x;\n                    parent.img.destTop += totalPannedPoint.y;\n                    parent.panPoint.totalPannedPoint = totalPannedPoint;\n                    parent.notify('draw', { prop: 'updateFlipPan', value: { tempSelectionObj: null } });\n                }\n                else {\n                    parent.panPoint.totalPannedInternalPoint = totalPannedInternalPoint;\n                    parent.panPoint.totalPannedClientPoint = totalPannedClientPoint;\n                    parent.panPoint.currentPannedPoint = { x: 0, y: 0 };\n                    parent.isCropTab = true;\n                    this.rotatePan();\n                    parent.isCropTab = false;\n                }\n            }\n            else if (parent.transform.degree !== 0 && parent.transform.cropZoomFactor > 0) {\n                parent.transform.zoomFactor = 0;\n                parent.transform.cropZoomFactor = null;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n            }\n        }\n    };\n    Transform.prototype.calcMaxDimension = function (width, height, obj, isImgShape) {\n        var object = { toolbarHeight: 0 };\n        if (!isBlazor()) {\n            this.parent.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: object } });\n        }\n        else {\n            object['toolbarHeight'] = this.parent.toolbarHeight;\n        }\n        var canvasMaxWidth = isImgShape ? this.parent.element.clientWidth / 3 :\n            this.parent.element.clientWidth;\n        var canvasMaxHeight = isImgShape ? (this.parent.element.clientHeight - object['toolbarHeight']) / 3 :\n            this.parent.element.clientHeight - object['toolbarHeight'];\n        canvasMaxHeight = Browser.isDevice ? canvasMaxHeight - object['toolbarHeight'] : canvasMaxHeight;\n        if (isNullOrUndefined(isImgShape)) {\n            if (canvasMaxWidth > 30) {\n                canvasMaxWidth -= 30;\n            }\n            if (canvasMaxHeight > 30) {\n                canvasMaxHeight -= 30;\n            }\n        }\n        var widthScale = canvasMaxWidth / width;\n        var heightScale = canvasMaxHeight / height;\n        var cssMaxWidth = Math.min(width, canvasMaxWidth);\n        var cssMaxHeight = Math.min(height, canvasMaxHeight);\n        if (widthScale < 1 && widthScale < heightScale) {\n            cssMaxWidth = width * widthScale;\n            cssMaxHeight = height * widthScale;\n        }\n        else if (heightScale < 1 && heightScale < widthScale) {\n            cssMaxWidth = width * heightScale;\n            cssMaxHeight = height * heightScale;\n        }\n        if (isNullOrUndefined(isImgShape)) {\n            var cropObj = { bool: null };\n            this.parent.notify('crop', { prop: 'getPreventScaling', onPropertyChange: false,\n                value: { obj: cropObj } });\n            if (cropObj['bool'] && this.parent.cropObj.activeObj.activePoint &&\n                this.parent.cropObj.activeObj.activePoint.width !== 0 && this.parent.cropObj.activeObj.activePoint.height !== 0) {\n                cssMaxWidth = this.parent.cropObj.activeObj.activePoint.width;\n                cssMaxHeight = this.parent.cropObj.activeObj.activePoint.height;\n            }\n        }\n        if (obj) {\n            obj['width'] = cssMaxWidth;\n            obj['height'] = cssMaxHeight;\n        }\n        return { width: cssMaxWidth, height: cssMaxHeight };\n    };\n    Transform.prototype.updatePanPoints = function (panRegion, obj) {\n        var parent = this.parent;\n        var tempActObj = extend({}, parent.activeObj, {}, true);\n        var tempDestLeft = parent.img.destLeft;\n        var tempDestTop = parent.img.destTop;\n        if (isNullOrUndefined(this.tempPanMove)) {\n            this.tempPanMove = { x: this.panMove.x, y: this.panMove.y };\n        }\n        var xDiff = this.panMove.x - this.tempPanMove.x;\n        var yDiff = this.panMove.y - this.tempPanMove.y;\n        switch (panRegion) {\n            case '':\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'horizontal':\n                this.updateFlipActiveObj(panRegion);\n                xDiff = this.tempPanMove.x - this.panMove.x;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'vertical':\n                this.updateFlipActiveObj(panRegion);\n                yDiff = this.tempPanMove.y - this.panMove.y;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop += yDiff;\n                break;\n            case 'horizontalVertical':\n                this.updateFlipActiveObj(panRegion);\n                xDiff = this.tempPanMove.x - this.panMove.x;\n                parent.img.destLeft += xDiff;\n                parent.img.destTop -= yDiff;\n                break;\n            case 'verticalHorizontal':\n                this.updateFlipActiveObj(panRegion);\n                yDiff = this.tempPanMove.y - this.panMove.y;\n                parent.img.destLeft -= xDiff;\n                parent.img.destTop += yDiff;\n                break;\n        }\n        this.limitPan();\n        parent.activeObj = tempActObj;\n        if (obj) {\n            obj['x'] = parent.img.destLeft - tempDestLeft;\n            obj['y'] = parent.img.destTop - tempDestTop;\n        }\n        return { x: parent.img.destLeft - tempDestLeft, y: parent.img.destTop - tempDestTop };\n    };\n    Transform.prototype.resizeImage = function (width, height) {\n        var parent = this.parent;\n        var temp = true;\n        var temp1 = true;\n        parent.allowDownScale = false;\n        parent.img.srcLeft = 0;\n        parent.img.srcTop = 0;\n        parent.isAspectRatio = true;\n        var minimum = [];\n        parent.img.srcWidth = parent.baseImg.width;\n        parent.img.srcHeight = parent.baseImg.height;\n        if (parent.resizeSrc && parent.resizeSrc.width != 0 && parent.resizeSrc.height != 0) {\n            parent.img.srcLeft = parent.resizeSrc.startX;\n            parent.img.srcTop = parent.resizeSrc.startY;\n            parent.img.srcWidth = parent.resizeSrc.width;\n            parent.img.srcHeight = parent.resizeSrc.height;\n        }\n        while ((width < parent.img.destWidth || height < parent.img.destHeight) && temp1) {\n            this.zoomAction(-.1, null, true);\n            if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    this.zoomAction(0.0125, null, true);\n                    temp1 = false;\n                    minimum.push(parent.img.destWidth);\n                }\n            }\n        }\n        while ((width > parent.img.destWidth || height > parent.img.destHeight) && temp1 && temp) {\n            this.zoomAction(.1, null, true);\n            if (width < parent.img.destWidth || height < parent.img.destHeight) {\n                while (width < parent.img.destWidth) {\n                    this.zoomAction(-.0125, null, true);\n                    temp = false;\n                    minimum.push(parent.img.destWidth);\n                }\n            }\n        }\n        var nearestNumber = minimum[0];\n        var smallestDifference = Math.abs(parent.img.destWidth - nearestNumber);\n        for (var _i = 0, minimum_1 = minimum; _i < minimum_1.length; _i++) {\n            var num = minimum_1[_i];\n            var difference = Math.abs(width - num);\n            if (difference < smallestDifference) {\n                nearestNumber = num;\n                smallestDifference = difference;\n            }\n        }\n        if (nearestNumber < width && temp) {\n            this.zoomAction(-.0125, null, true);\n            temp = false;\n        }\n        if (nearestNumber > width && !temp) {\n            this.zoomAction(.0125, null, true);\n            temp = false;\n        }\n        this.zoomAction(.0125, null, true);\n        parent.allowDownScale = true;\n        this.zoomAction(-.0125, null, true);\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var prevObj = extend({}, this.prevResizeCurrObj, {}, true);\n        parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'resize',\n                previousObj: prevObj, previousObjColl: prevObj.objColl, previousPointColl: prevObj.pointColl,\n                previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null, currentText: null,\n                previousFilter: null, isCircleCrop: parent.isCircleCrop } });\n        parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n    };\n    Transform.prototype.resizeCrop = function (width, height) {\n        var parent = this.parent;\n        var temp = true;\n        var obj1 = { prevObj: parent.prevObj };\n        parent.cropObj = extend({}, parent.prevCropObj, {}, true);\n        parent.allowDownScale = false;\n        parent.notify('toolbar', { prop: 'getPrevObj', onPropertyChange: false, value: { obj: obj1 } });\n        var activeObj = extend({}, obj1['prevObj']['activeObj'], {}, true);\n        obj1['prevObj']['activeObj'] = extend({}, parent.activeObj, {}, true);\n        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj1['prevObj'] } });\n        parent.objColl = extend([], obj1['prevObj']['objColl'], [], true);\n        parent.pointColl = extend([], obj1['prevObj']['pointColl'], [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        var tempwidth = width;\n        var tempheight = height;\n        var tempZoom = false;\n        if (height >= width && height <= Math.ceil(parent.img.destHeight)) {\n            while ((height <= Math.ceil(parent.img.destHeight)) && temp) {\n                this.zoomAction(-.1, null, true);\n                if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                        this.zoomAction(.0125, null, true);\n                        temp = false;\n                    }\n                }\n            }\n        }\n        else if (height <= width && width < parent.img.destWidth) {\n            while ((width < parent.img.destWidth) && temp) {\n                this.zoomAction(-.1, null, true);\n                if (width > parent.img.destWidth || height > parent.img.destHeight) {\n                    while (width > parent.img.destWidth || height > parent.img.destHeight) {\n                        this.zoomAction(.0125, null, true);\n                        temp = false;\n                    }\n                }\n            }\n        }\n        else if (height >= width && height >= parent.img.destHeight) {\n            while ((height >= parent.img.destHeight) && temp) {\n                this.zoomAction(.1, null, true);\n            }\n        }\n        else if (width >= height && width >= parent.img.destWidth) {\n            while ((width >= parent.img.destWidth) && temp) {\n                this.zoomAction(.1, null, true);\n            }\n            if (width < parent.img.destWidth && height < parent.img.destHeight) {\n                while (width < parent.img.destWidth && height < parent.img.destHeight) {\n                    this.zoomAction(-.0125, null, true);\n                    temp = false;\n                }\n                this.zoomAction(.0125, null, true);\n            }\n        }\n        else if (height > parent.img.destHeight && width > parent.img.destWidth) {\n            while ((height > parent.img.destHeight) && (width > parent.img.destWidth) && temp) {\n                this.zoomAction(.1, null, true);\n            }\n            if (width < parent.img.destWidth && height < parent.img.destHeight) {\n                while (width < parent.img.destWidth && height < parent.img.destHeight) {\n                    this.zoomAction(-.0125, null, true);\n                    temp = false;\n                }\n                this.zoomAction(.0125, null, true);\n            }\n        }\n        this.resizeImg(activeObj, width, height);\n        width = tempwidth;\n        height = tempheight;\n        if ((height !== parent.img.destHeight || width !== parent.img.destWidth)) {\n            while ((height > parent.img.destHeight || width > parent.img.destWidth)) {\n                this.zoomAction(.0125, null, true);\n                tempZoom = true;\n            }\n            if (tempZoom) {\n                this.zoomAction(-.0125, null, true);\n                tempZoom = false;\n            }\n        }\n        if ((height !== parent.img.destHeight || width !== parent.img.destWidth)) {\n            while ((height < parent.img.destHeight || width < parent.img.destWidth)) {\n                this.zoomAction(-.0125, null, true);\n                tempZoom = true;\n            }\n            if (tempZoom) {\n                this.zoomAction(-.0125, null, true);\n                tempZoom = false;\n            }\n        }\n        obj1['prevObj']['activeObj'] = extend({}, activeObj, {}, true);\n        this.zoomAction(.0125, null, true);\n        parent.allowDownScale = this.preventDownScale ? false : true;\n        parent.isCropTab = false;\n        this.zoomAction(-.0125, null, true);\n        parent.aspectWidth = width;\n        parent.aspectHeight = height;\n    };\n    Transform.prototype.resizeImg = function (activeObj, width, height) {\n        var parent = this.parent;\n        var widthRatio = width / parent.img.destWidth;\n        var heightRatio = height / parent.img.destHeight;\n        if (activeObj.shape) {\n            parent.currSelectionPoint = activeObj;\n        }\n        else if (parent.img.srcWidth === parent.baseImgCanvas.width && parent.img.srcHeight === parent.baseImgCanvas.height) {\n            parent.currSelectionPoint = null;\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n        }\n        if (isNullOrUndefined(parent.currSelectionPoint)) {\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: parent.img.destLeft, startY: parent.img.destTop,\n                    width: parent.img.destWidth, height: parent.img.destHeight } });\n        }\n        else {\n            parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n        }\n        width = parent.activeObj.activePoint.width * widthRatio;\n        height = parent.activeObj.activePoint.height * heightRatio;\n        var sx = (parent.activeObj.activePoint.startX + (parent.activeObj.activePoint.width / 2)) - (width / 2);\n        var sy = (parent.activeObj.activePoint.startY + (parent.activeObj.activePoint.height / 2)) - (height / 2);\n        parent.transform.defaultZoomFactor = 0;\n        parent.notify('draw', { prop: 'setResizeSelect', value: { bool: true } });\n        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: 'custom', startX: sx, startY: sy, width: width, height: height } });\n        parent.notify('draw', { prop: 'setResizeSelect', value: { bool: false } });\n        parent.isCropToolbar = true;\n        parent.crop();\n        parent.isCropToolbar = false;\n    };\n    Transform.prototype.updateResize = function () {\n        var parent = this.parent;\n        parent.prevCropObj = extend({}, parent.cropObj, {}, true);\n        var currObject = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: currObject } });\n        parent.prevObj = currObject['currObj'];\n        if (parent.currSelectionPoint && parent.prevCropObj.activeObj.shape) {\n            parent.prevObj.activeObj = extend({}, parent.prevCropObj.activeObj, {}, true);\n        }\n        parent.prevObj.objColl = extend([], parent.objColl, [], true);\n        parent.prevObj.pointColl = extend([], parent.pointColl, [], true);\n        parent.prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        parent.prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n            height: parent.img.srcHeight };\n    };\n    Transform.prototype.resize = function (width, height, isAspectRatio) {\n        var _this = this;\n        var parent = this.parent;\n        parent.isResize = true;\n        if (isNullOrUndefined(parent.prevCropObj) && isNullOrUndefined(parent.prevObj)) {\n            parent.notify('transform', { prop: 'updateResize', value: { bool: false } });\n        }\n        var aspectIcon = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n        var nonAspectIcon = parent.element.querySelector('#' + parent.element.id + '_nonaspectratio');\n        if (!isNullOrUndefined(aspectIcon) && !isNullOrUndefined(nonAspectIcon)) {\n            parent.notify('toolbar', { prop: 'initResizeToolbar' });\n            if (Browser.isDevice) {\n                parent.notify('toolbar', { prop: 'init-main-toolbar', value: { isApplyBtn: false, isDevice: true, isOkBtn: true, isResize: true } });\n            }\n        }\n        var resizeEventArgs = { cancel: false, previousWidth: Math.ceil(parent.img.destWidth), previousHeight: Math.ceil(parent.img.destHeight),\n            width: Math.ceil(width), height: height && height !== 0 ? Math.ceil(height) : (parent.aspectHeight ? parent.aspectHeight : Math.ceil(parent.img.destHeight)),\n            isAspectRatio: isAspectRatio ? isAspectRatio : false };\n        if (!isBlazor()) {\n            parent.trigger('resizing', resizeEventArgs);\n            if (!resizeEventArgs.cancel) {\n                this.resizeEventHandler(resizeEventArgs);\n            }\n        }\n        else if (isBlazor() && parent.events && parent.events.imageResizing.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            parent.dotNetRef.invokeMethodAsync('OnImageResizingAsync', resizeEventArgs).then(function (args) {\n                if (!args.cancel) {\n                    _this.resizeEventHandler(args);\n                }\n            });\n        }\n        else {\n            this.resizeEventHandler(resizeEventArgs);\n        }\n    };\n    Transform.prototype.resizeEventHandler = function (args) {\n        var parent = this.parent;\n        var isRotate;\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        var widthElem = parent.element.querySelector(\".e-ie-toolbar-e-resize-width-input .e-numerictextbox\");\n        var heightElem = parent.element.querySelector(\".e-ie-toolbar-e-resize-height-input .e-numerictextbox\");\n        if (args.isAspectRatio) {\n            if (this.resizedImgAngle == null || this.resizedImgAngle !== parent.transform.degree) {\n                this.resizedImgAngle = parent.transform.degree;\n                isRotate = true;\n            }\n            if (isRotate) {\n                parent.notify('transform', { prop: 'resizeImage', value: { width: args.width, height: 0 } });\n                if (aspectRatioHeight) {\n                    getComponent(aspectRatioHeight, 'numerictextbox').value = Math.floor(parent.img.destHeight);\n                    aspectRatioHeight.value = Math.floor(parent.img.destHeight).toString() + ' px';\n                    parent.aspectHeight = Math.floor(parent.img.destHeight);\n                    if (aspectRatioWidth && aspectRatioWidth.value === '') {\n                        getComponent(aspectRatioWidth, 'numerictextbox').value = Math.floor(parent.img.destWidth);\n                        aspectRatioWidth.value = Math.floor(parent.img.destWidth).toString() + ' px';\n                        parent.aspectWidth = Math.floor(parent.img.destWidth);\n                    }\n                }\n                else if (heightElem) {\n                    heightElem.value = Math.floor(parent.img.destHeight).toString();\n                    parent.aspectHeight = Math.floor(parent.img.destHeight);\n                    if (widthElem && widthElem.value === '') {\n                        widthElem.value = Math.floor(parent.img.destWidth).toString();\n                        parent.aspectWidth = Math.floor(parent.img.destWidth);\n                    }\n                }\n            }\n            else {\n                parent.notify('transform', { prop: 'resizeImage', value: { width: args.width, height: null } });\n            }\n        }\n        else {\n            if (this.resizedImgAngle !== null && this.resizedImgAngle !== parent.transform.degree) {\n                this.resizedImgAngle = parent.transform.degree;\n                isRotate = true;\n            }\n            if (isRotate) {\n                parent.notify('transform', { prop: 'setPreventDownScale', value: { bool: true } });\n                parent.notify('transform', { prop: 'resizeCrop', value: { width: args.width, height: args.height } });\n                parent.okBtn();\n                parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                    height: parent.img.srcHeight };\n                if (isBlazor()) {\n                    parent.updateToolbar(parent.element, 'resize');\n                }\n                else {\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    parent.notify('transform', { prop: 'setPreventDownScale', value: { bool: false } });\n                    parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                }\n            }\n            else {\n                parent.notify('transform', { prop: 'resizeCrop', value: { width: args.width, height: args.height } });\n            }\n        }\n        this.resizedImgAngle = parent.transform.degree;\n    };\n    return Transform;\n}());\nexport { Transform };\n","import { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nvar UndoRedo = /** @class */ (function () {\n    function UndoRedo(parent) {\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    UndoRedo.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    UndoRedo.prototype.addEventListener = function () {\n        this.parent.on('undo-redo', this.undoRedo, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    UndoRedo.prototype.removeEventListener = function () {\n        this.parent.off('undo-redo', this.undoRedo);\n        this.parent.off('destroyed', this.destroy);\n    };\n    UndoRedo.prototype.initializeUrPvtProp = function () {\n        if (this.parent.lowerCanvas) {\n            this.lowerContext = this.parent.lowerCanvas.getContext('2d');\n        }\n        if (this.parent.upperCanvas) {\n            this.upperContext = this.parent.upperCanvas.getContext('2d');\n        }\n    };\n    UndoRedo.prototype.undoRedo = function (args) {\n        this.initializeUrPvtProp();\n        switch (args.prop) {\n            case 'updateUndoRedoColl':\n                this.updateUrc(args.value['operation'], args.value['previousObj'], args.value['previousObjColl'], args.value['previousPointColl'], args.value['previousSelPointColl'], args.value['previousCropObj'], args.value['previousText'], args.value['currentText'], args.value['previousFilter'], args.value['isCircleCrop']);\n                break;\n            case 'refreshUrc':\n                this.refreshUrc(args.value['bool']);\n                break;\n            case 'updateCurrUrc':\n                this.updateCurrUrc(args.value['type']);\n                break;\n            case 'call-undo':\n                this.callUndo();\n                break;\n            case 'call-redo':\n                this.callRedo();\n                break;\n            case 'undo':\n                this.undo();\n                break;\n            case 'redo':\n                this.redo();\n                break;\n            case 'updateUrObj':\n                this.updateUrObj(args.value['objColl']);\n                break;\n            case 'updateUndoRedo':\n                this.updateUndoRedo();\n                break;\n            case 'getAppliedUndoRedoColl':\n                args.value['obj']['appliedUndoRedoColl'] = this.appliedUndoRedoColl;\n                break;\n            case 'getUndoRedoStep':\n                args.value['obj']['undoRedoStep'] = this.undoRedoStep;\n                break;\n            case 'setUndoRedoStep':\n                this.undoRedoStep = args.value['step'];\n                break;\n            case 'undoDefault':\n                this.undoDefault(args.value['obj']);\n                break;\n            case 'reset':\n                this.reset();\n                break;\n        }\n    };\n    UndoRedo.prototype.getModuleName = function () {\n        return 'undo-redo';\n    };\n    UndoRedo.prototype.reset = function () {\n        this.tempCurrSelPoint = null;\n        this.undoRedoStep = 0;\n        this.undoRedoColl = [];\n        this.appliedUndoRedoColl = [];\n        this.tempActObj = null;\n        this.tempUndoRedoColl = [];\n        this.tempUndoRedoStep = 0;\n    };\n    UndoRedo.prototype.refreshUrc = function (refreshToolbar) {\n        var parent = this.parent;\n        refreshToolbar = refreshToolbar ? refreshToolbar : false;\n        if (refreshToolbar) {\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: true } });\n            }\n            this.tempUndoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n            this.tempUndoRedoStep = this.undoRedoStep;\n        }\n        else if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        }\n        this.undoRedoColl = this.undoRedoColl.slice(0, this.undoRedoStep);\n        this.appliedUndoRedoColl = this.appliedUndoRedoColl.slice(0, this.undoRedoStep);\n        parent.isUndoRedo = parent.currObjType.isUndoAction = false;\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n    };\n    UndoRedo.prototype.updateCurrUrc = function (type) {\n        var parent = this.parent;\n        if (parent.isResize) {\n            return;\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n        }\n        if (type === 'ok') {\n            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: false } });\n            var collection = this.tempUndoRedoColl.length > 0 ?\n                extend([], this.tempUndoRedoColl, [], true) :\n                extend([], this.undoRedoColl, [], true);\n            var prevObj = this.undoRedoColl[this.undoRedoColl.length - 1];\n            if (isNullOrUndefined(this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1])) {\n                if (this.undoRedoColl[0]) {\n                    prevObj.previousCropObj = collection[0].previousCropObj;\n                    prevObj.previousObj = collection[0].previousObj;\n                    prevObj.previousObjColl = collection[0].previousObjColl;\n                    prevObj.previousPointColl = collection[0].previousPointColl;\n                    prevObj.previousText = collection[0].previousText;\n                }\n            }\n            else if (prevObj.operation !== 'imageHFlip' && prevObj.operation !== 'imageVFlip') {\n                prevObj.previousCropObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentCropObj;\n                prevObj.previousObj = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentObj;\n                prevObj.previousObjColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentObjColl;\n                prevObj.previousPointColl = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentPointColl;\n                prevObj.previousText = this.appliedUndoRedoColl[this.appliedUndoRedoColl.length - 1].currentText;\n            }\n            if (prevObj) {\n                if (prevObj.operation !== 'imageHFlip' && prevObj.operation !== 'imageVFlip') {\n                    var obj = this.getZeroZoomObjPointValue(prevObj.currentObjColl, prevObj.currentPointColl);\n                    prevObj.currentObjColl = obj['obj'];\n                    prevObj.currentPointColl = obj['point'];\n                }\n                this.appliedUndoRedoColl.push(prevObj);\n            }\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        else if (this.tempUndoRedoColl.length > 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n        }\n        if (this.appliedUndoRedoColl.length > 16) {\n            this.appliedUndoRedoColl.splice(0, 1);\n        }\n        this.undoRedoColl = [];\n        this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        if (type === 'ok') {\n            this.undoRedoStep = this.undoRedoColl.length;\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'enable-disable-btns' });\n            }\n            else {\n                parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n            }\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.togglePan = true;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n    };\n    UndoRedo.prototype.cancelCropSelection = function () {\n        var parent = this.parent;\n        var isCropSelection = false;\n        var splitWords;\n        if (parent.activeObj.shape) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (parent.currObjType.isCustomCrop || (splitWords && splitWords[0] === 'crop')) {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n        }\n        if (this.tempUndoRedoColl.length !== 0 || this.tempUndoRedoStep !== 0) {\n            this.appliedUndoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoColl = extend([], this.tempUndoRedoColl, [], true);\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.tempUndoRedoColl = [];\n            this.tempUndoRedoStep = 0;\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'setEnableDisableUndoRedo', value: { isPrevent: false } });\n            }\n        }\n    };\n    UndoRedo.prototype.refreshToolbarActions = function () {\n        var parent = this.parent;\n        if (!isBlazor()) {\n            if (parent.activeObj.shape) {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                        isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                parent.notify('toolbar', { prop: 'update-toolbar-items', onPropertyChange: false });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n        }\n        else if (isNullOrUndefined(parent.activeObj.shape)) {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    UndoRedo.prototype.applyCurrentChanges = function () {\n        var parent = this.parent;\n        parent.currObjType.isFiltered = false;\n        if (parent.transform.zoomFactor === 0) {\n            parent.togglePan = false;\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: false } });\n        }\n        if (parent.element.querySelector('.e-contextual-toolbar-wrapper') && !isBlazor()) {\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (parent.togglePen) {\n            parent.togglePen = false;\n            parent.upperCanvas.style.cursor = parent.cursor = 'default';\n            this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        }\n        if (this.appliedUndoRedoColl.length > 0) {\n            this.undoRedoColl = extend([], this.appliedUndoRedoColl, [], true);\n        }\n    };\n    UndoRedo.prototype.callUndo = function () {\n        this.applyCurrentChanges();\n        this.undo();\n    };\n    UndoRedo.prototype.callRedo = function () {\n        this.applyCurrentChanges();\n        this.redo();\n    };\n    UndoRedo.prototype.undo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep > 0) {\n                this.refreshToolbarActions();\n                if (parent.activeObj.activePoint && parent.activeObj.activePoint.width !== 0) {\n                    this.tempActObj = parent.activeObj;\n                }\n                parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                this.undoRedoStep--;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                    if (parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                    }\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && parent.textArea.style.display === 'block') {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                var activeObj = void 0;\n                parent.cropObj = extend({}, obj.previousCropObj, {}, true);\n                parent.afterCropActions = obj.previousObj.afterCropActions;\n                this.lowerContext.filter = obj.previousObj.filter;\n                parent.canvasFilter = this.lowerContext.filter;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                    case 'brightness':\n                    case 'contrast':\n                    case 'hue':\n                    case 'saturation':\n                    case 'opacity':\n                    case 'blur':\n                    case 'exposure':\n                    case 'default':\n                    case 'chrome':\n                    case 'cold':\n                    case 'warm':\n                    case 'grayscale':\n                    case 'blackandwhite':\n                    case 'sepia':\n                    case 'invert':\n                    case 'sharpen':\n                        this.shapeTransform(obj.previousObjColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.previousPointColl, obj.previousSelPointColl);\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.previousPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.previousObjColl, obj.previousPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.updateTextAreaCustomization(activeObj, obj.previousObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.previousObjColl, true);\n                        break;\n                    case 'frame':\n                        parent.transform.zoomFactor = parent.transform.defaultZoomFactor = obj.previousObj.defaultZoom;\n                        parent.setProperties({ zoomSettings: { zoomFactor: obj.previousObj.zoomFactor } }, true);\n                        parent.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                            value: { previousZoomValue: parent.zoomSettings.zoomFactor } });\n                        extend(parent.frameObj, obj.previousObj.frameObj);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true, isPreventClearRect: null, isFrame: true } });\n                        break;\n                    case 'imageHFlip':\n                        this.imageFlip('horizontal', obj.previousObjColl);\n                        break;\n                    case 'imageVFlip':\n                        this.imageFlip('vertical', obj.previousObjColl);\n                        break;\n                    default:\n                        this.undoDefault(obj);\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation, filter: obj.filter } });\n                        break;\n                }\n                if (obj.operation === 'crop') {\n                    if (obj.previousObj.currSelectionPoint) {\n                        parent.currSelectionPoint = extend({}, obj.previousObj.currSelectionPoint, {}, true);\n                        if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                            parent.currSelectionPoint = null;\n                        }\n                    }\n                    parent.updateCropTransformItems();\n                    parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                        value: { type: 'custom', startX: null, startY: null, width: null, height: null } });\n                    if (parent.isCircleCrop) {\n                        parent.isCircleCrop = false;\n                        this.tempCurrSelPoint = extend({}, parent.currSelectionPoint, {}, true);\n                        parent.currSelectionPoint = null;\n                    }\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n                    parent.currObjType.isActiveObj = false;\n                }\n                if ((this.undoRedoColl[this.undoRedoStep - 1]\n                    && this.undoRedoColl[this.undoRedoStep - 1].isCircleCrop)) {\n                    parent.isCircleCrop = true;\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n                this.endUndoRedo(obj.operation, true);\n            }\n        }\n    };\n    UndoRedo.prototype.redo = function () {\n        var parent = this.parent;\n        this.cancelCropSelection();\n        if (!parent.disabled && parent.isImageLoaded) {\n            if (this.undoRedoStep < this.appliedUndoRedoColl.length) {\n                this.refreshToolbarActions();\n                this.undoRedoStep++;\n                if (!isBlazor()) {\n                    parent.notify('toolbar', { prop: 'enable-disable-btns' });\n                }\n                else {\n                    parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n                }\n                parent.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep - 1];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    parent.currObjType.isUndoAction = false;\n                }\n                else {\n                    parent.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && parent.textArea.style.display === 'block') {\n                    parent.textArea.style.display = 'none';\n                }\n                parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: true } });\n                parent.cropObj = extend({}, obj.currentCropObj, {}, true);\n                parent.afterCropActions = obj.currentObj.afterCropActions;\n                this.lowerContext.filter = obj.currentObj.filter;\n                if (!isBlazor() && parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                    parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                parent.canvasFilter = this.lowerContext.filter;\n                var activeObj = void 0;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                    case 'brightness':\n                    case 'contrast':\n                    case 'hue':\n                    case 'saturation':\n                    case 'opacity':\n                    case 'blur':\n                    case 'exposure':\n                    case 'default':\n                    case 'chrome':\n                    case 'cold':\n                    case 'warm':\n                    case 'grayscale':\n                    case 'blackandwhite':\n                    case 'sepia':\n                    case 'invert':\n                    case 'sharpen':\n                        this.shapeTransform(obj.currentObjColl);\n                        break;\n                    case 'freehanddraw':\n                    case 'freehand-draw':\n                        this.updateFreehandDraw(obj.currentPointColl, obj.currentSelPointColl);\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.updateFreehandDrawCustomized(obj.currentPointColl);\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        this.updateDelete(obj.operation, obj.currentObjColl, obj.currentPointColl);\n                        break;\n                    case 'textAreaCustomization':\n                        this.updateTextAreaCustomization(activeObj, obj.currentObjColl);\n                        break;\n                    case 'text':\n                        this.updateText(obj.currentObjColl, false);\n                        break;\n                    case 'frame':\n                        extend(parent.frameObj, obj.currentObj.frameObj);\n                        parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true, isPreventClearRect: null, isFrame: true } });\n                        break;\n                    case 'imageHFlip':\n                        this.imageFlip('horizontal', obj.currentObjColl);\n                        break;\n                    case 'imageVFlip':\n                        this.imageFlip('vertical', obj.currentObjColl);\n                        break;\n                    default:\n                        parent.objColl = [];\n                        parent.pointColl = [];\n                        parent.freehandCounter = 0;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: [] } } });\n                        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.currentObj } });\n                        parent.img.destLeft = obj.currentObj.destPoints.startX;\n                        parent.img.destTop = obj.currentObj.destPoints.startY;\n                        activeObj = extend({}, parent.activeObj, {}, true);\n                        parent.objColl = extend([], obj.currentObjColl, [], true);\n                        parent.pointColl = extend([], obj.currentPointColl, [], true);\n                        parent.freehandCounter = parent.pointColl.length;\n                        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                            value: { obj: { selPointColl: extend([], obj.currentSelPointColl, [], true) } } });\n                        this.lowerContext.filter = 'none';\n                        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n                        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n                        this.lowerContext.filter = obj.currentObj.filter;\n                        parent.activeObj = activeObj;\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n                            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                        }\n                        parent.notify('filter', { prop: 'set-adjustment', value: { operation: obj.operation } });\n                        parent.notify('filter', { prop: 'update-filter', value: { operation: obj.operation } });\n                        break;\n                }\n                if (obj.operation === 'crop' && obj.isCircleCrop) {\n                    parent.isCircleCrop = true;\n                    parent.currSelectionPoint = extend({}, this.tempCurrSelPoint, {}, true);\n                    this.tempCurrSelPoint = null;\n                }\n                if (obj.operation === 'crop' && !obj.isCircleCrop) {\n                    parent.isCircleCrop = false;\n                }\n                if (obj.operation === 'crop' && obj.currentObj.currSelectionPoint) {\n                    parent.currSelectionPoint = extend({}, obj.currentObj.currSelectionPoint, {}, true);\n                }\n                if (parent.currSelectionPoint && isNullOrUndefined(parent.currSelectionPoint.shape)) {\n                    parent.currSelectionPoint = null;\n                }\n                this.endUndoRedo(obj.operation, false);\n            }\n        }\n    };\n    UndoRedo.prototype.imageFlip = function (type, objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.activeObj = extend({}, parent.objColl[parent.objColl.length - 1], {}, true);\n        parent.objColl.pop();\n        if (parent.activeObj.shape && parent.activeObj.shape === 'image') {\n            if (type === 'horizontal') {\n                if (isNullOrUndefined(parent.activeObj.isHorImageFlip) && parent.activeObj.isVerImageFlip) {\n                    parent.activeObj.isHorImageFlip = true;\n                    parent.activeObj.isVerImageFlip = null;\n                    parent.horizontalFlip(this.upperContext, true);\n                }\n                else {\n                    if (isNullOrUndefined(parent.activeObj.isHorImageFlip) || !parent.activeObj.isHorImageFlip) {\n                        parent.activeObj.isHorImageFlip = true;\n                    }\n                    else {\n                        parent.activeObj.isHorImageFlip = null;\n                    }\n                    parent.horizontalFlip(this.upperContext, true);\n                }\n            }\n            else if (type === 'vertical') {\n                if (isNullOrUndefined(parent.activeObj.isVerImageFlip) && parent.activeObj.isHorImageFlip) {\n                    parent.activeObj.isVerImageFlip = true;\n                    parent.activeObj.isHorImageFlip = null;\n                    parent.verticalFlip(this.upperContext, true);\n                }\n                else {\n                    if (isNullOrUndefined(parent.activeObj.isVerImageFlip) || !parent.activeObj.isVerImageFlip) {\n                        parent.activeObj.isVerImageFlip = true;\n                    }\n                    else {\n                        parent.activeObj.isVerImageFlip = null;\n                    }\n                    parent.verticalFlip(this.upperContext, true);\n                }\n            }\n            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        }\n        else {\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n        }\n    };\n    UndoRedo.prototype.shapeTransform = function (objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDraw = function (pointColl, selPointColl) {\n        var parent = this.parent;\n        parent.pointColl = pointColl;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: selPointColl } } });\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateFreehandDrawCustomized = function (pointColl) {\n        var parent = this.parent;\n        parent.pointColl = pointColl;\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateDelete = function (operation, objColl, pointColl) {\n        var parent = this.parent;\n        if (operation === 'deleteFreehandDrawing') {\n            parent.pointColl = pointColl;\n            parent.freehandCounter = parent.pointColl.length;\n            parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        else if (operation === 'deleteObj') {\n            parent.objColl = objColl;\n            parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        }\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextAreaCustomization = function (activeObj, objColl) {\n        var parent = this.parent;\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: true } });\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        for (var i = 0, len = objColl.length; i < len; i++) {\n            if (this.tempActObj) {\n                if (this.tempActObj.currIndex === objColl[i].currIndex) {\n                    activeObj = extend({}, objColl[i], {}, true);\n                    parent.objColl.splice(i, 1);\n                    break;\n                }\n            }\n            else {\n                activeObj = extend({}, objColl[objColl.length - 1], {}, true);\n                parent.objColl.splice(i, 1);\n                break;\n            }\n        }\n        if (activeObj) {\n            this.updateTextBox(activeObj);\n        }\n        if (parent.textArea.style.display === 'block') {\n            parent.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n        }\n    };\n    UndoRedo.prototype.updateText = function (objColl, allowActiveObj) {\n        var parent = this.parent;\n        if (this.tempActObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        if (objColl.length === 0 && parent.objColl.length === 1) {\n            this.tempActObj = extend({}, parent.objColl[0], {}, true);\n        }\n        else {\n            for (var i = 0; i < parent.objColl.length; i++) {\n                if (parent.objColl[i] && isNullOrUndefined(objColl[i])) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n                if (objColl[i].currIndex !== parent.objColl[i].currIndex) {\n                    this.tempActObj = extend({}, parent.objColl[i], {}, true);\n                    break;\n                }\n            }\n        }\n        if (allowActiveObj) {\n            parent.activeObj = extend({}, this.tempActObj, {}, true);\n        }\n        parent.objColl = extend([], objColl, [], true);\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: true } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.isUndoRedo = true;\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n    };\n    UndoRedo.prototype.updateTextBox = function (obj) {\n        var parent = this.parent;\n        this.upperContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, parent.lowerCanvas.width, parent.lowerCanvas.height);\n        parent.notify('draw', { prop: 'redrawImgWithObj', onPropertyChange: false });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'destroyQuickAccessToolbar');\n        }\n        parent.textArea.style.display = 'block';\n        parent.textArea.style.fontFamily = obj.textSettings.fontFamily;\n        parent.textArea.style.fontSize = obj.textSettings.fontSize + 'px';\n        parent.textArea.style.color = obj.strokeSettings.strokeColor;\n        parent.textArea.style.fontWeight = obj.textSettings.bold ? 'bold' : 'normal';\n        parent.textArea.style.fontStyle = obj.textSettings.italic ? 'italic' : 'normal';\n        parent.textArea.style.border = '2px solid ' + parent.themeColl[parent.theme]['primaryColor'];\n        parent.textArea.value = obj.keyHistory;\n        parent.activeObj = extend({}, obj, {}, true);\n        parent.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n            value: { isTextBox: null } });\n        parent.textArea.style.width = parent.activeObj.activePoint.width + 'px';\n    };\n    UndoRedo.prototype.undoDefault = function (obj) {\n        this.lowerContext.filter = obj.previousObj.filter;\n        var parent = this.parent;\n        parent.objColl = [];\n        parent.pointColl = [];\n        parent.freehandCounter = 0;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: [] } } });\n        parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: obj.previousObj } });\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.img.destLeft = obj.previousObj.destPoints.startX;\n        parent.img.destTop = obj.previousObj.destPoints.startY;\n        var activeObj = extend({}, parent.activeObj, {}, true);\n        parent.objColl = extend([], obj.previousObjColl, [], true);\n        parent.pointColl = extend([], obj.previousPointColl, [], true);\n        parent.freehandCounter = parent.pointColl.length;\n        parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n            value: { obj: { selPointColl: extend([], obj.previousSelPointColl, [], true) } } });\n        this.lowerContext.filter = 'none';\n        parent.notify('shape', { prop: 'zoomObjColl', onPropertyChange: false, value: { isPreventApply: null } });\n        parent.notify('freehand-draw', { prop: 'zoomFHDColl', onPropertyChange: false, value: { isPreventApply: null } });\n        this.lowerContext.filter = obj.previousObj.filter;\n        parent.activeObj = activeObj;\n        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n        if (parent.activeObj.activePoint.width !== 0 && parent.activeObj.activePoint.height !== 0) {\n            parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        }\n    };\n    UndoRedo.prototype.endUndoRedo = function (operation, isUndo) {\n        var parent = this.parent;\n        var frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        if (((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop) &&\n            JSON.stringify(parent.frameObj) !== JSON.stringify(frameObj)) {\n            parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: true } });\n        }\n        parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n        if (parent.isCircleCrop && ((isUndo && operation !== 'crop') || !isUndo)) {\n            parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                value: { context: this.lowerContext, isSave: null, isFlip: null } });\n        }\n        if (parent.transform.zoomFactor > 0) {\n            parent.notify('selection', { prop: 'setDragCanvas', value: { bool: true } });\n        }\n        parent.notify('draw', { prop: 'setCancelAction', onPropertyChange: false, value: { bool: false } });\n        if (!isBlazor()) {\n            if (parent.activeObj.shape && parent.activeObj.shape.split('-')[0] === 'crop') {\n                parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: true, isCropping: true, isZooming: null, cType: null } });\n            }\n            else {\n                parent.notify('toolbar', { prop: 'refresh-main-toolbar', onPropertyChange: false });\n            }\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else if (isNullOrUndefined(parent.activeObj.shape) || parent.activeObj.shape.split('-')[0] !== 'crop') {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n        }\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'enable-disable-btns' });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n        }\n        if (parent.transform.degree !== 0) {\n            parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                value: { xDiff: 0, yDiff: 0 } });\n        }\n        parent.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        parent.currObjType.isCustomCrop = false;\n    };\n    UndoRedo.prototype.updateUrc = function (operation, previousObj, previousObjColl, previousPointColl, previousSelPointColl, previousCropObj, previousText, currentText, previousFilter, isCircleCrop) {\n        var parent = this.parent;\n        if (parent.isResize) {\n            return;\n        }\n        var obj = { isInitialLoaded: false };\n        if (parent.currObjType.isUndoAction) {\n            this.refreshUrc(true);\n        }\n        parent.notify('draw', { prop: 'isInitialLoaded', onPropertyChange: false, value: { object: obj } });\n        if (!obj['isInitialLoaded'] && parent.allowUndoRedo) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var currentObj = object['currObj'];\n            currentObj.objColl = extend([], parent.objColl, [], true);\n            currentObj.pointColl = extend([], parent.pointColl, [], true);\n            currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            if (operation === 'crop') {\n                currentObj.currSelectionPoint = extend({}, parent.currSelectionPoint, {}, true);\n            }\n            else if (operation === 'frame') {\n                previousObj.destPoints = { startX: parent.frameDestPoints.destLeft, startY: parent.frameDestPoints.destTop,\n                    width: parent.frameDestPoints.destWidth, height: parent.frameDestPoints.destHeight };\n                currentObj.destPoints = { startX: parent.frameDestPoints.destLeft, startY: parent.frameDestPoints.destTop,\n                    width: parent.frameDestPoints.destWidth, height: parent.frameDestPoints.destHeight };\n            }\n            this.undoRedoColl.push({ operation: operation, previousObj: previousObj, currentObj: currentObj,\n                previousObjColl: previousObjColl, currentObjColl: currentObj.objColl,\n                previousPointColl: previousPointColl, currentPointColl: currentObj.pointColl,\n                previousSelPointColl: previousSelPointColl, currentSelPointColl: currentObj.selPointColl,\n                previousCropObj: previousCropObj, currentCropObj: extend({}, parent.cropObj, {}, true),\n                previousText: previousText, currentText: currentText, filter: previousFilter, isCircleCrop: isCircleCrop });\n            if (!isBlazor()) {\n                parent.notify('toolbar', { prop: 'enable-disable-btns', onPropertyChange: false });\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            }\n            else if (parent.currentToolbar !== 'pen-toolbar') {\n                parent.updateToolbar(parent.element, 'enableDisableToolbarBtn');\n            }\n        }\n    };\n    UndoRedo.prototype.updateUrObj = function (objColl) {\n        var parent = this.parent;\n        if (parent.allowUndoRedo) {\n            if (parent.currObjType.isUndoAction) {\n                this.refreshUrc(true);\n            }\n            parent.objColl.push(parent.activeObj);\n            var cropObj = extend({}, parent.cropObj, {}, true);\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var obj = object['currObj'];\n            obj.objColl = extend([], parent.objColl, [], true);\n            obj.pointColl = extend([], parent.pointColl, [], true);\n            obj.afterCropActions = extend([], parent.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            obj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.undoRedoColl.push({ operation: 'shapeTransform', previousObj: obj, currentObj: obj,\n                previousObjColl: objColl, currentObjColl: obj.objColl,\n                previousPointColl: obj.pointColl, currentPointColl: obj.pointColl,\n                previousSelPointColl: obj.selPointColl, currentSelPointColl: obj.selPointColl,\n                previousCropObj: cropObj, currentCropObj: cropObj });\n            parent.notify('selection', { prop: 'redrawShape', onPropertyChange: false,\n                value: { obj: parent.objColl[parent.objColl.length - 1] } });\n        }\n    };\n    UndoRedo.prototype.updateUndoRedo = function () {\n        var parent = this.parent;\n        var prevCropObj = extend({}, parent.cropObj, {}, true);\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], parent.objColl, [], true);\n        prevObj.pointColl = extend([], parent.pointColl, [], true);\n        prevObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        parent.objColl.push(parent.activeObj);\n        this.updateUrc('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevObj.selPointColl, prevCropObj);\n        parent.objColl.pop();\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: null } });\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        if (!isBlazor()) {\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n            parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n        }\n        else {\n            parent.updateToolbar(parent.element, 'imageLoaded');\n        }\n    };\n    UndoRedo.prototype.getZeroZoomObjPointValue = function (obj, point) {\n        var parent = this.parent;\n        var object = { currObj: {} };\n        parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], parent.objColl, [], true);\n        currentObj.pointColl = extend([], parent.pointColl, [], true);\n        currentObj.afterCropActions = extend([], parent.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        parent.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        var cropDimensionObj = { cropDimension: null };\n        parent.notify('transform', { prop: 'getCropDimension', onPropertyChange: false, value: { obj: cropDimensionObj } });\n        var getZeroZoomObjColl = extend([], parent.objColl, [], true);\n        var getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n        var arrowObj = { arrowDimension: null };\n        this.parent.notify('draw', { prop: 'getArrowDimension', onPropertyChange: false, value: { obj: arrowObj } });\n        var tempArrowObj = extend({}, arrowObj['arrowDimension'], {}, true);\n        if (parent.transform.zoomFactor > 0 && (obj.length > 0 || point.length > 0)) {\n            parent.objColl = obj;\n            parent.pointColl = point;\n            var isUndoRedo = parent.isUndoRedo;\n            if (parent.transform.zoomFactor !== 0) {\n                parent.isUndoRedo = parent.isCropTab = true;\n                parent.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n                var zoomSettings = extend({}, parent.zoomSettings, null, true);\n                if (parent.transform.zoomFactor > 0) {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: -parent.transform.zoomFactor, zoomPoint: null, isResize: null } });\n                }\n                else {\n                    parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                        value: { zoomFactor: Math.abs(parent.transform.zoomFactor), zoomPoint: null, isResize: null } });\n                }\n                parent.zoomSettings = zoomSettings;\n                parent.isCropTab = false;\n                parent.isUndoRedo = isUndoRedo;\n                getZeroZoomObjColl = extend([], parent.objColl, [], true);\n                getZeroZoomPointColl = extend([], parent.pointColl, [], true);\n                parent.objColl = [];\n                parent.pointColl = [];\n                parent.freehandCounter = 0;\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: [] } } });\n                parent.notify('transform', { prop: 'setCropDimension', onPropertyChange: false,\n                    value: { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] } });\n                var maxDimension = { width: cropDimensionObj['cropDimension']['width'], height: cropDimensionObj['cropDimension']['height'] };\n                maxDimension.width += (maxDimension.width * currentObj.defaultZoom);\n                maxDimension.height += (maxDimension.height * currentObj.defaultZoom);\n                parent.notify('draw', { prop: 'setZoomCropWidth', value: { width: maxDimension.width, height: maxDimension.height } });\n                parent.notify('draw', { prop: 'setCurrentObj', onPropertyChange: false, value: { obj: currentObj } });\n                parent.img.destLeft = currentObj.destPoints.startX;\n                parent.img.destTop = currentObj.destPoints.startY;\n                parent.panPoint.totalPannedPoint = currentObj.totalPannedPoint;\n                parent.panPoint.totalPannedClientPoint = currentObj.totalPannedClientPoint;\n                parent.panPoint.totalPannedInternalPoint = currentObj.totalPannedInternalPoint;\n                parent.objColl = extend([], currentObj.objColl, [], true);\n                parent.pointColl = extend([], currentObj.pointColl, [], true);\n                parent.freehandCounter = parent.pointColl.length;\n                parent.notify('draw', { prop: 'setArrowDimension', onPropertyChange: false, value: { arrowDimension: tempArrowObj } });\n                parent.notify('freehand-draw', { prop: 'setSelPointColl', onPropertyChange: false,\n                    value: { obj: { selPointColl: extend([], currentObj.selPointColl, [], true) } } });\n                this.lowerContext.filter = 'none';\n                parent.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n                parent.notify('freehand-draw', { prop: 'freehandRedraw', onPropertyChange: false,\n                    value: { context: this.lowerContext, points: null } });\n                parent.notify('freehand-draw', { prop: 'updateFHDCurPts', onPropertyChange: false });\n                this.lowerContext.filter = currentObj.filter;\n                if (parent.transform.degree !== 0) {\n                    parent.notify('transform', { prop: 'drawPannedImage', onPropertyChange: false,\n                        value: { xDiff: 0, yDiff: 0 } });\n                }\n                parent.notify('draw', { prop: 'clearOuterCanvas', onPropertyChange: false, value: { context: this.lowerContext } });\n                if (parent.isCircleCrop || (parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle')) {\n                    parent.notify('crop', { prop: 'cropCircle', onPropertyChange: false,\n                        value: { context: this.lowerContext, isSave: null, isFlip: null } });\n                }\n            }\n        }\n        return { obj: getZeroZoomObjColl, point: getZeroZoomPointColl };\n    };\n    return UndoRedo;\n}());\nexport { UndoRedo };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, Property, addClass, removeClass, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, getComponent, isNullOrUndefined, getUniqueID } from '@syncfusion/ej2-base';\nimport { Dialog, createSpinner } from '@syncfusion/ej2-popups';\nimport { Complex, Browser, ChildProperty, compile as templateCompiler, compile } from '@syncfusion/ej2-base';\nimport { ToolbarModule, Crop, Draw, Filter, FreehandDrawing, Selection, Shape, Transform, UndoRedo, Export, FrameLineStyle, ShapeType } from './../index';\nimport { ZoomTrigger, ImageFinetuneOption } from './../index';\nimport { Uploader } from '@syncfusion/ej2-inputs';\n/**\n * This interface is used to specify settings for finetuning operations on images, including brightness, contrast, hue, saturation, exposure, opacity, and blur. It includes properties for setting minimum and maximum values for each of these options, as well as a default value.\n */\nvar FinetuneSettings = /** @class */ (function (_super) {\n    __extends(FinetuneSettings, _super);\n    function FinetuneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"brightness\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"contrast\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"hue\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"saturation\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"exposure\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"blur\", void 0);\n    return FinetuneSettings;\n}(ChildProperty));\nexport { FinetuneSettings };\n/**\n * An interface used to define the settings such as minimum, maximum, and default zoom factors, and the type of zooming which are available in the image editor control.\n */\nvar ZoomSettings = /** @class */ (function (_super) {\n    __extends(ZoomSettings, _super);\n    function ZoomSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomTrigger\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"minZoomFactor\", void 0);\n    __decorate([\n        Property(10)\n    ], ZoomSettings.prototype, \"maxZoomFactor\", void 0);\n    __decorate([\n        Property(1)\n    ], ZoomSettings.prototype, \"zoomFactor\", void 0);\n    __decorate([\n        Property(null)\n    ], ZoomSettings.prototype, \"zoomPoint\", void 0);\n    return ZoomSettings;\n}(ChildProperty));\nexport { ZoomSettings };\n/**\n * This interface is used to specify settings for selection operations on images, including visibility, stroke color and fill color.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"showCircle\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"strokeColor\", void 0);\n    __decorate([\n        Property(null)\n    ], SelectionSettings.prototype, \"fillColor\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * The Image Editor is a graphical user interface for editing images.\n *\n * {% codeBlock src='image-editor/default/index.md' %}{% endcodeBlock %}\n *\n * @remarks\n * The Image Editor component provides various image editing features such as zooming, cropping, rotating, inserting text and shapes (rectangles, ellipses, and lines), drawing freehand on top of an image, undo/redo, and more.\n *\n */\nvar ImageEditor = /** @class */ (function (_super) {\n    __extends(ImageEditor, _super);\n    /**\n     *\n     * Constructor for creating the widget\n     *\n     * @param  {ImageEditorModel} options - Specifies the image editor model\n     * @param  {string|HTMLDivElement} element - Specifies the target element\n     */\n    function ImageEditor(options, element) {\n        var _this = _super.call(this, options) || this;\n        /**\n         *\n         * Image Editor Private Properties\n         */\n        /** @hidden */\n        _this.isImageLoaded = false;\n        /** @hidden */\n        _this.activeObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [], triangle: [], triangleRatio: [], rotatedAngle: 0 };\n        // current object's ui interaction properties\n        /** @hidden */\n        _this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false, isInitialLine: false,\n            isCustomCrop: false, isZoomed: false, isUndoZoom: false, isUndoAction: false, isFiltered: false, isSave: false, isResize: false };\n        /** @hidden */\n        _this.objColl = [];\n        /** @hidden */\n        // eslint-disable-next-line\n        _this.pointColl = {};\n        /** @hidden */\n        _this.freehandCounter = 0;\n        /** @hidden */\n        _this.points = [];\n        /** @hidden */\n        _this.togglePen = false;\n        /** @hidden */\n        _this.togglePan = false;\n        /** @hidden */\n        _this.img = { destLeft: 0, destTop: 0, destWidth: 0, destHeight: 0, srcLeft: 0, srcTop: 0, srcWidth: 0, srcHeight: 0 };\n        /** @hidden */\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        _this.rotateFlipColl = [];\n        // All prop values saved while cropping (to restore the image to its original state)\n        /** @hidden */\n        _this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {}, rotateFlipColl: [],\n            degree: 0, currFlipState: '', destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n            zoomFactor: 0, previousZoomValue: 0, aspectWidth: null, aspectHeight: null, frame: 'none' };\n        // Stored transformations performed after cropping\n        /** @hidden */\n        _this.afterCropActions = [];\n        /** @hidden */\n        _this.transform = { degree: 0, currFlipState: '', zoomFactor: 0, cropZoomFactor: null, defaultZoomFactor: 0 };\n        /** @hidden */\n        _this.panPoint = { currentPannedPoint: { x: 0, y: 0 }, totalPannedPoint: { x: 0, y: 0 }, totalPannedInternalPoint: { x: 0, y: 0 },\n            totalPannedClientPoint: { x: 0, y: 0 } };\n        /** @hidden */\n        _this.isUndoRedo = false;\n        /** @hidden */\n        _this.isCropTab = false;\n        /** @hidden */\n        _this.isCircleCrop = false;\n        /** @hidden */\n        _this.fontSizeColl = [];\n        /** @hidden */\n        _this.initialAdjustmentValue = '';\n        /** @hidden */\n        _this.currentFilter = '';\n        /** @hidden */\n        _this.canvasFilter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        /** @hidden */\n        _this.toolbarHeight = 0;\n        /** @hidden */\n        _this.isPublicMethod = false;\n        /** @hidden */\n        _this.isCropToolbar = false;\n        /** @hidden */\n        _this.cursor = 'default';\n        /** @hidden */\n        _this.resizeSrc = { startX: _this.img.srcLeft, startY: _this.img.srcTop, width: _this.img.srcWidth, height: _this.img.srcHeight };\n        /** @hidden */\n        _this.isResize = false;\n        /** @hidden */\n        _this.isAspectRatio = false;\n        /** @hidden */\n        _this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        /** @hidden */\n        _this.tempFrameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        /** @hidden */\n        _this.allowDownScale = true;\n        /** @hidden */\n        _this.gradientColor = '';\n        /** @hidden */\n        _this.size = 20;\n        /** @hidden */\n        _this.inset = 0;\n        /** @hidden */\n        _this.offset = 0;\n        /** @hidden */\n        _this.borderRadius = 0;\n        /** @hidden */\n        _this.lineCount = 0;\n        if (!isBlazor()) {\n            ImageEditor_1.Inject(Crop, Draw, Selection, Transform, Export, ToolbarModule);\n            ImageEditor_1.Inject(UndoRedo);\n            ImageEditor_1.Inject(Filter);\n            ImageEditor_1.Inject(Shape);\n            ImageEditor_1.Inject(FreehandDrawing);\n            if (element) {\n                _this.appendTo(element);\n            }\n        }\n        else {\n            new Crop(_this);\n            new Draw(_this);\n            new Filter(_this);\n            new FreehandDrawing(_this);\n            new Selection(_this);\n            new Shape(_this);\n            new Transform(_this);\n            new UndoRedo(_this);\n            new Export(_this);\n        }\n        return _this;\n    }\n    ImageEditor_1 = ImageEditor;\n    /**\n     * To provide the array of modules needed for component rendering.\n     *\n     * @returns {ModuleDeclaration[]} - To provide the array of modules needed for component rendering.\n     * @hidden\n     */\n    ImageEditor.prototype.requiredModules = function () {\n        var modules = [];\n        modules.push({ member: 'crop', args: [this] });\n        modules.push({ member: 'draw', args: [this] });\n        modules.push({ member: 'selection', args: [this] });\n        modules.push({ member: 'transform', args: [this] });\n        modules.push({ member: 'export', args: [this] });\n        modules.push({ member: 'toolbar-module', args: [this] });\n        modules.push({ member: 'undo-redo', args: [this] });\n        modules.push({ member: 'filter', args: [this] });\n        modules.push({ member: 'shape', args: [this] });\n        modules.push({ member: 'freehand-draw', args: [this] });\n        return modules;\n    };\n    ImageEditor.prototype.preRender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.initializeThemeColl();\n    };\n    /**\n     *\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ImageEditor.prototype.render = function () {\n        this.initialize();\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ImageEditor.prototype.getModuleName = function () {\n        return 'image-editor';\n    };\n    /**\n     *\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     * @private\n     */\n    ImageEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     *\n     * Called internally if any of the property value changed.\n     *\n     * @param {ImageEditorModel} newProperties - Specifies new properties\n     * @param {ImageEditorModel} oldProperties - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ImageEditor.prototype.onPropertyChanged = function (newProperties, oldProperties) {\n        var indexObj;\n        for (var _i = 0, _a = Object.keys(newProperties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProperties.cssClass) {\n                        removeClass([this.element], oldProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    if (newProperties.cssClass) {\n                        addClass([this.element], newProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'disabled':\n                    if (newProperties.disabled) {\n                        this.element.classList.add('e-disabled');\n                        this.unwireEvent();\n                    }\n                    else {\n                        this.element.classList.remove('e-disabled');\n                        this.wireEvent();\n                    }\n                    break;\n                case 'height':\n                    this.element.style.height = newProperties.height;\n                    this.update();\n                    break;\n                case 'width':\n                    this.element.style.width = newProperties.width;\n                    this.update();\n                    break;\n                case 'theme':\n                    if (newProperties.theme) {\n                        if (this.theme && this.theme !== '') {\n                            this.theme = this.toPascalCase(this.theme);\n                        }\n                        else {\n                            this.theme = 'Bootstrap5';\n                        }\n                        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n                        this.upperContext.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'imageLoaded');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    break;\n                case 'finetuneSettings':\n                    if (newProperties.finetuneSettings) {\n                        this.finetuneSettings = newProperties.finetuneSettings;\n                        this.notify('filter', { prop: 'update-finetunes' });\n                    }\n                    break;\n                case 'locale':\n                    if (newProperties.locale) {\n                        this.notify('toolbar', { prop: 'setLocale', onPropertyChange: false, value: { locale: newProperties.locale } });\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'imageLoaded');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    break;\n                case 'allowUndoRedo':\n                    if (newProperties.allowUndoRedo) {\n                        this.allowUndoRedo = true;\n                    }\n                    else {\n                        this.allowUndoRedo = false;\n                    }\n                    if (isBlazor()) {\n                        this.updateToolbar(this.element, 'imageLoaded');\n                    }\n                    else {\n                        this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                    }\n                    break;\n                case 'showQuickAccessToolbar':\n                    if (newProperties.showQuickAccessToolbar) {\n                        this.showQuickAccessToolbar = true;\n                        if (!isBlazor()) {\n                            this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n                        }\n                        indexObj = { freehandSelectedIndex: null };\n                        this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                        if (this.activeObj.shape) {\n                            if (isBlazor()) {\n                                this.updateToolbar(this.element, 'quickAccessToolbar', this.activeObj.shape);\n                            }\n                            else {\n                                this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n                            }\n                        }\n                        else if (indexObj['freehandSelectedIndex']) {\n                            if (isBlazor()) {\n                                this.updateToolbar(this.element, 'quickAccessToolbar', 'pen');\n                            }\n                            else {\n                                this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: true } });\n                            }\n                        }\n                    }\n                    else {\n                        this.showQuickAccessToolbar = false;\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'destroyQuickAccessToolbar');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                        }\n                    }\n                    break;\n                case 'zoomSettings':\n                    if (newProperties.zoomSettings) {\n                        this.zoomSettings.zoomTrigger = newProperties.zoomSettings.zoomTrigger;\n                    }\n                    if (isNullOrUndefined(this.zoomSettings.zoomTrigger)) {\n                        this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar |\n                            ZoomTrigger.Commands);\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'imageLoaded');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    else if ((newProperties.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'imageLoaded');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    break;\n                case 'selectionSettings':\n                    if (newProperties.selectionSettings) {\n                        this.selectionSettings = newProperties.selectionSettings;\n                        if (this.activeObj.shape) {\n                            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                            this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n                        }\n                    }\n                    break;\n                case 'toolbar':\n                    if (newProperties.toolbar) {\n                        this.toolbar = newProperties.toolbar;\n                        if (isBlazor()) {\n                            this.updateToolbar(this.element, 'imageLoaded');\n                        }\n                        else {\n                            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                                    isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        }\n                    }\n                    break;\n                case 'toolbarTemplate':\n                    if (newProperties.toolbarTemplate) {\n                        if (!isBlazor()) {\n                            this.notify('toolbar', { prop: 'destroy-bottom-toolbar', onPropertyChange: false });\n                            this.notify('toolbar', { prop: 'destroy-top-toolbar', onPropertyChange: false });\n                            this.element.appendChild(this.createElement('div', {\n                                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n                            }));\n                            this.toolbarTemplateFn();\n                        }\n                    }\n                    break;\n                case 'quickAccessToolbarTemplate':\n                    if (newProperties.quickAccessToolbarTemplate) {\n                        if (!isBlazor()) {\n                            this.notify('toolbar', { prop: 'destroy-qa-toolbar', onPropertyChange: false });\n                            this.quickAccessToolbarTemplateFn();\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    ImageEditor.prototype.destroy = function () {\n        var classList = [];\n        this.element.removeAttribute('tabindex');\n        if (this.cssClass) {\n            classList = classList.concat(this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        removeClass([this.element], classList);\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'destroySubComponents', onPropertyChange: false });\n            this.notify('destroyed', null);\n            _super.prototype.destroy.call(this);\n        }\n        else {\n            this.element.classList.remove('e-image-editor');\n        }\n        this.unwireEvent();\n        this.element.innerHTML = '';\n    };\n    ImageEditor.prototype.initialize = function () {\n        if (this.toolbarTemplate) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            this.toolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-toolbar', onPropertyChange: false });\n            this.notify('toolbar', { prop: 'create-contextual-toolbar', onPropertyChange: false });\n        }\n        this.createCanvas();\n        if (this.element.offsetWidth > 359 && this.element.querySelector('.e-ie-min-drop-content') && this.element.querySelector('.e-ie-drop-content')) {\n            this.element.querySelector('.e-ie-min-drop-content').style.display = 'none';\n            this.element.querySelector('.e-ie-drop-content').style.display = 'block';\n        }\n        this.createDropUploader();\n        if (this.showQuickAccessToolbar) {\n            var canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n            canvasWrapper.appendChild(this.createElement('div', {\n                id: this.element.id + '_quickAccessToolbarArea', className: 'e-quick-access-toolbar-area'\n            }));\n            var quickAccessToolbar = document.getElementById(this.element.id + '_quickAccessToolbarArea');\n            quickAccessToolbar.style.position = 'absolute';\n            quickAccessToolbar.style.display = 'none';\n            if (this.activeObj) {\n                quickAccessToolbar.style.left = this.activeObj.activePoint.startX + 'px';\n                quickAccessToolbar.style.top = this.activeObj.activePoint.startY + 'px';\n            }\n            quickAccessToolbar.style.width = '100%';\n        }\n        if (this.quickAccessToolbarTemplate) {\n            this.quickAccessToolbarTemplateFn();\n        }\n        else {\n            this.notify('toolbar', { prop: 'create-qa-toolbar', onPropertyChange: false });\n        }\n        this.wireEvent();\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        this.canvasFilter = this.lowerContext.filter;\n        this.notify('toolbar', { prop: 'setInitialAdjustmentValue', onPropertyChange: false, value: { value: this.lowerContext.filter } });\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n        this.initializeZoomSettings();\n    };\n    ImageEditor.prototype.createDropUploader = function () {\n        var _this = this;\n        var uploadObj = new Uploader({\n            dropArea: document.getElementsByClassName('e-canvas-wrapper')[0],\n            allowedExtensions: '.jpg, .jpeg, .png,.svg',\n            multiple: false,\n            selected: function (args) {\n                if (args.event.type === 'change' || args.event.type === 'drop') {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var type = args.filesData[0].type;\n                    var errType = 'unsupported';\n                    if ((args.event.type === 'change' || (args.event.type === 'drop' && args.event.dataTransfer.files.length === 1)) && (type === 'png' || type === 'jpg' || type === 'jpeg' || type === 'svg')) {\n                        _this.notify('draw', { prop: 'fileSelect', value: { inputElement: _this.element.querySelector('#' + _this.element.id + '_dropfileUpload'), args: args } });\n                    }\n                    else {\n                        if (args.event.type === 'drop' && args.event.dataTransfer.files.length > 1) {\n                            errType = 'multi-select-image';\n                        }\n                        _this.showDialogPopup(errType);\n                    }\n                }\n            }\n        });\n        uploadObj.appendTo('#' + this.element.id + '_dropfileUpload');\n    };\n    ImageEditor.prototype.dlgCloseBtnClick = function () {\n        getComponent(document.getElementById(this.element.id + '_dialog'), 'dialog').destroy();\n    };\n    /**\n     * Show dialog popup for unsupported files.\n     *\n     * @param { string } type - Specifies the type of error.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.showDialogPopup = function (type) {\n        var content = '';\n        this.element.querySelector('#' + this.element.id + '_dialog').style.display = 'block';\n        var headerObj;\n        var okObj = { key: 'OK' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: okObj } });\n        if (type === 'multi-select-image') {\n            headerObj = { key: 'ImageErrorDialogHeader' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n            var contentObj = { key: 'ImageErrorDialogContent' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n            content = '<span>' + contentObj['value'] + '</span>';\n        }\n        else {\n            headerObj = { key: 'AlertDialogHeader' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: headerObj } });\n            var contentObj = { key: 'AlertDialogContent' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: contentObj } });\n            var supportObj = { key: 'SupportText' };\n            this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: supportObj } });\n            content = '<span>' + contentObj['value'] + ' ' + supportObj['value'] + '<b> JPG, PNG, and SVG</b></span>';\n        }\n        var dialog = new Dialog({\n            header: headerObj['value'],\n            closeOnEscape: true,\n            content: content,\n            target: document.getElementById('target'),\n            width: '285px',\n            isModal: true,\n            animationSettings: { effect: 'Zoom' },\n            close: this.dlgCloseBtnClick.bind(this),\n            buttons: [\n                { click: this.dlgCloseBtnClick.bind(this),\n                    buttonModel: { content: okObj['value'], iconCss: 'e-icons e-close' }\n                }\n            ]\n        });\n        dialog.appendTo('#' + this.element.id + '_dialog');\n    };\n    /**\n     *\n     * This Method will add events to component (element, event, method, current reference)\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.wireEvent = function () {\n        EventHandler.add(document, 'keydown', this.keyDownEventHandler, this);\n        EventHandler.add(document, 'keypress', this.keyUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousedown', this.mouseDownEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(document, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(document, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        EventHandler.add(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        window.addEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.addEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'wireEvent', onPropertyChange: false });\n    };\n    /**\n     *\n     * This Method will remove events from component\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.unwireEvent = function () {\n        EventHandler.remove(document, 'keydown', this.keyDownEventHandler);\n        EventHandler.remove(document, 'keypress', this.keyUpEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousedown', this.mouseDownEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(document, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler);\n        EventHandler.remove(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(document, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(this.upperCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'touchstart', this.touchStartHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        EventHandler.remove(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll);\n        window.removeEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.removeEventListener('change', this.screenOrientation.bind(this));\n        }\n        this.notify('shape', { prop: 'unWireEvent', onPropertyChange: false });\n        this.notify('selection', { prop: 'unWireEvent', onPropertyChange: false });\n    };\n    ImageEditor.prototype.createCanvas = function () {\n        var _this = this;\n        this.element.style.boxSizing = 'border-box';\n        var obj = { toolbarHeight: 0 };\n        this.notify('toolbar', { prop: 'getToolbarHeight', value: { obj: obj } });\n        var height = obj['toolbarHeight'];\n        this.element.style.width = this.width;\n        this.element.style.height = this.height;\n        var canvasWrapper = this.element.appendChild(this.createElement('div', { id: this.element.id + '_canvasWrapper',\n            className: 'e-canvas-wrapper', attrs: { style: 'height:' + (this.element.offsetHeight - height - 2) + 'px; width:' +\n                    (this.element.offsetWidth - 2)\n                    + 'px; position: relative; overflow: hidden; margin: 0 auto;' }\n        }));\n        var dragObj = { key: 'DragText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: dragObj } });\n        var dropObj = { key: 'DropText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: dropObj } });\n        var browseObj = { key: 'BrowseText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: browseObj } });\n        var supportObj = { key: 'SupportText' };\n        this.notify('toolbar', { prop: 'getLocaleText', onPropertyChange: false, value: { obj: supportObj } });\n        var dropAreaElement = this.createElement('div', { id: this.element.id + '_dropArea', className: 'e-ie-drop-area', attrs: { style: 'position: relative;' } });\n        var dropIconElement = this.createElement('span', { className: 'e-ie-drop-icon e-icons e-image', attrs: { style: 'position: absolute;' } });\n        var dropContentElement = this.createElement('span', { className: 'e-ie-drop-content', attrs: { style: 'position: absolute; display: none;' } });\n        dropContentElement.textContent = dragObj['value'] + ' ';\n        var minDropContentElem = this.createElement('span', { className: 'e-ie-min-drop-content', attrs: { style: 'position: absolute;' } });\n        minDropContentElem.textContent = dropObj['value'] + ' ';\n        var dropAnchorElement = this.createElement('a', { id: this.element.id + '_dropBrowse', className: 'e-ie-drop-browse' });\n        dropAnchorElement.textContent = browseObj['value'];\n        var minDropAnchorElem = this.createElement('a', { id: this.element.id + '_dropBrowse', className: 'e-ie-drop-browse' });\n        minDropAnchorElem.textContent = browseObj['value'];\n        dropContentElement.appendChild(dropAnchorElement);\n        minDropContentElem.appendChild(minDropAnchorElem);\n        dropAnchorElement.href = '';\n        minDropAnchorElem.href = '';\n        var dropInfoElement = this.createElement('span', { className: 'e-ie-drop-info', attrs: { position: 'absolute' } });\n        dropInfoElement.textContent = supportObj['value'] + ' SVG, PNG, and JPG';\n        var dropUploader = dropAreaElement.appendChild(this.createElement('input', {\n            id: this.element.id + '_dropfileUpload', className: 'e-fileUpload e-image-upload'\n        }));\n        dropUploader.setAttribute('type', 'file');\n        dropUploader.setAttribute('accept', 'image/*');\n        dropAreaElement.appendChild(dropIconElement);\n        dropAreaElement.appendChild(dropContentElement);\n        dropAreaElement.appendChild(minDropContentElem);\n        dropAreaElement.appendChild(dropInfoElement);\n        canvasWrapper.appendChild(dropAreaElement);\n        this.lowerCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_lowerCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.upperCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_upperCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.baseImgCanvas = this.createElement('canvas', {\n            id: this.element.id + '_baseImgCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.textArea = canvasWrapper.appendChild(this.createElement('textarea', {\n            id: this.element.id + '_textArea', className: 'e-textarea', attrs: { name: 'textArea' }\n        }));\n        var dialog = this.element.appendChild(this.createElement('div', {\n            id: this.element.id + '_dialog', className: 'e-dialog'\n        }));\n        dialog.style.display = 'none';\n        var uploader = this.element.appendChild(this.createElement('input', {\n            id: this.element.id + '_fileUpload', className: 'e-fileUpload'\n        }));\n        uploader.setAttribute('type', 'file');\n        uploader.setAttribute('accept', 'image/*');\n        uploader.style.display = 'none';\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.textArea.style.lineHeight = 'normal';\n        this.lowerCanvas.style.width = this.upperCanvas.style.width = this.inMemoryCanvas.style.width = '100%';\n        this.lowerCanvas.style.height = this.upperCanvas.style.height = this.inMemoryCanvas.style.height = '100%';\n        this.upperCanvas.style.position = this.lowerCanvas.style.position = this.textArea.style.position = 'absolute';\n        this.textArea.style.backgroundColor = 'transparent';\n        this.textArea.style.display = 'none';\n        this.textArea.style.resize = 'none';\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperCanvas.style.cursor = this.cursor = 'default';\n        this.upperCanvas.style.display = 'block';\n        this.upperContext = this.upperCanvas.getContext('2d');\n        document.getElementById(this.element.id + '_dropBrowse').onclick = function () {\n            _this.element.querySelector('#' + _this.element.id + '_dropfileUpload').click();\n            return false;\n        };\n    };\n    ImageEditor.prototype.touchStartHandler = function (e) {\n        this.notify('selection', { prop: 'touchStartHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseDownEventHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'mouseDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseMoveEventHandler = function (e) {\n        this.notify('selection', { prop: 'mouseMoveEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.mouseUpEventHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'mouseUpEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyDownEventHandler = function (e) {\n        this.notify('selection', { prop: 'keyDownEventHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.keyUpEventHandler = function (e) {\n        // eslint-disable-next-line\n        if (this.textArea.style.display === 'block' && e.target.id === this.element.id + '_textArea') {\n            this.notify('selection', { prop: 'textKeyDown', value: { e: e } });\n        }\n    };\n    ImageEditor.prototype.canvasMouseDownHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'canvasMouseDownHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseMoveHandler = function (e) {\n        this.notify('selection', { prop: 'canvasMouseMoveHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.canvasMouseUpHandler = function (e) {\n        if (e.target.className === 'e-ie-drop-browse') {\n            return;\n        }\n        this.notify('selection', { prop: 'canvasMouseUpHandler', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.handleScroll = function (e) {\n        this.notify('selection', { prop: 'handleScroll', onPropertyChange: false, value: { e: e } });\n    };\n    ImageEditor.prototype.adjustToScreen = function () {\n        this.update();\n    };\n    ImageEditor.prototype.screenOrientation = function () {\n        if (Browser.isDevice) {\n            setTimeout(this.adjustToScreen.bind(this), 100);\n        }\n    };\n    ImageEditor.prototype.windowResizeHandler = function () {\n        if (!Browser.isDevice && this.element.classList.contains('e-image-editor')) {\n            this.adjustToScreen();\n        }\n    };\n    ImageEditor.prototype.notifyResetForAllModules = function () {\n        var modules = this.requiredModules();\n        for (var i = 0; i < modules.length; i++) {\n            this.notify(modules[i].member, { prop: 'reset', onPropertyChange: false });\n        }\n    };\n    ImageEditor.prototype.allowShape = function (x, y) {\n        this.isPublicMethod = true;\n        var obj = { inRange: false };\n        this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n            value: { x: x, y: y, obj: obj } });\n        return obj['inRange'];\n    };\n    /**\n     * Clears the current selection performed in the image editor.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearSelection = function () {\n        this.notify('selection', { prop: 'clearSelection', onPropertyChange: false });\n    };\n    /**\n     * Crops an image based on the selection done in the image editor.\n     *\n     * {% codeBlock src='image-editor/crop/index.md' %}{% endcodeBlock %}\n     *\n     * @remarks\n     * The selection can be done through programmatically using the 'select' method or through UI interactions.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.crop = function () {\n        var obj = { isCrop: false };\n        this.notify('crop', { prop: 'crop', onPropertyChange: false, value: { obj: obj } });\n        return obj['isCrop'];\n    };\n    /**\n     * Flips an image by horizontally or vertically in the image editor.\n     *\n     * {% codeBlock src='image-editor/zoom/index.md' %}{% endcodeBlock %}\n     *\n     * @param { Direction } direction - Specifies the direction to flip the image.\n     * A horizontal direction for horizontal flipping and vertical direction for vertical flipping.\n     *\n     * @remarks\n     * It flips the shapes including rectangle, circle, line, text, image, and freehand drawings.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.flip = function (direction) {\n        this.notify('transform', { prop: 'flip', value: { direction: direction } });\n        this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n    };\n    /**\n     * Returns an image as ImageData to load it in to a canvas.\n     *\n     * @remarks\n     * The data returned from this method is directly drawn in a canvas using 'putImageData' method.\n     * And then the user can get the base64 string from the canvas using toDataURL method.\n     *\n     * @returns {ImageData}.\n     */\n    ImageEditor.prototype.getImageData = function () {\n        var obj = { canvas: null };\n        this.notify('export', { prop: 'exportToCanvas', value: { object: obj } });\n        return obj['canvas'].getContext('2d').getImageData(0, 0, obj['canvas'].width, obj['canvas'].height);\n    };\n    /**\n     *  Opens an image as URL or ImageData for editing in an image editor.\n     *\n     * @param {string | ImageData } data - Specifies url of the image or image data.\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.open = function (data) {\n        document.getElementById(this.element.id + '_dropArea').style.display = 'none';\n        this.notify('draw', { prop: 'open', value: { data: data } });\n    };\n    /**\n     * Reset all the changes done in an image editor and revert to original image.\n     *\n     * @remarks\n     * The undo redo collection also cleared while resetting the image editor.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.reset = function () {\n        var obj = { isErrorImage: false };\n        this.notify('draw', { prop: 'getErrorImage', value: { obj: obj } });\n        if (!this.disabled && !obj['isErrorImage']) {\n            this.clearContext(this.inMemoryContext);\n            this.clearContext(this.lowerContext);\n            this.clearContext(this.upperContext);\n            this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            if (!isBlazor()) {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                if (Browser.isDevice && document.getElementById(this.element.id + '_bottomToolbar')) {\n                    getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                    this.notify('toolbar', { prop: 'create-bottom-toolbar', onPropertyChange: false });\n                }\n            }\n            var isImageLoaded = this.isImageLoaded;\n            this.currObjType.isUndoAction = this.isUndoRedo = this.togglePan = this.togglePen = this.isImageLoaded = false;\n            this.isCircleCrop = this.isCropTab = false;\n            this.objColl = [];\n            this.transform.degree = 0;\n            this.upperCanvas.style.display = 'block';\n            this.transform.currFlipState = '';\n            this.allowDownScale = true;\n            this.upperCanvas.style.cursor = this.cursor = this.lowerCanvas.style.cursor = 'default';\n            this.lowerContext.lineWidth = this.upperContext.lineWidth = undefined;\n            this.frameDestPoints = null;\n            this.textArea.value = this.textArea.textContent = '';\n            this.textArea.style.display = 'none';\n            this.lowerContext.filter = this.canvasFilter = this.getDefaultFilter();\n            this.img.destLeft = this.img.destTop = this.img.srcLeft = this.img.srcTop = 0;\n            this.img.destWidth = this.img.destHeight = this.img.srcWidth = this.img.srcHeight = null;\n            this.currSelectionPoint = null;\n            this.panPoint.currentPannedPoint = { x: 0, y: 0 };\n            this.rotateFlipColl = [];\n            this.points = [];\n            this.pointColl = {};\n            this.freehandCounter = 0;\n            this.notify('draw', { prop: 'resetPanPoints' });\n            this.lowerCanvas.style.left = this.upperCanvas.style.left = '';\n            this.fontSizeColl = [];\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = '';\n            this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = '';\n            this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = '';\n            this.transform.defaultZoomFactor = this.transform.zoomFactor = 0;\n            this.transform.cropZoomFactor = null;\n            this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n            this.tempFrameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n            this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n                isInitialLine: false, isCustomCrop: false, isZoomed: false, isUndoZoom: false,\n                isUndoAction: false, isFiltered: false, isSave: false, isResize: false };\n            this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n                rotateFlipColl: [], degree: 0, currFlipState: '', zoomFactor: 0, previousZoomValue: 0,\n                destPoints: { startX: 0, startY: 0, width: 0, height: 0 }, frame: 'none',\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '', isBrightAdjust: false,\n                aspectWidth: null, aspectHeight: null };\n            this.afterCropActions = [];\n            this.currentFilter = '';\n            this.tempFrameZoomLevel = null;\n            this.cxtTbarHeight = null;\n            this.aspectWidth = this.aspectHeight = null;\n            var obj_1 = { initialZoomValue: false };\n            this.notify('draw', { prop: 'getInitialZoomValue', onPropertyChange: false, value: { obj: obj_1 } });\n            if (obj_1['initialZoomValue']) {\n                this.setProperties({ zoomSettings: { zoomFactor: obj_1['initialZoomValue'] } }, true);\n            }\n            if (document.getElementById(this.element.id + '_quickAccessToolbarArea')) {\n                document.getElementById(this.element.id + '_quickAccessToolbarArea').style.display = 'none';\n            }\n            this.notifyResetForAllModules();\n            this.notify('filter', { prop: 'update-finetunes' });\n            this.isImageLoaded = false;\n            this.notify('draw', { prop: 'update-canvas', onPropertyChange: false });\n            this.isImageLoaded = isImageLoaded;\n            if (!isBlazor()) {\n                if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n                    this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                }\n                this.notify('toolbar', { prop: 'refresh-dropdown-btn', value: { isDisabled: false } });\n                this.notify('toolbar', { prop: 'enable-disable-btns' });\n            }\n        }\n    };\n    /**\n     * Rotate an image to clockwise and anti-clockwise.\n     *\n     * {% codeBlock src='image-editor/rotate/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} degree - Specifies a degree to rotate an image.\n     * A positive integer value for clockwise and negative integer value for anti-clockwise rotation.\n     *\n     * @remarks\n     * It rotated the shapes including rectangle, circle, line, text, image, and freehand drawings.\n     *\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.rotate = function (degree) {\n        var obj = { isRotate: false };\n        this.notify('transform', { prop: 'rotate', value: { degree: degree, obj: obj } });\n        this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        return obj['isRotate'];\n    };\n    /**\n     * Export an image using the specified file name and the extension.\n     *\n     * @param {string} type - Specifies a format of image to be saved.\n     * @param {string} fileName – Specifies a file name to be saved\n     *\n     * @remarks\n     * The supported file types are JPG, JPEG, PNG, and SVG.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.export = function (type, fileName) {\n        this.notify('export', { prop: 'export', onPropertyChange: false, value: { type: type, fileName: fileName } });\n    };\n    /**\n     * Perform selection in an image editor. The selection helps to crop an image.\n     *\n     * {% codeBlock src='image-editor/select/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} type - Specifies the shape - circle / square / custom selection / pre-defined ratios.\n     * @param {number} startX – Specifies the start x-coordinate point of the selection.\n     * @param {number} startY – Specifies the start y-coordinate point of the selection.\n     * @param {number} width - Specifies the width of the selection area.\n     * @param {number} height - Specifies the height of the selection area.\n     *\n     * @remarks\n     * The selection UI is based on the 'theme' property.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.select = function (type, startX, startY, width, height) {\n        this.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: type, startX: startX, startY: startY, width: width, height: height } });\n        this.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: type, startX: startX, startY: startY, width: width, height: height } });\n    };\n    /**\n     * Enable or disable a freehand drawing option in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @returns {void}.\n     * @private\n     */\n    ImageEditor.prototype.freeHandDraw = function (value) {\n        this.notify('freehand-draw', { prop: 'freeHandDraw', onPropertyChange: false, value: { value: value } });\n    };\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether to enable or disable freehand drawing.\n     *\n     * @remarks\n     * User can directly drawing on a canvas after enabling this option.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.freehandDraw = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.freeHandDraw(value);\n        }\n    };\n    /**\n     * Enable or disable a panning on the Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable panning.\n     *\n     * @remarks\n     * This option will take into effect once the image's visibility is hidden when zooming an image or selection has been performed.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.pan = function (value) {\n        this.notify('transform', { prop: 'pan', onPropertyChange: false, value: { value: value } });\n    };\n    /**\n     * Zoom in or out on a point in the image editor.\n     *\n     * @param {number} zoomFactor - The percentage-based zoom factor to use (e.g. 20 for 2x zoom).\n     * @param {Point} zoomPoint - The point in the image editor to zoom in/out on.\n     *\n     * @remarks\n     * Zooming directly enables the panning option when the image's visibility is hidden.\n     * User can disable it by using 'Pan' method.\n     * @returns {void}\n     *\n     */\n    ImageEditor.prototype.zoom = function (zoomFactor, zoomPoint) {\n        this.notify('transform', { prop: 'zoom', onPropertyChange: false,\n            value: { zoomFactor: zoomFactor, zoomPoint: zoomPoint } });\n    };\n    /**\n     * Draw ellipse on an image.\n     *\n     * {% codeBlock src='image-editor/ellipse/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of ellipse.\n     * @param {number} y - Specifies y-coordinate of ellipse.\n     * @param {number} radiusX - Specifies the radius x point for the ellipse.\n     * @param {number} radiusY - Specifies the radius y point for the ellipse.\n     * @param {number} strokeWidth - Specifies the stroke width of ellipse.\n     * @param {string} strokeColor - Specifies the stroke color of ellipse.\n     * @param {string} fillColor - Specifies the fill color of the ellipse.\n     * @param {number} degree - Specifies the degree to rotate the ellipse.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor, degree) {\n        var isEllipse = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isEllipse = true;\n            this.notify('shape', { prop: 'drawEllipse', onPropertyChange: false, value: { x: x, y: y, radiusX: radiusX, radiusY: radiusY,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor, degree: degree } });\n        }\n        return isEllipse;\n    };\n    /**\n     * Draw line on an image.\n     *\n     * @param {number} startX – Specifies start point x-coordinate of line.\n     * @param {number} startY – Specifies start point y-coordinate of line.\n     * @param {number} endX - Specifies end point x-coordinates of line.\n     * @param {number} endY - Specifies end point y-coordinates of the line.\n     * @param {number} strokeWidth - Specifies the stroke width of line.\n     * @param {string} strokeColor - Specifies the stroke color of line.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor) {\n        var isLine = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isLine = true;\n            this.notify('shape', { prop: 'drawLine', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor } });\n        }\n        return isLine;\n    };\n    /**\n     * Draw arrow on an image.\n     *\n     * @param {number} startX – Specifies start point x-coordinate of arrow.\n     * @param {number} startY – Specifies start point y-coordinate of arrow.\n     * @param {number} endX - Specifies end point x-coordinates of arrow.\n     * @param {number} endY - Specifies end point y-coordinates of the arrow.\n     * @param {number} strokeWidth - Specifies the stroke width of arrow.\n     * @param {string} strokeColor - Specifies the stroke color of arrow.\n     * @param {ArrowheadType} arrowStart – Specifies the type of arrowhead for start position. The default value is ‘None’.\n     * @param {ArrowheadType} arrowEnd – Specifies the type of arrowhead for end position. The default value is ‘SolidArrow’.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawArrow = function (startX, startY, endX, endY, strokeWidth, strokeColor, arrowStart, arrowEnd) {\n        var isArrow = false;\n        var isPointsInRange = this.allowShape(startX, startY);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(startX) && isNullOrUndefined(startY)))) {\n            isArrow = true;\n            this.notify('shape', { prop: 'drawArrow', onPropertyChange: false, value: { startX: startX, startY: startY, endX: endX,\n                    endY: endY, strokeWidth: strokeWidth, strokeColor: strokeColor, arrowStart: arrowStart, arrowEnd: arrowEnd } });\n        }\n        return isArrow;\n    };\n    /**\n     * Draw path on an image.\n     *\n     * @param {Point[]} pointColl – Specifies collection of start and end x, y-coordinates of path.\n     * @param {number} strokeWidth - Specifies the stroke width of path.\n     * @param {string} strokeColor - Specifies the stroke color of path.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawPath = function (pointColl, strokeWidth, strokeColor) {\n        this.isPublicMethod = true;\n        var obj = { inRange: false };\n        var isPath = false;\n        if (pointColl && pointColl.length > 0) {\n            for (var i = 0; i < pointColl.length; i++) {\n                if (obj['inRange']) {\n                    break;\n                }\n                this.notify('shape', { prop: 'isPointsInRange', onPropertyChange: false,\n                    value: { x: pointColl[i].x, y: pointColl[i].y, obj: obj } });\n            }\n        }\n        if (!this.disabled && this.isImageLoaded && (obj['inRange'] || isNullOrUndefined(pointColl))) {\n            isPath = true;\n            this.notify('shape', { prop: 'drawPath', onPropertyChange: false, value: { pointColl: pointColl,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor } });\n        }\n        return isPath;\n    };\n    /**\n     * Draw a rectangle on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of rectangle.\n     * @param {number} y - Specifies y-coordinate of rectangle.\n     * @param {number} width - Specifies the width of the rectangle.\n     * @param {number} height - Specifies the height of the rectangle.\n     * @param {number} strokeWidth - Specifies the stroke width of rectangle.\n     * @param {string} strokeColor - Specifies the stroke color of rectangle.\n     * @param {string} fillColor - Specifies the fill color of the rectangle.\n     * @param {number} degree - Specifies the degree to rotate the rectangle.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor, degree) {\n        var isRectangle = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isRectangle = true;\n            this.notify('shape', { prop: 'drawRectangle', onPropertyChange: false, value: { x: x, y: y, width: width, height: height,\n                    strokeWidth: strokeWidth, strokeColor: strokeColor, fillColor: fillColor, degree: degree } });\n        }\n        return isRectangle;\n    };\n    /**\n     * Draw a text on an image.\n     *\n     * {% codeBlock src='image-editor/text/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} x - Specifies x-coordinate of text.\n     * @param {number} y - Specifies y-coordinate of text.\n     * @param {string} text - Specifies the text to add on an image.\n     * @param {string} fontFamily - Specifies the font family of the text.\n     * @param {number} fontSize - Specifies the font size of the text.\n     * @param {boolean} bold - Specifies whether the text is bold or not.\n     * @param {boolean} italic - Specifies whether the text is italic or not.\n     * @param {string} color - Specifies font color of the text.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color) {\n        var isText = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            isText = true;\n            this.notify('shape', { prop: 'drawText', onPropertyChange: false, value: { x: x, y: y, text: text, fontFamily: fontFamily,\n                    fontSize: fontSize, bold: bold, italic: italic, color: color } });\n        }\n        return isText;\n    };\n    /**\n     * Draw an image as annotation on an image.\n     *\n     *\n     * @param {string | ImageData} data - Specifies url of the image or image data.\n     * @param {number} x - Specifies x-coordinate of a starting point for an image.\n     * @param {number} y - Specifies y-coordinate of a starting point for an image.\n     * @param {number} width - Specifies the width of the image.\n     * @param {number} height - Specifies the height of the image.\n     * @param {boolean} isAspectRatio - Specifies whether to maintain aspect ratio or not.\n     * @param {number} degree - Specifies the degree to rotate the image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.drawImage = function (data, x, y, width, height, isAspectRatio, degree) {\n        var isImage = false;\n        var isPointsInRange = this.allowShape(x, y);\n        if (!this.disabled && this.isImageLoaded && (isPointsInRange || (isNullOrUndefined(x) && isNullOrUndefined(y)))) {\n            var length_1 = this.objColl.length;\n            this.notify('shape', { prop: 'drawImage', onPropertyChange: false, value: { x: x, y: y, width: width, height: height,\n                    src: data, degree: degree, isAspectRatio: isAspectRatio } });\n            if (this.objColl.length > length_1) {\n                isImage = true;\n            }\n        }\n        return isImage;\n    };\n    /**\n     * Select a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/selectShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to select a shape on an image.\n     * @returns {boolean}.\n     *\n     */\n    ImageEditor.prototype.selectShape = function (id) {\n        var obj = { isSelected: false };\n        this.notify('shape', { prop: 'selectShape', onPropertyChange: false, value: { id: id, obj: obj } });\n        return obj['isSelected'];\n    };\n    /**\n     * Deletes a shape based on the given shape id.\n     * Use 'getShapeSettings' method to get the shape id which is then passed to perform selection.\n     *\n     * {% codeBlock src='image-editor/deleteShape/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id to delete the shape on an image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.deleteShape = function (id) {\n        this.notify('shape', { prop: 'deleteShape', onPropertyChange: false, value: { id: id } });\n    };\n    /**\n     * Get particular shapes details based on id of the shape which is drawn on an image editor.\n     *\n     * {% codeBlock src='image-editor/getShapeSetting/index.md' %}{% endcodeBlock %}\n     *\n     * @param {string} id - Specifies the shape id on an image.\n     * @returns {ShapeSettings}.\n     *\n     */\n    ImageEditor.prototype.getShapeSetting = function (id) {\n        var shapeDetails = {};\n        this.notify('shape', { prop: 'getShapeSetting', onPropertyChange: false,\n            value: { id: id, obj: shapeDetails } });\n        return shapeDetails;\n    };\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {ShapeSettings[]}.\n     */\n    ImageEditor.prototype.getShapeSettings = function () {\n        var obj = { shapeDetailsColl: [] };\n        this.notify('shape', { prop: 'getShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        return obj['shapeDetailsColl'];\n    };\n    /**\n     * To refresh the Canvas Wrapper.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.update = function () {\n        this.notify('transform', { prop: 'update' });\n    };\n    /**\n     * Finetuning an image with the given type of finetune and its value in the image editor.\n     *\n     * @param {ImageFinetuneOption } finetuneOption - Specifies the finetune options to be performed in the image.\n     * @param {number } value - Specifies the value for finetuning the image.\n     *\n     * @remarks\n     * The finetuning will not affect the shapes background and border color.\n     *\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.finetuneImage = function (finetuneOption, value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.notify('filter', { prop: 'finetuneImage', value: { value: value, option: finetuneOption } });\n        }\n    };\n    /**\n     * Filtering an image with the given type of filters.\n     *\n     * @param {ImageFilterOption } filterOption - Specifies the filter options to the image.\n     *\n     * @remarks\n     * The filtering will not affect the shape's background and border color.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.applyImageFilter = function (filterOption) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.notify('filter', { prop: 'applyImageFilter', value: { option: filterOption.toString() } });\n            this.canvasFilter = this.lowerContext.filter;\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n    };\n    /**\n     * Reverse the last action which performed by the user in the Image Editor.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.undo = function () {\n        this.notify('undo-redo', { prop: 'undo', onPropertyChange: false });\n    };\n    /**\n     * Redo the last user action that was undone by the user or `undo` method.\n     *\n     * @remarks\n     * This method will take into effect once the 'allowUndoRedo' property is enabled.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.redo = function () {\n        this.notify('undo-redo', { prop: 'redo', onPropertyChange: false });\n    };\n    /**\n     * Get the dimension of an image in the image editor such as x, y, width, and height.\n     * The method helps to get dimension after cropped an image.\n     *\n     * @returns {Dimension}.\n     * A Dimension object containing the x, y, width, and height of an image.\n     */\n    ImageEditor.prototype.getImageDimension = function () {\n        return { x: this.img.destLeft, y: this.img.destTop, width: this.img.destWidth, height: this.img.destHeight };\n    };\n    /**\n     * Resize an image by changing its width and height.\n     *\n     * @param {number} width - Specifies the width of an image.\n     * @param {number} height - Specifies the height of an image.\n     * @param {boolean} isAspectRatio - Specifies whether the scaling option is enabled or not.\n     *\n     * @returns {boolean} - A boolean value indicating the success of the resizing operation.\n     */\n    ImageEditor.prototype.resize = function (width, height, isAspectRatio) {\n        var isResized = false;\n        if ((width.toString()).length <= 4 && (height.toString()).length <= 4) {\n            var destPoints = { startX: this.img.destLeft, startY: this.img.destTop, width: this.img.destWidth,\n                height: this.img.destHeight };\n            if (isBlazor()) {\n                this.updateToolbar(this.element, 'resize');\n            }\n            else {\n                if (isAspectRatio) {\n                    this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: false, isCropping: false } });\n                    this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: false, isCropping: false } });\n                }\n                else {\n                    this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'resize',\n                            isApplyBtn: false, isCropping: false } });\n                }\n                var aspectRatioWidth = this.element.querySelector('#' + this.element.id + '_resizeWidth');\n                var aspectRatioHeight = this.element.querySelector('#' + this.element.id + '_resizeHeight');\n                if (aspectRatioWidth && aspectRatioHeight) {\n                    getComponent(aspectRatioWidth, 'numerictextbox').value = Math.floor(width);\n                    aspectRatioWidth.value = Math.floor(width).toString() + ' px';\n                    getComponent(aspectRatioHeight, 'numerictextbox').value = Math.floor(height);\n                    aspectRatioHeight.value = Math.floor(height).toString() + ' px';\n                }\n            }\n            this.notify('transform', { prop: 'resize', value: { width: width, height: height, isAspectRatio: isAspectRatio } });\n            if (destPoints.startX !== this.img.destLeft || destPoints.startY !== this.img.destTop ||\n                destPoints.width !== this.img.destWidth || destPoints.height !== this.img.destHeight) {\n                isResized = true;\n                this.okBtn();\n            }\n            else {\n                this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            }\n        }\n        return isResized;\n    };\n    /**\n     * Draw a frame on an image.\n     *\n     * @param { FrameType} frameType - Specifies the frame option to be drawn on an image.\n     * @param {string} color - Specifies the color of a frame on an image. The default value is ‘#fff’.\n     * @param {string} gradientColor - Specifies the gradient color of a frame on an image. The default value is ‘’.\n     * @param {number} size - Specifies the size of the frame as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 20 if not specified.\n     * @param {number} inset - Specifies the inset value for line, hook, and inset type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {number} offset - Specifies the offset value for line and inset type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {number} borderRadius - Specifies the border radius for line-type frames, as a percentage. It can be provided as an integer percentage (e.g., 10). Defaults to 0 if not specified.\n     * @param {FrameLineStyle} frameLineStyle - Specifies the type of line to be drawn for line-type frames. Default to Solid if not specified.\n     * @param {number} lineCount - Specifies the number of lines for line-type frames. Defaults to 0 if not specified.\n     *\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawFrame = function (frameType, color, gradientColor, size, inset, offset, borderRadius, frameLineStyle, lineCount) {\n        var isFrame = false;\n        var obj = { frameChangeEventArgs: null };\n        color = color ? color : '#fff';\n        gradientColor = gradientColor ? gradientColor : '';\n        size = size ? size : 20;\n        inset = inset ? inset : 0;\n        offset = offset ? offset : 0;\n        borderRadius = borderRadius ? borderRadius : 0;\n        frameLineStyle = frameLineStyle ? frameLineStyle : FrameLineStyle.Solid;\n        lineCount = lineCount ? lineCount : 0;\n        var prevFrameSettings = { type: this.toPascalCase(this.frameObj.type), color: this.frameObj.color,\n            gradientColor: this.frameObj.gradientColor, size: this.frameObj.size, inset: this.frameObj.inset,\n            offset: this.frameObj.offset, borderRadius: this.frameObj.radius,\n            frameLineStyle: this.toPascalCase(this.frameObj.border), lineCount: this.frameObj.amount };\n        extend(this.tempFrameObj, this.frameObj);\n        this.tempFrameZoomLevel = this.transform.zoomFactor;\n        this.frameDestPoints = extend({}, this.img, {}, true);\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'frameToolbarClick' });\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.performFrameClick();\n        }\n        this.frameObj.type = frameType.toLowerCase();\n        this.frameObj.color = color;\n        this.frameObj.gradientColor = gradientColor;\n        this.frameObj.size = size;\n        this.frameObj.inset = inset;\n        this.frameObj.offset = offset;\n        this.frameObj.radius = borderRadius;\n        this.frameObj.border = frameLineStyle.toLowerCase();\n        this.frameObj.amount = lineCount;\n        this.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n        if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n            this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null } });\n            if (JSON.stringify(this.frameObj) !== JSON.stringify(this.tempFrameObj)) {\n                isFrame = true;\n                this.okBtn();\n            }\n            else {\n                this.tempFrameZoomLevel = null;\n            }\n        }\n        else {\n            this.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: null } });\n            extend(this.frameObj, this.tempFrameObj);\n            this.tempFrameZoomLevel = null;\n        }\n        return isFrame;\n    };\n    // Toolbar related codes\n    ImageEditor.prototype.toolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_toolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n        if (this.toolbarTemplate) {\n            this.toolbarFn = this.templateParser(this.toolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this.toolbarHeight = toolbarArea.clientHeight;\n            this.notify('toolbar', { prop: 'setToolbarHeight', value: { height: this.toolbarHeight } });\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.quickAccessToolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_quickAccessToolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_quickAccessToolbarArea');\n        if (this.quickAccessToolbarTemplate) {\n            this.qatFn = this.templateParser(this.quickAccessToolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.qatFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this['renderReactTemplates']();\n        }\n    };\n    ImageEditor.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template !== 'function' && document.querySelectorAll(template).length) {\n                    return templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    // Common codes for EJ2 and Blazor\n    ImageEditor.prototype.getTextFromId = function (id) {\n        var idToValue = { '1': 'none', '2': 'bar', '3': 'arrow', '4': 'arrowSolid',\n            '5': 'circle', '6': 'circleSolid', '7': 'square', '8': 'squareSolid' };\n        return idToValue[\"\" + id];\n    };\n    ImageEditor.prototype.getFinetuneOption = function (type) {\n        var typeToOption = { 'brightness': ImageFinetuneOption.Brightness, 'contrast': ImageFinetuneOption.Contrast,\n            'hue': ImageFinetuneOption.Hue, 'saturation': ImageFinetuneOption.Saturation, 'opacity': ImageFinetuneOption.Opacity,\n            'blur': ImageFinetuneOption.Blur, 'exposure': ImageFinetuneOption.Exposure };\n        return typeToOption[\"\" + type];\n    };\n    ImageEditor.prototype.setPenStroke = function (args) {\n        this.notify('freehand-draw', { prop: 'setPenStrokeWidth', onPropertyChange: false, value: { value: parseInt(args, 10) } });\n    };\n    ImageEditor.prototype.updateFreehandDrawColorChange = function () {\n        var obj = { tempFreeHandDrawEditingStyles: null };\n        this.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n        this.notify('freehand-draw', { prop: 'color-change', value: { color: obj['tempFreeHandDrawEditingStyles'].strokeColor } });\n    };\n    ImageEditor.prototype.updateImageTransformColl = function (type) {\n        var value;\n        if (type === 'rotateleft') {\n            value = -90;\n        }\n        else if (type === 'rotateright') {\n            value = 90;\n        }\n        else if (type === 'horizontalflip') {\n            value = 'horizontal';\n        }\n        else if (type === 'verticalflip') {\n            value = 'vertical';\n        }\n        for (var i = 0; i < this.objColl.length; i++) {\n            var shape = this.objColl[i].shape;\n            if (shape === 'image' || shape === 'text') {\n                if (isNullOrUndefined(this.objColl[i].rotateFlipColl)) {\n                    this.objColl[i].rotateFlipColl = [];\n                }\n                this.objColl[i].rotateFlipColl.push(value);\n                var obj = { collection: this.objColl[i].rotateFlipColl };\n                this.notify('shape', { prop: 'alignRotateFlipColl', onPropertyChange: false,\n                    value: { collection: this.objColl[i].rotateFlipColl, isRotateFlipCollection: false, obj: obj } });\n                this.objColl[i].rotateFlipColl = obj['collection'];\n            }\n        }\n    };\n    ImageEditor.prototype.setInitialZoomState = function () {\n        this.objColl.push(this.activeObj);\n        this.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        var isUndoRedo = this.isUndoRedo;\n        this.isCropTab = false;\n        this.isUndoRedo = true;\n        if (this.transform.cropZoomFactor && this.transform.cropZoomFactor > 0) {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -this.transform.cropZoomFactor, zoomPoint: null, isResize: null } });\n        }\n        else {\n            this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: Math.abs(this.transform.cropZoomFactor), zoomPoint: null, isResize: null } });\n        }\n        this.isUndoRedo = isUndoRedo;\n        this.panPoint.totalPannedPoint = { x: 0, y: 0 };\n        this.transform.cropZoomFactor = 0;\n        this.notify('freehand-draw', { prop: 'updateFHDColl', onPropertyChange: false });\n        this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.objColl.pop();\n        this.isCropTab = true;\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: this.activeObj } });\n    };\n    /**\n     * Set the old item Transform item state.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateCropTransformItems = function () {\n        this.prevCurrSelectionPoint = extend({}, this.currSelectionPoint, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var currentObj = object['currObj'];\n        currentObj.objColl = extend([], this.objColl, [], true);\n        currentObj.pointColl = extend([], this.pointColl, [], true);\n        currentObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        currentObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.cancelCropSelection = { operation: 'cropTransform', previousObj: currentObj, currentObj: currentObj,\n            previousObjColl: currentObj.objColl, currentObjColl: currentObj.objColl,\n            previousPointColl: currentObj.pointColl, currentPointColl: currentObj.pointColl,\n            previousSelPointColl: currentObj.selPointColl, currentSelPointColl: currentObj.selPointColl,\n            previousCropObj: extend({}, this.cropObj, {}, true),\n            currentCropObj: extend({}, this.cropObj, {}, true),\n            previousText: null, currentText: null, filter: null, isCircleCrop: this.isCircleCrop };\n    };\n    /**\n     * Get the pascal case.\n     *\n     * @param { string } str - Specifies the string to convert to pascal case.\n     * @param { Object } obj - Specifies the string to convert to pascal case.\n     * @hidden\n     * @returns {string}.\n     * A pascal case string.\n     */\n    ImageEditor.prototype.toPascalCase = function (str, obj) {\n        var strArr = [];\n        if (!isNullOrUndefined(str)) {\n            strArr = str.toLowerCase().split('-');\n        }\n        for (var i = 0; i < strArr.length; i++) {\n            strArr[i] = strArr[i].charAt(0).toUpperCase() + strArr[i].slice(1);\n        }\n        if (obj) {\n            obj['maxText'] = strArr.join('');\n        }\n        return strArr.join('');\n    };\n    /**\n     * Get the font sizes.\n     *\n     * @hidden\n     * @returns {DropDownButtonItemModel[]}.\n     * A font size collections.\n     */\n    ImageEditor.prototype.getFontSizes = function () {\n        var items = [];\n        this.fontSizeColl = [];\n        var fontSize;\n        if (this.transform.degree === 0 || this.transform.degree % 180 === 0) {\n            fontSize = this.img.destWidth / 25;\n        }\n        else {\n            fontSize = this.img.destHeight / 25;\n        }\n        for (var i = 1; i <= 10; i++) {\n            this.fontSizeColl.push({ text: (i * (Math.round(fontSize / 2))).toString() });\n            items.push({ text: (i.toString()) });\n        }\n        return items;\n    };\n    /**\n     * Handles the OK button operation\n     *\n     * @param { boolean } isMouseDown - Specifies whether it is a mouse down.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.okBtn = function (isMouseDown) {\n        if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.remove('e-frame-wrapper');\n        }\n        var isCropSelection = false;\n        var splitWords;\n        var aspectIcon = this.element.querySelector('#' + this.element.id + '_aspectratio');\n        var nonAspectIcon = this.element.querySelector('#' + this.element.id + '_nonaspectratio');\n        var blrAspRatElem = this.element.querySelector('.e-ie-toolbar-aspect-ratio-btn');\n        var blrNAspRatElem = this.element.querySelector('.e-ie-toolbar-nonaspect-ratio-btn');\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        this.allowDownScale = true;\n        if ((this.activeObj.shape && this.activeObj.shape !== 'image' || this.togglePen) && !isCropSelection) {\n            var objt = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n            var shapeSettings = objt['shapeSettingsObj'];\n            if (this.togglePen) {\n                shapeSettings.type = ShapeType.FreehandDraw;\n            }\n            var shapeChangedArgs = { action: 'apply', previousShapeSettings: extend({}, shapeSettings, {}, true),\n                currentShapeSettings: extend({}, shapeSettings, {}, true) };\n            this.triggerShapeChanged(shapeChangedArgs);\n        }\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        if (aspectIcon || nonAspectIcon || (isBlazor() && this.currentToolbar === 'resize-toolbar')) {\n            var obj_2 = { width: null, height: null };\n            this.notify('selection', { prop: 'getNumTextValue', onPropertyChange: false, value: { obj: obj_2 } });\n            var point = { x: obj_2['width'], y: obj_2['height'] };\n            var obj1 = { prevCropObj: this.prevCropObj };\n            var obj2 = { prevObj: this.prevObj };\n            if (point && point.x && point.y && obj1['prevCropObj'] && obj2['prevObj']) {\n                if (nonAspectIcon || (blrNAspRatElem && !blrNAspRatElem.classList.contains('e-hidden'))) {\n                    this.notify('transform', { prop: 'resize', value: { width: point.x, height: point.y, isAspectRatio: false } });\n                }\n                else if (aspectIcon || (blrAspRatElem && !blrAspRatElem.classList.contains('e-hidden'))) {\n                    this.notify('transform', { prop: 'resize', value: { width: point.x, height: null, isAspectRatio: true } });\n                }\n                this.isResize = false;\n                this.aspectWidth = point.x;\n                this.aspectHeight = point.y;\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n                this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: -this.transform.zoomFactor, zoomPoint: null, isResize: true } });\n                this.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                    value: { zoomFactor: obj2['prevObj']['defaultZoom'], zoomPoint: null, isResize: true } });\n                if (obj2['prevObj'].zoomFactor) {\n                    this.setProperties({ zoomSettings: { zoomFactor: obj2['prevObj'].zoomFactor } }, true);\n                }\n                this.notify('transform', { prop: 'setPreviousZoomValue', onPropertyChange: false,\n                    value: { previousZoomValue: this.zoomSettings.zoomFactor } });\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: { operation: 'resize',\n                        previousObj: obj2['prevObj'], previousObjColl: obj2['prevObj']['objColl'],\n                        previousPointColl: obj2['prevObj']['pointColl'], previousSelPointColl: obj2['prevObj']['selPointColl'],\n                        previousCropObj: obj1['prevCropObj'], previousText: null, currentText: null, previousFilter: null,\n                        isCircleCrop: null } });\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            else {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: false, isCropping: false, isZooming: null, cType: null } });\n            }\n            this.isAspectRatio = false;\n        }\n        var selElem = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        var frameObject = { bool: null };\n        this.notify('toolbar', { prop: 'getFrameToolbar', onPropertyChange: false, value: { obj: frameObject } });\n        if (selElem) {\n            this.currentFilter = selElem.children[0].children[0].id.replace('Canvas', '');\n        }\n        if (isCropSelection) {\n            this.crop();\n        }\n        else if (this.togglePen) {\n            this.freeHandDraw(false);\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'redrawActObj', onPropertyChange: false,\n                value: { x: null, y: null, isMouseDown: null } });\n            if (isNullOrUndefined(isMouseDown)) {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n        }\n        else if ((!isBlazor() && document.querySelector('#' + this.element.id + '_sliderWrapper')) ||\n            (isBlazor() && !this.element.querySelector('.e-ie-contextual-slider').classList.contains('e-hidden')) ||\n            this.currObjType.isFiltered) {\n            this.initialAdjustmentValue = this.canvasFilter = this.lowerContext.filter;\n            this.currObjType.isFiltered = false;\n            var obj_3 = { value: null };\n            this.notify('draw', { prop: 'getTempAdjustmentValue', value: { obj: obj_3 } });\n            if (obj_3['value'] !== this.lowerContext.filter) {\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            if ((this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) ||\n                (this.activeObj.shape === 'path' && this.activeObj.pointColl.length > 0)) {\n                this.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isMouseDown } });\n            }\n        }\n        else if (obj['bool']) {\n            this.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n            this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: false } });\n            if (!isBlazor()) {\n                this.notify('toolbar', { prop: 'destroy-qa-toolbar' });\n            }\n            else {\n                this.updateToolbar(this.element, 'destroyQuickAccessToolbar');\n            }\n            this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n        }\n        else if ((this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) ||\n            (this.activeObj.shape === 'path' && this.activeObj.pointColl.length > 0)) {\n            if (this.activeObj.shape === 'image') {\n                this.notify('draw', { prop: 'setImageApply', onPropertyChange: false, value: { bool: true } });\n            }\n            this.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isMouseDown } });\n        }\n        else {\n            if (JSON.stringify(this.frameObj) !== JSON.stringify(this.tempFrameObj)) {\n                var object = { currObj: {} };\n                this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                        operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                        previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                        previousCropObj: extend({}, this.cropObj, {}, true), previousText: null, currentText: null,\n                        previousFilter: null, isCircleCrop: null\n                    } });\n                this.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                this.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                this.tempFrameObj = extend({}, this.frameObj, {}, true);\n                this.notify('draw', { prop: 'setTempFrame', onPropertyChange: false, value: { frame: this.frameObj.type } });\n            }\n            this.notify('draw', { prop: 'resetFrameZoom', onPropertyChange: false });\n        }\n        if (!isBlazor() && !obj['isCropToolbar']) {\n            this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                    isApplyBtn: false, isCropping: null, isZooming: null, cType: null } });\n        }\n        else if (isBlazor() && !obj['isCropToolbar'] && (this.currentToolbar == 'resize-toolbar' || this.currentToolbar == 'frame-toolbar')) {\n            this.updateToolbar(this.element, 'imageLoaded');\n        }\n        this.notify('draw', { prop: 'setNewPath', value: { bool: false } });\n        this.isCropTab = false;\n        this.transform.zoomFactor = this.transform.defaultZoomFactor;\n        this.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n    };\n    /**\n     * Set the temporary filter properties.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setTempFilterProperties = function () {\n        this.upperCanvas.style.display = 'block';\n        this.cropSelectedState();\n        var obj = { adjustmentLevel: null };\n        this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n            value: { obj: obj } });\n        this.lowerContext.filter = this.initialAdjustmentValue;\n        this.notify('draw', { prop: 'setTempAdjustmentValue', value: { tempAdjustmentValue: this.lowerContext.filter } });\n        this.notify('filter', { prop: 'setTempAdjustmentLevel', onPropertyChange: false,\n            value: { tempAdjustmentLevel: extend({}, obj['adjustmentLevel'], {}, true) } });\n        this.notify('draw', { prop: 'setTempFilter', value: { tempFilter: this.currentFilter } });\n        var undoRedoObj = { undoRedoStep: null };\n        this.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n        this.notify('draw', { prop: 'setTempUndoRedoStep', value: { tempUndoRedoStep: undoRedoObj['undoRedoStep'] } });\n    };\n    /**\n     * To crop the selection.\n     *\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.cropSelectedState = function () {\n        if (this.activeObj.shape && this.activeObj.shape.split('-')[0] === 'crop') {\n            this.okBtn();\n        }\n    };\n    /**\n     * Get the current canvas data.\n     *\n     * @hidden\n     * @returns {ImageData}.\n     * An ImageData returns the current canvas image data object.\n     */\n    ImageEditor.prototype.getCurrentCanvasData = function () {\n        var tempFrame = extend({}, this.frameObj, {}, true);\n        this.frameObj = { type: 'none', color: '#fff', size: 20, inset: 20, offset: 20, radius: 0, amount: 1, border: 'solid', gradientColor: '' };\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = this.canvasFilter = 'none';\n        var objColl = extend([], this.objColl, null, true);\n        var pointColl = extend([], this.pointColl, null, true);\n        this.objColl = [];\n        this.pointColl = [];\n        this.freehandCounter = 0;\n        this.notify('draw', { prop: 'render-image', value: { isMouseWheel: false } });\n        if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        var data = this.getImageData();\n        if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.remove('e-hide');\n            if (isBlazor()) {\n                this.element.querySelector('.e-ie-toolbar-check-btn').classList.remove('e-hidden');\n                this.element.querySelector('.e-ie-toolbar-close-btn').classList.remove('e-hidden');\n            }\n        }\n        if (!isBlazor()) {\n            if (!Browser.isDevice) {\n                this.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'main',\n                        isApplyBtn: true, isCropping: false } });\n            }\n            this.element.querySelector('#' + this.element.id + '_contextualToolbarArea').classList.remove('e-hide');\n        }\n        this.objColl = objColl;\n        this.pointColl = pointColl;\n        this.freehandCounter = pointColl.length;\n        this.notify('shape', { prop: 'iterateObjColl', onPropertyChange: false });\n        this.lowerContext.filter = this.canvasFilter = tempFilter;\n        this.frameObj = tempFrame;\n        return data;\n    };\n    /**\n     * To set current adjustment value\n     *\n     * @param { string } type - Specifies the type of adjustment.\n     * @param { number } value - Specifies the value to adjust.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.setCurrAdjustmentValue = function (type, value) {\n        var _this = this;\n        var finetuneValueChanging = { finetune: this.getFinetuneOption(type),\n            value: value, cancel: false };\n        if (isBlazor() && this.events && this.events.finetuneValueChanging.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            this.dotNetRef.invokeMethodAsync('OnFinetuneValueChangeAsync', finetuneValueChanging).then(function (finetuneValueChanging) {\n                if (finetuneValueChanging.cancel) {\n                    return;\n                }\n                _this.notify('filter', { prop: 'setCurrAdjValue', value: { type: type.toLowerCase(), value: value } });\n            });\n        }\n        else {\n            this.trigger('finetuneValueChanging', finetuneValueChanging);\n            if (finetuneValueChanging.cancel) {\n                return;\n            }\n            this.notify('filter', { prop: 'setCurrAdjValue', value: { type: type.toLowerCase(), value: value } });\n        }\n    };\n    /**\n     * Get the square point for path.\n     *\n     * @param { SelectionPoint } obj - Specifies the points of path.\n     * @hidden\n     * @returns {ActivePoint}.\n     * An ActivePoint object which returns the square point.\n     */\n    ImageEditor.prototype.getSquarePointForPath = function (obj) {\n        var point = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        if (obj.pointColl.length > 0) {\n            point = { startX: obj.pointColl[0].x, startY: obj.pointColl[0].y, endX: obj.pointColl[0].x, endY: obj.pointColl[0].y };\n            for (var i = 1; i < obj.pointColl.length; i++) {\n                if (obj.pointColl[i].x < point.startX) {\n                    point.startX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y < point.startY) {\n                    point.startY = obj.pointColl[i].y;\n                }\n                if (obj.pointColl[i].x > point.endX) {\n                    point.endX = obj.pointColl[i].x;\n                }\n                if (obj.pointColl[i].y > point.endY) {\n                    point.endY = obj.pointColl[i].y;\n                }\n            }\n            point.width = point.endX - point.startX;\n            point.height = point.endY - point.startY;\n        }\n        return point;\n    };\n    /**\n     * Get the SelectionType.\n     *\n     * @param { string } type - Specifies the SelectionType.\n     * @hidden\n     * @returns {string}.\n     * An string which returns the SelectionType.\n     */\n    ImageEditor.prototype.getSelectionType = function (type) {\n        var typeToSelectionType = { 'CropCustom': 'Custom', 'CropSquare': 'Square', 'CropCircle': 'Circle',\n            'Crop3:2': '3:2', 'Crop4:3': '4:3', 'Crop5:4': '5:4', 'Crop7:5': '7:5', 'Crop16:9': '16:9' };\n        return typeToSelectionType[\"\" + type];\n    };\n    /** Clears the context.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearContext = function (ctx) {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.clearRect(0, 0, ctx.canvas.height, ctx.canvas.width);\n    };\n    /**\n     * Apply Arrow for start and end.\n     *\n     * @param { string } type - Specifies the start arrow or end arrow.\n     * @param { string } id - Specifies the start arrow or end arrow item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateArrow = function (type, id) {\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.objColl.pop();\n        if (type === 'startArrow') {\n            this.activeObj.start = this.getTextFromId(id);\n        }\n        else if (type === 'endArrow') {\n            this.activeObj.end = this.getTextFromId(id);\n        }\n        this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        if (!isBlazor()) {\n            if (Browser.isDevice) {\n                if (document.getElementById(this.element.id + '_bottomToolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_1 = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                    toolbar_1.refreshOverflow();\n                }\n            }\n            else {\n                if (document.getElementById(this.element.id + '_toolbar')) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_2 = getComponent(this.element.id + '_toolbar', 'toolbar');\n                    toolbar_2.refreshOverflow();\n                }\n            }\n        }\n        var shapeChangedArgs = { action: type, previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Font style for text.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontFamily = function (id) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var objColl = extend([], this.objColl, [], true);\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            var width = this.activeObj.activePoint.width +\n                this.activeObj.textSettings.fontSize * 0.25;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.fontFamily = this.toPascalCase(id);\n            this.activeObj.textSettings.fontFamily = temp;\n            this.notify('shape', { prop: 'updateFontStyles', onPropertyChange: false,\n                value: { isTextBox: null } });\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontFamily = this.activeObj.textSettings.fontFamily = this.toPascalCase(id);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: fontFamily, fontSize: null } });\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: objColl,\n                    previousPointColl: extend([], this.pointColl, [], true),\n                    previousSelPointColl: prevObj.selPointColl, previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n        var shapeChangedArgs = { action: 'font-family', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontFamily = this.textArea.style.fontFamily;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Font size for text.\n     *\n     * @param { string } text - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontSize = function (text) {\n        var itemText = text;\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'block') {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: true } });\n            var temp = this.activeObj.textSettings.fontSize;\n            this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            var textStyle = '';\n            if (this.textArea.style.fontWeight === 'bold') {\n                textStyle = 'bold ';\n            }\n            if (this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic ';\n            }\n            if (this.textArea.style.fontWeight === 'bold' && this.textArea.style.fontStyle === 'italic') {\n                textStyle = 'italic bold ';\n            }\n            this.upperContext.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.textArea.style.fontFamily;\n            var rows = this.textArea.value.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: true, text: null, obj: obj } });\n            var text_1 = obj['maxText'];\n            var width = this.upperContext.measureText(text_1).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            this.textArea.style.width = width + 'px';\n            this.textArea.style.height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25) + 'px';\n            this.activeObj.textSettings.fontSize = temp;\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            this.textArea.style.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10) + 'px';\n            if (this.textArea.style.fontFamily === 'georgia') {\n                this.textArea.style.width = parseFloat(this.textArea.style.width) + parseFloat(this.textArea.style.fontSize) + 'px';\n            }\n        }\n        else {\n            this.notify('shape', { prop: 'updateFontRatio', onPropertyChange: false,\n                value: { obj: this.activeObj, isTextArea: null } });\n            var fontSize = this.activeObj.textSettings.fontSize = parseInt(this.fontSizeColl[(parseInt(itemText, 10) - 1)].text, 10);\n            this.notify('shape', { prop: 'setTextSettings', onPropertyChange: false,\n                value: { textSettings: null, fontFamily: null, fontSize: fontSize } });\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            var rows = this.activeObj.keyHistory.split('\\n');\n            var obj = { maxText: '' };\n            this.notify('shape', { prop: 'getMaxText', onPropertyChange: false,\n                value: { isTextBox: null, text: null, obj: obj } });\n            var text_2 = obj['maxText'];\n            var width = this.upperContext.measureText(text_2).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            var height = rows.length * (this.activeObj.textSettings.fontSize +\n                this.activeObj.textSettings.fontSize * 0.25);\n            this.notify('selection', { prop: 'setTextSelection', onPropertyChange: false,\n                value: { width: width, height: height } });\n            this.notify('draw', { prop: 'updateActiveObject', onPropertyChange: false, value: { actPoint: this.activeObj.activePoint, obj: this.activeObj,\n                    isMouseMove: null, x: null, y: null } });\n            this.notify('shape', { prop: 'redraw-text' });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n        var shapeChangedArgs = { action: 'font-size', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fontSize = this.activeObj.textSettings.fontSize;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Font color for text.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFontColor = function (value) {\n        this.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'none') {\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null,\n                    strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n            if (!this.togglePen) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.textArea.style.color = value;\n            var temp = this.activeObj.strokeSettings.strokeColor;\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'textAreaCustomization', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.objColl.pop();\n            this.activeObj.strokeSettings.strokeColor = temp;\n        }\n        else if (!this.togglePen) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n        var shapeChangedArgs = { action: 'font-color', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fillColor = value;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Pen stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeWidth = function (id) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.setPenStroke(id);\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var obj_4 = { penStrokeWidth: null };\n            this.notify('freehand-draw', { prop: 'getPenStrokeWidth', onPropertyChange: false, value: { obj: obj_4 } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: null, strokeWidth: obj_4['penStrokeWidth'] } });\n            var indexObj = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            this.pointColl[indexObj['freehandSelectedIndex']].strokeWidth = obj_4['penStrokeWidth'];\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        shapeSettings.type = ShapeType.FreehandDraw;\n        var shapeChangedArgs = { action: 'stroke-width', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeWidth = this.activeObj.strokeSettings.strokeWidth;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Pen stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updatePenStrokeColor = function (value) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var temp = extend([], this.pointColl, [], true);\n        this.updateFreehandDrawColorChange();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.pointColl = temp;\n        this.notify('selection', { prop: 'setFreehandDrawCustomized', value: { isFreehandDrawCustomized: true } });\n        this.activeObj.strokeSettings.strokeColor = value;\n        var obj = { bool: false };\n        this.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n        if (obj['bool']) {\n            var indexObj = { freehandSelectedIndex: null };\n            this.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.pointColl[indexObj['freehandSelectedIndex']].strokeColor = value;\n            this.notify('freehand-draw', { prop: 'hoverFhd', onPropertyChange: false,\n                value: { strokeColor: value } });\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'freehanddrawCustomized', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n        }\n        else if (!this.togglePen) {\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.activeObj } });\n        }\n        shapeSettings.type = ShapeType.FreehandDraw;\n        var shapeChangedArgs = { action: 'stroke-color', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeColor = value;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Shape stroke width.\n     *\n     * @param { string } id - Specifies the selected item id.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeWidth = function (id) {\n        if (this.activeObj.shape && (this.activeObj.shape !== 'path' || (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length > 0))) {\n            var obj = { shapeSettingsObj: {} };\n            this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n            var shapeSettings = obj['shapeSettingsObj'];\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n            this.activeObj.strokeSettings.strokeWidth = parseInt(id, 10);\n            this.activeObj.strokeSettings.strokeWidth *= 2;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                    strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            var shapeChangedArgs = { action: 'stroke-width', previousShapeSettings: extend({}, shapeSettings, {}, true),\n                currentShapeSettings: extend({}, shapeSettings, {}, true) };\n            shapeChangedArgs.currentShapeSettings.strokeWidth = this.activeObj.strokeSettings.strokeWidth;\n            this.triggerShapeChanged(shapeChangedArgs);\n        }\n        else if (this.activeObj.shape && (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length === 0)) {\n            this.activeObj.strokeSettings.strokeWidth = parseInt(id, 10);\n            this.activeObj.strokeSettings.strokeWidth *= 2;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: null, fillColor: null,\n                    strokeWidth: this.activeObj.strokeSettings.strokeWidth } });\n        }\n    };\n    /**\n     * Apply Shape stroke color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateStrokeColor = function (value) {\n        var objt = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: objt } });\n        var shapeSettings = objt['shapeSettingsObj'];\n        if (this.activeObj.shape && (this.activeObj.shape !== 'path' || (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length > 0))) {\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            var prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n            if (!this.togglePen) {\n                this.objColl.push(this.activeObj);\n                this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                    value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                        previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                        previousCropObj: prevCropObj, previousText: null,\n                        currentText: null, previousFilter: null, isCircleCrop: null } });\n                this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n            }\n        }\n        else if (this.activeObj.shape && (this.activeObj.shape === 'path' &&\n            this.activeObj.pointColl.length === 0)) {\n            this.activeObj.strokeSettings.strokeColor = value;\n            this.notify('shape', { prop: 'setStrokeSettings', value: { strokeSettings: null, strokeColor: this.activeObj.strokeSettings.strokeColor, fillColor: null, strokeWidth: null } });\n        }\n        var shapeChangedArgs = { action: 'stroke-color', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.strokeColor = value;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply Shape fill color.\n     *\n     * @param { string } value - Specifies the selected color item value.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.updateFillColor = function (value) {\n        var obj = { shapeSettingsObj: {} };\n        this.notify('selection', { prop: 'updatePrevShapeSettings', onPropertyChange: false, value: { obj: obj } });\n        var shapeSettings = obj['shapeSettingsObj'];\n        this.notify('shape', { prop: 'pushActItemIntoObj' });\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var object = { currObj: {} };\n        this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n        var prevObj = object['currObj'];\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var selPointCollObj = { selPointColl: null };\n        this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n            value: { obj: selPointCollObj } });\n        prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n        this.objColl.pop();\n        this.activeObj.strokeSettings.fillColor = value;\n        this.notify('shape', { prop: 'setStrokeSettings',\n            value: { strokeSettings: null, strokeColor: null, fillColor: this.activeObj.strokeSettings.fillColor,\n                strokeWidth: null } });\n        this.objColl.push(this.activeObj);\n        this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n            value: { operation: 'shapeTransform', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                previousCropObj: prevCropObj, previousText: null,\n                currentText: null, previousFilter: null, isCircleCrop: null } });\n        this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        var shapeChangedArgs = { action: 'fill-color', previousShapeSettings: extend({}, shapeSettings, {}, true),\n            currentShapeSettings: extend({}, shapeSettings, {}, true) };\n        shapeChangedArgs.currentShapeSettings.fillColor = value;\n        this.triggerShapeChanged(shapeChangedArgs);\n    };\n    /**\n     * Apply horizontal flip.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context 2D.\n     * @param { boolean } isPreventURC - Specifies to update undo redo collection.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.horizontalFlip = function (ctx, isPreventURC) {\n        var prevCropObj;\n        var prevObj;\n        if (isNullOrUndefined(isPreventURC)) {\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n        }\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'refreshSlider' });\n        }\n        ctx.clearRect(0, 0, this.activeObj.imageCanvas.width, this.activeObj.imageCanvas.height);\n        this.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: this.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: null } });\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        if (isNullOrUndefined(isPreventURC)) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'imageHFlip', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply vertical flip.\n     *\n     * @param { CanvasRenderingContext2D } ctx - Specifies the canvas context 2D.\n     * @param { boolean } isPreventURC - Specifies to update undo redo collection.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.verticalFlip = function (ctx, isPreventURC) {\n        var prevCropObj;\n        var prevObj;\n        if (isNullOrUndefined(isPreventURC)) {\n            this.notify('shape', { prop: 'pushActItemIntoObj' });\n            prevCropObj = extend({}, this.cropObj, {}, true);\n            var object = { currObj: {} };\n            this.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            prevObj = object['currObj'];\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            var selPointCollObj = { selPointColl: null };\n            this.notify('freehand-draw', { prop: 'getSelPointColl', onPropertyChange: false,\n                value: { obj: selPointCollObj } });\n            prevObj.selPointColl = extend([], selPointCollObj['selPointColl'], [], true);\n            this.objColl.pop();\n        }\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'refreshSlider' });\n        }\n        ctx.clearRect(0, 0, this.activeObj.imageCanvas.width, this.activeObj.imageCanvas.height);\n        this.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n            value: { ctx: this.activeObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: true } });\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        if (isNullOrUndefined(isPreventURC)) {\n            this.objColl.push(this.activeObj);\n            this.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false,\n                value: { operation: 'imageVFlip', previousObj: prevObj, previousObjColl: prevObj.objColl,\n                    previousPointColl: prevObj.pointColl, previousSelPointColl: prevObj.selPointColl,\n                    previousCropObj: prevCropObj, previousText: null,\n                    currentText: null, previousFilter: null, isCircleCrop: null } });\n            this.notify('selection', { prop: 'redrawShape', value: { obj: this.objColl[this.objColl.length - 1] } });\n        }\n    };\n    /**\n     * Apply rotate image.\n     *\n     * @param { string } rotate - Specifies the direction of rotation.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.rotateImage = function (rotate) {\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'refreshSlider' });\n        }\n        if (rotate === 'rotleft') {\n            this.activeObj.rotatedAngle -= (90 * (Math.PI / 180));\n        }\n        else {\n            this.activeObj.rotatedAngle += (90 * (Math.PI / 180));\n        }\n        this.notify('selection', { prop: 'updPtCollForShpRot', onPropertyChange: false, value: { obj: this.activeObj } });\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n        if (!isBlazor()) {\n            this.notify('toolbar', { prop: 'destroy-qa-toolbar' });\n            this.notify('toolbar', { prop: 'renderQAT', onPropertyChange: false, value: { isPenEdit: null } });\n        }\n        else {\n            this.updateToolbar(this.element, 'destroyQuickAccessToolbar');\n            this.updateToolbar(this.element, 'quickAccessToolbar', 'image');\n        }\n    };\n    /**\n     * Get pascalToSplitWords from string.\n     *\n     * @param { string } str - Specifies the word.\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.pascalToSplitWords = function (str) {\n        str = str.charAt(0).toUpperCase() + str.slice(1);\n        var splitStr = str.match(/[A-Z][a-z]+/g);\n        if (isNullOrUndefined(splitStr)) {\n            return str;\n        }\n        else {\n            return splitStr.map(function (word) { return word.charAt(0).toUpperCase() + word.slice(1); }).join(' ');\n        }\n    };\n    /**\n     * Get Slider Value.\n     *\n     * @param { string } type - Finetune type.\n     * @hidden\n     * @returns {number}.\n     */\n    ImageEditor.prototype.getCurrAdjustmentValue = function (type) {\n        var obj = { adjustmentLevel: null };\n        this.notify('filter', { prop: 'getAdjustmentLevel', onPropertyChange: false,\n            value: { obj: obj } });\n        var typeToAdjustmentLevel = { 'brightness': obj['adjustmentLevel'].brightness,\n            'contrast': obj['adjustmentLevel'].contrast, 'hue': obj['adjustmentLevel'].hue,\n            'saturation': obj['adjustmentLevel'].saturation, 'opacity': obj['adjustmentLevel'].opacity,\n            'blur': obj['adjustmentLevel'].blur, 'exposure': obj['adjustmentLevel'].exposure,\n            'transparency': obj['adjustmentLevel'].transparency };\n        return typeToAdjustmentLevel[\"\" + type];\n    };\n    /**\n     * Apply transformSelect.\n     *\n     * @param { string } type - Specifies the selected item text.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.transformSelect = function (type) {\n        this.isCropToolbar = true;\n        this.allowDownScale = false;\n        this.setInitialZoomState();\n        var activeObj = extend({}, this.activeObj, {}, true);\n        this.cropSelectedState();\n        this.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n        this.updateImageTransformColl(type);\n        this.notify('transform', { prop: 'performTransformation', value: { text: type } });\n        this.notify('draw', { prop: 'moveToSelectionRange', value: { type: type, activeObj: activeObj } });\n        this.isCropToolbar = false;\n    };\n    /**\n     * Returns default filter.\n     *\n     * @hidden\n     * @returns {string}.\n     */\n    ImageEditor.prototype.getDefaultFilter = function () {\n        return 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' +\n            'grayscale(0%) ' + 'invert(0%)';\n    };\n    // Blazor codes\n    /**\n     * To Initialize the component rendering\n     *\n     * @private\n     * @param {HTMLCanvasElement} element - Specifies the canvas element.\n     * @param {BlazorDotnetObject} dotnetRef - Specifies for blazor client to server communication.\n     * @returns {void}\n     */\n    ImageEditor.prototype.initializeImageEditor = function (element, dotnetRef) {\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this.element = element;\n        if (isBlazor() && this.element.querySelector('.place-holder')) {\n            this.element.querySelector('.place-holder').remove();\n        }\n        if (this.element.offsetWidth > 359 && this.element.querySelector('.e-ie-min-drop-content') && this.element.querySelector('.e-ie-drop-content')) {\n            this.element.querySelector('.e-ie-min-drop-content').style.display = 'none';\n            this.element.querySelector('.e-ie-drop-content').style.display = 'block';\n        }\n        if (isBlazor() && this.element.querySelector('.e-ie-drop-area')) {\n            this.element.querySelector('.e-ie-drop-area').style.display = 'block';\n        }\n        if (isBlazor() && this.element.querySelector('.e-toolbar-area')) {\n            this.element.querySelector('.e-toolbar-area').style.display = 'block';\n        }\n        var canvasWrapper = this.element.querySelector('.e-canvas-wrapper');\n        if (this.element.querySelector('#' + this.element.id + '_toolbarArea')) {\n            this.toolbarHeight = this.element.querySelector('#' + this.element.id + '_toolbarArea').clientHeight;\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n        canvasWrapper.style.height = (this.element.offsetHeight - this.toolbarHeight - 2) + 'px';\n        canvasWrapper.style.width = (this.element.offsetWidth - 2) + 'px';\n        this.lowerCanvas = this.element.querySelector('.e-lower-canvas');\n        this.upperCanvas = this.element.querySelector('.e-upper-canvas');\n        this.lowerCanvas.id = this.element.id + '_lowerCanvas';\n        this.upperCanvas.id = this.element.id + '_upperCanvas';\n        this.textArea = this.element.querySelector('.e-textbox');\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.baseImgCanvas = this.createElement('canvas', {\n            id: this.element.id + '_baseImgCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.upperCanvas.width = this.lowerCanvas.width = this.inMemoryCanvas.width = this.element.offsetWidth;\n        this.upperCanvas.height = this.lowerCanvas.height = this.inMemoryCanvas.height = (this.element.offsetHeight - this.toolbarHeight);\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        if (dotnetRef) {\n            this.dotNetRef = dotnetRef;\n        }\n        this.prerender();\n        this.wireEvent();\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.notify('filter', { prop: 'setAdjustmentValue', onPropertyChange: false, value: { adjustmentValue: this.lowerContext.filter } });\n        this.canvasFilter = this.initialAdjustmentValue = this.lowerContext.filter;\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n        this.initializeZoomSettings();\n    };\n    ImageEditor.prototype.prerender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.initializeThemeColl();\n    };\n    ImageEditor.prototype.initializeZoomSettings = function () {\n        if (isNullOrUndefined(this.zoomSettings.zoomTrigger)) {\n            this.zoomSettings.zoomTrigger = (ZoomTrigger.MouseWheel | ZoomTrigger.Pinch | ZoomTrigger.Toolbar | ZoomTrigger.Commands);\n        }\n        if (isNullOrUndefined(this.selectionSettings.strokeColor)) {\n            this.selectionSettings.strokeColor = this.themeColl[this.theme]['primaryColor'];\n        }\n        if (isNullOrUndefined(this.selectionSettings.fillColor)) {\n            this.selectionSettings.fillColor = this.themeColl[this.theme]['secondaryColor'];\n        }\n    };\n    ImageEditor.prototype.initializeThemeColl = function () {\n        this.themeColl = {\n            Bootstrap5: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Bootstrap5Dark: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Tailwind: { primaryColor: '#4f46e5', secondaryColor: '#fff' },\n            TailwindDark: { primaryColor: '#22d3ee', secondaryColor: '#fff' },\n            Fluent: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            FluentDark: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            Bootstrap4: { primaryColor: '#007bff', secondaryColor: '#fff' },\n            Bootstrap: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            BootstrapDark: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            Material: { primaryColor: '#e3165b', secondaryColor: '#fff' },\n            MaterialDark: { primaryColor: '#00b0ff', secondaryColor: '#fff' },\n            Fabric: { primaryColor: '#0078d6', secondaryColor: '#fff' },\n            FabricDark: { primaryColor: '#0074cc', secondaryColor: '#fff' },\n            Highcontrast: { primaryColor: '#000000', secondaryColor: '#fff' },\n            Material3: { primaryColor: '#6750a4', secondaryColor: '#fff' },\n            Material3Dark: { primaryColor: '#d0bcff', secondaryColor: '#fff' }\n        };\n    };\n    /**\n     * Get the square point for path.\n     *\n     * @param { HTMLDivElement } element - Specifies element.\n     * @param { string } type - Specifies the type.\n     * @param { string } value - Specifies the value.\n     * @hidden\n     * @private\n     * @returns {void}.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function\n    ImageEditor.prototype.updateToolbar = function (element, type, value) {\n    };\n    /**\n     * Trigger the shapeChanging event for after the shape applied.\n     *\n     * @param { ShapeChangeEventArgs } shapeChangedArgs - Specifies the shapeChaning event args.\n     * @hidden\n     * @returns {void}.\n     */\n    ImageEditor.prototype.triggerShapeChanged = function (shapeChangedArgs) {\n        if (isBlazor() && this.events && this.events.shapeChanged.hasDelegate === true) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            this.dotNetRef.invokeMethodAsync('ShapeEventAsync', 'ShapeChanged', shapeChangedArgs);\n        }\n    };\n    var ImageEditor_1;\n    __decorate([\n        Property('')\n    ], ImageEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property('Bootstrap5')\n    ], ImageEditor.prototype, \"theme\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"allowUndoRedo\", void 0);\n    __decorate([\n        Property(true)\n    ], ImageEditor.prototype, \"showQuickAccessToolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"quickAccessToolbarTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"isReadOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Complex({}, FinetuneSettings)\n    ], ImageEditor.prototype, \"finetuneSettings\", void 0);\n    __decorate([\n        Complex({}, ZoomSettings)\n    ], ImageEditor.prototype, \"zoomSettings\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], ImageEditor.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"beforeSave\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"zooming\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"panning\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"cropping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"rotating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"flipping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"shapeChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"selectionChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"fileOpened\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"saved\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarCreated\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarUpdating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarItemClicked\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"imageFiltering\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"finetuneValueChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarOpen\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"quickAccessToolbarItemClick\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"frameChange\", void 0);\n    ImageEditor = ImageEditor_1 = __decorate([\n        NotifyPropertyChanges\n    ], ImageEditor);\n    return ImageEditor;\n}(Component));\nexport { ImageEditor };\n","/**\n * An enum representing the file types supported by the image editor.\n *\n * @enum {string}\n */\nexport var FileType;\n(function (FileType) {\n    /** The PNG file type. */\n    FileType[\"Png\"] = \"Png\";\n    /** The JPEG file type. */\n    FileType[\"Jpeg\"] = \"Jpeg\";\n    /** The SVG file type. */\n    FileType[\"Svg\"] = \"Svg\";\n})(FileType || (FileType = {}));\n/**\n * An enumeration representing the direction of an image editor operation.\n *\n * @enum {string}\n */\nexport var Direction;\n(function (Direction) {\n    /** The horizontal direction. */\n    Direction[\"Horizontal\"] = \"Horizontal\";\n    /** The vertical direction. */\n    Direction[\"Vertical\"] = \"Vertical\";\n})(Direction || (Direction = {}));\n/**\n * An enumeration representing the type of shape to be added in the image editor.\n *\n * @enum {string}\n */\nexport var ShapeType;\n(function (ShapeType) {\n    /** A rectangle shape. */\n    ShapeType[\"Rectangle\"] = \"Rectangle\";\n    /** An ellipse shape. */\n    ShapeType[\"Ellipse\"] = \"Ellipse\";\n    /** A line shape. */\n    ShapeType[\"Line\"] = \"Line\";\n    /** An arrow shape. */\n    ShapeType[\"Arrow\"] = \"Arrow\";\n    /** A path shape. */\n    ShapeType[\"Path\"] = \"Path\";\n    /** A text shape. */\n    ShapeType[\"Text\"] = \"Text\";\n    /** A freehand drawing shape. */\n    ShapeType[\"FreehandDraw\"] = \"FreehandDraw\";\n    /** An Image shape. */\n    ShapeType[\"Image\"] = \"Image\";\n})(ShapeType || (ShapeType = {}));\n/**\n * An enumeration representing the different ways to trigger zooming in the image editor.\n *\n * @aspNumberEnum\n */\nexport var ZoomTrigger;\n(function (ZoomTrigger) {\n    /** Zooming triggered by mouse wheel. */\n    ZoomTrigger[ZoomTrigger[\"MouseWheel\"] = 1] = \"MouseWheel\";\n    /** Zooming triggered by pinch gesture. */\n    ZoomTrigger[ZoomTrigger[\"Pinch\"] = 2] = \"Pinch\";\n    /** Zooming triggered by command keys. */\n    ZoomTrigger[ZoomTrigger[\"Commands\"] = 4] = \"Commands\";\n    /** Zooming triggered by toolbar button click. */\n    ZoomTrigger[ZoomTrigger[\"Toolbar\"] = 8] = \"Toolbar\";\n})(ZoomTrigger || (ZoomTrigger = {}));\n/**\n * * An enum representing the available themes in the image editor.\n */\nexport var Theme;\n(function (Theme) {\n    /** The Bootstrap 5 theme. */\n    Theme[\"Bootstrap5\"] = \"Bootstrap5\";\n    /** The dark variant of the Bootstrap 5 theme. */\n    Theme[\"Bootstrap5Dark\"] = \"Bootstrap5Dark\";\n    /** The Tailwind CSS theme. */\n    Theme[\"Tailwind\"] = \"Tailwind\";\n    /** The dark variant of the Tailwind CSS theme. */\n    Theme[\"TailwindDark\"] = \"TailwindDark\";\n    /** The Fluent UI theme. */\n    Theme[\"Fluent\"] = \"Fluent\";\n    /** The dark variant of the Fluent UI theme. */\n    Theme[\"FluentDark\"] = \"FluentDark\";\n    /** The Bootstrap 4 theme. */\n    Theme[\"Bootstrap4\"] = \"Bootstrap4\";\n    /** The Bootstrap theme. */\n    Theme[\"Bootstrap\"] = \"Bootstrap\";\n    /** The dark variant of the Bootstrap theme. */\n    Theme[\"BootstrapDark\"] = \"BootstrapDark\";\n    /** The Material Design theme. */\n    Theme[\"Material\"] = \"Material\";\n    /** The dark variant of the Material Design theme. */\n    Theme[\"MaterialDark\"] = \"MaterialDark\";\n    /** The Fabric theme. */\n    Theme[\"Fabric\"] = \"Fabric\";\n    /** The dark variant of the Fabric theme. */\n    Theme[\"FabricDark\"] = \"FabricDark\";\n    /** The high contrast theme. */\n    Theme[\"Highcontrast\"] = \"Highcontrast\";\n})(Theme || (Theme = {}));\n/**\n * An enum representing the available toolbar commands in the image editor.\n */\nexport var ImageEditorCommand;\n(function (ImageEditorCommand) {\n    ImageEditorCommand[\"Crop\"] = \"Crop\";\n    ImageEditorCommand[\"Transform\"] = \"Transform\";\n    ImageEditorCommand[\"Annotate\"] = \"Annotate\";\n    ImageEditorCommand[\"ZoomIn\"] = \"ZoomIn\";\n    ImageEditorCommand[\"ZoomOut\"] = \"ZoomOut\";\n    ImageEditorCommand[\"Open\"] = \"Open\";\n    ImageEditorCommand[\"Reset\"] = \"Reset\";\n    ImageEditorCommand[\"Save\"] = \"Save\";\n    ImageEditorCommand[\"Pan\"] = \"Pan\";\n    ImageEditorCommand[\"Move\"] = \"Move\";\n    ImageEditorCommand[\"Pen\"] = \"Pen\";\n    ImageEditorCommand[\"Line\"] = \"Line\";\n    ImageEditorCommand[\"Arrow\"] = \"Arrow\";\n    ImageEditorCommand[\"Path\"] = \"Path\";\n    ImageEditorCommand[\"Rectangle\"] = \"Rectangle\";\n    ImageEditorCommand[\"Image\"] = \"Image\";\n    ImageEditorCommand[\"Ellipse\"] = \"Ellipse\";\n    ImageEditorCommand[\"Text\"] = \"Text\";\n    ImageEditorCommand[\"CustomSelection\"] = \"CustomSelection\";\n    ImageEditorCommand[\"CircleSelection\"] = \"CircleSelection\";\n    ImageEditorCommand[\"SquareSelection\"] = \"SquareSelection\";\n    ImageEditorCommand[\"RatioSelection\"] = \"RatioSelection\";\n    ImageEditorCommand[\"RotateLeft\"] = \"RotateLeft\";\n    ImageEditorCommand[\"RotateRight\"] = \"RotateRight\";\n    ImageEditorCommand[\"FlipHorizontal\"] = \"FlipHorizontal\";\n    ImageEditorCommand[\"FlipVertical\"] = \"FlipVertical\";\n    ImageEditorCommand[\"Undo\"] = \"Undo\";\n    ImageEditorCommand[\"Redo\"] = \"Redo\";\n    ImageEditorCommand[\"None\"] = \"None\";\n    ImageEditorCommand[\"Mat\"] = \"Mat\";\n    ImageEditorCommand[\"Bevel\"] = \"Bevel\";\n    ImageEditorCommand[\"Inset\"] = \"Inset\";\n    ImageEditorCommand[\"Hook\"] = \"Hook\";\n    ImageEditorCommand[\"Finetune\"] = \"Finetune\";\n    ImageEditorCommand[\"Filter\"] = \"Filter\";\n    ImageEditorCommand[\"Frame\"] = \"Frame\";\n    ImageEditorCommand[\"Resize\"] = \"Resize\";\n    ImageEditorCommand[\"HorizontalFlip\"] = \"HorizontalFlip\";\n    ImageEditorCommand[\"VerticalFlip\"] = \"VerticalFlip\";\n    ImageEditorCommand[\"Brightness\"] = \"Brightness\";\n    ImageEditorCommand[\"Contrast\"] = \"Contrast\";\n    ImageEditorCommand[\"Hue\"] = \"Hue\";\n    ImageEditorCommand[\"Saturation\"] = \"Saturation\";\n    ImageEditorCommand[\"Opacity\"] = \"Opacity\";\n    ImageEditorCommand[\"Blur\"] = \"Blur\";\n    ImageEditorCommand[\"Exposure\"] = \"Exposure\";\n    ImageEditorCommand[\"Default\"] = \"Default\";\n    ImageEditorCommand[\"Chrome\"] = \"Chrome\";\n    ImageEditorCommand[\"Cold\"] = \"Cold\";\n    ImageEditorCommand[\"Warm\"] = \"Warm\";\n    ImageEditorCommand[\"Grayscale\"] = \"Grayscale\";\n    ImageEditorCommand[\"Sepia\"] = \"Sepia\";\n    ImageEditorCommand[\"Invert\"] = \"Invert\";\n})(ImageEditorCommand || (ImageEditorCommand = {}));\n/**\n * An enumeration of available image filter options.\n *\n * @remarks\n * These options can be used with the `applyImageFilter` method of the image editor control to apply filters to an image.\n */\nexport var ImageFilterOption;\n(function (ImageFilterOption) {\n    /** Default filter */\n    ImageFilterOption[\"Default\"] = \"Default\";\n    /** Chrome filter */\n    ImageFilterOption[\"Chrome\"] = \"Chrome\";\n    /** Cold filter */\n    ImageFilterOption[\"Cold\"] = \"Cold\";\n    /** Warm filter */\n    ImageFilterOption[\"Warm\"] = \"Warm\";\n    /** Grayscale filter */\n    ImageFilterOption[\"Grayscale\"] = \"Grayscale\";\n    /** Sepia filter */\n    ImageFilterOption[\"Sepia\"] = \"Sepia\";\n    /** Invert filter */\n    ImageFilterOption[\"Invert\"] = \"Invert\";\n})(ImageFilterOption || (ImageFilterOption = {}));\n/**\n * An enumeration of available image finetune options.\n *\n * @remarks\n * These options can be used with the `finetuneImage` method of the image editor control to apply finetuning to an image.\n */\nexport var ImageFinetuneOption;\n(function (ImageFinetuneOption) {\n    /** Adjust the brightness of the image */\n    ImageFinetuneOption[\"Brightness\"] = \"Brightness\";\n    /** Adjust the contrast of the image */\n    ImageFinetuneOption[\"Contrast\"] = \"Contrast\";\n    /** Adjust the hue of the image */\n    ImageFinetuneOption[\"Hue\"] = \"Hue\";\n    /** Adjust the saturation of the image */\n    ImageFinetuneOption[\"Saturation\"] = \"Saturation\";\n    /** Adjust the exposure of the image */\n    ImageFinetuneOption[\"Exposure\"] = \"Exposure\";\n    /** Adjust the opacity of the image */\n    ImageFinetuneOption[\"Opacity\"] = \"Opacity\";\n    /** Adjust the blur of the image */\n    ImageFinetuneOption[\"Blur\"] = \"Blur\";\n})(ImageFinetuneOption || (ImageFinetuneOption = {}));\n/**\n * Specifies the type of arrowhead should be drawn.\n *\n */\nexport var ArrowheadType;\n(function (ArrowheadType) {\n    /** Indicates no arrowhead should be drawn. */\n    ArrowheadType[\"None\"] = \"None\";\n    /** Indicates a normal triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Arrow\"] = \"Arrow\";\n    /** Indicates a solid triangle-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidArrow\"] = \"SolidArrow\";\n    /** Indicates a circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Circle\"] = \"Circle\";\n    /** Indicates a solid circular-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidCircle\"] = \"SolidCircle\";\n    /** Indicates a square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"Square\"] = \"Square\";\n    /** Indicates a solid square-shaped arrowhead should be drawn. */\n    ArrowheadType[\"SolidSquare\"] = \"SolidSquare\";\n    /** Indicates a bar shaped arrowhead should be drawn. */\n    ArrowheadType[\"Bar\"] = \"Bar\";\n})(ArrowheadType || (ArrowheadType = {}));\n/**\n * An enumeration of available frame options.\n *\n * @remarks\n * These options can be used with the `drawFrame` method of the image editor control to draw frames on an image.\n */\nexport var FrameType;\n(function (FrameType) {\n    /** Represents a no frame. */\n    FrameType[\"None\"] = \"None\";\n    /** Represents a mat frame. */\n    FrameType[\"Mat\"] = \"Mat\";\n    /** Represents a bevel frame. */\n    FrameType[\"Bevel\"] = \"Bevel\";\n    /** Represents a line frame. */\n    FrameType[\"Line\"] = \"Line\";\n    /** Represents an inset frame. */\n    FrameType[\"Inset\"] = \"Inset\";\n    /** Represents a hook frame. */\n    FrameType[\"Hook\"] = \"Hook\";\n})(FrameType || (FrameType = {}));\n/**\n * An enumeration of available line options.\n *\n * @remarks\n * These options can be used with the `drawFrame` method of the image editor control to draw frames on an image.\n */\nexport var FrameLineStyle;\n(function (FrameLineStyle) {\n    /** Represents a solid line. */\n    FrameLineStyle[\"Solid\"] = \"Solid\";\n    /** Represents a dashed line. */\n    FrameLineStyle[\"Dashed\"] = \"Dashed\";\n    /** Represents a dotted line. */\n    FrameLineStyle[\"Dotted\"] = \"Dotted\";\n})(FrameLineStyle || (FrameLineStyle = {}));\n","import { extend, Browser, detach, select } from '@syncfusion/ej2-base';\nimport { EventHandler, getComponent, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Uploader, Slider } from '@syncfusion/ej2-inputs';\nimport { ZoomTrigger } from '../index';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nvar ToolbarModule = /** @class */ (function () {\n    function ToolbarModule(parent) {\n        this.defToolbarItems = [];\n        this.toolbarHeight = 46;\n        this.currToolbar = '';\n        this.preventZoomBtn = false;\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        this.preventEnableDisableUr = false;\n        this.isAspectRatio = true;\n        this.isFrameToolbar = false;\n        this.parent = parent;\n        this.addEventListener();\n        this.initLocale();\n    }\n    ToolbarModule.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    ToolbarModule.prototype.addEventListener = function () {\n        this.parent.on('toolbar', this.toolbar, this);\n        this.parent.on('destroyed', this.destroy, this);\n    };\n    ToolbarModule.prototype.removeEventListener = function () {\n        this.parent.off('toolbar', this.toolbar);\n        this.parent.off('destroyed', this.destroy);\n    };\n    ToolbarModule.prototype.initLocale = function () {\n        this.defaultLocale = {\n            Crop: 'Crop',\n            ZoomIn: 'Zoom In',\n            ZoomOut: 'Zoom Out',\n            Undo: 'Undo',\n            Redo: 'Redo',\n            Transform: 'Transform',\n            Annotation: 'Annotation',\n            Finetune: 'Finetune',\n            Brightness: 'Brightness',\n            Contrast: 'Contrast',\n            Hue: 'Hue',\n            Saturation: 'Saturation',\n            Opacity: 'Opacity',\n            Blur: 'Blur',\n            Sharpen: 'Sharpen',\n            Exposure: 'Exposure',\n            Filter: 'Filter',\n            Default: 'Default',\n            Chrome: 'Chrome',\n            Cold: 'Cold',\n            Warm: 'Warm',\n            Grayscale: 'Grayscale',\n            BlackAndWhite: 'Black and White',\n            Sepia: 'Sepia',\n            Invert: 'Invert',\n            Text: 'Add Text',\n            Pen: 'Pen',\n            Reset: 'Reset',\n            Save: 'Save',\n            Select: 'Select',\n            RotateLeft: 'Rotate Left',\n            RotateRight: 'Rotate Right',\n            HorizontalFlip: 'Horizontal Flip',\n            VerticalFlip: 'Vertical Flip',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            FillColor: 'Fill Color',\n            StrokeColor: 'Stroke Color',\n            StrokeWidth: 'Stroke Width',\n            FontFamily: 'Font Family',\n            FontStyle: 'Font Style',\n            FontSize: 'Font Size',\n            FontColor: 'Font Color',\n            Pan: 'Pan',\n            Move: 'Move',\n            Load: 'Load',\n            Custom: 'Custom',\n            Square: 'Square',\n            Circle: 'Circle',\n            Ellipse: 'Ellipse',\n            Rectangle: 'Rectangle',\n            Line: 'Line',\n            Arrow: 'Arrow',\n            Path: 'Path',\n            Bold: 'Bold',\n            Italic: 'Italic',\n            BoldItalic: 'Bold Italic',\n            XSmall: 'X-Small',\n            Small: 'Small',\n            Medium: 'Medium',\n            Large: 'Large',\n            XLarge: 'X-Large',\n            ABC: 'ABC',\n            Browse: 'Browse',\n            Duplicate: 'Duplicate',\n            Remove: 'Remove',\n            EditText: 'Edit Text',\n            Start: 'Start',\n            End: 'End',\n            Bar: 'Bar',\n            ArrowSolid: 'Arrow Solid',\n            CircleSolid: 'Circle Solid',\n            SquareSolid: 'Square Solid',\n            None: 'None',\n            CropAndTransform: 'Crop and Transform',\n            CropSelection: 'Crop Selection',\n            Image: 'Add Image',\n            Transparency: 'Transparency',\n            Height: 'Height',\n            Width: 'Width',\n            AspectRatio: 'Maintain aspect ratio',\n            W: 'W',\n            H: 'H',\n            DragText: 'Drag and drop your image here or',\n            DropText: 'Drop your image here or',\n            BrowseText: 'Browse here...',\n            SupportText: 'Supports:',\n            Frame: 'Frame',\n            Mat: 'Mat',\n            Bevel: 'Bevel',\n            Inset: 'Inset',\n            Hook: 'Hook',\n            Color: 'Color',\n            Size: 'Size',\n            Offset: 'Offset',\n            Radius: 'Radius',\n            Amount: 'Amount',\n            Resize: 'Resize',\n            0: '0%',\n            20: '20%',\n            40: '40%',\n            60: '60%',\n            80: '80%',\n            100: '100%',\n            1: '1',\n            2: '2',\n            3: '3',\n            4: '4',\n            5: '5',\n            Border: 'Border',\n            Solid: 'Solid',\n            Dashed: 'Dashed',\n            Dotted: 'Dotted',\n            GradientColor: 'Gradient Color',\n            ConfirmDialogHeader: 'Confirm Save Changes',\n            ConfirmDialogContent: 'Do you want to save the changes you made to the image?',\n            AlertDialogHeader: 'Unsupported file',\n            AlertDialogContent: 'The dropped file is unsupported.',\n            Yes: 'Yes',\n            No: 'No',\n            ImageErrorDialogHeader: 'Image Selection Error',\n            ImageErrorDialogContent: 'Please select only one image to open.'\n        };\n        this.l10n = new L10n('image-editor', this.defaultLocale, this.parent.locale);\n    };\n    ToolbarModule.prototype.toolbar = function (args) {\n        var parent = this.parent;\n        this.updatePrivateVariables();\n        switch (args.prop) {\n            case 'create-toolbar':\n                this.createToolbar();\n                break;\n            case 'create-contextual-toolbar':\n                this.createContextualToolbar();\n                break;\n            case 'update-toolbar-items':\n                this.updateToolbarItems();\n                break;\n            case 'refresh-toolbar':\n                this.refreshToolbar(args.value['type'], args.value['isApplyBtn'], args.value['isCropping'], args.value['isZooming'], args.value['cType']);\n                break;\n            case 'renderQAT':\n                this.renderQAT(args.value['isPenEdit']);\n                break;\n            case 'enable-disable-btns':\n                this.enableDisableTbrBtn();\n                break;\n            case 'init-main-toolbar':\n                this.initMainToolbar(args.value['isApplyBtn'], args.value['isDevice'], args.value['isOkBtn'], args.value['isResize']);\n                break;\n            case 'create-bottom-toolbar':\n                this.createBottomToolbar();\n                break;\n            case 'refresh-main-toolbar':\n                this.refreshMainToolbar();\n                break;\n            case 'create-qa-toolbar':\n                this.createQuickAccessToolbar();\n                break;\n            case 'destroy-qa-toolbar':\n                this.destroyQuickAccessToolbar();\n                break;\n            case 'zoom-up-handler':\n                this.zoomBtnMouseUpHandler();\n                break;\n            case 'refresh-dropdown-btn':\n                this.refreshDropDownBtn(args.value['isDisabled']);\n                break;\n            case 'close-contextual-toolbar':\n                this.closeContextualToolbar();\n                break;\n            case 'destroy-bottom-toolbar':\n                this.destroyBottomToolbar();\n                break;\n            case 'destroy-top-toolbar':\n                this.destroyTopToolbar();\n                break;\n            case 'destroySubComponents':\n                this.destroySubComponents();\n                break;\n            case 'setLocale':\n                this.l10n.setLocale(args.value['locale']);\n                break;\n            case 'setPreventZoomBtn':\n                this.preventZoomBtn = args.value['isPrevent'];\n                break;\n            case 'getToolbarHeight':\n                args.value['obj']['toolbarHeight'] = this.toolbarHeight;\n                break;\n            case 'setToolbarHeight':\n                this.toolbarHeight = args.value['height'];\n                break;\n            case 'setCurrentToolbar':\n                this.currentToolbar = args.value['type'];\n                break;\n            case 'setSelectedFreehandColor':\n                this.selFhdColor = args.value['color'];\n                break;\n            case 'getCurrentFilter':\n                args.value['obj']['currentFilter'] = parent.currentFilter;\n                break;\n            case 'setCurrentFilter':\n                parent.currentFilter = args.value['filter'];\n                break;\n            case 'setInitialAdjustmentValue':\n                parent.initialAdjustmentValue = args.value['value'];\n                break;\n            case 'getCanvasFilter':\n                args.value['obj']['canvasFilter'] = parent.canvasFilter;\n                break;\n            case 'getDefToolbarItems':\n                args.value['obj']['defToolbarItems'] = this.defToolbarItems;\n                break;\n            case 'getPenStroke':\n                this.getPenStroke(args.value['value']);\n                break;\n            case 'performDefToolbarClickAction':\n                this.performDefTbrClick(args.value['type'], args.value['isContextualToolbar'], args.value['isDisabledAdjustment'], args.value['isDisabledFilter'], args.value['isFilterFinetune']);\n                break;\n            case 'setTempFilterProperties':\n                parent.setTempFilterProperties();\n                break;\n            case 'refreshSlider':\n                this.refreshSlider();\n                break;\n            case 'renderSlider':\n                this.renderSlider(args.value['type']);\n                break;\n            case 'getCurrAdjustmentValue':\n                parent.getCurrAdjustmentValue(args.value['type']);\n                break;\n            case 'setCurrAdjustmentValue':\n                parent.setCurrAdjustmentValue(args.value['type'], args.value['value']);\n                break;\n            case 'refreshShapeDrawing':\n                this.refreshShapeDrawing();\n                break;\n            case 'getCropToolbar':\n                args.value['obj']['isCropToolbar'] = parent.isCropToolbar;\n                break;\n            case 'getPrevCurrSelectionPoint':\n                args.value['obj']['prevCurrSelectionPoint'] = parent.prevCurrSelectionPoint;\n                break;\n            case 'setPrevCurrSelectionPoint':\n                parent.prevCurrSelectionPoint = args.value['point'];\n                break;\n            case 'updateCropTransformItems':\n                parent.updateCropTransformItems();\n                break;\n            case 'setEnableDisableUndoRedo':\n                this.preventEnableDisableUr = args.value['isPrevent'];\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'getLocaleText':\n                args.value['obj']['value'] = this.l10n.getConstant(args.value['obj']['key']);\n                break;\n            case 'initResizeToolbar':\n                this.initResizeToolbar();\n                break;\n            case 'getFrameToolbar':\n                args.value['obj']['bool'] = this.isFrameToolbar;\n                break;\n            case 'callFrameToolbar':\n                this.callFrameToolbar();\n                break;\n            case 'resizeClick':\n                this.resizeClick();\n                break;\n            case 'frameToolbarClick':\n                this.frameToolbarClick();\n                break;\n        }\n    };\n    ToolbarModule.prototype.updatePrivateVariables = function () {\n        var parent = this.parent;\n        this.inMemoryCanvas = parent.inMemoryCanvas;\n        if (parent.lowerCanvas) {\n            this.lowerContext = parent.lowerCanvas.getContext('2d');\n        }\n        if (parent.upperCanvas) {\n            this.upperContext = parent.upperCanvas.getContext('2d');\n        }\n        if (this.inMemoryCanvas) {\n            this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n        }\n    };\n    ToolbarModule.prototype.reset = function () {\n        var parent = this.parent;\n        this.defToolbarItems = [];\n        this.toolbarHeight = 46;\n        parent.prevCurrSelectionPoint = null;\n        this.zoomBtnHold = null;\n        this.currToolbar = '';\n        parent.cxtTbarHeight = null;\n        this.currentToolbar = 'main';\n        this.selFhdColor = '#42a5f5';\n        parent.currentFilter = '';\n        this.preventZoomBtn = parent.isCropToolbar = this.preventEnableDisableUr = this.isFrameToolbar = false;\n        parent.initialAdjustmentValue = parent.canvasFilter =\n            'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n                'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n    };\n    ToolbarModule.prototype.destroyTopToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_toolbar');\n        if (this.isToolbar() && toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.destroyBottomToolbar = function () {\n        var parent = this.parent;\n        var toolbar = document.getElementById(parent.element.id + '_bottomToolbar');\n        if (toolbar && toolbar.classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n        }\n    };\n    ToolbarModule.prototype.isToolbar = function () {\n        var parent = this.parent;\n        return (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)\n            || !isNullOrUndefined(parent.toolbarTemplate));\n    };\n    ToolbarModule.prototype.createToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(parent.element.id + '_toolbarArea');\n            var toolbar_1 = parent.createElement('div', {\n                id: parent.element.id + '_toolbar'\n            });\n            toolbarArea.appendChild(toolbar_1);\n            var uploadItems = [\n                {\n                    cssClass: 'e-image-upload',\n                    align: 'Left', type: 'Input',\n                    tooltipText: this.l10n.getConstant('Browse'),\n                    template: new Uploader({\n                        allowedExtensions: '.jpg, .jpeg, .png,.svg',\n                        multiple: false,\n                        selected: function () {\n                            if (!parent.disabled) {\n                                if (Browser.isDevice) {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        document.getElementById(parent.element.id + '_toolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, Browser.isDevice, null);\n                                    _this.createBottomToolbar();\n                                }\n                                else {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        document.getElementById(parent.element.id + '_toolbar')) {\n                                        getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initMainToolbar(false, false, null);\n                                }\n                            }\n                        }\n                    })\n                }\n            ];\n            var toolbarObj = new Toolbar({ items: uploadItems, width: '100%',\n                created: function () {\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + parent.element.id + '_toolbar');\n            this.createLeftToolbarControls();\n            if (document.getElementById(parent.element.id + '_toolbar')) {\n                this.toolbarHeight = document.getElementById(parent.element.id + '_toolbar').clientHeight;\n            }\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n    };\n    ToolbarModule.prototype.createContextualToolbar = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', { id: parent.element.id + '_contextualToolbarArea',\n                className: 'e-contextual-toolbar-wrapper e-hide', attrs: { style: 'position: absolute;' }\n            }));\n            var toolbarArea = document.getElementById(parent.element.id + '_contextualToolbarArea');\n            var toolbar_2 = parent.createElement('div', { id: parent.element.id + '_contextualToolbar' });\n            toolbarArea.appendChild(toolbar_2);\n        }\n    };\n    ToolbarModule.prototype.createBottomToolbar = function () {\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            parent.element.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_bottomToolbarArea', className: 'e-bottom-toolbar'\n            }));\n            if (!parent.toolbarTemplate) {\n                document.getElementById(parent.element.id + '_canvasWrapper').style.height = (parent.element.offsetHeight\n                    - this.toolbarHeight * 2) - 3 + 'px';\n                var toolbarArea = document.getElementById(parent.element.id + '_bottomToolbarArea');\n                var toolbarElem = parent.createElement('div', {\n                    id: parent.element.id + '_bottomToolbar'\n                });\n                toolbarArea.appendChild(toolbarElem);\n            }\n            this.initBottomToolbar();\n        }\n    };\n    ToolbarModule.prototype.createQuickAccessToolbar = function () {\n        var parent = this.parent;\n        if (parent.showQuickAccessToolbar) {\n            var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) };\n            if (isNullOrUndefined(this.defToolbarItems)) {\n                this.defToolbarItems = [];\n            }\n            this.defToolbarItems.push(toolbarItems);\n            var toolbarArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n            var toolbar_3 = parent.createElement('div', {\n                id: parent.element.id + '_quickAccessToolbar'\n            });\n            toolbarArea.appendChild(toolbar_3);\n            var toolbarObj = new Toolbar({ clicked: this.defToolbarClicked.bind(this) });\n            toolbarObj.appendTo('#' + parent.element.id + '_quickAccessToolbar');\n        }\n    };\n    ToolbarModule.prototype.initMainToolbar = function (isApplyOption, isDevice, isOkBtn, isResize, isFrame) {\n        var _this = this;\n        var parent = this.parent;\n        if (this.isToolbar()) {\n            var leftItem = this.getLeftToolbarItem(isOkBtn, isResize);\n            var rightItem = this.getRightToolbarItem(isOkBtn);\n            var mainItem = this.getMainToolbarItem(isApplyOption, isFrame);\n            var zoomItem = this.getZoomToolbarItem();\n            if (isDevice) {\n                if (isFrame) {\n                    this.defToolbarItems = mainItem;\n                }\n                else {\n                    this.defToolbarItems = leftItem.concat(rightItem);\n                }\n            }\n            else {\n                this.defToolbarItems = leftItem.concat(mainItem, rightItem, zoomItem);\n            }\n            var toolbarObj = new Toolbar({\n                width: '100%',\n                items: this.defToolbarItems,\n                clicked: this.defToolbarClicked.bind(this),\n                created: function () {\n                    if (!isDevice) {\n                        _this.renderAnnotationBtn();\n                    }\n                    _this.wireZoomBtnEvents();\n                    _this.renderSaveBtn();\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                }\n            });\n            if (isDevice && isFrame) {\n                toolbarObj.appendTo('#' + parent.element.id + '_bottomToolbar');\n            }\n            else {\n                toolbarObj.appendTo('#' + parent.element.id + '_toolbar');\n            }\n            this.createLeftToolbarControls();\n            this.enableDisableTbrBtn();\n            if (this.isToolbar() && document.getElementById(parent.element.id + '_toolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_4 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                toolbar_4.refreshOverflow();\n            }\n        }\n    };\n    ToolbarModule.prototype.initBottomToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.length > 0)) {\n            var items = this.getMainToolbarItem();\n            var toolbarObj = new Toolbar({ items: items, width: '100%',\n                created: function () {\n                    _this.renderAnnotationBtn();\n                    _this.renderCropBtn();\n                    _this.renderTransformBtn();\n                    parent.trigger('toolbarCreated', { toolbarType: 'main' });\n                },\n                clicked: this.defToolbarClicked.bind(this)\n            });\n            toolbarObj.appendTo('#' + parent.element.id + '_bottomToolbar');\n            if (this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_5 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                toolbar_5.refreshOverflow();\n            }\n        }\n    };\n    ToolbarModule.prototype.getLeftToolbarItem = function (isOkBtn, isResize) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (!isOkBtn || isResize) {\n            toolbarItems.push({ id: parent.element.id + '_upload', cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg', multiple: false }) });\n            toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: this.l10n.getConstant('Browse'), align: 'Left' });\n        }\n        if (parent.allowUndoRedo && !isResize) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Undo') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_undo', prefixIcon: 'e-icons e-undo', cssClass: 'top-icon e-undo',\n                    tooltipText: this.l10n.getConstant('Undo'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Redo') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_redo', prefixIcon: 'e-icons e-redo', cssClass: 'top-icon e-redo',\n                    tooltipText: this.l10n.getConstant('Redo'), align: 'Left' });\n            }\n        }\n        if (!this.preventZoomBtn && (parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar && !isResize) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomOut') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_zoomOut', prefixIcon: 'e-icons e-zoom-out', cssClass: 'top-icon e-dec-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomOut'), align: 'Left' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('ZoomIn') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_zoomIn', prefixIcon: 'e-icons e-zoom-in', cssClass: 'top-icon e-inc-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomIn'), align: 'Left' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('left');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getRightToolbarItem = function (isOkBtn) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isOkBtn) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Reset') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_reset', prefixIcon: 'e-icons e-btn-reset', cssClass: 'top-icon e-img-reset',\n                tooltipText: this.l10n.getConstant('Reset'), align: 'Right' });\n        }\n        if (!isOkBtn) {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Save') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_save', prefixIcon: 'e-icons e-btn-save', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Save'), align: 'Right', template: '<button id=\"' + parent.element.id + '_saveBtn\"></button>' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('right');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getMainToolbarItem = function (isApplyOption, isFrame) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isFrame) {\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('None') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_none', prefixIcon: 'e-icons e-frame-none', cssClass: 'top-icon e-frame-none',\n                    tooltipText: this.l10n.getConstant('None'), align: 'Center' });\n            }\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('Mat') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_mat', prefixIcon: 'e-icons e-frame-mat', cssClass: 'top-icon e-frame-mat',\n                    tooltipText: this.l10n.getConstant('Mat'), align: 'Center' });\n            }\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('Bevel') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_bevel', prefixIcon: 'e-icons e-frame-bevel', cssClass: 'top-icon e-frame-bevel',\n                    tooltipText: this.l10n.getConstant('Bevel'), align: 'Center' });\n            }\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('Line') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_line', prefixIcon: 'e-icons e-frame-line', cssClass: 'top-icon e-frame-line',\n                    tooltipText: this.l10n.getConstant('Line'), align: 'Center' });\n            }\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('Inset') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_inset', prefixIcon: 'e-icons e-frame-inset', cssClass: 'top-icon e-frame-inset',\n                    tooltipText: this.l10n.getConstant('Inset'), align: 'Center' });\n            }\n            if (isNullOrUndefined(this.parent.toolbar) || (!isNullOrUndefined(this.parent.toolbar) && this.parent.toolbar.indexOf('Hook') > -1)) {\n                toolbarItems.push({ id: this.parent.element.id + '_hook', prefixIcon: 'e-icons e-frame-hook', cssClass: 'top-icon e-frame-hook',\n                    tooltipText: this.l10n.getConstant('Hook'), align: 'Center' });\n            }\n        }\n        else {\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Crop') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_cropTransform', prefixIcon: 'e-icons e-crop', cssClass: 'top-icon e-crop',\n                    tooltipText: this.l10n.getConstant('CropAndTransform'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Annotate') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                    template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Finetune') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_adjustment', prefixIcon: 'e-icons e-adjustment', cssClass: 'top-icon e-adjustment',\n                    tooltipText: this.l10n.getConstant('Finetune'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('Filter') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_filter', prefixIcon: 'e-icons e-filters', cssClass: 'top-icon e-filters',\n                    tooltipText: this.l10n.getConstant('Filter'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Frame') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_frame', prefixIcon: 'e-icons e-border-frame', cssClass: 'top-icon e-border-frame',\n                    tooltipText: this.l10n.getConstant('Frame'), align: 'Center' });\n            }\n            if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Resize') > -1)) {\n                toolbarItems.push({ id: parent.element.id + '_resize', prefixIcon: 'e-icons e-resize', cssClass: 'top-icon e-resize',\n                    tooltipText: this.l10n.getConstant('Resize'), align: 'Center' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (isApplyOption) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getZoomToolbarItem = function () {\n        var toolbarItems = [];\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.updateContextualToolbar = function (type, cType) {\n        var parent = this.parent;\n        var toolbarArea = parent.element.querySelector('#' + parent.element.id + '_toolbarArea');\n        var contextualToolbarArea = parent.element.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        contextualToolbarArea.classList.remove('e-hide');\n        contextualToolbarArea.style.left = toolbarArea.offsetLeft + 'px';\n        if (type === 'filter') {\n            if (document.getElementById(parent.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n            }\n            if (Browser.isDevice) {\n                this.initMainToolbar(false, true, true);\n            }\n            else {\n                this.initMainToolbar(true, null, null);\n            }\n            this.refreshSlider();\n            this.initFilterToolbarItem();\n        }\n        else {\n            if (document.querySelector('#' + parent.element.id + '_contextualToolbar').classList.contains('e-control')) {\n                getComponent(document.getElementById(parent.element.id + '_contextualToolbar'), 'toolbar').destroy();\n            }\n            this.refreshSlider();\n            if (type === 'frame') {\n                this.initFrameToolbarItem();\n            }\n            else {\n                this.renderSlider(cType);\n            }\n        }\n        if (Browser.isDevice) {\n            var cHt = contextualToolbarArea.offsetHeight;\n            if (this.isFrameToolbar && parent.element.querySelector('#' + parent.element.id + '_customizeWrapper')) {\n                cHt = parent.element.querySelector('#' + parent.element.id + '_customizeWrapper').offsetHeight;\n            }\n            var ht = parent.element.querySelector('#' + parent.element.id + '_canvasWrapper').offsetHeight;\n            contextualToolbarArea.style.top = this.toolbarHeight + ht - cHt + 'px';\n        }\n        else {\n            contextualToolbarArea.style.top = this.toolbarHeight + 'px';\n        }\n    };\n    ToolbarModule.prototype.processToolbar = function (position) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (parent.toolbar) {\n            for (var i = 0, len = parent.toolbar.length; i < len; i++) {\n                if (typeof (parent.toolbar[i]) === 'object') {\n                    if (isNullOrUndefined(parent.toolbar[i].align)) {\n                        if (position === 'left') {\n                            toolbarItems.push(parent.toolbar[i]);\n                        }\n                    }\n                    else if (parent.toolbar[i].align.toLowerCase() === position) {\n                        toolbarItems.push(parent.toolbar[i]);\n                    }\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.processSubToolbar = function (items) {\n        var toolbarItems = [];\n        if (items) {\n            for (var i = 0, len = items.length; i < len; i++) {\n                if (typeof (items[i]) === 'object') {\n                    items[i].align = 'Center';\n                    toolbarItems.push(items[i]);\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.wireZoomBtnEvents = function () {\n        var zoomIn = document.querySelector('#' + this.parent.element.id + '_zoomIn');\n        var zoomOut = document.querySelector('#' + this.parent.element.id + '_zoomOut');\n        if (zoomIn) {\n            zoomIn.addEventListener('mousedown', this.zoomInBtnMouseDownHandler.bind(this));\n            zoomIn.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomIn.addEventListener('click', this.zoomInBtnClickHandler.bind(this));\n            zoomIn.addEventListener('touchstart', this.zoomInBtnClickHandler.bind(this));\n        }\n        if (zoomOut) {\n            zoomOut.addEventListener('mousedown', this.zoomOutBtnMouseDownHandler.bind(this));\n            zoomOut.addEventListener('mouseup', this.zoomBtnMouseUpHandler.bind(this));\n            zoomOut.addEventListener('click', this.zoomOutBtnClickHandler.bind(this));\n            zoomIn.addEventListener('touchstart', this.zoomInBtnClickHandler.bind(this));\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ToolbarModule.prototype.widthAspectRatio = function (e) {\n        var parent = this.parent;\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        var icon = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n        var originalWidth = parent.img.destWidth;\n        var originalHeight = parent.img.destHeight;\n        var aspectRatioHeightValue = parseFloat(aspectRatioHeight.value);\n        var width = Math.floor((aspectRatioHeightValue / (originalHeight / originalWidth)));\n        var widthNumeric = getComponent(aspectRatioWidth, 'numerictextbox');\n        if (icon) {\n            if (width != null && !isNaN(width)) {\n                if (isNullOrUndefined(widthNumeric.value)) {\n                    widthNumeric.placeholder = width + ' px';\n                    aspectRatioWidth.placeholder = width.toString() + ' px';\n                }\n                else {\n                    widthNumeric.value = width;\n                    aspectRatioWidth.value = width.toString() + ' px';\n                }\n            }\n            else {\n                if (isNullOrUndefined(widthNumeric.value)) {\n                    widthNumeric.placeholder = '0 px';\n                    aspectRatioWidth.placeholder = '0 px';\n                }\n                else {\n                    widthNumeric.value = 0;\n                    aspectRatioWidth.value = '0 px';\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ToolbarModule.prototype.heightAspectRatio = function (e) {\n        var parent = this.parent;\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        var icon = parent.element.querySelector('#' + parent.element.id + '_aspectratio');\n        var originalWidth = parent.img.destWidth;\n        var originalHeight = parent.img.destHeight;\n        var aspectRatioWidthValue = parseFloat(aspectRatioWidth.value);\n        var height = Math.floor((aspectRatioWidthValue / (originalWidth / originalHeight)));\n        var heightNumeric = getComponent(aspectRatioHeight, 'numerictextbox');\n        if (icon) {\n            if (!isNaN(height)) {\n                if (isNullOrUndefined(heightNumeric.value)) {\n                    heightNumeric.placeholder = height + ' px';\n                    aspectRatioHeight.placeholder = height.toString() + ' px';\n                }\n                else {\n                    heightNumeric.value = height;\n                    aspectRatioHeight.value = height.toString() + ' px';\n                }\n            }\n            else {\n                if (isNullOrUndefined(heightNumeric.value)) {\n                    heightNumeric.placeholder = '0 px';\n                    aspectRatioHeight.placeholder = '0 px';\n                }\n                else {\n                    heightNumeric.value = 0;\n                    aspectRatioHeight.value = '0 px';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.getResizeToolbarItem = function () {\n        var toolbarItems = [];\n        var isResize = this.parent.aspectWidth && this.parent.aspectHeight ? true : false;\n        var width = this.parent.transform.degree % 90 === 0 && this.parent.transform.degree % 180 !== 0 ?\n            Math.ceil(this.parent.img.srcHeight).toString() : Math.ceil(this.parent.img.srcWidth).toString();\n        var height = this.parent.transform.degree % 90 === 0 && this.parent.transform.degree % 180 !== 0 ?\n            Math.ceil(this.parent.img.srcWidth).toString() : Math.ceil(this.parent.img.srcHeight).toString();\n        var spanWidth = document.createElement('span');\n        spanWidth.innerHTML = this.l10n.getConstant('W');\n        toolbarItems.push({ id: this.parent.element.id + '_width', cssClass: 'e-ie-resize-width', template: spanWidth, align: 'Center' });\n        toolbarItems.push({ id: this.parent.element.id + '_resizeWidth', prefixIcon: 'e-icons e-anti-clock-wise',\n            tooltipText: this.l10n.getConstant('Width'), align: 'Center', type: 'Input', template: new NumericTextBox({ width: 75, htmlAttributes: { maxLength: \"4\" },\n                showSpinButton: false, value: isResize ? this.parent.aspectWidth : null,\n                placeholder: isResize ? null : width, format: '###.## px' })\n        });\n        var spanHeight = document.createElement('span');\n        spanHeight.innerHTML = this.l10n.getConstant('H');\n        toolbarItems.push({ id: this.parent.element.id + '_height', cssClass: 'e-ie-resize-height', template: spanHeight, align: 'Center' });\n        toolbarItems.push({ id: this.parent.element.id + '_resizeHeight', prefixIcon: 'e-icons e-clock-wise',\n            tooltipText: this.l10n.getConstant('Height'), align: 'Center', type: 'Input', template: new NumericTextBox({ width: 75, htmlAttributes: { maxLength: \"4\" },\n                showSpinButton: false, value: isResize ? this.parent.aspectHeight : null,\n                placeholder: isResize ? null : height, format: '###.## px' })\n        });\n        if (!this.isAspectRatio) {\n            toolbarItems.push({ id: this.parent.element.id + '_aspectratio', prefixIcon: 'e-icons e-lock', align: 'Center', tooltipText: this.l10n.getConstant('AspectRatio'), type: 'Button' });\n            this.isAspectRatio = true;\n        }\n        else {\n            toolbarItems.push({ id: this.parent.element.id + '_nonaspectratio', prefixIcon: 'e-icons e-unlock', align: 'Center', tooltipText: this.l10n.getConstant('AspectRatio'), type: 'Button' });\n            this.isAspectRatio = false;\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initResizeToolbar = function () {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem(false, true);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getResizeToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.wireResizeBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                _this.parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.parent.element.id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.parent.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.parent.element.id + '_toolbar');\n        }\n        this.parent.isResize = false;\n        this.enableDisableTbrBtn();\n        this.parent.isResize = true;\n        this.parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.wireResizeBtnEvents = function () {\n        var parent = this.parent;\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        if (!isNullOrUndefined(aspectRatioHeight)) {\n            aspectRatioWidth.addEventListener('keyup', this.heightAspectRatio.bind(this));\n        }\n        if (!isNullOrUndefined(aspectRatioWidth)) {\n            aspectRatioHeight.addEventListener('keyup', this.widthAspectRatio.bind(this));\n        }\n    };\n    ToolbarModule.prototype.enableDisableTbrBtn = function () {\n        var parent = this.parent;\n        if (!this.preventEnableDisableUr) {\n            var object = { appliedUndoRedoColl: [] };\n            parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: object } });\n            var undoRedoObj = { undoRedoStep: null };\n            parent.notify('undo-redo', { prop: 'getUndoRedoStep', value: { obj: undoRedoObj } });\n            var undo = parent.element.querySelector('#' + parent.element.id + '_undo');\n            if (undo && undoRedoObj['undoRedoStep'] === 0) {\n                undo.classList.add('e-disabled');\n                undo.parentElement.classList.add('e-overlay');\n            }\n            else if (undo && undoRedoObj['undoRedoStep'] > 0) {\n                undo.classList.remove('e-disabled');\n                undo.parentElement.classList.remove('e-overlay');\n            }\n            var redo = parent.element.querySelector('#' + parent.element.id + '_redo');\n            if (redo && (undoRedoObj['undoRedoStep'] === object['appliedUndoRedoColl'].length)) {\n                redo.classList.add('e-disabled');\n                redo.parentElement.classList.add('e-overlay');\n            }\n            else if (redo && (undoRedoObj['undoRedoStep'] === 0 && object['appliedUndoRedoColl'].length > 0)) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n            else if (redo && undoRedoObj['undoRedoStep'] > 0) {\n                redo.classList.remove('e-disabled');\n                redo.parentElement.classList.remove('e-overlay');\n            }\n        }\n        var zoomIn = document.querySelector('#' + parent.element.id + '_zoomIn');\n        if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n            zoomIn.classList.add('e-disabled');\n            zoomIn.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomIn) {\n            zoomIn.classList.remove('e-disabled');\n            zoomIn.parentElement.classList.remove('e-overlay');\n        }\n        var zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n        if (zoomOut && parent.zoomSettings.zoomFactor <= parent.zoomSettings.minZoomFactor) {\n            zoomOut.classList.add('e-disabled');\n            zoomOut.parentElement.classList.add('e-overlay');\n        }\n        else if (zoomOut) {\n            zoomOut.classList.remove('e-disabled');\n            zoomOut.parentElement.classList.remove('e-overlay');\n        }\n        var frame = document.querySelector('#' + parent.element.id + '_frame');\n        if (frame && ((parent.currSelectionPoint && parent.currSelectionPoint.shape === 'crop-circle') || parent.isCircleCrop)) {\n            frame.classList.add('e-disabled');\n        }\n        else if (frame) {\n            frame.classList.remove('e-disabled');\n        }\n    };\n    ToolbarModule.prototype.createLeftToolbarControls = function () {\n        var parent = this.parent;\n        if (this.defToolbarItems !== undefined && this.defToolbarItems.length > 0 &&\n            (document.getElementById(parent.element.id + '_toolbar'))) {\n            var uploadDiv = document.getElementById(parent.element.id + '_toolbar')\n                .querySelector('.e-image-upload');\n            if (uploadDiv) {\n                var uploadElem = uploadDiv.getElementsByTagName('input')[0];\n                var uploadBtnElem = uploadDiv.getElementsByTagName('button')[0];\n                uploadBtnElem.className = 'e-tbar-btn e-tbtn-txt top-icon';\n                uploadBtnElem.innerHTML = '';\n                uploadBtnElem.appendChild(parent.createElement('span', {\n                    className: 'e-btn-icon e-icons e-upload-icon e-icon-left'\n                }));\n                uploadElem.onchange = this.fileSelect.bind(this, uploadElem);\n            }\n        }\n    };\n    ToolbarModule.prototype.fileSelect = function (inputElement, args) {\n        var type = inputElement.files[0].type.split('/')[1];\n        if (type === 'png' || type === 'jpg' || type === 'jpeg' || type === 'svg' || type === 'svg+xml') {\n            this.parent.notify('draw', { prop: 'fileSelect', value: { inputElement: inputElement, args: args } });\n        }\n        else {\n            this.parent.showDialogPopup();\n        }\n    };\n    ToolbarModule.prototype.renderAnnotationBtn = function (isContextualToolbar) {\n        var _this = this;\n        var parent = this.parent;\n        var isCustomized = false;\n        var items = [];\n        var defItems = ['Ellipse', 'Arrow', 'Line', 'Rectangle', 'Pen', 'Path', 'Text'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Pen') > -1)) {\n            items.push({ text: this.l10n.getConstant('Pen'), id: 'pen', iconCss: 'e-icons e-free-pen' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Line') > -1)) {\n            items.push({ text: this.l10n.getConstant('Line'), id: 'line', iconCss: 'e-icons e-line' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Rectangle') > -1)) {\n            items.push({ text: this.l10n.getConstant('Rectangle'), id: 'rectangle', iconCss: 'e-icons e-rectangle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Ellipse') > -1)) {\n            items.push({ text: this.l10n.getConstant('Ellipse'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Arrow') > -1)) {\n            items.push({ text: this.l10n.getConstant('Arrow'), id: 'arrow', iconCss: 'e-icons e-arrow-right-up' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Path') > -1)) {\n            items.push({ text: this.l10n.getConstant('Path'), id: 'path', iconCss: 'e-icons e-critical-path' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Text') > -1)) {\n            items.push({ text: this.l10n.getConstant('Text'), id: 'text', iconCss: 'e-icons e-add-text' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (!isNullOrUndefined(parent.toolbar) && parent.toolbar.indexOf('Image') > -1)) {\n            items.push({ text: this.l10n.getConstant('Image'), id: 'image', iconCss: 'e-icons e-image' });\n        }\n        var obj = { freehandDrawSelectedId: null };\n        parent.notify('freehand-draw', { prop: 'getFreehandDrawSelectedId', onPropertyChange: false, value: { obj: obj } });\n        var duplicateElement = document.querySelector('#' + parent.element.id + '_duplicate');\n        var removeElement = document.querySelector('#' + parent.element.id + '_remove');\n        var editTextElement = document.querySelector('#' + parent.element.id + '_editText');\n        if ((parent.activeObj.activePoint.width === 0 && parent.activeObj.activePoint.height === 0) &&\n            (isNullOrUndefined(parent.activeObj.pointColl) || (parent.activeObj.pointColl\n                && parent.activeObj.pointColl.length === 0)) &&\n            isNullOrUndefined(obj['freehandDrawSelectedId'])) {\n            if (duplicateElement) {\n                duplicateElement.classList.add('e-disabled');\n            }\n            if (removeElement) {\n                removeElement.classList.add('e-disabled');\n            }\n            if (editTextElement) {\n                editTextElement.classList.add('e-disabled');\n            }\n        }\n        else {\n            if (duplicateElement) {\n                duplicateElement.classList.remove('e-disabled');\n            }\n            if (removeElement) {\n                removeElement.classList.remove('e-disabled');\n            }\n            if (editTextElement) {\n                editTextElement.classList.remove('e-disabled');\n            }\n        }\n        var iconCss = isContextualToolbar ? this.getCurrentShapeIcon(parent.activeObj.shape) : 'e-annotation';\n        var drpDownBtn = new DropDownButton({ items: items, iconCss: 'e-icons ' + iconCss,\n            cssClass: 'e-image-popup',\n            open: function (args) {\n                if (parent.currObjType.isFiltered) {\n                    parent.okBtn();\n                    parent.element.querySelector('#' + _this.parent.element.id + '_annotationBtn').click();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape) {\n                    document.getElementById(parent.activeObj.shape).classList.add('e-selected');\n                }\n                else if (parent.togglePen) {\n                    document.getElementById('pen').classList.add('e-selected');\n                }\n            },\n            select: function (args) {\n                parent.okBtn();\n                var isCropSelection = false;\n                var splitWords;\n                if (parent.activeObj.shape !== undefined) {\n                    splitWords = parent.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                parent.currObjType.isCustomCrop = false;\n                if (isCropSelection || parent.togglePan) {\n                    parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                    _this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    _this.refreshToolbar('main');\n                }\n                var obj = { currentFreehandDrawIndex: null };\n                parent.notify('freehand-draw', { prop: 'getCurrentFreehandDrawIndex', value: { obj: obj } });\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon(args.item.id);\n                switch (args.item.id) {\n                    case 'pen':\n                        parent.notify('draw', { prop: 'setTempFreehandCounter', value: { tempFreehandCounter: parent.freehandCounter } });\n                        parent.notify('draw', { prop: 'setTempCurrentFreehandDrawIndex', value: { tempCurrentFreehandDrawIndex: obj['currentFreehandDrawIndex'] } });\n                        _this.currentToolbar = 'pen';\n                        parent.freeHandDraw(true);\n                        break;\n                    case 'text':\n                        _this.currentToolbar = 'text';\n                        parent.notify('shape', { prop: 'draw-shape-text' });\n                        // this.setInitialShapeSettings(args);\n                        // parent.activeObj.textFlip = parent.transform.currFlipState;\n                        // parent.notify('selection', {prop: 'annotate', value: {shape: args.item.id }});\n                        // parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: {type: 'text',\n                        //     isApplyBtn: null, isCropping: null, isZooming: null, cType: null}});\n                        break;\n                    case 'image':\n                        _this.currentToolbar = 'shapes';\n                        parent.element.querySelector('#' + _this.parent.element.id + '_fileUpload').click();\n                        break;\n                    default:\n                        _this.currentToolbar = 'shapes';\n                        /// parent.notify('shape', { prop: 'draw-shape', value: {obj: (args.item.id).toLowerCase()}});\n                        _this.setInitialShapeSettings(args);\n                        parent.notify('selection', { prop: 'annotate', value: { shape: args.item.id } });\n                        parent.notify('toolbar', { prop: 'refresh-toolbar', onPropertyChange: false, value: { type: 'shapes',\n                                isApplyBtn: null, isCropping: null, isZooming: null, cType: null } });\n                        break;\n                }\n                _this.updateToolbarItems();\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_annotationBtn');\n    };\n    ToolbarModule.prototype.renderCropBtn = function () {\n        var _this = this;\n        var parent = this.parent;\n        var items = [];\n        var isCustomized = false;\n        var defItems = ['CustomSelection', 'CircleSelection', 'SquareSelection', 'RatioSelection'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('CustomSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Custom'), id: 'custom', iconCss: 'e-icons e-custom' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('CircleSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Circle'), id: 'circle', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('SquareSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Square'), id: 'square', iconCss: 'e-icons e-square' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('RatioSelection') > -1)) {\n            items.push({ text: '3:2', id: '3:2', iconCss: 'e-icons e-custom-a' });\n            items.push({ text: '4:3', id: '4:3', iconCss: 'e-icons e-custom-b' });\n            items.push({ text: '5:4', id: '5:4', iconCss: 'e-icons e-custom-c' });\n            items.push({ text: '7:5', id: '7:5', iconCss: 'e-icons e-custom-d' });\n            items.push({ text: '16:9', id: '16:9', iconCss: 'e-icons e-custom-e' });\n        }\n        var iconCss;\n        var shape;\n        if (parent.activeObj.shape) {\n            iconCss = this.getCurrentShapeIcon(parent.activeObj.shape);\n            shape = parent.activeObj.shape;\n        }\n        else if (parent.currSelectionPoint) {\n            iconCss = this.getCurrentShapeIcon(parent.currSelectionPoint.shape);\n            shape = parent.currSelectionPoint.shape;\n        }\n        else {\n            iconCss = items[0].iconCss;\n            shape = items[0].id;\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (parent.togglePan) {\n                    _this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (parent.activeObj.shape && parent.activeObj.shape.split('-').length > 1) {\n                    document.getElementById(parent.activeObj.shape.split('-')[1]).classList.add('e-selected');\n                }\n                parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n            },\n            items: items,\n            select: function (args) {\n                _this.cropSelect(args);\n                drpDownBtn.iconCss = 'e-icons ' + _this.getCurrentShapeIcon('crop-' + args.item.id);\n                drpDownBtn.content = parent.toPascalCase(args.item.id);\n            },\n            iconCss: 'e-icons ' + iconCss, cssClass: 'e-image-popup',\n            content: parent.toPascalCase(shape.replace('crop-', ''))\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_cropBtn');\n    };\n    ToolbarModule.prototype.renderTransformBtn = function () {\n        var parent = this.parent;\n        var items = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateLeft') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateLeft'), id: 'rotateleft', iconCss: 'e-icons e-anti-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('RotateRight') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateRight'), id: 'rotateright', iconCss: 'e-icons e-clock-wise' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipHorizontal') > -1)) {\n            items.push({ text: this.l10n.getConstant('HorizontalFlip'), id: 'horizontalflip', iconCss: 'e-icons e-horizontal-flip' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && parent.toolbar.indexOf('FlipVertical') > -1)) {\n            items.push({ text: this.l10n.getConstant('VerticalFlip'), id: 'verticalflip', iconCss: 'e-icons e-vertical-flip' });\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    var ht = args.element.parentElement.offsetHeight;\n                    args.element.parentElement.style.display = 'none';\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        ht + 'px';\n                    args.element.parentElement.style.display = 'block';\n                }\n            },\n            items: items, select: parent.transformSelect.bind(this),\n            iconCss: 'e-icons e-transform', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + parent.element.id + '_transformBtn');\n    };\n    ToolbarModule.prototype.renderSaveBtn = function () {\n        var parent = this.parent;\n        var saveItems = [\n            { text: 'JPEG', id: 'jpeg' },\n            { text: 'PNG', id: 'png' },\n            { text: 'SVG', id: 'svg' }\n        ];\n        var ddbElem = document.getElementById(parent.element.id + '_saveBtn');\n        if (ddbElem) {\n            // Initialize the DropDownButton component.\n            var saveDrpDownBtn = new DropDownButton({ items: saveItems, cssClass: 'e-caret-hide e-image-popup', iconCss: 'e-icons e-save',\n                select: function (args) {\n                    parent.export(args.item.text);\n                }\n            });\n            saveDrpDownBtn.appendTo('#' + parent.element.id + '_saveBtn');\n        }\n    };\n    ToolbarModule.prototype.getCropTransformToolbarItem = function () {\n        var parent = this.parent;\n        var toolbarItems = [];\n        toolbarItems.push({ id: parent.element.id + '_crop', tooltipText: this.l10n.getConstant('CropSelection'), align: 'Center',\n            template: '<button id=\"' + parent.element.id + '_cropBtn\"></button>'\n        });\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('RotateLeft') > -1))) {\n            toolbarItems.push({ id: parent.element.id + '_rotateLeft', prefixIcon: 'e-icons e-anti-clock-wise', tooltipText: this.l10n.getConstant('RotateLeft'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('RotateRight') > -1))) {\n            toolbarItems.push({ id: parent.element.id + '_rotateRight', prefixIcon: 'e-icons e-clock-wise', tooltipText: this.l10n.getConstant('RotateRight'), align: 'Center' });\n        }\n        if (toolbarItems.length > 2) {\n            toolbarItems.push({ align: 'Center', type: 'Separator' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('HorizontalFlip') > -1))) {\n            toolbarItems.push({ id: parent.element.id + '_horizontalFlip', prefixIcon: 'e-icons e-horizontal-flip', tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar && (parent.toolbar.indexOf('Transform') > -1 || parent.toolbar.indexOf('VerticalFlip') > -1))) {\n            toolbarItems.push({ id: parent.element.id + '_verticalFlip', prefixIcon: 'e-icons e-vertical-flip', tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Center' });\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getShapesToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_fillcolor',\n                cssClass: 'top-icon e-fill', tooltipText: this.l10n.getConstant('FillColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_fillColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_strokecolor',\n                cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_borderColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: 'Stroke Width', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_borderWidthBtn\"></button>' });\n        }\n        if (items.indexOf('start') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_start', cssClass: 'top-icon e-size', tooltipText: 'Start', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_startBtn\"></button>' });\n        }\n        if (items.indexOf('end') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_end', cssClass: 'top-icon e-size', tooltipText: 'End', align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_endBtn\"></button>' });\n        }\n        if (items.indexOf('flip') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_rotLeft', prefixIcon: 'e-anti-clock-wise',\n                tooltipText: this.l10n.getConstant('RotateLeft'), align: 'Center' });\n            toolbarItems.push({ id: parent.element.id + '_rotRight', prefixIcon: 'e-clock-wise',\n                tooltipText: this.l10n.getConstant('RotateRight'), align: 'Center' });\n            toolbarItems.push({ id: parent.element.id + '_hFlip', prefixIcon: 'e-horizontal-flip',\n                tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Center' });\n            toolbarItems.push({ id: parent.element.id + '_vFlip', prefixIcon: 'e-vertical-flip',\n                tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('transparency') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_transparency', prefixIcon: 'e-opacity',\n                tooltipText: this.l10n.getConstant('Transparency'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center' });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            var obj = { shape: null };\n            parent.notify('selection', { prop: 'getCurrentDrawingShape', value: { obj: obj } });\n            if (obj['shape'] !== 'path') {\n                toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                    tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n                toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n            }\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initCropTransformToolbar = function () {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getCropTransformToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderCropBtn();\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                if (document.getElementById(parent.element.id + '_cropBtn')) {\n                    parent.notify('draw', { prop: 'select', onPropertyChange: false,\n                        value: { type: document.getElementById(parent.element.id + '_cropBtn').textContent.toLowerCase(),\n                            startX: null, startY: null, width: null, height: null } });\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.getCurrentShapeIcon = function (shape) {\n        var icon = '';\n        switch (shape) {\n            case 'rectangle':\n                icon = 'e-rectangle';\n                break;\n            case 'ellipse':\n                icon = 'e-circle';\n                break;\n            case 'line':\n                icon = 'e-line';\n                break;\n            case 'arrow':\n                icon = 'e-arrow-right-up';\n                break;\n            case 'path':\n                icon = 'e-critical-path';\n                break;\n            case 'text':\n                icon = 'e-add-text';\n                break;\n            case 'image':\n                icon = 'e-image';\n                break;\n            case 'pen':\n                icon = 'e-free-pen';\n                break;\n            case 'crop-custom':\n                icon = 'e-custom';\n                break;\n            case 'crop-circle':\n                icon = 'e-circle';\n                break;\n            case 'crop-square':\n                icon = 'e-square';\n                break;\n            case 'crop-3:2':\n                icon = 'e-custom-a';\n                break;\n            case 'crop-4:3':\n                icon = 'e-custom-b';\n                break;\n            case 'crop-5:4':\n                icon = 'e-custom-c';\n                break;\n            case 'crop-7:5':\n                icon = 'e-custom-d';\n                break;\n            case 'crop-16:9':\n                icon = 'e-custom-e';\n                break;\n            default:\n                icon = 'e-free-pen';\n                break;\n        }\n        return icon;\n    };\n    ToolbarModule.prototype.initShapesToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getShapesToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createShapeColor(items);\n                _this.createShapeBtn(items);\n                if (parent.activeObj.shape === 'arrow') {\n                    _this.createStartBtn();\n                    _this.createEndBtn();\n                }\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createShapeColor = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fillColor') > -1) {\n            parent.element.querySelector('.e-template.e-fill').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_shape_fill'\n            }));\n            var fillColor = new ColorPicker({\n                modeSwitcher: false, noColor: true, value: '',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-fill-color',\n                change: function (args) {\n                    parent.updateFillColor(args.currentValue.hex);\n                    if (args.currentValue.rgba === '') {\n                        fillDDB_1.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB_1.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    fillDDB_1.toggle();\n                }\n            }, '#' + parent.element.id + '_shape_fill');\n            var fillDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fillDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-fill-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_fillColorBtn');\n            fillColor.inline = true;\n            parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_shape_stroke'\n            }));\n            var strokeColor = new ColorPicker({\n                modeSwitcher: false, noColor: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-stroke-color',\n                change: function (args) {\n                    parent.updateStrokeColor(args.currentValue.hex);\n                    strokeDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_1.toggle();\n                }\n            }, '#' + parent.element.id + '_shape_stroke');\n            var strokeDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-stroke-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_borderColorBtn');\n            strokeColor.inline = true;\n            parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createShapeBtn = function (items) {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(parent.element.id + '_borderWidthBtn');\n            var spanElem_1 = document.createElement('span');\n            spanElem_1.innerHTML = this.l10n.getConstant('XSmall');\n            spanElem_1.className = 'e-shape-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_1);\n            // Initialize the DropDownButton component.\n            var drpDownBtn_1 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_1.innerHTML;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    spanElem_1.textContent = args.item.text;\n                    parent.updateStrokeWidth(args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_6 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_6.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(parent.element.id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_7 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                            toolbar_7.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_1.appendTo('#' + parent.element.id + '_borderWidthBtn');\n        }\n    };\n    ToolbarModule.prototype.createStartBtn = function () {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_startBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.start)) {\n            parent.activeObj.start = 'none';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.start);\n        spanElem.className = 'e-shape-start';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('startArrow', args.item.id);\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_startBtn');\n    };\n    ToolbarModule.prototype.createEndBtn = function () {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('None') },\n            { id: '2', text: this.l10n.getConstant('Bar') },\n            { id: '3', text: this.l10n.getConstant('Arrow') },\n            { id: '4', text: this.l10n.getConstant('ArrowSolid') },\n            { id: '5', text: this.l10n.getConstant('Circle') },\n            { id: '6', text: this.l10n.getConstant('CircleSolid') },\n            { id: '7', text: this.l10n.getConstant('Square') },\n            { id: '8', text: this.l10n.getConstant('SquareSolid') }\n        ];\n        var strokeEndBtn = document.getElementById(parent.element.id + '_endBtn');\n        var spanElem = document.createElement('span');\n        if (isNullOrUndefined(parent.activeObj.end)) {\n            parent.activeObj.end = 'arrowSolid';\n        }\n        spanElem.innerHTML = parent.pascalToSplitWords(parent.activeObj.end);\n        spanElem.className = 'e-shape-end';\n        strokeEndBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = spanElem.innerHTML;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                spanElem.textContent = args.item.text;\n                parent.updateArrow('endArrow', args.item.id);\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_endBtn');\n    };\n    ToolbarModule.prototype.getTextToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || (parent.toolbar)) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('fontFamily') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_fontFamily', cssClass: 'top-icon e-img-font-family',\n                tooltipText: this.l10n.getConstant('FontFamily'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_fontFamilyBtn\"></button>' });\n        }\n        if (items.indexOf('fontSize') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_fontSize', cssClass: 'top-icon e-img-font-size',\n                tooltipText: this.l10n.getConstant('FontSize'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_fontSizeBtn\"></button>' });\n        }\n        if (items.indexOf('fontColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-font-color', id: parent.element.id + '_text_strokecolor',\n                tooltipText: this.l10n.getConstant('FontColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + parent.element.id + '_fontColorBtn\"></button>' });\n        }\n        if (items.indexOf('bold') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_bold', prefixIcon: 'e-icons e-bold', cssClass: 'top-icon e-bold',\n                tooltipText: this.l10n.getConstant('Bold'), align: 'Center' });\n        }\n        if (items.indexOf('italic') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_italic', prefixIcon: 'e-icons e-italic', cssClass: 'top-icon e-italic',\n                tooltipText: this.l10n.getConstant('Italic'), align: 'Center' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('duplicate') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                tooltipText: this.l10n.getConstant('Duplicate'), align: 'Center', disabled: parent.textArea.style.display === 'block' ? true : false });\n        }\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center', disabled: parent.textArea.style.display === 'block' ? true : false });\n        }\n        if (items.indexOf('text') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                tooltipText: this.l10n.getConstant('EditText'), align: 'Center', disabled: parent.textArea.style.display === 'block' ? true : false });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFontFamilyItems = function () {\n        if (Browser.isDevice) {\n            return [{ id: 'arial', text: 'ABC' }, { id: 'calibri', text: 'ABC' }, { id: 'georgia', text: 'ABC' },\n                { id: 'roboto', text: 'ABC' }, { id: 'tahoma', text: 'ABC' }];\n        }\n        return [{ id: 'arial', text: 'Arial' }, { id: 'calibri', text: 'Calibri' }, { id: 'georgia', text: 'Georgia' },\n            { id: 'roboto', text: 'Roboto' }, { id: 'tahoma', text: 'Tahoma' }];\n    };\n    ToolbarModule.prototype.initTextToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getTextToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createTextColor(items);\n                _this.createTextBtn(items);\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'text' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createTextColor = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fontColor') > -1 && parent.element.querySelector('.e-template.e-text-font-color')) {\n            parent.element.querySelector('.e-template.e-text-font-color').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_text_font'\n            }));\n            var fontColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                change: function (args) {\n                    parent.updateFontColor(args.currentValue.hex);\n                    strokeDDB_2.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_2.toggle();\n                }\n            }, '#' + parent.element.id + '_text_font');\n            var strokeDDB_2 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_fontColorBtn');\n            fontColor.inline = true;\n            parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ToolbarModule.prototype.createTextBtn = function (items) {\n        var parent = this.parent;\n        if (items.indexOf('fontFamily') > -1) {\n            var fontNameBtn = document.getElementById(parent.element.id + '_fontFamilyBtn');\n            var spanElem_2 = document.createElement('span');\n            if (Browser.isDevice) {\n                spanElem_2.innerHTML = 'ABC';\n                spanElem_2.setAttribute('style', 'font-family: arial');\n            }\n            else {\n                spanElem_2.innerHTML = 'Arial';\n            }\n            spanElem_2.className = 'e-text-font-family';\n            if (fontNameBtn) {\n                fontNameBtn.appendChild(spanElem_2);\n            }\n            var fontFamilyBtn_1 = new DropDownButton({ items: this.getFontFamilyItems(),\n                cssClass: 'e-font-family',\n                createPopupOnClick: true,\n                beforeItemRender: function (args) {\n                    args.element.setAttribute('style', 'font-family:' + args.element.id);\n                },\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontFamilyBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var fontFamily;\n                    if (parent.textArea.style.display === 'block') {\n                        fontFamily = parent.textArea.style.fontFamily;\n                    }\n                    else {\n                        fontFamily = parent.activeObj.textSettings.fontFamily;\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontFamily.toLowerCase()\n                        + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    spanElem_2.textContent = args.item.text;\n                    if (Browser.isDevice) {\n                        spanElem_2.setAttribute('style', 'font-family:' + args.item.id);\n                    }\n                    parent.updateFontFamily(args.item.id);\n                }\n            });\n            fontFamilyBtn_1.appendTo('#' + parent.element.id + '_fontFamilyBtn');\n        }\n        if (items.indexOf('fontSize') > -1) {\n            var fontSizeBtnElem = document.getElementById(parent.element.id + '_fontSizeBtn');\n            var fontSizeSpanElem_1 = document.createElement('span');\n            var fontSizes = parent.getFontSizes();\n            fontSizeSpanElem_1.innerHTML = fontSizes[0].text;\n            fontSizeSpanElem_1.className = 'e-text-font-size';\n            fontSizeBtnElem.appendChild(fontSizeSpanElem_1);\n            var fontSizeBtn_1 = new DropDownButton({\n                cssClass: 'e-font-size',\n                items: fontSizes,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontSizeBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = fontSizeSpanElem_1.innerHTML;\n                    args.element.querySelector('[aria-label *= ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    fontSizeSpanElem_1.textContent = args.item.text;\n                    parent.updateFontSize(args.item.text);\n                }\n            });\n            fontSizeBtn_1.appendTo('#' + parent.element.id + '_fontSizeBtn');\n        }\n    };\n    ToolbarModule.prototype.refreshToolbar = function (type, isApplyBtn, isCropping, isZooming, cType) {\n        var parent = this.parent;\n        if (!parent.isImageLoaded || parent.isCropToolbar) {\n            return;\n        }\n        var item = type === 'shapes' && parent.activeObj.shape ? parent.activeObj.shape : type;\n        var args = { toolbarType: item };\n        var aspectIcon;\n        var nonAspectIcon;\n        if (type !== 'filter' && type !== 'color') {\n            if (document.getElementById(parent.element.id + '_customizeWrapper') &&\n                (getComponent(document.getElementById(parent.element.id + '_customizeWrapper'), 'toolbar')) && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(parent.element.id + '_customizeWrapper'), 'toolbar').destroy();\n                document.getElementById(parent.element.id + '_customizeWrapper').innerHTML = '';\n            }\n            if (document.getElementById(parent.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(parent.element.id + '_toolbar'), 'toolbar').destroy();\n                document.getElementById(parent.element.id + '_toolbar').innerHTML = '';\n            }\n            if (document.getElementById(parent.element.id + '_bottomToolbar') && this.defToolbarItems.length > 0) {\n                if (document.getElementById(parent.element.id + '_bottomToolbar').className.indexOf('e-control') > -1) {\n                    getComponent(document.getElementById(parent.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                    document.getElementById(parent.element.id + '_bottomToolbar').innerHTML = '';\n                }\n            }\n        }\n        this.refreshSlider();\n        this.isFrameToolbar = false;\n        parent.isCropTab = false;\n        switch (type) {\n            case 'main':\n                if (Browser.isDevice) {\n                    if (isCropping) {\n                        this.initMainToolbar(false, true, true);\n                    }\n                    else {\n                        this.initMainToolbar(false, true, null);\n                    }\n                }\n                else if (!Browser.isDevice || isZooming) {\n                    if (isZooming) {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                    else {\n                        this.initMainToolbar(isApplyBtn, Browser.isDevice, null);\n                    }\n                }\n                if (Browser.isDevice) {\n                    this.initBottomToolbar();\n                }\n                break;\n            case 'shapes':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'path') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'duplicate', 'remove'];\n                }\n                else if (parent.activeObj.shape === 'arrow') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth', 'start', 'end', 'duplicate', 'remove'];\n                }\n                else if (parent.activeObj.shape === 'image') {\n                    args.toolbarItems = ['flip', 'duplicate', 'remove', 'transparency'];\n                }\n                else {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth', 'duplicate', 'remove'];\n                }\n                parent.trigger('toolbarUpdating', args);\n                this.initShapesToolbarItem(args.toolbarItems);\n                break;\n            case 'text':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['fontFamily', 'fontSize', 'fontColor', 'bold', 'italic', 'duplicate', 'remove', 'text'];\n                parent.trigger('toolbarUpdating', args);\n                this.initTextToolbarItem(args.toolbarItems);\n                break;\n            case 'pen':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                args.toolbarItems = ['strokeColor', 'strokeWidth', 'remove'];\n                parent.trigger('toolbarUpdating', args);\n                this.initPenToolbarItem(args.toolbarItems);\n                break;\n            case 'adjustment':\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                this.initAdjustmentToolbarItem();\n                break;\n            case 'filter':\n                this.updateContextualToolbar(type);\n                break;\n            case 'resize':\n                this.initResizeToolbar();\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true, true);\n                }\n                aspectIcon = parent.element.querySelector('#' + this.parent.element.id + '_aspectratio');\n                nonAspectIcon = parent.element.querySelector('#' + this.parent.element.id + '_nonaspectratio');\n                if (this.parent.aspectWidth && this.parent.aspectHeight) {\n                    if (nonAspectIcon) {\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: parent.aspectHeight, isAspectRatio: false } });\n                    }\n                    else if (aspectIcon) {\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: null, isAspectRatio: true } });\n                    }\n                }\n                break;\n            case 'color':\n                this.updateContextualToolbar(type, cType);\n                break;\n            case 'croptransform':\n                parent.allowDownScale = false;\n                parent.isCropTab = true;\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                }\n                parent.updateCropTransformItems();\n                this.initCropTransformToolbar();\n                break;\n            case 'frame':\n                this.isFrameToolbar = true;\n                if (Browser.isDevice) {\n                    this.initMainToolbar(false, true, true);\n                    this.initMainToolbar(false, true, true, false, true);\n                }\n                else {\n                    this.initMainToolbar(true, null, null, false, true);\n                }\n                if (parent.element.querySelector('#' + parent.element.id + '_' + parent.frameObj.type)) {\n                    parent.element.querySelector('#' + parent.element.id + '_' + parent.frameObj.type).classList.add('e-selected-btn');\n                }\n                if (parent.frameObj.type !== 'none') {\n                    this.updateContextualToolbar(type, cType);\n                }\n                parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                break;\n        }\n        this.currToolbar = type;\n        this.refreshDropDownBtn(isCropping);\n    };\n    ToolbarModule.prototype.getAdjustmentToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        var isCustomized = false;\n        var defItems = ['Brightness', 'Contrast', 'Hue', 'Saturation', 'Exposure', 'Opacity', 'Blur'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Brightness') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_brightness', prefixIcon: 'e-icons e-brightness', cssClass: 'top-icon e-brightness',\n                tooltipText: this.l10n.getConstant('Brightness'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Contrast') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_contrast', prefixIcon: 'e-icons e-contrast', cssClass: 'top-icon e-contrast',\n                tooltipText: this.l10n.getConstant('Contrast'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Hue') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_hue', prefixIcon: 'e-icons e-fade', cssClass: 'top-icon e-fade',\n                tooltipText: this.l10n.getConstant('Hue'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Saturation') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_saturation', prefixIcon: 'e-icons e-saturation', cssClass: 'top-icon e-saturation',\n                tooltipText: this.l10n.getConstant('Saturation'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Exposure') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_exposure', prefixIcon: 'e-icons e-grain', cssClass: 'top-icon e-grain',\n                tooltipText: this.l10n.getConstant('Exposure'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Opacity') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_opacity', prefixIcon: 'e-icons e-opacity', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Blur') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_blur', prefixIcon: 'e-icons e-tint', cssClass: 'top-icon e-tint',\n                tooltipText: this.l10n.getConstant('Blur'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFrameToolbarItem = function () {\n        var parent = this.parent;\n        var toolbarItems = [];\n        toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_frameColor',\n            cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('Color'), align: 'Center', type: 'Input',\n            template: '<span>' + this.l10n.getConstant('Color') + '</span><button id=\"' + parent.element.id + '_frameColorBtn\"></button>' });\n        toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_frameGradient',\n            cssClass: 'top-icon e-frame-stroke', tooltipText: this.l10n.getConstant('GradientColor'), align: 'Center', type: 'Input',\n            template: '<span>' + this.l10n.getConstant('GradientColor') + '</span><button id=\"' + parent.element.id + '_frameGradientColorBtn\"></button>' });\n        toolbarItems.push({ id: parent.element.id + '_frameSize', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Size'), align: 'Center',\n            type: 'Input', template: '<span>' + this.l10n.getConstant('Size') + '</span><button id=\"' + parent.element.id + '_frameSizeBtn\"></button>' });\n        if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset' || parent.frameObj.type === 'hook') {\n            toolbarItems.push({ id: parent.element.id + '_frameInset', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Inset'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Inset') + '</span><button id=\"' + parent.element.id + '_frameInsetBtn\"></button>' });\n        }\n        if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset') {\n            toolbarItems.push({ id: parent.element.id + '_frameOffset', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Offset'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Offset') + '</span><button id=\"' + parent.element.id + '_frameOffsetBtn\"></button>' });\n        }\n        if (parent.frameObj.type === 'line') {\n            toolbarItems.push({ id: parent.element.id + '_frameRadius', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Radius'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Radius') + '</span><button id=\"' + parent.element.id + '_frameRadiusBtn\"></button>' });\n            toolbarItems.push({ id: parent.element.id + '_frameAmount', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Amount'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Amount') + '</span><button id=\"' + parent.element.id + '_frameAmountBtn\"></button>' });\n            toolbarItems.push({ id: parent.element.id + '_frameBorder', cssClass: 'top-icon e-size', tooltipText: this.l10n.getConstant('Border'), align: 'Center',\n                type: 'Input', template: '<span>' + this.l10n.getConstant('Border') + '</span><button id=\"' + parent.element.id + '_frameBorderBtn\"></button>' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getFilterToolbarItem = function () {\n        var toolbarItems = [];\n        var parent = this.parent;\n        var isCustomized = false;\n        var defItems = ['Default', 'Chrome', 'Cold', 'Warm', 'Grayscale', 'Sepia', 'Invert'];\n        if (parent.toolbar) {\n            for (var i = 0; i < defItems.length; i++) {\n                if (parent.toolbar.indexOf(defItems[i]) !== -1) {\n                    isCustomized = true;\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Default') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_default', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Default'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_defaultCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Default') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Chrome') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_chrome', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Chrome'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_chromeCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Chrome') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Cold') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_cold', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Cold'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_coldCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Cold') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Warm') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_warm', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Warm'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_warmCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Warm') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Grayscale') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_grayscale', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Grayscale'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_grayscaleCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Grayscale') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Sepia') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_sepia', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Sepia'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_sepiaCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Sepia') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(parent.toolbar) || !isCustomized || (parent.toolbar && parent.toolbar.indexOf('Invert') > -1)) {\n            toolbarItems.push({ id: parent.element.id + '_invert', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Invert'), align: 'Center',\n                template: '<div class=\"filter-wrapper\" style=\"box-sizing: content-box;\"><canvas id=' + parent.element.id + '_invertCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Invert') + '</span></div></div>' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.getPenToolbarItem = function (items) {\n        var parent = this.parent;\n        var toolbarItems = [];\n        if (isNullOrUndefined(parent.toolbar) || parent.toolbar) {\n            toolbarItems.push({ id: parent.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + parent.element.id + '_annotationBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: parent.element.id + '_pen_strokecolor',\n                cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + parent.element.id + '_penColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-size',\n                tooltipText: this.l10n.getConstant('StrokeWidth'),\n                align: 'Center', type: 'Input', template: '<button id=\"' + parent.element.id + '_penStrokeWidth\"></button>' });\n        }\n        toolbarItems.push({ align: 'Center', type: 'Separator' });\n        if (items.indexOf('remove') > -1) {\n            toolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                tooltipText: this.l10n.getConstant('Remove'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: parent.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: parent.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ToolbarModule.prototype.initPenToolbarItem = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getPenToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderAnnotationBtn(true);\n                _this.createPenColor(items);\n                _this.createPenBtn(items);\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                parent.trigger('toolbarCreated', { toolbarType: 'pen' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.createPenColor = function (items) {\n        var _this = this;\n        var parent = this.parent;\n        if (items.indexOf('strokeColor') > -1) {\n            parent.element.querySelector('.e-template.e-pen-stroke-color').appendChild(parent.createElement('input', {\n                id: parent.element.id + '_pen_stroke'\n            }));\n            var penColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-pen-color',\n                change: function (args) {\n                    parent.updatePenStrokeColor(args.currentValue.hex);\n                    _this.selFhdColor = args.currentValue.hex;\n                    strokeDDB_3.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_3.toggle();\n                }\n            }, '#' + parent.element.id + '_pen_stroke');\n            var strokeDDB_3 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_3.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-pen-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + parent.element.id + '_penColorBtn');\n            penColor.inline = true;\n            var obj = { tempFreeHandDrawEditingStyles: null };\n            parent.notify('freehand-draw', { prop: 'getTempFreeHandDrawEditingStyles', value: { obj: obj } });\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = this.selFhdColor === '#42a5f5' ? obj['tempFreeHandDrawEditingStyles'].strokeColor :\n                        parent.pointColl[indexObj['freehandSelectedIndex']].strokeColor;\n            }\n            else {\n                parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = '#fff';\n            }\n        }\n    };\n    ToolbarModule.prototype.createPenBtn = function (items) {\n        var parent = this.parent;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(parent.element.id + '_penStrokeWidth');\n            var spanElem_3 = document.createElement('span');\n            var indexObj = { freehandSelectedIndex: null };\n            parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n            if (!isNullOrUndefined(indexObj['freehandSelectedIndex']) && indexObj['freehandSelectedIndex'] > -1) {\n                spanElem_3.innerHTML = this.getPenStroke(parent.pointColl[indexObj['freehandSelectedIndex']].strokeWidth);\n            }\n            else {\n                spanElem_3.innerHTML = this.l10n.getConstant('Small');\n            }\n            spanElem_3.className = 'e-pen-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_3);\n            var drpDownBtn_2 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_3.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    spanElem_3.textContent = args.item.text;\n                    parent.updatePenStrokeWidth(args.item.id);\n                    if (Browser.isDevice) {\n                        if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_8 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_8.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (document.getElementById(parent.element.id + '_toolbar')) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_9 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                            toolbar_9.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_2.appendTo('#' + parent.element.id + '_penStrokeWidth');\n        }\n    };\n    ToolbarModule.prototype.getPenStroke = function (value) {\n        var textContent = '';\n        var valueToTextContent = {\n            1: this.l10n.getConstant('XSmall'),\n            2: this.l10n.getConstant('Small'),\n            3: this.l10n.getConstant('Medium'),\n            4: this.l10n.getConstant('Large'),\n            5: this.l10n.getConstant('XLarge')\n        };\n        if (value >= 1 && value <= 5) {\n            textContent = valueToTextContent[value];\n        }\n        return textContent;\n    };\n    ToolbarModule.prototype.initAdjustmentToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var leftItem = this.getLeftToolbarItem(null);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getAdjustmentToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.wireZoomBtnEvents();\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + parent.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + parent.element.id + '_toolbar');\n        }\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.initFrameToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var canvasWrapper = document.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        var frameWrapper = document.querySelector('#' + parent.element.id + '_frameWrapper');\n        if (!frameWrapper) {\n            frameWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_frameWrapper',\n                className: 'e-frame-wrapper',\n                styles: 'position: relative'\n            }));\n        }\n        else {\n            frameWrapper.style.display = 'block';\n        }\n        frameWrapper.appendChild(parent.createElement('div', {\n            id: parent.element.id + '_customizeWrapper',\n            styles: 'position: absolute'\n        }));\n        var mainItem = this.getFrameToolbarItem();\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.createFrameColor();\n                _this.createFrameSize();\n                if (parent.frameObj.type === 'line') {\n                    _this.createFrameRadius();\n                }\n                if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset' || parent.frameObj.type === 'hook') {\n                    _this.createFrameInset();\n                }\n                if (parent.frameObj.type === 'line' || parent.frameObj.type === 'inset') {\n                    _this.createFrameOffset();\n                }\n                if (parent.frameObj.type === 'line') {\n                    _this.createFrameAmount();\n                    _this.createFrameBorder();\n                }\n                _this.createFrameGradientColor();\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                parent.element.querySelector('#' + parent.element.id + '_' + parent.frameObj.type).focus();\n            }\n        });\n        toolbar.appendTo('#' + this.parent.element.id + '_customizeWrapper');\n    };\n    ToolbarModule.prototype.createFrameGradientColor = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        parent.element.querySelector('.e-template.e-frame-stroke').appendChild(parent.createElement('input', {\n            id: parent.element.id + '_frame_gradient_fill'\n        }));\n        var fillColor = new ColorPicker({\n            modeSwitcher: false, noColor: true, value: parent.frameObj.gradientColor,\n            showButtons: false, mode: 'Palette', cssClass: 'e-frame-gradient-fill-color',\n            change: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.gradientColor;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.gradientColor = args.currentValue.hex;\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    if (args.currentValue.rgba === '') {\n                        fillDDB.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                }\n                else {\n                    parent.frameObj.gradientColor = temp;\n                }\n                fillDDB.toggle();\n            }\n        }, '#' + parent.element.id + '_frame_gradient_fill');\n        var fillDDB = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = fillDDB.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                    args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                }\n            },\n            target: '.e-frame-gradient-fill-color',\n            iconCss: 'e-dropdownbtn-preview'\n        }, '#' + parent.element.id + '_frameGradientColorBtn');\n        fillColor.inline = true;\n        if (parent.frameObj.gradientColor === '') {\n            parent.element.querySelector('.e-frame-stroke.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        else {\n            parent.element.querySelector('.e-frame-stroke.e-template .e-dropdownbtn-preview').style.background = parent.frameObj.gradientColor;\n        }\n    };\n    ToolbarModule.prototype.createFrameColor = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        parent.element.querySelector('.e-template.e-stroke').appendChild(parent.createElement('input', {\n            id: parent.element.id + '_frame_fill'\n        }));\n        var fillColor = new ColorPicker({\n            modeSwitcher: false, value: parent.frameObj.color,\n            showButtons: false, mode: 'Palette', cssClass: 'e-frame-fill-color',\n            change: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.color;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.color = args.currentValue.hex;\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    if (args.currentValue.rgba === '') {\n                        fillDDB.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                }\n                else {\n                    parent.frameObj.color = temp;\n                }\n                fillDDB.toggle();\n            }\n        }, '#' + parent.element.id + '_frame_fill');\n        var fillDDB = new DropDownButton({\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = fillDDB.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                    args.element.parentElement.style.left = parent.element.offsetLeft + 'px';\n                }\n            },\n            target: '.e-frame-fill-color',\n            iconCss: 'e-dropdownbtn-preview'\n        }, '#' + parent.element.id + '_frameColorBtn');\n        fillColor.inline = true;\n        parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = parent.frameObj.color;\n    };\n    ToolbarModule.prototype.createFrameSize = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameSizeBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.size.toString());\n        spanElem.className = 'e-frame-stroke-width';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.size;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.size = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.size = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_10 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_10.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_11 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_11.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameSizeBtn');\n    };\n    ToolbarModule.prototype.createFrameInset = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameInsetBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.inset.toString());\n        spanElem.className = 'e-frame-inset';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.inset;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.inset = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.inset = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_12 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_12.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_13 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_13.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameInsetBtn');\n    };\n    ToolbarModule.prototype.createFrameOffset = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('20') },\n            { id: '2', text: this.l10n.getConstant('40') },\n            { id: '3', text: this.l10n.getConstant('60') },\n            { id: '4', text: this.l10n.getConstant('80') },\n            { id: '5', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameOffsetBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.offset.toString());\n        spanElem.className = 'e-frame-offset';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.offset;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.offset = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.offset = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_14 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_14.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_15 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_15.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameOffsetBtn');\n    };\n    ToolbarModule.prototype.createFrameRadius = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('0') },\n            { id: '2', text: this.l10n.getConstant('20') },\n            { id: '3', text: this.l10n.getConstant('40') },\n            { id: '4', text: this.l10n.getConstant('60') },\n            { id: '5', text: this.l10n.getConstant('80') },\n            { id: '6', text: this.l10n.getConstant('100') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameRadiusBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.radius.toString());\n        spanElem.className = 'e-frame-radius';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.radius;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.radius = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.radius = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_16 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_16.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_17 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_17.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameRadiusBtn');\n    };\n    ToolbarModule.prototype.createFrameAmount = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('1') },\n            { id: '2', text: this.l10n.getConstant('2') },\n            { id: '3', text: this.l10n.getConstant('3') },\n            { id: '4', text: this.l10n.getConstant('4') },\n            { id: '5', text: this.l10n.getConstant('5') }\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameAmountBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.frameObj.amount.toString());\n        spanElem.className = 'e-frame-amount';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.amount;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.amount = parseInt(args.item.text, 10);\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.amount = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_18 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_18.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_19 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_19.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameAmountBtn');\n    };\n    ToolbarModule.prototype.createFrameBorder = function () {\n        var parent = this.parent;\n        var prevFrameSettings;\n        var obj = { frameChangeEventArgs: null };\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('Solid') },\n            { id: '2', text: this.l10n.getConstant('Dashed') },\n            { id: '3', text: this.l10n.getConstant('Dotted') },\n        ];\n        var strokeWidthBtn = document.getElementById(parent.element.id + '_frameBorderBtn');\n        var spanElem = document.createElement('span');\n        spanElem.innerHTML = this.l10n.getConstant(parent.toPascalCase(parent.frameObj.border));\n        spanElem.className = 'e-frame-border';\n        strokeWidthBtn.appendChild(spanElem);\n        // Initialize the DropDownButton component.\n        var drpDownBtn = new DropDownButton({ items: strokeWidthItems,\n            open: function (args) {\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                var activeBtn = drpDownBtn.element.childNodes[0].textContent;\n                if (activeBtn !== '') {\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                }\n            },\n            select: function (args) {\n                prevFrameSettings = { type: parent.toPascalCase(parent.frameObj.type), color: parent.frameObj.color,\n                    gradientColor: parent.frameObj.gradientColor, size: parent.frameObj.size, inset: parent.frameObj.inset,\n                    offset: parent.frameObj.offset, borderRadius: parent.frameObj.radius, frameLineStyle: parent.toPascalCase(parent.frameObj.border),\n                    lineCount: parent.frameObj.amount };\n                var temp = parent.frameObj.border;\n                var object = { currObj: {} };\n                parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n                parent.frameObj.border = args.item.text.toLowerCase();\n                parent.notify('draw', { prop: 'triggerFrameChange', value: { prevFrameSettings: prevFrameSettings, obj: obj } });\n                if (obj['frameChangeEventArgs'] && !obj['frameChangeEventArgs'].cancel) {\n                    parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                            operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                            previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                            previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                            previousFilter: null, isCircleCrop: null\n                        } });\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    drpDownBtn.content = args.item.text;\n                }\n                else {\n                    parent.frameObj.border = temp;\n                }\n                if (Browser.isDevice) {\n                    if (document.getElementById(parent.element.id + '_bottomToolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_20 = getComponent(parent.element.id + '_bottomToolbar', 'toolbar');\n                        toolbar_20.refreshOverflow();\n                    }\n                }\n                else {\n                    if (document.getElementById(parent.element.id + '_toolbar')) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        var toolbar_21 = getComponent(parent.element.id + '_toolbar', 'toolbar');\n                        toolbar_21.refreshOverflow();\n                    }\n                }\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + parent.element.id + '_frameBorderBtn');\n    };\n    ToolbarModule.prototype.initFilterToolbarItem = function () {\n        var _this = this;\n        var parent = this.parent;\n        var mainItem = this.getFilterToolbarItem();\n        if (document.querySelector('#' + parent.element.id + '_contextualToolbar').classList.contains('e-control')) {\n            getComponent(document.getElementById(parent.element.id + '_contextualToolbar'), 'toolbar').destroy();\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.contextualToolbarClicked.bind(this),\n            created: function () {\n                _this.updatePrivateVariables();\n                _this.createCanvasFilter();\n                if (parent.currentFilter === '') {\n                    parent.currentFilter = parent.element.id + '_default';\n                }\n                var hdrWrapper = document.querySelector('#' + parent.element.id + '_headWrapper');\n                if (hdrWrapper) {\n                    hdrWrapper.style.display = 'none';\n                }\n                if (document.getElementById(parent.currentFilter + 'Canvas')) {\n                    document.getElementById(parent.currentFilter + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n                }\n                _this.enableDisableTbrBtn();\n                toolbar.refreshOverflow();\n            }\n        });\n        toolbar.appendTo('#' + parent.element.id + '_contextualToolbar');\n    };\n    ToolbarModule.prototype.drawDashedLine = function (ctx) {\n        ctx.beginPath();\n        ctx.setLineDash([5]);\n        ctx.rect(10, 10, 280, 130);\n        ctx.stroke();\n        ctx.closePath();\n    };\n    ToolbarModule.prototype.createCanvasFilter = function () {\n        var parent = this.parent;\n        showSpinner(parent.element);\n        parent.element.style.opacity = '0.5';\n        var imageData = parent.getCurrentCanvasData();\n        this.inMemoryCanvas.width = imageData.width;\n        this.inMemoryCanvas.height = imageData.height;\n        this.inMemoryContext.putImageData(imageData, 0, 0);\n        this.updateFilterCanvas('_defaultCanvas', 'default');\n        this.updateFilterCanvas('_chromeCanvas', 'chrome');\n        this.updateFilterCanvas('_coldCanvas', 'cold');\n        this.updateFilterCanvas('_warmCanvas', 'warm');\n        this.updateFilterCanvas('_grayscaleCanvas', 'grayscale');\n        this.updateFilterCanvas('_sepiaCanvas', 'sepia');\n        this.updateFilterCanvas('_invertCanvas', 'invert');\n        hideSpinner(parent.element);\n        parent.element.style.opacity = '1';\n        parent.initialAdjustmentValue = this.lowerContext.filter;\n    };\n    ToolbarModule.prototype.updateFilterCanvas = function (selector, type) {\n        var parent = this.parent;\n        var filter = parent.element.querySelector('#' + parent.element.id + selector);\n        if (filter) {\n            var ctx = filter.getContext('2d');\n            ctx = filter.getContext('2d');\n            filter.style.width = '100px';\n            filter.style.height = '100px';\n            parent.notify('filter', { prop: 'updateAdj', value: { type: type, value: null, isPreview: true, ctx: ctx } });\n            ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        }\n    };\n    ToolbarModule.prototype.getQuickAccessToolbarItem = function (isPenEdit) {\n        var parent = this.parent;\n        var args = { cancel: false, toolbarItems: [] };\n        var toolbarItems = [];\n        if (isNullOrUndefined(isPenEdit)) {\n            if (parent.activeObj.shape === 'image') {\n                toolbarItems.push('Flip');\n            }\n            toolbarItems.push('Clone');\n            toolbarItems.push('Delete');\n            if (parent.activeObj.shape === 'text') {\n                toolbarItems.push('EditText');\n            }\n            args.shape = parent.toPascalCase(parent.activeObj.shape);\n        }\n        else if (isPenEdit) {\n            toolbarItems.push('Delete');\n            args.shape = 'Freehand draw';\n        }\n        args.toolbarItems = extend([], toolbarItems, null, true);\n        parent.trigger('quickAccessToolbarOpen', args);\n        var orgToolbarItems = [];\n        if (args.cancel) {\n            orgToolbarItems = [];\n        }\n        else {\n            for (var i = 0; i < args.toolbarItems.length; i++) {\n                switch (args.toolbarItems[i]) {\n                    case 'Clone':\n                        orgToolbarItems.push({ id: parent.element.id + '_duplicate', prefixIcon: 'e-icons e-order', cssClass: 'top-icon e-order',\n                            tooltipText: this.l10n.getConstant('Duplicate'), align: 'Left' });\n                        break;\n                    case 'Delete':\n                        orgToolbarItems.push({ id: parent.element.id + '_remove', prefixIcon: 'e-icons e-trash', cssClass: 'top-icon e-trash',\n                            tooltipText: this.l10n.getConstant('Remove'), align: 'Left' });\n                        break;\n                    case 'EditText':\n                        orgToolbarItems.push({ id: parent.element.id + '_editText', prefixIcon: 'e-icons e-annotation-edit', cssClass: 'top-icon e-annotation-edit',\n                            tooltipText: this.l10n.getConstant('EditText'), align: 'Left' });\n                        break;\n                    case 'Flip':\n                        orgToolbarItems.push({ id: parent.element.id + '_hFlip', prefixIcon: 'e-icons e-horizontal-flip',\n                            tooltipText: this.l10n.getConstant('HorizontalFlip'), align: 'Left' });\n                        orgToolbarItems.push({ id: parent.element.id + '_vFlip', prefixIcon: 'e-icons e-vertical-flip',\n                            tooltipText: this.l10n.getConstant('VerticalFlip'), align: 'Left' });\n                        break;\n                    default:\n                        orgToolbarItems.push(args.toolbarItems[i]);\n                        break;\n                }\n            }\n        }\n        return orgToolbarItems;\n    };\n    ToolbarModule.prototype.renderQAT = function (isPenEdit) {\n        var parent = this.parent;\n        if (parent.activeObj && parent.showQuickAccessToolbar) {\n            var qtArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n            if (qtArea) {\n                this.destroyQuickAccessToolbar();\n                qtArea.style.display = 'block';\n            }\n            var items = this.getQuickAccessToolbarItem(isPenEdit);\n            if (items.length === 0) {\n                return;\n            }\n            if (isNullOrUndefined(parent.quickAccessToolbarTemplate)) {\n                var toolbarObj = new Toolbar({\n                    items: items,\n                    clicked: this.quickAccessToolbarClicked.bind(this)\n                });\n                toolbarObj.appendTo('#' + parent.element.id + '_quickAccessToolbar');\n            }\n            var height = this.toolbarHeight && this.toolbarHeight !== 0 ? this.toolbarHeight : qtArea.clientHeight;\n            if (isNullOrUndefined(isPenEdit)) {\n                qtArea.style.width = 'auto';\n                parent.activeObj.activePoint.width = Math.abs(parent.activeObj.activePoint.width);\n                parent.activeObj.activePoint.height = Math.abs(parent.activeObj.activePoint.height);\n                var x = parent.activeObj.activePoint.startX < parent.activeObj.activePoint.endX ?\n                    parent.activeObj.activePoint.startX : parent.activeObj.activePoint.endX;\n                var y = parent.activeObj.activePoint.startY < parent.activeObj.activePoint.endY ?\n                    parent.activeObj.activePoint.startY : parent.activeObj.activePoint.endY;\n                var width = parent.activeObj.activePoint.width;\n                if (parent.activeObj.rotatedAngle !== 0 && parent.activeObj.shape !== 'arrow') {\n                    var object = { activePoint: null };\n                    parent.notify('shape', { prop: 'getSquarePointForRotatedShape', onPropertyChange: false,\n                        value: { obj: parent.activeObj, object: object } });\n                    var point = object['activePoint'];\n                    x = point.startX;\n                    y = point.startY;\n                    width = point.width;\n                }\n                else if (parent.activeObj.shape === 'path') {\n                    var path = parent.getSquarePointForPath(parent.activeObj);\n                    x = path.startX;\n                    y = path.startY;\n                    width = path.width;\n                }\n                qtArea.style.left = (x + (width / 2)) - (items.length * 25) + 'px';\n                if (parseFloat(qtArea.style.left) + (qtArea.clientWidth / 2) !== x + (width / 2)) {\n                    var diff = (x + (width / 2)) - (parseFloat(qtArea.style.left) + (qtArea.clientWidth / 2));\n                    qtArea.style.left = parseFloat(qtArea.style.left) + diff + 'px';\n                }\n                if (y - (height + (height / 1.5)) < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                }\n                else {\n                    qtArea.style.top = y - (height + (height / 1.5)) + 'px';\n                }\n            }\n            else if (isPenEdit) {\n                var obj = { activePoint: null };\n                var indexObj = { freehandSelectedIndex: null };\n                parent.notify('freehand-draw', { prop: 'getFreehandSelectedIndex', onPropertyChange: false, value: { obj: indexObj } });\n                parent.notify('freehand-draw', { prop: 'getSqPtFD',\n                    value: { idx: indexObj['freehandSelectedIndex'], obj: obj } });\n                var point = obj['activePoint'];\n                qtArea.style.width = 'auto';\n                qtArea.style.left = (point.startX + (point.width / 2)) - (items.length * 27) + 'px';\n                if (point.startY - (height + (height / 1.5)) < parent.img.destTop) {\n                    qtArea.style.top = parent.img.destTop + 'px';\n                }\n                else {\n                    qtArea.style.top = point.startY - (height + (height / 1.5)) + 'px';\n                }\n            }\n        }\n    };\n    ToolbarModule.prototype.refreshDropDownBtn = function (isDisabled) {\n        if (isNullOrUndefined(isDisabled)) {\n            return;\n        }\n        var parent = this.parent;\n        var annotation = document.querySelector('#' + parent.element.id + '_annotationBtn');\n        if (annotation) {\n            if (isDisabled) {\n                annotation.classList.add('e-disabled');\n                annotation.parentElement.classList.add('e-overlay');\n            }\n            else {\n                annotation.classList.remove('e-disabled');\n                annotation.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(annotation, 'dropdown-btn').disabled = isDisabled;\n        }\n        var transform = document.querySelector('#' + parent.element.id + '_transformBtn');\n        if (transform) {\n            if (isDisabled) {\n                transform.classList.add('e-disabled');\n                transform.parentElement.classList.add('e-overlay');\n            }\n            else {\n                transform.classList.remove('e-disabled');\n                transform.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(transform, 'dropdown-btn').disabled = isDisabled;\n        }\n        var adjustment = document.querySelector('#' + parent.element.id + '_adjustment');\n        if (adjustment) {\n            if (isDisabled) {\n                adjustment.classList.add('e-disabled');\n                adjustment.parentElement.classList.add('e-overlay');\n            }\n            else {\n                adjustment.classList.remove('e-disabled');\n                adjustment.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(adjustment, 'btn').disabled = isDisabled;\n        }\n        var filter = document.querySelector('#' + parent.element.id + '_filter');\n        if (filter) {\n            if (isDisabled) {\n                filter.classList.add('e-disabled');\n                filter.parentElement.classList.add('e-overlay');\n            }\n            else {\n                filter.classList.remove('e-disabled');\n                filter.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(filter, 'btn').disabled = isDisabled;\n        }\n    };\n    ToolbarModule.prototype.cropSelect = function (args) {\n        var parent = this.parent;\n        parent.isCropTab = true;\n        if (isNullOrUndefined(parent.transform.cropZoomFactor)) {\n            parent.transform.cropZoomFactor = parent.transform.zoomFactor;\n            parent.notify('draw', { prop: 'setTempZoomFactor', onPropertyChange: false, value: { tempZoomFactor: parent.transform.zoomFactor } });\n        }\n        parent.transform.zoomFactor = parent.transform.cropZoomFactor;\n        var text = args.item.id;\n        this.currentToolbar = 'crop';\n        parent.currSelectionPoint = null;\n        parent.notify('draw', { prop: 'select', onPropertyChange: false,\n            value: { type: text, startX: null, startY: null, width: null, height: null } });\n        this.enableDisableTbrBtn();\n        parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n    };\n    ToolbarModule.prototype.quickAccessToolbarClicked = function (args, isContextualToolbar) {\n        var parent = this.parent;\n        var points = { x: parent.activeObj.activePoint.startX, y: parent.activeObj.activePoint.startY };\n        if (args.item) {\n            var duplicateObj = void 0;\n            var objColl = void 0;\n            var isPreventUndoRedo = null;\n            var obj = { prevActObj: null };\n            var object = { tempObj: null };\n            parent.notify('draw', { prop: 'getPrevActObj', onPropertyChange: false, value: { obj: obj } });\n            parent.notify('selection', { prop: 'getTempActObj', onPropertyChange: false, value: { obj: object } });\n            object['tempObj']['activePoint']['height'] = Math.abs(object['tempObj']['activePoint']['height']);\n            var pathObject = { isNewPath: null };\n            var ctx = void 0;\n            parent.notify('draw', { prop: 'getNewPath', value: { obj: pathObject } });\n            switch (args.item.id.replace(parent.element.id + '_', '').toLowerCase()) {\n                case 'duplicate':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_duplicate').classList.contains('e-disabled')) {\n                        this.refreshSlider();\n                        if (!pathObject['isNewPath'] && JSON.stringify(object['tempObj']) === JSON.stringify(parent.activeObj)) {\n                            isPreventUndoRedo = true;\n                        }\n                        duplicateObj = extend({}, parent.activeObj, {}, true);\n                        if (duplicateObj.shape === 'image') {\n                            objColl = extend([], parent.objColl, [], true);\n                            parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n                        }\n                        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n                        }\n                        else if (obj['prevActObj']) {\n                            parent.activeObj.currIndex = null;\n                            duplicateObj.currIndex = null;\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: isPreventUndoRedo } });\n                        }\n                        else {\n                            parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n                        }\n                        if (pathObject['isNewPath']) {\n                            parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n                        }\n                        objColl = extend([], parent.objColl, [], true);\n                        duplicateObj.activePoint.startX += 10;\n                        duplicateObj.activePoint.startY -= 10;\n                        duplicateObj.activePoint.endX += 10;\n                        duplicateObj.activePoint.endY -= 10;\n                        if (duplicateObj.shape === 'path') {\n                            for (var i = 0; i < duplicateObj.pointColl.length; i++) {\n                                duplicateObj.pointColl[i].x += 10;\n                                duplicateObj.pointColl[i].y -= 10;\n                            }\n                        }\n                        else if (duplicateObj.shape === 'image') {\n                            duplicateObj.imageCanvas = parent.createElement('canvas');\n                        }\n                        parent.activeObj = extend({}, duplicateObj, {}, true);\n                        if (parent.activeObj.shape === 'image') {\n                            if (parent.activeObj.isHorImageFlip && parent.activeObj.isVerImageFlip) {\n                                parent.activeObj.isHorImageFlip = parent.activeObj.isVerImageFlip = false;\n                                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: true } });\n                                parent.activeObj.isHorImageFlip = parent.activeObj.isVerImageFlip = true;\n                            }\n                            else if (parent.activeObj.isHorImageFlip) {\n                                parent.activeObj.isHorImageFlip = false;\n                                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: true, isVFlip: null } });\n                                parent.activeObj.isHorImageFlip = true;\n                            }\n                            else if (parent.activeObj.isVerImageFlip) {\n                                parent.activeObj.isVerImageFlip = false;\n                                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: true } });\n                                parent.activeObj.isVerImageFlip = true;\n                            }\n                            else {\n                                parent.notify('draw', { prop: 'downScaleImgCanvas', onPropertyChange: false,\n                                    value: { ctx: duplicateObj.imageCanvas.getContext('2d'), isImgAnnotation: true, isHFlip: null, isVFlip: null } });\n                            }\n                        }\n                        if (parent.activeObj.shape === 'line' || parent.activeObj.shape === 'arrow') {\n                            parent.notify('shape', { prop: 'setPointCollForLineArrow', onPropertyChange: false,\n                                value: { obj: parent.activeObj } });\n                        }\n                        parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate', obj: parent.activeObj,\n                                isCropRatio: null, points: null, isPreventDrag: true } });\n                        parent.notify('undo-redo', { prop: 'updateUrObj', onPropertyChange: false, value: { objColl: objColl } });\n                        this.renderQAT();\n                    }\n                    break;\n                case 'remove':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_remove').classList.contains('e-disabled')) {\n                        this.refreshSlider();\n                        parent.notify('selection', { prop: 'deleteItem', onPropertyChange: false });\n                    }\n                    break;\n                case 'edittext':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_editText').classList.contains('e-disabled')) {\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        parent.notify('selection', { prop: 'setTempActObj', onPropertyChange: false,\n                            value: { obj: extend({}, parent.activeObj, {}, true) } });\n                        parent.notify('selection', { prop: 'setInitialTextEdit', onPropertyChange: false,\n                            value: { bool: true } });\n                        parent.notify('draw', { prop: 'setPrevActObj', onPropertyChange: false,\n                            value: { prevActObj: extend({}, parent.activeObj, {}, true) } });\n                        if (parent.activeObj.rotatedAngle !== 0) {\n                            points.x = parent.activeObj.horTopLinePointColl[0].x;\n                            points.y = parent.activeObj.horTopLinePointColl[0].y;\n                        }\n                        parent.notify('shape', { prop: 'renderTextArea', onPropertyChange: false,\n                            value: { x: points.x, y: points.y, actObj: parent.activeObj } });\n                        if (isNullOrUndefined(parent.activeObj.currIndex)) {\n                            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n                        }\n                        else if (obj['prevActObj']) {\n                            parent.notify('draw', { prop: 'setShapeTextInsert', onPropertyChange: false, value: { bool: true } });\n                        }\n                        if (document.getElementById(parent.element.id + '_quickAccessToolbarArea')) {\n                            document.getElementById(parent.element.id + '_quickAccessToolbarArea').style.display = 'none';\n                        }\n                    }\n                    break;\n                case 'rotleft':\n                case 'rotright':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_rotLeft').classList.contains('e-disabled') ||\n                        !parent.element.querySelector('#' + parent.element.id + '_rotRight').classList.contains('e-disabled')) {\n                        parent.rotateImage(args.item.id.replace(parent.element.id + '_', '').toLowerCase());\n                    }\n                    break;\n                case 'hflip':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_hFlip').classList.contains('e-disabled')) {\n                        ctx = parent.activeObj.imageCanvas.getContext('2d');\n                        parent.horizontalFlip(ctx);\n                    }\n                    break;\n                case 'vflip':\n                    if (!parent.element.querySelector('#' + parent.element.id + '_vFlip').classList.contains('e-disabled')) {\n                        ctx = parent.activeObj.imageCanvas.getContext('2d');\n                        parent.verticalFlip(ctx);\n                    }\n                    break;\n            }\n        }\n        if (isNullOrUndefined(isContextualToolbar)) {\n            parent.trigger('quickAccessToolbarItemClick', args);\n        }\n    };\n    ToolbarModule.prototype.defToolbarClicked = function (args) {\n        var parent = this.parent;\n        var isContextualToolbar = false;\n        var isFilterFinetune = false;\n        if (!this.isFrameToolbar && parent.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            if (!parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                isContextualToolbar = isFilterFinetune = true;\n            }\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (args.item) {\n            var type = args.item.id.replace(parent.element.id + '_', '').toLowerCase();\n            if (type === 'duplicate' || type === 'remove' || type === 'edittext' ||\n                type === 'hflip' || type === 'vflip' || type === 'rotleft' || type === 'rotright') {\n                this.quickAccessToolbarClicked(args, true);\n                parent.trigger('toolbarItemClicked', args);\n            }\n            else {\n                var isDisabledFilter = false;\n                var isDisabledAdjustment = false;\n                var adjustment = document.querySelector('#' + parent.element.id + '_adjustment');\n                if (adjustment && adjustment.classList.contains('e-disabled')) {\n                    isDisabledAdjustment = true;\n                }\n                var filter = document.querySelector('#' + parent.element.id + '_filter');\n                if (filter && filter.classList.contains('e-disabled')) {\n                    isDisabledFilter = true;\n                }\n                this.enableDisableTbrBtn();\n                this.performDefTbrClick(type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune);\n                parent.trigger('toolbarItemClicked', args);\n            }\n        }\n    };\n    ToolbarModule.prototype.performDefTbrClick = function (type, isContextualToolbar, isDisabledAdjustment, isDisabledFilter, isFilterFinetune) {\n        var parent = this.parent;\n        var zoomIn = parent.element.querySelector('#' + parent.element.id + '_zoomIn');\n        var aspectRatioHeight = parent.element.querySelector('#' + parent.element.id + '_resizeHeight');\n        var aspectRatioWidth = parent.element.querySelector('#' + parent.element.id + '_resizeWidth');\n        var isCropSelection = false;\n        var panBtn;\n        var splitWords;\n        if (parent.activeObj.shape !== undefined) {\n            splitWords = parent.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && parent.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (!parent.disabled) {\n            switch (type) {\n                case 'pan':\n                    parent.currObjType.isCustomCrop = parent.currObjType.isFiltered = false;\n                    if (parent.currObjType.isUndoAction) {\n                        parent.notify('undo-redo', { prop: 'refreshUrc', value: { bool: null } });\n                    }\n                    if (isCropSelection) {\n                        parent.currObjType.isCustomCrop = false;\n                        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n                        this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                        this.refreshToolbar('main');\n                    }\n                    if (parent.togglePan) {\n                        this.cancelPan();\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: true } });\n                        if (this.currentToolbar === 'pen') {\n                            parent.freehandDraw(true);\n                        }\n                    }\n                    else {\n                        panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n                        if (panBtn) {\n                            panBtn.classList.add('e-selected-btn');\n                        }\n                        parent.pan(true);\n                        parent.notify('transform', { prop: 'setDisablePan', onPropertyChange: false, value: { bool: false } });\n                    }\n                    if (zoomIn && parent.zoomSettings.zoomFactor >= parent.zoomSettings.maxZoomFactor) {\n                        zoomIn.classList.add('e-disabled');\n                        zoomIn.parentElement.classList.add('e-overlay');\n                    }\n                    else if (zoomIn) {\n                        zoomIn.classList.remove('e-disabled');\n                        zoomIn.parentElement.classList.remove('e-overlay');\n                    }\n                    this.refreshToolbar('main');\n                    break;\n                case 'cancel':\n                    parent.notify('draw', { prop: 'performCancel', value: { isContextualToolbar: isContextualToolbar } });\n                    break;\n                case 'ok':\n                    parent.okBtn();\n                    this.refreshDropDownBtn(false);\n                    this.currentToolbar = 'main';\n                    break;\n                case 'crop':\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    break;\n                case 'reset':\n                    parent.reset();\n                    this.imageHeight = null;\n                    this.imageWidth = null;\n                    this.parent.aspectHeight = null;\n                    this.parent.aspectWidth = null;\n                    this.isAspectRatio = true;\n                    this.currentToolbar = 'main';\n                    break;\n                case 'undo':\n                    parent.notify('undo-redo', { prop: 'call-undo' });\n                    break;\n                case 'redo':\n                    parent.notify('undo-redo', { prop: 'call-redo' });\n                    break;\n                case 'aspectratio':\n                    if (!parent.isCircleCrop && (isNullOrUndefined(parent.currSelectionPoint)) ||\n                        (parent.currSelectionPoint && parent.currSelectionPoint.shape !== 'crop-circle')) {\n                        if (getComponent(aspectRatioWidth, 'numerictextbox').value) {\n                            parent.aspectWidth = getComponent(aspectRatioWidth, 'numerictextbox').value;\n                            parent.aspectHeight = getComponent(aspectRatioHeight, 'numerictextbox').value;\n                            parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: null, isAspectRatio: true } });\n                        }\n                        parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                            height: parent.img.srcHeight };\n                        this.refreshToolbar('resize');\n                    }\n                    break;\n                case 'nonaspectratio':\n                    if (getComponent(aspectRatioWidth, 'numerictextbox').value ||\n                        getComponent(aspectRatioHeight, 'numerictextbox').value) {\n                        parent.aspectWidth = getComponent(aspectRatioWidth, 'numerictextbox').value ?\n                            getComponent(aspectRatioWidth, 'numerictextbox').value :\n                            parseFloat(getComponent(aspectRatioWidth, 'numerictextbox').placeholder);\n                        parent.aspectHeight = getComponent(aspectRatioHeight, 'numerictextbox').value ?\n                            getComponent(aspectRatioHeight, 'numerictextbox').value :\n                            parseFloat(getComponent(aspectRatioHeight, 'numerictextbox').placeholder);\n                        parent.notify('transform', { prop: 'resize', value: { width: parent.aspectWidth, height: parent.aspectHeight, isAspectRatio: false } });\n                    }\n                    parent.resizeSrc = { startX: parent.img.srcLeft, startY: parent.img.srcTop, width: parent.img.srcWidth,\n                        height: parent.img.srcHeight };\n                    this.refreshToolbar('resize');\n                    break;\n                case 'resize':\n                    if (parent.currObjType.isFiltered) {\n                        parent.okBtn();\n                    }\n                    this.resizeClick();\n                    break;\n                case 'adjustment':\n                    if (!isDisabledAdjustment) {\n                        if (parent.currObjType.isFiltered) {\n                            parent.okBtn();\n                        }\n                        this.refreshToolbar('adjustment');\n                        parent.setTempFilterProperties();\n                        this.openSlider('brightness');\n                    }\n                    break;\n                case 'brightness':\n                case 'contrast':\n                case 'hue':\n                case 'saturation':\n                case 'opacity':\n                case 'blur':\n                case 'exposure':\n                    this.openSlider(type);\n                    break;\n                case 'filter':\n                    if (!isDisabledFilter) {\n                        showSpinner(parent.element);\n                        this.refreshToolbar('filter');\n                        parent.setTempFilterProperties();\n                        hideSpinner(parent.element);\n                    }\n                    break;\n                case 'default':\n                case 'chrome':\n                case 'cold':\n                case 'warm':\n                case 'grayscale':\n                case 'blackandwhite':\n                case 'sepia':\n                case 'invert':\n                case 'sharpen':\n                    parent.currObjType.isFiltered = true;\n                    parent.notify('filter', { prop: 'applyImageFilter', value: { option: type } });\n                    break;\n                case 'upload':\n                    if (isFilterFinetune) {\n                        parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.remove('e-hide');\n                    }\n                    break;\n                case 'bold':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    if (parent.element.querySelector('#' + parent.element.id + '_bold').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + parent.element.id + '_bold').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + parent.element.id + '_bold').classList.add('e-selected-btn');\n                    }\n                    break;\n                case 'italic':\n                    parent.notify('selection', { prop: 'setInitialTextEdit', value: { bool: false } });\n                    if (parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bold' } });\n                    }\n                    else if (parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'bolditalic' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'default' } });\n                    }\n                    else if (!parent.activeObj.textSettings.bold && !parent.activeObj.textSettings.italic) {\n                        parent.notify('shape', { prop: 'applyFontStyle', onPropertyChange: false,\n                            value: { item: 'italic' } });\n                    }\n                    if (parent.element.querySelector('#' + parent.element.id + '_italic').classList.contains('e-selected-btn')) {\n                        parent.element.querySelector('#' + parent.element.id + '_italic').classList.remove('e-selected-btn');\n                    }\n                    else {\n                        parent.element.querySelector('#' + parent.element.id + '_italic').classList.add('e-selected-btn');\n                    }\n                    break;\n                case 'croptransform':\n                    if (parent.currObjType.isFiltered) {\n                        parent.okBtn();\n                    }\n                    this.refreshToolbar('croptransform');\n                    break;\n                case 'rotateleft':\n                case 'rotateright':\n                case 'horizontalflip':\n                case 'verticalflip':\n                    parent.transformSelect(type);\n                    parent.notify('transform', { prop: 'disableZoomOutBtn', value: { isZoomOut: true } });\n                    break;\n                case 'save':\n                    if (parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.contains('e-hide')) {\n                        parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.remove('e-hide');\n                        break;\n                    }\n                    else {\n                        parent.okBtn();\n                    }\n                    parent.element.querySelector('#' + parent.element.id + '_saveBtn').classList.add('e-hide');\n                    parent.element.querySelector('#' + parent.element.id + '_saveBtn').click();\n                    break;\n                case 'transparency':\n                    this.updateContextualToolbar('transparency', 'transparency');\n                    break;\n                case 'frame':\n                    this.frameToolbarClick();\n                    break;\n                case 'none':\n                case 'mat':\n                case 'bevel':\n                case 'line':\n                case 'inset':\n                case 'hook':\n                    this.unselectFrameBtn();\n                    if (parent.element.querySelector('#' + parent.element.id + '_' + type)) {\n                        parent.element.querySelector('#' + parent.element.id + '_' + type).classList.add('e-selected-btn');\n                    }\n                    parent.frameObj.type = type;\n                    parent.frameObj.size = 20;\n                    parent.frameObj.inset = 20;\n                    parent.frameObj.radius = 0;\n                    parent.frameObj.amount = 1;\n                    if (type === 'inset') {\n                        parent.frameObj.offset = 60;\n                    }\n                    else {\n                        parent.frameObj.offset = 20;\n                    }\n                    this.refreshToolbar('frame');\n                    parent.notify('draw', { prop: 'render-image', value: { isMouseWheel: null, isPreventClearRect: null, isFrame: true } });\n                    break;\n            }\n        }\n    };\n    ToolbarModule.prototype.frameToolbarClick = function () {\n        var parent = this.parent;\n        var frame = document.querySelector('#' + parent.element.id + '_frame');\n        var zoom;\n        var frameObj;\n        var tempFrameObj;\n        if (parent.currObjType.isFiltered) {\n            parent.okBtn();\n        }\n        if (frame && !frame.classList.contains('e-disabled')) {\n            zoom = parent.transform.zoomFactor;\n            parent.frameDestPoints = extend({}, parent.img, {}, true);\n            if (isNullOrUndefined(parent.cxtTbarHeight)) {\n                frameObj = extend({}, parent.frameObj, {}, true);\n                tempFrameObj = extend({}, parent.tempFrameObj, {}, true);\n                this.callFrameToolbar();\n                parent.frameObj.type = 'mat';\n                this.callFrameToolbar();\n                parent.cxtTbarHeight = parent.element.querySelector('#' + parent.element.id + '_customizeWrapper').clientHeight;\n                parent.frameObj = frameObj;\n                parent.tempFrameObj = tempFrameObj;\n            }\n            this.zoomToFrameRange();\n            parent.tempFrameZoomLevel = zoom;\n            if (Browser.isDevice) {\n                parent.img.destTop -= (parent.cxtTbarHeight / 2);\n            }\n            else {\n                parent.img.destTop += (parent.cxtTbarHeight / 2);\n            }\n            this.callFrameToolbar();\n        }\n    };\n    ToolbarModule.prototype.zoomToFrameRange = function () {\n        var parent = this.parent;\n        this.isFrameToolbar = false;\n        parent.notify('transform', { prop: 'resetZoom', onPropertyChange: false });\n        while (true) {\n            if (this.toolbarHeight + parent.img.destTop >= (this.toolbarHeight + parent.cxtTbarHeight)) {\n                break;\n            }\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null, isResize: true } });\n        }\n        this.isFrameToolbar = true;\n    };\n    ToolbarModule.prototype.resizeClick = function () {\n        this.parent.upperCanvas.style.cursor = 'default';\n        this.parent.notify('transform', { prop: 'updateResize', value: { bool: false } });\n        if (this.isAspectRatio) {\n            this.isAspectRatio = false;\n        }\n        else {\n            this.isAspectRatio = true;\n        }\n        this.parent.isResize = true;\n        this.refreshToolbar('resize');\n    };\n    ToolbarModule.prototype.callFrameToolbar = function () {\n        var parent = this.parent;\n        parent.notify('draw', { prop: 'setTempFrame', value: { frame: parent.frameObj.type } });\n        extend(parent.tempFrameObj, parent.frameObj);\n        var undoRedoObj = { appliedUndoRedoColl: [] };\n        parent.notify('undo-redo', { prop: 'getAppliedUndoRedoColl', value: { obj: undoRedoObj } });\n        if (undoRedoObj['appliedUndoRedoColl']['length'] === 0) {\n            var object = { currObj: {} };\n            parent.notify('filter', { prop: 'getCurrentObj', onPropertyChange: false, value: { object: object } });\n            parent.notify('undo-redo', { prop: 'updateUndoRedoColl', onPropertyChange: false, value: {\n                    operation: 'frame', previousObj: object['currObj'], previousObjColl: object['currObj']['objColl'],\n                    previousPointColl: object['currObj']['pointColl'], previousSelPointColl: object['currObj']['selPointColl'],\n                    previousCropObj: extend({}, parent.cropObj, {}, true), previousText: null, currentText: null,\n                    previousFilter: null, isCircleCrop: null\n                } });\n        }\n        this.refreshToolbar('frame');\n    };\n    ToolbarModule.prototype.contextualToolbarClicked = function (args) {\n        var parent = this.parent;\n        var selEle = parent.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        if (selEle) {\n            selEle.classList.remove('e-selected');\n        }\n        var type = args.item.id.replace(parent.element.id, '').split('_')[1];\n        var imageFiltering = { filter: parent.toPascalCase(type), cancel: false };\n        parent.trigger('imageFiltering', imageFiltering);\n        if (imageFiltering.cancel) {\n            return;\n        }\n        document.getElementById(args.item.id + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n        parent.currObjType.isFiltered = true;\n        parent.notify('filter', { prop: 'applyImageFilter', value: { option: type.toLowerCase() } });\n        parent.currentFilter = args.item.id;\n        this.enableDisableTbrBtn();\n    };\n    ToolbarModule.prototype.refreshShapeDrawing = function () {\n        var parent = this.parent;\n        var object = { shape: '' };\n        parent.notify('selection', { prop: 'getCurrentDrawingShape', onPropertyChange: false, value: { obj: object } });\n        if (object['shape'] !== '') {\n            parent.notify('selection', { prop: 'setCurrentDrawingShape', onPropertyChange: false, value: { value: '' } });\n            parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n            this.refreshToolbar('main', false);\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnClickHandler = function (e) {\n        var parent = this.parent;\n        if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n            if (parent.currObjType.isFiltered) {\n                parent.okBtn();\n            }\n            this.refreshShapeDrawing();\n            if (Browser.isDevice && e.type === 'touchstart') {\n                if (!e.returnValue) {\n                    return;\n                }\n                e.preventDefault();\n            }\n            var zoomIn = document.querySelector('#' + parent.element.id + '_zoomIn');\n            EventHandler.trigger(zoomIn, 'click');\n            var obj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n            if (obj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.destroyQuickAccessToolbar();\n            }\n            this.applyPreviewFilter();\n            parent.currObjType.isFiltered = false;\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.freeHandDraw(false);\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            parent.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: .1, zoomPoint: null, isResize: null } });\n        }\n    };\n    ToolbarModule.prototype.zoomOutBtnClickHandler = function (e) {\n        var parent = this.parent;\n        if ((parent.zoomSettings.zoomTrigger & ZoomTrigger.Toolbar) === ZoomTrigger.Toolbar) {\n            if (parent.currObjType.isFiltered) {\n                parent.okBtn();\n            }\n            this.refreshShapeDrawing();\n            if (Browser.isDevice && e.type === 'touchstart') {\n                if (!e.returnValue) {\n                    return;\n                }\n                e.preventDefault();\n            }\n            var zoomOut = document.querySelector('#' + parent.element.id + '_zoomOut');\n            EventHandler.trigger(zoomOut, 'click');\n            var obj = { bool: false };\n            parent.notify('selection', { prop: 'getFreehandDrawEditing', onPropertyChange: false, value: { obj: obj } });\n            if (obj['bool']) {\n                parent.notify('freehand-draw', { prop: 'applyFhd', onPropertyChange: false });\n                this.destroyQuickAccessToolbar();\n            }\n            this.applyPreviewFilter();\n            parent.currObjType.isFiltered = false;\n            if (parent.togglePen) {\n                parent.currObjType.isZoomed = true;\n                parent.freeHandDraw(false);\n                parent.notify('undo-redo', { prop: 'updateCurrUrc', value: { type: 'ok' } });\n            }\n            parent.notify('draw', { prop: 'resetCurrentSelectionPoint' });\n            parent.notify('transform', { prop: 'zoomAction', onPropertyChange: false,\n                value: { zoomFactor: -.1, zoomPoint: null, isResize: null } });\n        }\n    };\n    ToolbarModule.prototype.zoomInBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomInBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomOutBtnMouseDownHandler = function (e) {\n        e.preventDefault();\n        this.zoomBtnHold = setInterval(this.zoomOutBtnClickHandler.bind(this), 250);\n    };\n    ToolbarModule.prototype.zoomBtnMouseUpHandler = function () {\n        clearInterval(this.zoomBtnHold);\n        this.zoomBtnHold = 0;\n    };\n    ToolbarModule.prototype.closeContextualToolbar = function () {\n        var parent = this.parent;\n        var isContextualToolbar = false;\n        if ((parent.element.querySelector('#' + parent.element.id + '_contextualToolbar') &&\n            !parent.element.querySelector('#' + parent.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n            (parent.element.querySelector('#' + parent.element.id + '_headWrapper')\n                && !parent.element.querySelector('#' + parent.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n            parent.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            parent.okBtn();\n            this.refreshMainToolbar();\n            isContextualToolbar = true;\n        }\n        return isContextualToolbar;\n    };\n    ToolbarModule.prototype.destroyQuickAccessToolbar = function () {\n        var parent = this.parent;\n        var quickToolbar = document.getElementById(parent.element.id + '_quickAccessToolbar');\n        if (quickToolbar && quickToolbar.classList.contains('e-control')) {\n            getComponent(quickToolbar, 'toolbar').destroy();\n        }\n        var qatArea = document.getElementById(parent.element.id + '_quickAccessToolbarArea');\n        if (qatArea) {\n            qatArea.style.display = 'none';\n        }\n    };\n    ToolbarModule.prototype.renderSlider = function (type) {\n        var parent = this.parent;\n        var canvasWrapper = document.querySelector('#' + parent.element.id + '_contextualToolbarArea');\n        var hdrWrapper = document.querySelector('#' + parent.element.id + '_headWrapper');\n        var labelWrapper = document.querySelector('#' + parent.element.id + '_labelWrapper');\n        if (!hdrWrapper) {\n            hdrWrapper = canvasWrapper.appendChild(parent.createElement('div', {\n                id: parent.element.id + '_headWrapper',\n                styles: 'position: relative'\n            }));\n            if (type === 'transparency') {\n                labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                    id: parent.element.id + '_labelWrapper',\n                    styles: Browser.isDevice ? 'position: absolute; top: 25%; left: calc(50% - 175px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                        : 'position: absolute; top: 25%; left: calc(50% - 250px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                }));\n            }\n            else {\n                labelWrapper = hdrWrapper.appendChild(parent.createElement('label', {\n                    id: parent.element.id + '_labelWrapper',\n                    styles: Browser.isDevice ? 'position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                        : 'position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                }));\n            }\n        }\n        else {\n            hdrWrapper.style.display = 'block';\n        }\n        labelWrapper.textContent = this.l10n.getConstant(parent.toPascalCase(type));\n        var sliderWrapper = hdrWrapper.appendChild(parent.createElement('div', {\n            id: parent.element.id + '_sliderWrapper',\n            styles: 'position: absolute'\n        }));\n        var value = parent.getCurrAdjustmentValue(type);\n        var min;\n        var max;\n        var slider;\n        if (type === 'brightness' || type === 'contrast' || type === 'saturation' || type === 'exposure') {\n            if (parent.finetuneSettings) {\n                if (type === 'brightness' && parent.finetuneSettings.brightness) {\n                    min = parent.finetuneSettings.brightness.min;\n                    max = parent.finetuneSettings.brightness.max;\n                }\n                else if (type === 'contrast' && parent.finetuneSettings.contrast) {\n                    min = parent.finetuneSettings.contrast.min;\n                    max = parent.finetuneSettings.contrast.max;\n                }\n                else if (type === 'saturation' && parent.finetuneSettings.saturation) {\n                    min = parent.finetuneSettings.saturation.min;\n                    max = parent.finetuneSettings.saturation.max;\n                }\n                else if (type === 'exposure' && parent.finetuneSettings.exposure) {\n                    min = parent.finetuneSettings.exposure.min;\n                    max = parent.finetuneSettings.exposure.max;\n                }\n                else {\n                    min = -100;\n                    max = 100;\n                }\n            }\n            else {\n                min = -100;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'hue' || type === 'blur' || type === 'opacity') {\n            if (parent.finetuneSettings) {\n                if (type === 'hue' && parent.finetuneSettings.hue) {\n                    min = parent.finetuneSettings.hue.min;\n                    max = parent.finetuneSettings.hue.max;\n                }\n                else if (type === 'blur' && parent.finetuneSettings.blur) {\n                    min = parent.finetuneSettings.blur.min;\n                    max = parent.finetuneSettings.blur.max;\n                }\n                else if (type === 'opacity' && parent.finetuneSettings.opacity) {\n                    min = parent.finetuneSettings.opacity.min;\n                    max = parent.finetuneSettings.opacity.max;\n                }\n                else {\n                    min = 0;\n                    max = 100;\n                }\n            }\n            else {\n                min = 0;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'transparency') {\n            min = 0;\n            max = 100;\n            slider = this.createSlider(min, max, value, type);\n        }\n        slider.appendTo('#' + parent.element.id + '_sliderWrapper');\n        sliderWrapper.style.left = (parseFloat(canvasWrapper.style.width) - parseFloat(slider.width)) / 2 + 'px';\n    };\n    ToolbarModule.prototype.createSlider = function (min, max, value, type) {\n        var _this = this;\n        var parent = this.parent;\n        return new Slider({\n            value: value,\n            tooltip: { isVisible: true, placement: 'Before', showOn: 'Always' },\n            type: 'MinRange',\n            min: min,\n            max: max,\n            step: 10,\n            width: Browser.isDevice ? '200px' : '300px',\n            cssClass: 'e-slider',\n            change: function (args) {\n                if (type === 'transparency') {\n                    parent.activeObj.imageTransparency = args.value / 100;\n                    _this.upperContext.clearRect(0, 0, parent.upperCanvas.width, parent.upperCanvas.height);\n                    parent.notify('draw', { prop: 'drawObject', onPropertyChange: false, value: { canvas: 'duplicate' } });\n                }\n                else {\n                    parent.setCurrAdjustmentValue(type, args.value);\n                    _this.enableDisableTbrBtn();\n                }\n            }\n        });\n    };\n    ToolbarModule.prototype.applyPreviewFilter = function () {\n        var parent = this.parent;\n        if (document.querySelector('#' + parent.element.id + '_sliderWrapper') ||\n            parent.currObjType.isFiltered) {\n            parent.initialAdjustmentValue = this.lowerContext.filter;\n            parent.canvasFilter = this.lowerContext.filter;\n            parent.currObjType.isFiltered = false;\n        }\n    };\n    ToolbarModule.prototype.unselectBtn = function () {\n        var parent = this.parent;\n        var selectors = [\n            '#' + parent.element.id + '_brightness',\n            '#' + parent.element.id + '_contrast',\n            '#' + parent.element.id + '_hue',\n            '#' + parent.element.id + '_saturation',\n            '#' + parent.element.id + '_opacity',\n            '#' + parent.element.id + '_blur',\n            '#' + parent.element.id + '_exposure'\n        ];\n        for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\n            var selector = selectors_1[_i];\n            var element = document.querySelector(selector);\n            if (element && element.classList.contains('e-selected-btn')) {\n                element.classList.remove('e-selected-btn');\n                break;\n            }\n        }\n    };\n    ToolbarModule.prototype.openSlider = function (type) {\n        this.unselectBtn();\n        this.parent.currObjType.isFiltered = true;\n        this.refreshToolbar('color', null, null, null, type);\n        document.getElementById(this.parent.element.id + '_' + type).classList.add('e-selected-btn');\n    };\n    ToolbarModule.prototype.refreshSlider = function () {\n        var sliderWrapper = document.querySelector('#' + this.parent.element.id + '_sliderWrapper');\n        // eslint-disable-next-line\n        var slider = document.querySelector('.e-slider');\n        var hdrWrapper = document.querySelector('#' + this.parent.element.id + '_headWrapper');\n        if (hdrWrapper) {\n            hdrWrapper.style.display = 'none';\n        }\n        if (sliderWrapper && slider) {\n            slider.ej2_instances[0].destroy();\n            sliderWrapper.remove();\n        }\n    };\n    ToolbarModule.prototype.unselectFrameBtn = function () {\n        var parent = this.parent;\n        var selectors = [\n            '#' + parent.element.id + '_none',\n            '#' + parent.element.id + '_mat',\n            '#' + parent.element.id + '_line',\n            '#' + parent.element.id + '_inset',\n            '#' + parent.element.id + '_bevel',\n            '#' + parent.element.id + '_hook'\n        ];\n        for (var _i = 0, selectors_2 = selectors; _i < selectors_2.length; _i++) {\n            var selector = selectors_2[_i];\n            var element = document.querySelector(selector);\n            if (element.classList.contains('e-selected-btn')) {\n                element.classList.remove('e-selected-btn');\n                break;\n            }\n        }\n    };\n    ToolbarModule.prototype.updateToolbarItems = function () {\n        var parent = this.parent;\n        if (!parent.isImageLoaded) {\n            return;\n        }\n        var selFillElem = parent.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview');\n        var selStrokeElem = parent.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview');\n        var selTextStrokeElem = parent.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview');\n        var selPenStrokeElem = parent.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview');\n        var strokeWidthElem = parent.element.querySelector('.e-shape-stroke-width');\n        var fontFamilyElem = parent.element.querySelector('.e-text-font-family');\n        var fontSizeElem = parent.element.querySelector('.e-text-font-size');\n        var boldBtn = parent.element.querySelector('#' + parent.element.id + '_bold');\n        var italicBtn = parent.element.querySelector('#' + parent.element.id + '_italic');\n        if (isNullOrUndefined(parent.activeObj.strokeSettings.strokeWidth)) {\n            parent.activeObj.strokeSettings.strokeWidth = 2;\n        }\n        if (selFillElem) {\n            if (parent.activeObj.strokeSettings.fillColor === '') {\n                selFillElem.classList.add('e-nocolor-item');\n            }\n            else {\n                selFillElem.classList.remove('e-nocolor-item');\n                selFillElem.style.background = parent.activeObj.strokeSettings.fillColor;\n            }\n            getComponent(parent.element.id + '_shape_fill', 'colorpicker').value\n                = parent.activeObj.strokeSettings.fillColor + 'ff';\n        }\n        if (selStrokeElem) {\n            selStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_shape_stroke', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selTextStrokeElem) {\n            selTextStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_text_font', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selPenStrokeElem) {\n            selPenStrokeElem.style.background = parent.activeObj.strokeSettings.strokeColor;\n            getComponent(parent.element.id + '_pen_stroke', 'colorpicker').value\n                = parent.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (fontFamilyElem) {\n            if (Browser.isDevice) {\n                fontFamilyElem.setAttribute('style', 'font-family:' + parent.activeObj.textSettings.fontFamily.toLowerCase());\n            }\n            else {\n                fontFamilyElem.textContent = parent.activeObj.textSettings.fontFamily;\n            }\n        }\n        if (fontSizeElem) {\n            for (var i = 0; i < parent.fontSizeColl.length; i++) {\n                if (parseInt(parent.fontSizeColl[i].text, 10) >= Math.round(parent.activeObj.textSettings.fontSize)) {\n                    fontSizeElem.textContent = (i + 1).toString();\n                    break;\n                }\n            }\n        }\n        if (boldBtn) {\n            if (parent.activeObj.textSettings.bold) {\n                boldBtn.classList.add('e-selected-btn');\n            }\n            else {\n                boldBtn.classList.remove('e-selected-btn');\n            }\n        }\n        if (italicBtn) {\n            if (parent.activeObj.textSettings.italic) {\n                italicBtn.classList.add('e-selected-btn');\n            }\n            else {\n                italicBtn.classList.remove('e-selected-btn');\n            }\n        }\n        if (strokeWidthElem) {\n            var strokeWidth = Math.round((parent.activeObj.strokeSettings.strokeWidth)).toString();\n            strokeWidthElem.textContent = this.getStrokeWidth(strokeWidth);\n        }\n    };\n    ToolbarModule.prototype.getStrokeWidth = function (text) {\n        var strokeWidth;\n        var currentWidth = parseInt(text, 10) / 2;\n        switch (currentWidth) {\n            case 1:\n                strokeWidth = this.l10n.getConstant('XSmall');\n                break;\n            case 2:\n                strokeWidth = this.l10n.getConstant('Small');\n                break;\n            case 3:\n                strokeWidth = this.l10n.getConstant('Medium');\n                break;\n            case 4:\n                strokeWidth = this.l10n.getConstant('Large');\n                break;\n            case 5:\n                strokeWidth = this.l10n.getConstant('XLarge');\n                break;\n        }\n        return strokeWidth;\n    };\n    ToolbarModule.prototype.cancelPan = function () {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'applyActObj', onPropertyChange: false, value: { isMouseDown: true } });\n        var panBtn = parent.element.querySelector('.e-img-pan .e-btn');\n        if (panBtn) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        parent.pan(false);\n    };\n    ToolbarModule.prototype.refreshMainToolbar = function () {\n        if (this.currToolbar !== 'main') {\n            this.refreshToolbar('main');\n        }\n    };\n    ToolbarModule.prototype.destroySubComponents = function () {\n        var parent = this.parent;\n        var inputElement = parent.element.querySelectorAll('input.e-control');\n        var btnElement = parent.element.querySelectorAll('button.e-control');\n        for (var i = 0, len = inputElement.length; i < len; i++) {\n            if (inputElement[i].classList.contains('e-color-picker')) {\n                getComponent(inputElement[i], 'color-picker').destroy();\n                detach(select('input#' + inputElement[i].id, parent.element));\n            }\n        }\n        for (var i = 0, len = btnElement.length; i < len; i++) {\n            if (btnElement[i].classList.contains('e-dropdown-btn')) {\n                getComponent(btnElement[i], 'dropdown-btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n            else if (btnElement[i].classList.contains('e-btn')) {\n                getComponent(btnElement[i], 'btn').destroy();\n                detach(select('button#' + btnElement[i].id, parent.element));\n            }\n        }\n    };\n    ToolbarModule.prototype.setInitialShapeSettings = function (args) {\n        var parent = this.parent;\n        parent.notify('shape', { prop: 'refreshActiveObj', onPropertyChange: false });\n        parent.currObjType.shape = args.item.id;\n        parent.activeObj.shape = parent.currObjType.shape.toLowerCase();\n        parent.currObjType.isDragging = parent.currObjType.isCustomCrop = false;\n        parent.activeObj.shapeDegree = parent.transform.degree;\n        parent.activeObj.shapeFlip = parent.transform.currFlipState;\n        parent.activeObj.textFlip = parent.transform.currFlipState;\n        parent.activeObj.flipObjColl = [];\n    };\n    ToolbarModule.prototype.getModuleName = function () {\n        return 'toolbar-module';\n    };\n    return ToolbarModule;\n}());\nexport { ToolbarModule };\n"],"names":["Crop","parent","this","croppedDegree","cropDestPoints","startX","startY","width","height","tempFlipPanPoint","x","y","isPreventScaling","isInitCrop","addEventListener","prototype","destroy","isDestroyed","removeEventListener","on","cropping","off","args","updateCropPvtVar","prop","cropImg","value","cropCircle","setCurrSelPoints","updateRotatePan","crop","calcRatio","isObjInImage","getCurrFlipState","prevCropCurrObj","isNullOrUndefined","reset","getModuleName","lowerCanvas","lowerContext","getContext","upperCanvas","upperContext","isRotateCrop","isNullCrop","resizeIcon","element","querySelector","id","actPoint","activeObj","activePoint","isRotated","i","rotateFlipColl","length","notify","onPropertyChange","transform","degree","updateCropObj","point","img","destLeft","destTop","destWidth","destHeight","rotateCrop","currFlipState","flipCrop","tempZoomFactor","zoomFactor","ratio","currSelectionPoint","extend","obj","isImgShape","maxDimension","clearRect","srcLeft","srcTop","srcWidth","srcHeight","clientWidth","clientHeight","temp","filter","cropObjColl","isPreventApply","len","objColl","shape","canvas","cropFreehandDrawColl","context","isCircleCrop","currObjType","isCustomCrop","pan","defaultZoomFactor","afterCropActions","object","currObj","cropObj","push","tempCurrSelObj","preventSelObj","bool","coll","panToSelRangle","resetZoom","revertTransform","pop","type","isRotate","direction","toPascalCase","shapeFlip","freehandCounter","pointColl","isUndoRedo","zoomPoint","isResize","isReverseFlip","panPoint","totalPannedPoint","tempCurrFlipState","flipColl","tempFlipColl","setTransform","isPreventDestination","isPreventCircleCrop","isRotateZoom","imageRatio","endX","endY","size","shapeDegree","Math","abs","textSettings","fontRatio","fontSize","cropPointCollection","selPoint","n","ratioX","ratioY","points","l","isSetDimension","allowDownScale","destPoint","baseImgCanvas","totalPannedInternalPoint","cropPointColl","destPoints","selPointColl","cropSelPointColl","actObj","xDiff","yDiff","currentPannedPoint","cropZoom","isContextualToolbar","isApplyBtn","isCropping","isZooming","cType","isReverse","panX","totalPannedClientPoint","panY","isSave","isFlip","globalCompositeOperation","beginPath","centerX","centerY","radius","arc","PI","closePath","fill","restore","isActiveObj","getCurrCropState","isAllowInvert","flipState","state","isInitialRotate","panRegion","_this","disabled","isImageLoaded","object_1","isCropToolbar","isUndoAction","transitionArgs","cancel","startPoint","endPoint","preventScaling","isBlazor","events","hasDelegate","currentToolbar","dotNetRef","invokeMethodAsync","cropEvent","then","trigger","splitWords","split","horTopLine","isCrop","prevCropObj","prevObj","setProperties","zoomSettings","previousZoomValue","currSelPtObj","prevCurrSelectionPoint","operation","previousObj","previousObjColl","previousPointColl","previousSelPointColl","previousCropObj","previousText","currentText","previousFilter","aspectIcon","nonAspectIcon","updateToolbar","dimension","widthRatio","heightRatio","dummyObj","isInside","panObj","collection","isRotateFlipCollection","region","Draw","isInitialLoading","fileName","isErrorImage","isShapeTextInserted","tempStrokeSettings","strokeColor","fillColor","strokeWidth","tempTextSettings","text","fontFamily","bold","italic","underline","tempAdjValue","tempFilter","tempUndoRedoStep","tempFreehandCounter","tempCurrFhdIndex","isCancelAction","rotatedFlipCropSel","zoomCrop","isImageEdited","isFileChanged","isNewPath","isResizeSelect","arrowDimension","bar","arrow","arrowSolid","circle","square","tempFrame","origDim","isImageApply","draw","updatePrivateVariables","drawObject","updateActiveObject","clearOuterCanvas","setDestPoints","updateCurrTransState","currTransState","renderImage","drawImgToCanvas","updateCanvas","performCancel","updateFlipPan","select","callUpdateCurrTransState","resetPanPoints","setClientTransDim","redrawImgWithObj","setCurrentObj","performPointZoom","open","getInitialLoaded","fileSelect","fileType","initZoomValue","currSelPoint","prevActObj","dlgBtnClick","dlgCloseBtnClick","moveToSelectionRange","applyFrame","drawImage","downScaleImgCanvas","downScale","resetFrameZoom","triggerFrameChange","frameObj","isCropRatio","isPreventDrag","saveContext","isPreventSelection","canvasDraw","toLowerCase","setDragLimit","drawCropRatio","strokeSettings","obj_1","isText","obj_2","keyHistory","fillStyle","fillRect","rotateContext","drawOuterSelection","drawShapeObj","undefined","ctx","rotationAngle","rotatedAngle","translate","rotate","updateWidthHeight","drawCustomSelection","imgWidth","imgHeight","updatePoints","diff","adjToCenter","diffX","diffY","isMouseMove","horCircleWidth","verCircleHeight","horBottomLine","verLeftLine","verRightLine","topLeftCircle","topCenterCircle","topRightCircle","centerLeftCircle","centerRightCircle","bottomLeftCircle","bottomCenterCircle","bottomRightCircle","rotationCirclePoint","isCropCircle","lineWidth","tempObj","strokeStyle","themeColl","theme","moveTo","lineTo","stroke","rect","selectionSettings","showCircle","drawCenterCircles","rotationCircleLine","drawArrowHead","isStartHead","start","end","arrowCircleSolid","arrowCircle","arrowBar","arrowSquareStart","arrowSquareEnd","currentShape","horLineWidth","verLineHeight","selectionWidth","selectionHeight","tempFillStyle","drawSquareLines","ellipse","shapeCircle","shapeLine","triangleDirection","nextPoint","shapeText","shapeImage","drawSelection","drawRotationArcLine","isHorizontalflip","isVerticalflip","flipObjColl","horTopInnerLine","horBottomInnerLine","verLeftInnerLine","verRightInnerLine","tempWidth","save","clip","x1","y1","x2","y2","tempLineWidth","manipulateSaveCtx","dx","dy","angle","atan2","strokeRect","squareStartIntersectX1","cos","squareStartIntersectY1","sin","endCircleIntersectX1","endCircleIntersectY1","squareEndIntersectX1","squareEndIntersectY1","startCircleIntersectX1","startCircleIntersectY1","circleRadius","a","intersect","b","t2","sqrt","intersectionX1","intersectionY1","imageCanvas","dimObj","imageElement","isImgAnnotation","isHFlip","isVFlip","imgPoint","globalAlpha","imageTransparency","rotateImage","rows","lineHeight","yPoint","textStyle","font","rotateText","fillText","updateActPoint","tempActiveObj","tempDegree","tempColl","scale","textFlipDegree","left","top_1","isRotatePan","isPreventDimension","setTransformColl","isMouseWheel","isPreventClearRect","isFrame","isMouseDown","imageOnLoad","src","proxy","baseImg","onload","hideSpinner","style","opacity","updateBaseImgCanvas","isUndoZoom","display","Browser","isDevice","offsetHeight","toolbarHeight","eventargs","isOkBtn","onerror","errorLoading","fileOpened","isValidImage","setAttribute","zoom","tempFrameZoomLevel","JSON","stringify","tempFrameObj","textArea","document","classList","contains","isFiltered","canvasFilter","adjustmentValue","initialAdjustmentValue","isBrightnessAdjusted","currentFilter","obj_3","tempAdjustmentLevel","adjustmentLevel","step","cursor","add","cancelItems","togglePan","isDisabled","isCropSelection","ascpectIcon","isCropTab","aspectRatioElement","blrAspRatElem","aspectWidth","aspectHeight","obj1","obj2","togglePen","cancelPen","cancelText","indexOf","cancelShape","cancelSelection","tempPointsColl","isFreehandDrawCustomized","currIndex","appliedUndoRedoColl","currentObjColl","clearSelection","j","isDragging","cancelCropSelection","tempSelectionObj","selPointCollObj","isPrevent","cropZoomFactor","drawNewSelection","cropShape","updateSelectionInsert","shapeSettingsObj","getSelectionType","selectionChangingArgs","action","previousSelectionSettings","currentSelectionSettings","onSelectionResizeStart","imgLeft_1","imgTop_1","imgWidth_1","imgHeight_1","lowerCanvasWidth_1","lowerCanvasHeight_1","activePoint_1","imgLeft_2","imgTop_2","imgWidth_2","imgHeight_2","lowerCanvasWidth_2","lowerCanvasHeight_2","activePoint_2","max","min","imgLeft","imgTop","lowerCanvasWidth","lowerCanvasHeight","tempObjColl","tempTogglePen","isObj","frame","defaultZoom","srcPoints","isBrightAdjust","drawCropSelectionImage","isDefaultZoom","isAfterCropAction","clearContext","drawZoomPanImage","adjustPanning","openNewImage","inMemoryContext","inMemoryCanvas","showSpinner","toolbar","defToolbarItems","getElementById","update","openURL","getFileExtensionFromURL","putImageData","toDataURL","export","checkToolbarTemplate","inputElem","getComponent","baseImgSrc","showDialogPopup","headerObj","key","contentObj","yesObj","noObj","Dialog","header","closeOnEscape","content","target","isModal","animationSettings","effect","close","bind","buttons","click","buttonModel","iconCss","isPrimary","appendTo","restoreOldImage","data","url","lastDotIndex","lastIndexOf","slice","inputElement","filesData","fileData","files","rawFile","fileExtension","name","fileExtensionArray","window","URL","createObjectURL","toolbarTemplate","toString","maxZoomFactor","isSelectionBiggerThanCanvas","isSelectionOutsideCanvas","isBigger","isOutside","tempCanvas","createElement","attrs","isHorImageFlip","isVerImageFlip","widthSource","heightSource","round","halfWidthRatio","ceil","halfHeightRatio","getImageData","img2","createImageData","data2","weight","weights","alphaWeights","r","g","floor","stopY","w0","stopX","w","xPos","drawImgToCtx","preventImg","getFrameColor","color","gradientColor","gradient","createLinearGradient","addColorStop","inset","offset","amount","border","newWidth","newHeight","valueForty","valueFifty","quadraticCurveTo","arcY2","lineY","arcX2","lineX","arcX1","lineX2","arcY1","lineY2","setLineDash","arcTo","prevFrameSettings","frameChange","previousFrameSetting","currentFrameSetting","borderRadius","frameLineStyle","lineCount","frameChanging","setFrameObj","DDBPREVIEW","background","noColorDiv","remove","currFrameSettings","Export","updatePvtVar","exportImg","exportToCanvas","drawAnnotation","imageName","isZoomed","beforeSave","saving","beforeSaveEvent","observableSaveArgs","lowerCaseType","toSVGImg","toBlobFn","saved","top","maxWidth","maxHeight","dataUrl","svg","createElementNS","setAttributeNS","appendChild","innerHTML","svgDataUrl","btoa","downloadImg","toBlob","blob","blobUrl","performResizeClick","okBtn","tempContextFilter","parseFloat","join","tempContext","updateFrame","updateSaveContext","exportTransformedImage","tempPointColl","isAnnotation","href","download","body","documentElement","parentNode","removeChild","flip","exportRotate","exportFlip","setMaxDim","flipHorizontal","flipVertical","imageData","Filter","brightness","contrast","hue","saturation","blur","exposure","transparency","sharpen","bw","appliedFilter","finetuneImage","setFilter","updateFinetunes","setAdjustment","updateFilter","initFilter","setCurrAdjValue","updateAdj","getCurrentObj","getDefaultFilter","fs","finetuneSettings","defaultValue","setFilterAdj","isPreview","values","getFilterValue","saturate","bright","saturatePercent","saturatePercentage","getSaturationFilterValue","getDefaultCurrentFilter","setTempFilterValue","tempSplitWords","prevFilter","valueArr","setFilterValue","setSaturationFilterValue","selEle","filterCanvas","parentElement","finetuneOption","tempFlipPanPointObj","zoomObj","FreehandDrawing","fhdObj","lastWidth","lastVelocity","time","pointX","pointY","isFreehandDrawing","freehandDownPoint","isFreehandPointMoved","pointCounter","currFHDIdx","selPoints","dummyPoints","tempFHDStyles","updateFhdPvtVar","hoverFhd","freehandDownHandler","freehandUpHandler","parseInt","isFHDIdx","deleteFhd","freehandRedraw","selectFhd","applyFhd","cancelFhd","updateFHDCurPts","rotateFhdColl","flipFHDColl","panFHDColl","updateFHDColl","zoomFHDColl","applyPenDraw","freeHandDraw","getSqPtFD","fhdHovIdx","penStrokeWidth","updateCropPtsForSel","fhdSelID","fhdSelIdx","idx","controlPoint1","controlPoint2","minStrokeWidth","maxStrokeWidth","startDraw","calcCurveCP","e","Date","getTime","clientX","clientY","touches","EventHandler","freehandMoveHandler","shapeSettings","ShapeType","FreehandDraw","shapeChangingArgs","previousShapeSettings","currentShapeSettings","triggerShapeChanging","getBoundingClientRect","processPoint","changedTouches","fhCnt","mouseDown","lastPoint","isLastPointTooClose","distanceTo","unshift","p0","p1","p2","p3","shift","dx1","dy1","dx2","dy2","m1","m2","l1","l2","k","cm","tx","ty","tempVelocity","pointVelocity","drawCurve","pow","startWidth","endWidth","t1","t3","u1","u2","u3","widthValue","bezierLength","drawSteps","drawArc","t","pointX1","pointY1","pointX2","pointY2","pointX3","pointY3","bezierPoint","cp1","cp2","sPoints","selectedPoint","isSelected","index","isId","tempSelPointColl","count","zoomX","zoomY","lowercaseValue","pointsHorizontalFlip","pointsVerticalFlip","isIndex","shapeChanging","penColorElement","Selection","diffPoint","oldPoint","isTouch","isObjSelected","isFhdPoint","dragPoint","isShapeInserted","triangle","triangleRatio","isFirstMove","startTouches","tempTouches","currMousePoint","cursorTargetId","isPreventDragging","dragElement","textRow","mouseDownPoint","previousPoint","zoomType","isInitialTextEdited","dragCanvas","isFhdCustomized","touchEndPoint","isFhdEditing","currentDrawingShape","initialPrevObj","touchTime","resizedElement","isImageClarity","selection","selMouseUpEvent","setCursor","updateActivePoint","updateCursorStyles","setTextSelection","setActivePoint","calcShapeRatio","applyCurrShape","performTabAction","setDragDirection","setTimeout","redrawShape","setTextBoxStylesToActObj","mouseDownEventHandler","mouseMoveEventHandler","mouseUpEventHandler","canvasMouseDownHandler","canvasMouseMoveHandler","canvasMouseUpHandler","touchStartHandler","keyDownEventHandler","handleScroll","textKeyDown","deleteItem","updatePrevShapeSettings","panDown","adjustActObjForLineArrow","findTarget","getCurrentFlipState","setDragWidth","setDragHeight","getTransRotationPoint","adjustNEPoints","adjustRotationPoints","getResizeDirection","unwireEvent","updPtCollForShpRot","findImageRatio","getNumTextValue","upgradeImageQuality","triggerShapeChange","timer","pathAdjustedIndex","allowUndoRedoPush","getMouseCursor","isApply","frameObject","setCursorForLineArrow","setCursorForPath","setCursorForRotatedObject","setCursorFromObj","setCursorForFreehandDrawing","isMove","horTopLinePointColl","verLeftLinePointColl","verRightLinePointColl","horBottomLinePointColl","rotationCirclePointColl","getRectanglePoints","adjustCursorStylesForRotatedState","cursorMap","nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize","getResizeElement","resizeMappings","positiveDegree","_i","resizeMappings_1","_a","startDegree","endDegree","resizeElement","isEntered","z1","z2","z3","z4","shapeResizingArgs","shapeMovingArgs","isTextArea","updateNWPoints","rotatedDegree","updateNPoints","updateNEPoints","updateWPoints","updateEPoints","updateSWPoints","updateSPoints","updateSEPoints","eventType","onShapeResizeStart","selectionResizingArgs","onShapeDragStart","tempHeight","limitDrag","isStart","preventDraggingInvertly","preventTextDraggingInvertly","isLimiting","preventInverseResize","getScaleRatio","newScale","gcd","divisor","percentage","prevDiffX","prevDiffY","resizeImg","adjustNWPoints","top_2","adjustSWPoints","adjustSEPoints","elem","rectangle","cx","cy","rotatedC","rotatePoints","newCenter","newBottomRight","newTopLeft","rotatedD","newBottomLeft","newTopRight","rotatedB","rotatedA","setResizedValue","getResizedElement","resizeMappings_2","isLine","updateCursorStylesForLineArrow","updateCursorStylesForPath","textWidth","textHeight","selectInfo","currentTarget","isPan","imageEditorClickEventArgs","setXYPoints","clicked","clickEvent","getImagePoints","performEnterAction","isShape","isShapeTouch","isFreehandDraw","isFreehandDrawTouch","isShapeClick","applyObj","isLineArrow","x_1","y_1","indexObj","freehandSelectedIndex","tempHoveredIndex","isPenEdit","findTargetObj","canvasCursor","preventDefault","bbox","isZoomOut","targetTouches","pageX","offsetLeft","pageY","offsetTop","firstFingerX","firstFingerY","secondFingerX","secondFingerY","center","zoomTrigger","ZoomTrigger","Pinch","calculateScale","stopImmediatePropagation","onPanEnd","panEventArgs","onShapeResizeEnd","onSelectionResizeEnd","onShapeDragEnd","prevCropObj_1","applyCurrActObj","splitWords_1","isCropSelection_1","isInitialLine","srcElement","isAdjusted","getCurrentIndex","splice","setTimer","rgbToHex","offsetX","offsetY","tempPanMoveObj","tempPanMove","panMove","panMoveObj","ctrlKey","allowUndoRedo","Commands","isValueUpdated","isAspectRatio","aspectRatioHeight","aspectRatioWidth","placeholder","isKeyBoardCrop","isInsideCanvas","stopPropagation","MouseWheel","wheelDelta","String","fromCharCode","which","scrollHeight","originalWidth","originalHeight","standardSize","scaleWidth","getScale","snippetArray","scaleHeight","snippetArray1","originalValue","cursor_1","cursor_2","temp_1","shapeChangingArgs_1","shapeEvent","endTouches","startDistance","getDistance","isMouseUp","clearTimeout","smallPoint","largePoint","fontWeight","fontStyle","componentToHex","rgb","hex","updateFreehandDrawColorChange","freehandDrawSelectedId","object_2","tempFreeHandDrawEditingStyles","rectX","rectY","rectWidth","rectHeight","rectAngle","angleRad","cosAngle","sinAngle","localX","localY","rotatedX","rotatedY","halfWidth","halfHeight","widthElement","heightElement","heightString","replace","widthString","isValue","Shape","initShapePvtProps","uploader","drawEllipse","drawLine","drawArrow","drawPath","drawRectangle","drawText","redrawActObj","apply","updateShapeChangeEventArgs","updSelChangeEventArgs","iterateObjColl","updImgRatioForActObj","zoomObjColl","redrawObj","rotateObjColl","drawShapeText","redrawText","drawShape","renderTextArea","setTextBoxWidth","findTextTarget","panObjColl","updateFontStyles","applyFontStyle","updateFontRatio","updateFontSize","updateObjColl","pushActItemIntoObj","clearActObj","refreshActiveObj","applyActObj","fileChanged","getShapeSetting","getShapeSettings","isPointsInRange","alignRotateFlipColl","selectShape","deleteShape","getMaxText","getLinePoints","setPointCollForShapeRotation","setTextBoxPos","setTextBoxPoints","alignTextAreaIntoCanvas","initializeTextShape","stopPathDrawing","updateArrowRatio","getSquarePointForRotatedShape","updateObj","updateSelectionChangeEventArgs","shapeImg","crossorigin","radiusX","radiusY","initializeShape","lineDraw","arrowStart","arrowEnd","setDimension","getArrowType","arrowType","None","Arrow","SolidArrow","Circle","SolidCircle","Square","SolidSquare","Bar","objColl_1","setCenterPoints","setPointCollForLineAndArrow","initShapeProps","isPublicMethod","textFlip","prevObjColl","isInitialText","getFontSizes","fontSizeColl","measureText","drawShapeTextEvent","drawShapeImageEvent","isSelect","addLetter","onLoadImgShape","updateTextFromTextArea","renderWidth","renderHeight","letter","widthColl","updatePathRatio","preventApply","len_1","updateArrowSize","len_2","updateCurrentActiveObjPoint","currActObjIndex","flipLineArrowObj","rotateLineArrowObj","prevPoint","lineArrowHorizontalFlip","lineArrowVerticalFlip","currPoint","getRotDegOfShape","transformTextArea","overflow","focus","setTextBoxHeight","textAreaWidth","letterWidth","textAreaLeft","textAreaTop","selectedText","updateImgCanvas","resizeImage","aspectRatio","aspectRatioArray","selectionStart","finish","selectionEnd","substring","len_3","len_4","len_5","isTextBox","item","updateFontStyle","shapeChangedArgs","triggerShapeChanged","getTextAreaWidth","dimensions_1","dimensions_2","tempBold","tempItalic","isActObj","letters","transformOrigin","getObjDetails","shapeDetails","getFreehandDrawDetails","obj_4","shapeDetailsColl","inRange","popForDefaultTransformedState","popForDefaultFlipState","popForDefaultRotateState","rotateRight","rotateleft","horizontal","vertical","obj_5","obj_6","maxi","maxStr","maxText","m","getSlope","getIntercept","lesserY","i_1","prev","lesserX","i_2","isSameAxis","slope","p4","reverse","Transform","disablePan","isReverseRotate","prevZoomValue","cropDimension","isPreventSelect","preventDownScale","resizedImgAngle","initTransformPvtVar","flipImage","setDestPointsForFlipState","zoomAction","disableZoomOutBtn","rotatedFlip","drawPannedImage","drawPannImage","performTransformation","updateTransform","rotatePan","drawRotatedImage","limitPan","updateFlipActiveObj","setCurrPanRegion","calcMaxDimension","updatePanPoints","currDestPoint","resizeCrop","updateResize","resize","zoomBtnHold","transCurrObj","previousDegree","currentDegree","rotating","rotateEvent","activeObjShape","rotateDegree","updateCurrSelectionPoint","previousDirection","flipping","flipEvent","lowercaseDirection","updateFlipState","selObj","updateFlipColl","toLocaleLowerCase","verticalFlip","horizontalFlip","lastFourItems","minZoomFactor","powerOften","zoomEventArgs","previousZoomFactor","currentZoomFactor","zooming","getZoomTriggerType","zoomEvent","drawZoomImgToCanvas","panObj_1","isAdd","rotateZoom","panObj_2","clearInterval","zoomOut","autoEnablePan","panBtn","setZoomDimension","selectionObj","maxDestLeft","maxDestTop","onPanStart","panEvent","isObjCreated","tempFlipState","Direction","Horizontal","Vertical","rotatePanActiveObj","initialDestLeft","initialDestTop","getCurrentZoomFactor","isFrameToolbar","freehandObj","canvasWrapper","offsetWidth","refreshOverflow","canvasMaxWidth","canvasMaxHeight","widthScale","heightScale","cssMaxWidth","cssMaxHeight","tempActObj","tempDestLeft","tempDestTop","temp1","minimum","resizeSrc","nearestNumber","smallestDifference","minimum_1","num","difference","prevResizeCurrObj","tempwidth","tempheight","tempZoom","sx","sy","currObject","resizeEventArgs","previousWidth","previousHeight","imageResizing","resizeEventHandler","widthElem","heightElem","UndoRedo","undoRedoStep","undoRedoColl","tempUndoRedoColl","undoRedo","initializeUrPvtProp","updateUrc","refreshUrc","updateCurrUrc","callUndo","callRedo","undo","redo","updateUrObj","updateUndoRedo","undoDefault","tempCurrSelPoint","refreshToolbar","currentCropObj","currentObj","currentPointColl","getZeroZoomObjPointValue","refreshToolbarActions","applyCurrentChanges","shapeTransform","updateFreehandDraw","updateFreehandDrawCustomized","updateDelete","updateTextAreaCustomization","updateText","imageFlip","updateCropTransformItems","endUndoRedo","currentSelPointColl","updateTextBox","allowActiveObj","isUndo","isInitialLoaded","frameDestPoints","cropDimensionObj","getZeroZoomObjColl","getZeroZoomPointColl","arrowObj","tempArrowObj","__extends","extendStatics","d","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__decorate","decorators","desc","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FinetuneSettings","_super","Property","ChildProperty","ZoomSettings","SelectionSettings","ImageEditor","options","call","ImageEditor_1","Inject","ToolbarModule","requiredModules","modules","member","preRender","getUniqueID","initializeThemeColl","render","initialize","getPersistData","addOnPersist","onPropertyChanged","newProperties","oldProperties","keys","cssClass","removeClass","trim","addClass","wireEvent","locale","showQuickAccessToolbar","Toolbar","className","toolbarTemplateFn","quickAccessToolbarTemplate","quickAccessToolbarTemplateFn","removeAttribute","concat","getAttribute","createCanvas","createDropUploader","quickAccessToolbar","position","createSpinner","initializeZoomSettings","Uploader","dropArea","getElementsByClassName","allowedExtensions","multiple","selected","event","errType","dataTransfer","okObj","supportObj","keyUpEventHandler","windowResizeHandler","isIos","info","screen","orientation","screenOrientation","boxSizing","dragObj","dropObj","browseObj","dropAreaElement","dropIconElement","dropContentElement","textContent","minDropContentElem","dropAnchorElement","minDropAnchorElem","dropInfoElement","dropUploader","backgroundColor","onclick","adjustToScreen","notifyResetForAllModules","allowShape","cxtTbarHeight","initialZoomValue","freehandDraw","isEllipse","isArrow","isPath","isRectangle","isImage","length_1","option","applyImageFilter","filterOption","getImageDimension","isResized","drawFrame","frameType","frameChangeEventArgs","FrameLineStyle","Solid","performFrameClick","template","templateID","toolbarArea","toolbarFn","templateParser","isReact","isAngular","templateColl","nodeType","qatFn","querySelectorAll","templateCompiler","compile","error","getTextFromId","1","2","3","4","5","6","7","8","getFinetuneOption","ImageFinetuneOption","Brightness","Contrast","Hue","Saturation","Opacity","Blur","Exposure","setPenStroke","updateImageTransformColl","setInitialZoomState","str","strArr","charAt","toUpperCase","items","blrNAspRatElem","objt","selElem","children","setTempFilterProperties","cropSelectedState","tempAdjustmentValue","undoRedoObj","getCurrentCanvasData","setCurrAdjustmentValue","finetuneValueChanging","finetune","getSquarePointForPath","CropCustom","CropSquare","CropCircle","Crop3:2","Crop4:3","Crop5:4","Crop7:5","Crop16:9","updateArrow","updateFontFamily","itemText","text_1","text_2","updateFontColor","updatePenStrokeWidth","updatePenStrokeColor","updateStrokeWidth","updateStrokeColor","updateFillColor","isPreventURC","pascalToSplitWords","splitStr","match","map","word","getCurrAdjustmentValue","transformSelect","initializeImageEditor","dotnetRef","prerender","Bootstrap5","primaryColor","secondaryColor","Bootstrap5Dark","Tailwind","TailwindDark","Fluent","FluentDark","Bootstrap4","Bootstrap","BootstrapDark","Material","MaterialDark","Fabric","FabricDark","Highcontrast","Material3","Material3Dark","shapeChanged","Complex","Event","NotifyPropertyChanges","Component","FileType","Theme","ImageEditorCommand","ImageFilterOption","ArrowheadType","FrameType","currToolbar","preventZoomBtn","selFhdColor","preventEnableDisableUr","initLocale","defaultLocale","ZoomIn","ZoomOut","Undo","Redo","Annotation","Finetune","Sharpen","Default","Chrome","Cold","Warm","Grayscale","BlackAndWhite","Sepia","Invert","Text","Pen","Reset","Save","Select","RotateLeft","RotateRight","HorizontalFlip","VerticalFlip","OK","Cancel","FillColor","StrokeColor","StrokeWidth","FontFamily","FontStyle","FontSize","FontColor","Pan","Move","Load","Custom","Ellipse","Rectangle","Line","Path","Bold","Italic","BoldItalic","XSmall","Small","Medium","Large","XLarge","ABC","Browse","Duplicate","Remove","EditText","Start","End","ArrowSolid","CircleSolid","SquareSolid","CropAndTransform","CropSelection","Image","Transparency","Height","Width","AspectRatio","W","H","DragText","DropText","BrowseText","SupportText","Frame","Mat","Bevel","Inset","Hook","Color","Size","Offset","Radius","Amount","Resize","0","20","40","60","80","100","Border","Dashed","Dotted","GradientColor","ConfirmDialogHeader","ConfirmDialogContent","AlertDialogHeader","AlertDialogContent","Yes","No","ImageErrorDialogHeader","ImageErrorDialogContent","l10n","L10n","createToolbar","createContextualToolbar","updateToolbarItems","renderQAT","enableDisableTbrBtn","initMainToolbar","createBottomToolbar","refreshMainToolbar","createQuickAccessToolbar","destroyQuickAccessToolbar","zoomBtnMouseUpHandler","refreshDropDownBtn","closeContextualToolbar","destroyBottomToolbar","destroyTopToolbar","destroySubComponents","setLocale","getPenStroke","performDefTbrClick","refreshSlider","renderSlider","refreshShapeDrawing","getConstant","initResizeToolbar","callFrameToolbar","resizeClick","frameToolbarClick","isToolbar","toolbarItems","align","tooltipText","toolbar_1","uploadItems","created","toolbarType","defToolbarClicked","createLeftToolbarControls","toolbar_2","toolbarElem","initBottomToolbar","toolbar_3","isApplyOption","leftItem","getLeftToolbarItem","rightItem","getRightToolbarItem","mainItem","getMainToolbarItem","zoomItem","getZoomToolbarItem","toolbarObj","renderAnnotationBtn","wireZoomBtnEvents","renderSaveBtn","renderCropBtn","renderTransformBtn","visible","prefixIcon","tempToolbarItems","processToolbar","updateContextualToolbar","contextualToolbarArea","initFilterToolbarItem","initFrameToolbarItem","cHt","ht","processSubToolbar","zoomIn","zoomInBtnMouseDownHandler","zoomInBtnClickHandler","zoomOutBtnMouseDownHandler","zoomOutBtnClickHandler","widthAspectRatio","icon","aspectRatioHeightValue","widthNumeric","isNaN","heightAspectRatio","aspectRatioWidthValue","heightNumeric","getResizeToolbarItem","spanWidth","NumericTextBox","htmlAttributes","maxLength","showSpinButton","format","spanHeight","wireResizeBtnEvents","uploadDiv","uploadElem","getElementsByTagName","uploadBtnElem","onchange","isCustomized","defItems","duplicateElement","removeElement","editTextElement","getCurrentShapeIcon","drpDownBtn","DropDownButton","currentFreehandDrawIndex","tempCurrentFreehandDrawIndex","setInitialShapeSettings","cancelPan","cropSelect","getCropTransformToolbarItem","getShapesToolbarItem","initCropTransformToolbar","initShapesToolbarItem","createShapeColor","createShapeBtn","createStartBtn","createEndBtn","ColorPicker","modeSwitcher","noColor","showButtons","mode","change","currentValue","rgba","fillDDB_1","toggle","inline","strokeDDB_1","strokeWidthItems","strokeWidthBtn","spanElem_1","drpDownBtn_1","activeBtn","spanElem","strokeEndBtn","getTextToolbarItem","getFontFamilyItems","initTextToolbarItem","createTextColor","createTextBtn","fontColor","strokeDDB_2","fontNameBtn","spanElem_2","fontFamilyBtn_1","createPopupOnClick","beforeItemRender","fontSizeBtnElem","fontSizeSpanElem_1","fontSizes","fontSizeBtn_1","initPenToolbarItem","initAdjustmentToolbarItem","getAdjustmentToolbarItem","getFrameToolbarItem","getFilterToolbarItem","getPenToolbarItem","createPenColor","createPenBtn","penColor","strokeDDB_3","spanElem_3","drpDownBtn_2","valueToTextContent","frameWrapper","styles","createFrameColor","createFrameSize","createFrameRadius","createFrameInset","createFrameOffset","createFrameAmount","createFrameBorder","createFrameGradientColor","fillDDB","childNodes","contextualToolbarClicked","createCanvasFilter","hdrWrapper","drawDashedLine","updateFilterCanvas","selector","getQuickAccessToolbarItem","orgToolbarItems","qtArea","quickAccessToolbarClicked","path","annotation","adjustment","duplicateObj","isPreventUndoRedo","pathObject","isFilterFinetune","isDisabledFilter","isDisabledAdjustment","imageHeight","imageWidth","openSlider","unselectFrameBtn","zoomToFrameRange","imageFiltering","returnValue","applyPreviewFilter","setInterval","quickToolbar","qatArea","labelWrapper","slider","sliderWrapper","createSlider","Slider","tooltip","isVisible","placement","showOn","unselectBtn","selectors_1","ej2_instances","selectors_2","selFillElem","selStrokeElem","selTextStrokeElem","selPenStrokeElem","strokeWidthElem","fontFamilyElem","fontSizeElem","boldBtn","italicBtn","getStrokeWidth","btnElement","detach"],"mappings":"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"}